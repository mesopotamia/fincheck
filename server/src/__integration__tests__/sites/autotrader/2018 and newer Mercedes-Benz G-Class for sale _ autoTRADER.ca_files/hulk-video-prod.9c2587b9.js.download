var JwplayerOutsteamAdPlayerManager=function(){function JwplayerOutsteamAdPlayerManager(playerConfig){var _this=this;if(this.playerConfig=playerConfig,null!=this.playerConfig&&null!=this.playerConfig.playerId&&$("#"+this.playerConfig.videoHolderDivId).length){var jwplayerlibscript="https://content.jwplatform.com/libraries/"+this.playerConfig.playerId+".js";this.playerConfig.width=parseInt($("#"+this.playerConfig.videoHolderDivId).css("max-width")),this.playerConfig.height=parseInt($("#"+this.playerConfig.videoHolderDivId).css("max-height")),this.setVideoImageURL();var csscontent=this.getVEightCss(),htmlcontent=this.getVEightHtml(),jssnippetcontent=this.getVEightSnippet(),divid=this.playerConfig.videoHolderDivId;$.getScript(jwplayerlibscript,function(){var content=csscontent+htmlcontent;$("#"+divid).html(content);var jwplayersnippetscript=document.createElement("script");jwplayersnippetscript.innerHTML=jssnippetcontent,$("#"+divid).append(jwplayersnippetscript)}),window.onresize=function(e){if(_this.playerConfig.isHomeTakeOver){_this.playerConfig.width=parseInt($("#"+_this.playerConfig.videoHolderDivId).css("max-width")),_this.playerConfig.height=parseInt($("#"+_this.playerConfig.videoHolderDivId).css("max-height"));var videoDiv=$("#p"+_this.playerConfig.playerId);$(videoDiv).width(_this.playerConfig.width+"px"),$(videoDiv).height(_this.playerConfig.height+"px"),_this.setVideoImageURL()}}}}return JwplayerOutsteamAdPlayerManager.prototype.setVideoImageURL=function(){"lg"===BootstrapExtensions.getBootstrapBreakpoint()?this.playerConfig.videoImageURL=this.playerConfig.videoImageLargeURL:"md"===BootstrapExtensions.getBootstrapBreakpoint()?this.playerConfig.videoImageURL=this.playerConfig.videoImageMediumURL:this.playerConfig.videoImageURL=this.playerConfig.videoImageSmallURL},JwplayerOutsteamAdPlayerManager.prototype.getVEightCss=function(){var content='<style type="text/css">\n';return content+=".jw-icon-fullscreen {\n    display: none !important;\n}\n.jwplayer.jw-flag-ads-hide-controls .jw-controls-backdrop, .jwplayer.jw-flag-ads-hide-controls .jw-controls {\n   display: block !important;\n}\n.jw-icon-rewind {\n   display: none !important;\n}\n.jw-playlist-btn {\n   display: none !important;\n}\n.jw-controlbar {\n   display: block !important;\n}\n",this.playerConfig.isHomeTakeOver&&(content+=".ima-sdk-frame video {\n   object-fit: cover;\n}\n"),this.playerConfig.isHomeTakeOver||(content+="  .jw-ad {\n    height: 0; \n    max-height: 0;\n    margin: 0 auto;\n    max-width: 640px;\n    overflow: hidden;\n    text-align: center;\n    transition: max-height 500ms ease-out;\n    width: 100%;\n  }\n  .jw-ad-label {\n    background-color: rgba(0, 0, 0, 0.07);\n    border-radius: 2px;\n    color: rgba(0, 0, 0, 0.5);\n    display: inline-block;\n    font-size: 12px;\n    letter-spacing: 1px;\n    margin: 20px 0 10px;\n    padding: 5px 10px;\n    text-transform: uppercase;\n  }\n  .jw-ad-visible {\n    max-height: auto;\n  }\n"),content+="</style>\n"},JwplayerOutsteamAdPlayerManager.prototype.getVEightHtml=function(){return'<div class="jw-ad">\n  <div class="jw-ad-media-container">\n    <div id="p'+this.playerConfig.playerId+'"></div>\n  </div>\n</div>\n'},JwplayerOutsteamAdPlayerManager.prototype.getVEightSnippet=function(){return'function JwplayerWrapper() {\n  var self = this;\n  var playerInstance;\n  var adEl;\n  var adMediaContainerEl;\n  var playerHeight;\n  var playerOffsetTop;\n  var isScrollTimeout;\n  var isClosed = false;\n  self.jwhavejwplayerlib = function() {\n    if (typeof (jwplayer) != "undefined" && jwplayer != null && typeof (jwplayer.defaults.advertising) != "undefined" && jwplayer.defaults.advertising != null) return true;\n    return false;\n  };\n  self.jwhavedefaultadtag = function() {\n    if (typeof (jwplayer.defaults.advertising.tag) != "undefined" && jwplayer.defaults.advertising.tag != null) return true;\n    return false;\n  };\n  self.jwhavescheduleadtag = function() {\n    if (typeof (jwplayer.defaults.advertising.schedule) != "undefined" && jwplayer.defaults.advertising.schedule != null) return true;\n    return false;\n  };\n  self.jwhaveadditionaladtargets = function() {\n'+(this.playerConfig.haveCustParams()?"return true;\n":"return false;\n")+'  };\n  self.jwappenddefaultadtagwithadditional = function() {\n    if (self.jwhaveadditionaladtargets() && self.jwhavedefaultadtag()) {\n      if (jwplayer.defaults.advertising.tag.indexOf("cust_params=") > 0) {\n        jwplayer.defaults.advertising.tag = jwplayer.defaults.advertising.tag.replace("cust_params=", "'+this.playerConfig.custParams+'".concat("%3D"));\n      } else {\n        jwplayer.defaults.advertising.tag = jwplayer.defaults.advertising.tag.concat(" & ", "'+this.playerConfig.custParams+'");\n      }\n    }\n  };\n  self.jwappendscheduleadtagwithadditional = function() {\n    if (self.jwhaveadditionaladtargets() && self.jwhavescheduleadtag()) {\n      $.each(jwplayer.defaults.advertising.schedule, function(index, value) {\n        if (value.tag.indexOf("cust_params=") > 0) {\n          value.tag = value.tag.replace("cust_params=", "'+this.playerConfig.custParams+'".concat("%3D"));\n        } else {\n          value.tag = value.tag.concat("&", "'+this.playerConfig.custParams+'");\n        }\n      });\n    }\n  };\n  // math functions related to scroll and offset positions relative to player\n  self.getScrollTop = function() {\n    var documentEl = document.documentElement;\n    return (window.pageYOffset || documentEl.scrollTop) - (documentEl.clientTop || 0);\n  };\n  self.getElementOffsetTop = function(el) {\n    var bodyRect = document.body.getBoundingClientRect(), elRect = el.getBoundingClientRect();\n    return elRect.top - bodyRect.top;\n  };\n  self.getAdInView = function() {\n    var scrollBoundary = self.playerOffsetTop + (self.playerHeight / 2), scrollTop = self.getScrollTop();\n    return (window.innerHeight + scrollTop) > scrollBoundary && scrollTop < scrollBoundary;\n  };\n  // cross-browser event binding method\n  self.setEventListener = function(el, ev, fn) {\n    var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent",\n    eventName = window.addEventListener ? ev : "on" + ev;\n    el[eventMethod](eventName, fn, false);\n  };\n  // get element margin top and bottom totat height\n  self.getMarginHeight = function(el) {\n    if (document.all) {\n      return parseInt(el.currentStyle.marginTop, 10) + parseInt(el.currentStyle.marginBottom, 10);\n    } else {\n      return parseInt(document.defaultView.getComputedStyle(el, "").getPropertyValue("margin-top")) + parseInt(document.defaultView.getComputedStyle(el, "").getPropertyValue("margin-bottom"));\n    }\n  };\n  // check if ad is in view, ad visible class when necessary (but only the first time it is in view)\n  self.setAdDisplayState = function() {\n    if (self.getAdInView()) {\n      if (!new RegExp("(^| )jw-ad-visible( |$)", "gi").test(self.adEl.className)) {\n        self.adEl.className += (self.adEl.className ? " " : "") + "jw-ad-visible";\n        if(!'+this.playerConfig.isHomeTakeOver+'){\n           self.adEl.style.maxHeight = self.adMediaContainerEl.offsetHeight + self.getMarginHeight(self.adMediaContainerEl) + "px";\n        }\n        else{\n           self.adEl.style.maxHeight = "'+this.playerConfig.height+'px";\n        }\n      }\n      if('+this.playerConfig.isHomeTakeOver+' && self.playerInstance.getState() === "idle" && !self.isClosed){\n        setTimeout(function() {\n          self.playerInstance.play();\n        }, 0);\n      }\n      if (self.playerInstance.getState() === "paused" && !self.isClosed) {\n        if(!($("#'+this.playerConfig.videoHolderDivId+'").hasClass("videoExpanded"))  && !'+this.playerConfig.isHomeTakeOver+') { \n                $(".jw-ad").animate( \n               { "padding-bottom": "56.25%" }, 500, \n               () => { \n                $(".jw-ad").height("auto"); \n               $("#'+this.playerConfig.videoHolderDivId+'").addClass("videoExpanded");\n                });\n        } \n        setTimeout(function() {\n          self.playerInstance.play();\n        }, 0);\n      }\n    } else {\n      if (self.playerInstance.getState() === "playing" && '+this.playerConfig.isHomeTakeOver+") {\n        setTimeout(function() {\n          self.playerInstance.pause();\n        }, 0);\n      }\n    }\n  };\n  self.close = function() {\n    self.isClosed = true;\n   if(!"+this.playerConfig.isHomeTakeOver+'){\n       $(".jw-ad").animate( \n       { "padding-bottom": 0 }, 500, \n       () => { \n        $(".jw-ad").height("0"); \n       });\n   }\n   self.adEl.style.maxHeight = "0px";\n   $("#'+this.playerConfig.videoHolderDivId+'").removeClass("inviewvideoholder");\n   self.playerInstance.remove();\n   self.adMediaContainerEl.parentNode.removeChild(self.adMediaContainerEl);\n  };\n  self.init = function() {\n    // player elements and utility vars\n    if (self.jwhavejwplayerlib) {\n      self.playerInstance = jwplayer("p'+this.playerConfig.playerId+'");\n      self.adEl = document.querySelector(".jw-ad");\n      self.adMediaContainerEl = document.querySelector(".jw-ad-media-container");\n      self.playerHeight;\n      self.playerOffsetTop = self.getElementOffsetTop(self.adEl);\n      self.isScrollTimeout = false; // namespace for whether or not we are waiting for setTimeout() to finish\n      // player setup\n      if (self.jwhaveadditionaladtargets()) {\n        if (self.jwhavedefaultadtag()) self.jwappenddefaultadtagwithadditional();\n        if (self.jwhavescheduleadtag()) self.jwappendscheduleadtagwithadditional();\n      }\n      if ('+this.playerConfig.videoURL.length+') {\n       self.playerInstance.setup({\n           "file": "https://trader360videos.azureedge.net/national/blank1.mp4",\n           "mediaid": "NSoGrA3w",\n           "autostart": true,\n           "mute": true,\n           "image": "'+this.playerConfig.videoImageURL+'",\n           "advertising": {\n               "tag": "'+this.playerConfig.videoURL+'",\n               "client": "vast"\n           }\n'+this.playerConfig.customSpecs+"       });\n       self.playerInstance.resize("+this.playerConfig.width+","+this.playerConfig.height+');\n      }\n      else {\n       self.playerInstance.setup({\n           "file": "https://trader360videos.azureedge.net/national/blank1.mp4",\n           "autostart": true,\n           "mute": true,\n           "mediaid": "NSoGrA3w"\n'+this.playerConfig.customSpecs+'       });\n      }\n    }\n    self.playerInstance.on("adStarted", function() {\n        if(!'+this.playerConfig.isHomeTakeOver+'){\n           if (!self.getAdInView()) {\n               setTimeout(function() {\n                   self.playerInstance.pause();\n               }, 0);\n           }\n           else {\n               $(".jw-ad").animate( \n               { "padding-bottom": "56.25%" }, 500, \n               () => { \n                $(".jw-ad").height("auto"); \n               $("#'+this.playerConfig.videoHolderDivId+'").addClass("videoExpanded");\n                });\n           }\n         }\n         $("#'+this.playerConfig.videoHolderDivId+'").addClass("inviewvideoholder");\n         if(self.playerHeight === 0) {\n             self.playerHeight = self.adMediaContainerEl.offsetHeight;\n             self.playerOffsetTop = self.getElementOffsetTop(self.adEl);\n         }\n    });\n    self.playerInstance.on("ready", function() {\n        self.isClosed = false;\n        $("#'+this.playerConfig.videoHolderDivId+'").css("opacity", ""); \n        var closeBtn = "<span id=close>'+String.fromCharCode(120)+'</span>";\n        $("#p'+this.playerConfig.playerId+'").append(closeBtn); \n        var closeElement = document.querySelector("#close");\n        if ('+this.playerConfig.isHomeTakeOver+') {\n           $("#close").css({"position": "absolute", "top":"8px", "right":"15px", "color": "#FFF", "font-size":"2.5em", "cursor": "pointer"});\n           self.playerInstance.resize('+this.playerConfig.width+","+this.playerConfig.height+');\n        }\n        else{ \n           $("#close").css({ "position": "absolute", "top": "15px", "left": "10px", "color": "#FFF", "font-size": "2.5em", "z-index": "1", "cursor": "pointer" }); \n        }\n       self.setEventListener(closeElement, "click", function () {\n           self.close();\n       });\n        // get player container height\n        self.playerHeight = self.adMediaContainerEl.offsetHeight;\n        // mute by default\n        self.playerInstance.setMute(true);\n        // unmute/mute player on self.adMediaContainerEl mouse enter/leave\n        self.setEventListener(self.adMediaContainerEl, "mouseenter", function() {\n        if (!'+this.playerConfig.isHomeTakeOver+') {\n          self.playerInstance.setMute(false);\n        }\n        });\n        self.setEventListener(self.adMediaContainerEl, "mouseleave", function() {\n        if (!'+this.playerConfig.isHomeTakeOver+') {\n          self.playerInstance.setMute(true);\n        }\n        });\n        // handle ad display state on page load\n        setTimeout(self.setAdDisplayState(), 1000);\n        // attach scroll event listener to window\n        self.setEventListener(window, "scroll", function() {\n        // skip if we are waiting on a scroll update timeout to finish\n        if (self.isScrollTimeout) return;\n        // flag that a new timeout will begin\n        self.isScrollTimeout = true;\n        // otherwise, execute scroll event handler\n        self.setAdDisplayState();\n        // set new timeout\n        setTimeout(function() {\n          // reset timeout flag to false (no longer waiting)\n          self.isScrollTimeout = false;\n        }, 100);\n      });\n    });\n    self.playerInstance.on("beforePlay", function () {\n        if ('+this.playerConfig.isHomeTakeOver+') {\n           $("#'+this.playerConfig.videoHolderDivId+'").css("opacity", "");\n        }\n    });\n    // handle when ad is complete or encounters error\n    self.playerInstance.on("complete adComplete adError", function() {\n      if ('+this.playerConfig.isHomeTakeOver+"  && !"+this.playerConfig.videoImageURL.length+') {\n           $("#'+this.playerConfig.videoHolderDivId+'").css("opacity", "0.5");\n      }\n      if(!'+this.playerConfig.isHomeTakeOver+'){\n           $(".jw-ad").animate( \n           { "padding-bottom": 0 }, 500, \n           () => { \n            $(".jw-ad").height("0"); \n           });\n           self.adEl.style.maxHeight = "0px";\n           setTimeout(function() {\n               $("#'+this.playerConfig.videoHolderDivId+'").removeClass("inviewvideoholder");\n               $("#'+this.playerConfig.videoHolderDivId+'").removeClass("videoExpanded");\n                self.playerInstance.remove();\n               self.adMediaContainerEl.parentNode.removeChild(self.adMediaContainerEl);\n           }, 500 /* should be the same duration as css transition */);\n       }\n    });\n  };\n};\n$("#p'+this.playerConfig.playerId+'").ready(function() {\n  p = new JwplayerWrapper();\n  p.init();\n});'},JwplayerOutsteamAdPlayerManager}(),JwplayerOutsteamAdPlayer=function(){function JwplayerOutsteamAdPlayer(playerId,custParams,videoHolderDivId,videoToggleDivId,videoDivId,loadIndicatorId,customStyles,customSpecs,videoURL,videoImageURL,videoImageLargeURL,videoImageMediumURL,videoImageSmallURL,width,height,isHomeTakeOver,pauseIfNotInview){this.playerId=playerId,this.custParams=custParams,this.videoHolderDivId=videoHolderDivId,this.videoToggleDivId=videoToggleDivId,this.videoDivId=videoDivId,this.loadIndicatorId=loadIndicatorId,this.customStyles=customStyles,this.customSpecs=customSpecs,this.videoURL=videoURL,this.videoImageURL=videoImageURL,this.videoImageLargeURL=videoImageLargeURL,this.videoImageMediumURL=videoImageMediumURL,this.videoImageSmallURL=videoImageSmallURL,this.width=width,this.height=height,this.isHomeTakeOver=isHomeTakeOver,this.pauseIfNotInview=pauseIfNotInview}return JwplayerOutsteamAdPlayer.prototype.updateCustParams=function(key,value){var paramtrimmed=this.custParams;this.custParams.length>0&&paramtrimmed.replace("cust_params=","");for(var paramUpdated="",containsParam=!1,_i=0,paramArry_1=paramtrimmed.split("%26");_i<paramArry_1.length;_i++){var param=paramArry_1[_i];paramUpdated.length>0&&(paramUpdated+="%26"),param.indexOf(key)>=0?(containsParam=!0,paramUpdated+=key+"%3D"+value):paramUpdated+=param}containsParam||(paramUpdated.length>0&&(paramUpdated+="%26"),paramUpdated+=key+"%3D"+value),paramtrimmed="cust_params="+paramUpdated,this.custParams=paramtrimmed},JwplayerOutsteamAdPlayer.prototype.haveCustParams=function(){return"cust_params="===this.custParams.substring(0,"cust_params=".length)&&this.custParams.replace("cust_params=","").length>0},JwplayerOutsteamAdPlayer}();