var BrowserType,OsType;!function(BrowserType){BrowserType[BrowserType.Opera=0]="Opera",BrowserType[BrowserType.Chrome=1]="Chrome",BrowserType[BrowserType.Firefox=2]="Firefox",BrowserType[BrowserType.Safari=3]="Safari",BrowserType[BrowserType.IE=4]="IE",BrowserType[BrowserType.Edge=5]="Edge",BrowserType[BrowserType.Blink=6]="Blink",BrowserType[BrowserType.SafariMobile=7]="SafariMobile",BrowserType[BrowserType.iOS11=8]="iOS11",BrowserType[BrowserType.iOS12=9]="iOS12",BrowserType[BrowserType.SamsungBrowser=10]="SamsungBrowser",BrowserType[BrowserType.Unknown=11]="Unknown"}(BrowserType||(BrowserType={})),function(OsType){OsType[OsType.iOS=0]="iOS",OsType[OsType.Android=1]="Android",OsType[OsType.Mac=2]="Mac",OsType[OsType.Windows=3]="Windows",OsType[OsType.Other=4]="Other"}(OsType||(OsType={}));var BrowserDetect=function(){function BrowserDetect(){}return BrowserDetect.prototype.GetOs=function(){var ua=window.navigator.userAgent;return ua.match(/iPad/i)||ua.match(/iPhone/i)?OsType.iOS:ua.match(/Android/i)?OsType.Android:ua.match(/Windows/i)?OsType.Windows:ua.match(/Macintosh/i)?OsType.Mac:OsType.Other},BrowserDetect.prototype.GetBrowser=function(){var windowJs=window,documentJs=document,isOpera=!!windowJs.opr&&!!windowJs.opr.addons||!!windowJs.opera||navigator.userAgent.indexOf(" OPR/")>=0;if(isOpera)return BrowserType.Opera;if(!!windowJs.InstallTrigger&&void 0!==windowJs.InstallTrigger)return BrowserType.Firefox;if(navigator.userAgent.match(/SamsungBrowser/i))return BrowserType.SamsungBrowser;var ua=window.navigator.userAgent,iOS=!!ua.match(/iPad/i)||!!ua.match(/iPhone/i),webkit=!!ua.match(/WebKit/i),iOSSafari=iOS&&webkit&&!ua.match(/CriOS/i);if(iOS)switch(this.getIOSMajorVersionNumber(ua)){case 11:return BrowserType.iOS11;case 12:return BrowserType.iOS12}if(iOSSafari)return BrowserType.SafariMobile;if(/constructor/i.test(windowJs.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||void 0!==windowJs.safari&&windowJs.safari.pushNotification).toString())return BrowserType.Safari;var isIE=!!documentJs.documentMode;if(isIE)return BrowserType.IE;if(!isIE&&!!windowJs.StyleMedia)return BrowserType.Edge;var isChrome=!!windowJs.chrome&&!!windowJs.chrome.webstore;return isChrome?BrowserType.Chrome:(isChrome||isOpera)&&!!windowJs.CSS?BrowserType.Blink:BrowserType.Unknown},BrowserDetect.prototype.getIOSMajorVersionNumber=function(text){var matches=text.match(/OS\s(\d+?)_/);return matches&&matches.length>1?parseInt(matches[1],10):0},BrowserDetect}();if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),function(a){"use strict";a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});return setTimeout(function(){c||a(d).trigger(a.support.transition.end)},b),this},a(function(){a.support.transition=function(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(a){"use strict";var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=(f=e.attr("href"))&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})},a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b);if(("prev"==a&&0===c||"next"==a&&c==this.$items.length-1)&&!this.options.wrap)return b;var f=(c+("prev"==a?-1:1))%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),h=f.data("bs.collapse")?"toggle":e.data();c.call(f,h)})}(jQuery),function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=(c=b.attr("href"))&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var i=e.find(".dropdown-menu li:not(.disabled):visible a");if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),function(a){"use strict";var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return(b=a.extend({},this.getDefaults(),this.$element.data(),b)).delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){var c=(b=b||this.$element)[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var b=this.$element,c=this.options;return b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do{a+=~~(1e6*Math.random())}while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&((c=a(b.currentTarget).data("bs."+this.type))||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=function(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})},a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),function(a){"use strict";var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=function(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})},a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=(d=b.attr("href"))&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top;return null!=c&&e<=c?"top":null!=d&&i+(h?g:b)>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),function(){"use strict";function setup($){$.fn._fadeIn=$.fn.fadeIn;var noOp=$.noop||function(){},msie=/MSIE/.test(navigator.userAgent),ie6=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),setExpr=(document.documentMode,$.isFunction(document.createElement("div").style.setExpression));$.blockUI=function(opts){install(window,opts)},$.unblockUI=function(opts){remove(window,opts)},$.growlUI=function(title,message,timeout,onClose){var $m=$('<div class="growlUI"></div>');title&&$m.append("<h1>"+title+"</h1>"),message&&$m.append("<h2>"+message+"</h2>"),void 0===timeout&&(timeout=3e3);var callBlock=function(opts){opts=opts||{},$.blockUI({message:$m,fadeIn:void 0!==opts.fadeIn?opts.fadeIn:700,fadeOut:void 0!==opts.fadeOut?opts.fadeOut:1e3,timeout:void 0!==opts.timeout?opts.timeout:timeout,centerY:!1,showOverlay:!1,onUnblock:onClose,css:$.blockUI.defaults.growlCSS})};callBlock();$m.css("opacity");$m.mouseover(function(){callBlock({fadeIn:0,timeout:3e4});var displayBlock=$(".blockMsg");displayBlock.stop(),displayBlock.fadeTo(300,1)}).mouseout(function(){$(".blockMsg").fadeOut(1e3)})},$.fn.block=function(opts){if(this[0]===window)return $.blockUI(opts),this;var fullOpts=$.extend({},$.blockUI.defaults,opts||{});return this.each(function(){var $el=$(this);fullOpts.ignoreIfBlocked&&$el.data("blockUI.isBlocked")||$el.unblock({fadeOut:0})}),this.each(function(){"static"==$.css(this,"position")&&(this.style.position="relative",$(this).data("blockUI.static",!0)),this.style.zoom=1,install(this,opts)})},$.fn.unblock=function(opts){return this[0]===window?($.unblockUI(opts),this):this.each(function(){remove(this,opts)})},$.blockUI.version=2.7,$.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var pageBlock=null,pageBlockEls=[];function install(el,opts){var css,themedCSS,full=el==window,msg=opts&&void 0!==opts.message?opts.message:void 0;if(!(opts=$.extend({},$.blockUI.defaults,opts||{})).ignoreIfBlocked||!$(el).data("blockUI.isBlocked")){if(opts.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,opts.overlayCSS||{}),css=$.extend({},$.blockUI.defaults.css,opts.css||{}),opts.onOverlayClick&&(opts.overlayCSS.cursor="pointer"),themedCSS=$.extend({},$.blockUI.defaults.themedCSS,opts.themedCSS||{}),msg=void 0===msg?opts.message:msg,full&&pageBlock&&remove(window,{fadeOut:0}),msg&&"string"!=typeof msg&&(msg.parentNode||msg.jquery)){var node=msg.jquery?msg[0]:msg,data={};$(el).data("blockUI.history",data),data.el=node,data.parent=node.parentNode,data.display=node.style.display,data.position=node.style.position,data.parent&&data.parent.removeChild(node)}$(el).data("blockUI.onUnblock",opts.onUnblock);var lyr1,lyr2,lyr3,s,z=opts.baseZ;lyr1=msie||opts.forceIframe?$('<iframe class="blockUI" style="z-index:'+z+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+opts.iframeSrc+'"></iframe>'):$('<div class="blockUI" style="display:none"></div>'),lyr2=opts.theme?$('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+z+++';display:none"></div>'):$('<div class="blockUI blockOverlay" style="z-index:'+z+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),opts.theme&&full?(s='<div class="blockUI '+opts.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:fixed">',opts.title&&(s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"</div>"),s+='<div class="ui-widget-content ui-dialog-content"></div>',s+="</div>"):opts.theme?(s='<div class="blockUI '+opts.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:absolute">',opts.title&&(s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"</div>"),s+='<div class="ui-widget-content ui-dialog-content"></div>',s+="</div>"):s=full?'<div class="blockUI '+opts.blockMsgClass+' blockPage" style="z-index:'+(z+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+opts.blockMsgClass+' blockElement" style="z-index:'+(z+10)+';display:none;position:absolute"></div>',lyr3=$(s),msg&&(opts.theme?(lyr3.css(themedCSS),lyr3.addClass("ui-widget-content")):lyr3.css(css)),opts.theme||lyr2.css(opts.overlayCSS),lyr2.css("position",full?"fixed":"absolute"),(msie||opts.forceIframe)&&lyr1.css("opacity",0);var layers=[lyr1,lyr2,lyr3],$par=$(full?"body":el);$.each(layers,function(){this.appendTo($par)}),opts.theme&&opts.draggable&&$.fn.draggable&&lyr3.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var expr=setExpr&&(!$.support.boxModel||$("object,embed",full?null:el).length>0);if(ie6||expr){if(full&&opts.allowBodyStretch&&$.support.boxModel&&$("html,body").css("height","100%"),(ie6||!$.support.boxModel)&&!full)var t=sz(el,"borderTopWidth"),l=sz(el,"borderLeftWidth"),fixT=t?"(0 - "+t+")":0,fixL=l?"(0 - "+l+")":0;$.each(layers,function(i,o){var s=o[0].style;if(s.position="absolute",i<2)full?s.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+opts.quirksmodeOffsetHack+') + "px"'):s.setExpression("height",'this.parentNode.offsetHeight + "px"'),full?s.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):s.setExpression("width",'this.parentNode.offsetWidth + "px"'),fixL&&s.setExpression("left",fixL),fixT&&s.setExpression("top",fixT);else if(opts.centerY)full&&s.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),s.marginTop=0;else if(!opts.centerY&&full){var expression="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+(opts.css&&opts.css.top?parseInt(opts.css.top,10):0)+') + "px"';s.setExpression("top",expression)}})}if(msg&&(opts.theme?lyr3.find(".ui-widget-content").append(msg):lyr3.append(msg),(msg.jquery||msg.nodeType)&&$(msg).show()),(msie||opts.forceIframe)&&opts.showOverlay&&lyr1.show(),opts.fadeIn){var cb=opts.onBlock?opts.onBlock:noOp,cb1=opts.showOverlay&&!msg?cb:noOp,cb2=msg?cb:noOp;opts.showOverlay&&lyr2._fadeIn(opts.fadeIn,cb1),msg&&lyr3._fadeIn(opts.fadeIn,cb2)}else opts.showOverlay&&lyr2.show(),msg&&lyr3.show(),opts.onBlock&&opts.onBlock.bind(lyr3)();if(bind(1,el,opts),full?(pageBlock=lyr3[0],pageBlockEls=$(opts.focusableElements,pageBlock),opts.focusInput&&setTimeout(focus,20)):function(el,x,y){var p=el.parentNode,s=el.style,l=(p.offsetWidth-el.offsetWidth)/2-sz(p,"borderLeftWidth"),t=(p.offsetHeight-el.offsetHeight)/2-sz(p,"borderTopWidth");x&&(s.left=l>0?l+"px":"0");y&&(s.top=t>0?t+"px":"0")}(lyr3[0],opts.centerX,opts.centerY),opts.timeout){var to=setTimeout(function(){full?$.unblockUI(opts):$(el).unblock(opts)},opts.timeout);$(el).data("blockUI.timeout",to)}}}function remove(el,opts){var count,els,full=el==window,$el=$(el),data=$el.data("blockUI.history"),to=$el.data("blockUI.timeout");to&&(clearTimeout(to),$el.removeData("blockUI.timeout")),opts=$.extend({},$.blockUI.defaults,opts||{}),bind(0,el,opts),null===opts.onUnblock&&(opts.onUnblock=$el.data("blockUI.onUnblock"),$el.removeData("blockUI.onUnblock")),els=full?$("body").children().filter(".blockUI").add("body > .blockUI"):$el.find(">.blockUI"),opts.cursorReset&&(els.length>1&&(els[1].style.cursor=opts.cursorReset),els.length>2&&(els[2].style.cursor=opts.cursorReset)),full&&(pageBlock=pageBlockEls=null),opts.fadeOut?(count=els.length,els.stop().fadeOut(opts.fadeOut,function(){0==--count&&reset(els,data,opts,el)})):reset(els,data,opts,el)}function reset(els,data,opts,el){var $el=$(el);if(!$el.data("blockUI.isBlocked")){els.each(function(i,o){this.parentNode&&this.parentNode.removeChild(this)}),data&&data.el&&(data.el.style.display=data.display,data.el.style.position=data.position,data.el.style.cursor="default",data.parent&&data.parent.appendChild(data.el),$el.removeData("blockUI.history")),$el.data("blockUI.static")&&$el.css("position","static"),"function"==typeof opts.onUnblock&&opts.onUnblock(el,opts);var body=$(document.body),w=body.width(),cssW=body[0].style.width;body.width(w-1).width(w),body[0].style.width=cssW}}function bind(b,el,opts){var full=el==window,$el=$(el);if((b||(!full||pageBlock)&&(full||$el.data("blockUI.isBlocked")))&&($el.data("blockUI.isBlocked",b),full&&opts.bindEvents&&(!b||opts.showOverlay))){var events="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";b?$(document).bind(events,opts,handler):$(document).unbind(events,handler)}}function handler(e){if("keydown"===e.type&&e.keyCode&&9==e.keyCode&&pageBlock&&e.data.constrainTabKey){var els=pageBlockEls,fwd=!e.shiftKey&&e.target===els[els.length-1],back=e.shiftKey&&e.target===els[0];if(fwd||back)return setTimeout(function(){focus(back)},10),!1}var opts=e.data,target=$(e.target);return target.hasClass("blockOverlay")&&opts.onOverlayClick&&opts.onOverlayClick(e),target.parents("div."+opts.blockMsgClass).length>0||0===target.parents().children().filter("div.blockUI").length}function focus(back){if(pageBlockEls){var e=pageBlockEls[!0===back?pageBlockEls.length-1:0];e&&e.focus()}}function sz(el,p){return parseInt($.css(el,p),10)||0}}"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],setup):setup(jQuery)}(),function($){$.fn.theiaStickySidebar=function(options){function tryInit(options,$that){return!0===options.initialized||!($("body").width()<options.minWidth)&&(function(options,$that){options.initialized=!0,0===$("#theia-sticky-sidebar-stylesheet-"+options.namespace).length&&$("head").append($('<style id="theia-sticky-sidebar-stylesheet-'+options.namespace+'">.theiaStickySidebar:after {content: ""; display: table; clear: both;}</style>'));$that.each(function(){var o={};if(o.sidebar=$(this),o.options=options||{},o.container=$(o.options.containerSelector),0==o.container.length&&(o.container=o.sidebar.parent()),o.sidebar.parents().css("-webkit-transform","none"),o.sidebar.css({position:o.options.defaultPosition,overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),o.stickySidebar=o.sidebar.find(".theiaStickySidebar"),0==o.stickySidebar.length){var javaScriptMIMETypes=/(?:text|application)\/(?:x-)?(?:javascript|ecmascript)/i;o.sidebar.find("script").filter(function(index,script){return 0===script.type.length||script.type.match(javaScriptMIMETypes)}).remove(),o.stickySidebar=$("<div>").addClass("theiaStickySidebar").append(o.sidebar.children()),o.sidebar.append(o.stickySidebar)}o.marginBottom=parseInt(o.sidebar.css("margin-bottom")),o.paddingTop=parseInt(o.sidebar.css("padding-top")),o.paddingBottom=parseInt(o.sidebar.css("padding-bottom"));var collapsedTopHeight=o.stickySidebar.offset().top,collapsedBottomHeight=o.stickySidebar.outerHeight();function resetSidebar(){o.fixedScrollTop=0,o.sidebar.css({"min-height":"1px"}),o.stickySidebar.css({position:"static",width:"",transform:"none"})}o.stickySidebar.css("padding-top",1),o.stickySidebar.css("padding-bottom",1),collapsedTopHeight-=o.stickySidebar.offset().top,collapsedBottomHeight=o.stickySidebar.outerHeight()-collapsedBottomHeight-collapsedTopHeight,0==collapsedTopHeight?(o.stickySidebar.css("padding-top",0),o.stickySidebarPaddingTop=0):o.stickySidebarPaddingTop=1,0==collapsedBottomHeight?(o.stickySidebar.css("padding-bottom",0),o.stickySidebarPaddingBottom=0):o.stickySidebarPaddingBottom=1,o.previousScrollTop=null,o.fixedScrollTop=0,resetSidebar(),o.onScroll=function(o){if(o.stickySidebar.is(":visible"))if($("body").width()<o.options.minWidth)resetSidebar();else{if(o.options.disableOnResponsiveLayouts){var sidebarWidth=o.sidebar.outerWidth("none"==o.sidebar.css("float"));if(sidebarWidth+50>o.container.width())return void resetSidebar()}var e,height,scrollTop=$(document).scrollTop(),position="static";if(scrollTop>=o.sidebar.offset().top+(o.paddingTop-o.options.additionalMarginTop)){var windowOffsetBottom,offsetTop=o.paddingTop+options.additionalMarginTop,offsetBottom=o.paddingBottom+o.marginBottom+options.additionalMarginBottom,containerTop=o.sidebar.offset().top,containerBottom=o.sidebar.offset().top+(e=o.container,height=e.height(),e.children().each(function(){height=Math.max(height,$(this).height())}),height),windowOffsetTop=0+options.additionalMarginTop,sidebarSmallerThanWindow=o.stickySidebar.outerHeight()+offsetTop+offsetBottom<$(window).height();windowOffsetBottom=sidebarSmallerThanWindow?windowOffsetTop+o.stickySidebar.outerHeight():$(window).height()-o.marginBottom-o.paddingBottom-options.additionalMarginBottom;var staticLimitTop=containerTop-scrollTop+o.paddingTop,staticLimitBottom=containerBottom-scrollTop-o.paddingBottom-o.marginBottom,top=o.stickySidebar.offset().top-scrollTop,scrollTopDiff=o.previousScrollTop-scrollTop;"fixed"==o.stickySidebar.css("position")&&"modern"==o.options.sidebarBehavior&&(top+=scrollTopDiff),"stick-to-top"==o.options.sidebarBehavior&&(top=options.additionalMarginTop),"stick-to-bottom"==o.options.sidebarBehavior&&(top=windowOffsetBottom-o.stickySidebar.outerHeight()),top=scrollTopDiff>0?Math.min(top,windowOffsetTop):Math.max(top,windowOffsetBottom-o.stickySidebar.outerHeight()),top=Math.max(top,staticLimitTop),top=Math.min(top,staticLimitBottom-o.stickySidebar.outerHeight());var sidebarSameHeightAsContainer=o.container.height()==o.stickySidebar.outerHeight();position=(sidebarSameHeightAsContainer||top!=windowOffsetTop)&&(sidebarSameHeightAsContainer||top!=windowOffsetBottom-o.stickySidebar.outerHeight())?scrollTop+top-o.sidebar.offset().top-o.paddingTop<=options.additionalMarginTop?"static":"absolute":"fixed"}if("fixed"==position){var scrollLeft=$(document).scrollLeft();o.stickySidebar.css({position:"fixed",width:getWidthForObject(o.stickySidebar)+"px",transform:"translateY("+top+"px)",left:o.sidebar.offset().left+parseInt(o.sidebar.css("padding-left"))-scrollLeft+"px",top:"0px"})}else if("absolute"==position){var css={};"absolute"!=o.stickySidebar.css("position")&&(css.position="absolute",css.transform="translateY("+(scrollTop+top-o.sidebar.offset().top-o.stickySidebarPaddingTop-o.stickySidebarPaddingBottom)+"px)",css.top="0px"),css.width=getWidthForObject(o.stickySidebar)+"px",css.left="",o.stickySidebar.css(css)}else"static"==position&&resetSidebar();"static"!=position&&1==o.options.updateSidebarHeight&&o.sidebar.css({"min-height":o.stickySidebar.outerHeight()+o.stickySidebar.offset().top-o.sidebar.offset().top+o.paddingBottom}),o.previousScrollTop=scrollTop}},o.onScroll(o),$(document).on("scroll."+o.options.namespace,function(o){return function(){o.onScroll(o)}}(o)),$(window).on("resize."+o.options.namespace,function(o){return function(){o.stickySidebar.css({position:"static"}),o.onScroll(o)}}(o)),"undefined"!=typeof ResizeSensor&&new ResizeSensor(o.stickySidebar[0],function(o){return function(){o.onScroll(o)}}(o))})}(options,$that),!0)}function getWidthForObject(object){var width;try{width=object[0].getBoundingClientRect().width}catch(err){}return void 0===width&&(width=object.width()),width}return(options=$.extend({containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0,disableOnResponsiveLayouts:!0,sidebarBehavior:"modern",defaultPosition:"relative",namespace:"TSS"},options)).additionalMarginTop=parseInt(options.additionalMarginTop)||0,options.additionalMarginBottom=parseInt(options.additionalMarginBottom)||0,function(options,$that){tryInit(options,$that)||(console.log("TSS: Body width smaller than options.minWidth. Init is delayed."),$(document).on("scroll."+options.namespace,function(options,$that){return function(evt){var success=tryInit(options,$that);success&&$(this).unbind(evt)}}(options,$that)),$(window).on("resize."+options.namespace,function(options,$that){return function(evt){var success=tryInit(options,$that);success&&$(this).unbind(evt)}}(options,$that)))}(options,this),this}}(jQuery),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}(function($){"use strict";var readmore="readmore",defaults={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,beforeToggle:function(){},afterToggle:function(){}},cssEmbedded={},uniqueIdCounter=0;function setBoxHeights(element){var el=element.clone().css({height:"auto",width:element.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(element),expandedHeight=el.outerHeight(),cssMaxHeight=parseInt(el.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),defaultHeight=element.data("defaultHeight");el.remove();var collapsedHeight=cssMaxHeight||element.data("collapsedHeight")||defaultHeight;element.data({expandedHeight:expandedHeight,maxHeight:cssMaxHeight,collapsedHeight:collapsedHeight}).css({maxHeight:"none"})}var func,wait,immediate,timeout,resizeBoxes=(func=function(){$("[data-readmore]").each(function(){var current=$(this),isExpanded="true"===current.attr("aria-expanded");setBoxHeights(current),current.css({height:current.data(isExpanded?"expandedHeight":"collapsedHeight")})})},wait=100,function(){var context=this,args=arguments,callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(function(){timeout=null,immediate||func.apply(context,args)},wait),callNow&&func.apply(context,args)});function Readmore(element,options){this.element=element,this.options=$.extend({},defaults,options),function(options){if(!cssEmbedded[options.selector]){var styles=" ";options.embedCSS&&""!==options.blockCSS&&(styles+=options.selector+" + [data-readmore-toggle], "+options.selector+"[data-readmore]{"+options.blockCSS+"}"),styles+=options.selector+"[data-readmore]{transition: height "+options.speed+"ms;overflow: hidden;}",d=document,u=styles,(css=d.createElement("style")).type="text/css",css.styleSheet?css.styleSheet.cssText=u:css.appendChild(d.createTextNode(u)),d.getElementsByTagName("head")[0].appendChild(css),cssEmbedded[options.selector]=!0}var d,u,css}(this.options),this._defaults=defaults,this._name=readmore,this.init(),window.addEventListener?(window.addEventListener("load",resizeBoxes),window.addEventListener("resize",resizeBoxes)):(window.attachEvent("load",resizeBoxes),window.attachEvent("resize",resizeBoxes))}Readmore.prototype={init:function(){var current=$(this.element);current.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),setBoxHeights(current);var collapsedHeight=current.data("collapsedHeight"),heightMargin=current.data("heightMargin");if(current.outerHeight(!0)<=collapsedHeight+heightMargin)return!0;var _this,id=current.attr("id")||function(prefix){var id=++uniqueIdCounter;return String(null==prefix?"rmjs-":prefix)+id}(),useLink=this.options.startOpen?this.options.lessLink:this.options.moreLink;current.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:id}),current.after($(useLink).on("click",(_this=this,function(event){_this.toggle(this,current[0],event)})).attr({"data-readmore-toggle":"","aria-controls":id})),this.options.startOpen||current.css({height:collapsedHeight})},toggle:function(trigger,element,event){event&&event.preventDefault(),trigger||(trigger=$('[aria-controls="'+_this.element.id+'"]')[0]),element||(element=_this.element);var $element=$(element),newHeight="",newLink="",expanded=!1,collapsedHeight=$element.data("collapsedHeight");$element.height()<=collapsedHeight?(newHeight=$element.data("expandedHeight")+"px",newLink="lessLink",expanded=!0):(newHeight=collapsedHeight,newLink="moreLink"),this.options.beforeToggle(trigger,$element,!expanded),$element.css({height:newHeight}),$element.on("transitionend",function(_this){return function(){_this.options.afterToggle(trigger,$element,expanded),$(this).attr({"aria-expanded":expanded}).off("transitionend")}}(this)),$(trigger).replaceWith($(this.options[newLink]).on("click",function(_this){return function(event){_this.toggle(this,element,event)}}(this)).attr({"data-readmore-toggle":"","aria-controls":$element.attr("id")}))},destroy:function(){$(this.element).each(function(){var current=$(this);current.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),current.removeData()})}},$.fn.readmore=function(options){var args=arguments,selector=this.selector;return"object"==typeof(options=options||{})?this.each(function(){if($.data(this,"plugin_"+readmore)){var instance=$.data(this,"plugin_"+readmore);instance.destroy.apply(instance)}options.selector=selector,$.data(this,"plugin_"+readmore,new Readmore(this,options))}):"string"==typeof options&&"_"!==options[0]&&"init"!==options?this.each(function(){var instance=$.data(this,"plugin_"+readmore);instance instanceof Readmore&&"function"==typeof instance[options]&&instance[options].apply(instance,Array.prototype.slice.call(args,1))}):void 0}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function i(){var b,c,d={height:f.innerHeight,width:f.innerWidth};return d.height||((b=e.compatMode)||!a.support.boxModel)&&(d={height:(c="CSS1Compat"===b?g:e.body).clientHeight,width:c.clientWidth}),d}function j(){return{top:f.pageYOffset||g.scrollTop||e.body.scrollTop,left:f.pageXOffset||g.scrollLeft||e.body.scrollLeft}}function k(){if(b.length){var e=0,f=a.map(b,function(a){var b=a.data.selector,c=a.$element;return b?c.find(b):c});for(c=c||i(),d=d||j();e<b.length;e++)if(a.contains(g,f[e][0])){var h=a(f[e]),k_height=h[0].offsetHeight,k_width=h[0].offsetWidth,l=h.offset(),m=h.data("inview");if(!d||!c)return;l.top+k_height>d.top&&l.top<d.top+c.height&&l.left+k_width>d.left&&l.left<d.left+c.width?m||h.data("inview",!0).trigger("inview",[!0]):m&&h.data("inview",!1).trigger("inview",[!1])}}}var c,d,h,b=[],e=document,f=window,g=e.documentElement;a.event.special.inview={add:function(c){b.push({data:c,$element:a(this),element:this}),!h&&b.length&&(h=setInterval(k,250))},remove:function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.element===this&&d.data.guid===a.guid){b.splice(c,1);break}}b.length||(clearInterval(h),h=null)}},a(f).bind("scroll resize scrollstop",function(){c=d=null}),!g.addEventListener&&g.attachEvent&&g.attachEvent("onfocusin",function(){d=null})});var ArrayExtensions,ObjectExtensions,Garage=function(){function Garage(log){this.savedSearches=[],this.savedVehicles=[],this.itemsSelling=[],log&&(this.log=log)}return Garage.prototype.garageRequest=function(route,method,body,success,fail){var _this=this,request=new HttpClientRequest;request.method=method,request.url=route,request.success=function(response){_this.savedSearches=[],_this.savedVehicles=[],_this.itemsSelling=[],response&&response.UserProfile&&response.UserProfile.Garage&&(response.UserProfile.Garage.SavedSearches&&(_this.savedSearches=response.UserProfile.Garage.SavedSearches),response.UserProfile.Garage.SavedVehicles&&(_this.savedVehicles=response.UserProfile.Garage.SavedVehicles),response.UserProfile.Garage.ItemsSelling&&(_this.itemsSelling=response.UserProfile.Garage.ItemsSelling)),_this.log&&_this.log("SUCCESS",response,request),success&&success(response,request,_this)},request.fail=function(error){_this.log&&_this.log("FAIL",error,request),fail&&fail(error,request,_this)},request.accept="application/json",request.contentType="application/json",request.body=body;var client=new HttpClient;return client.makeRequest(request),client},Garage.prototype.getGarage=function(success,fail){return this.garageRequest("/my-garage/garage","GET",null,success,fail)},Garage.prototype.saveVehicle=function(vehicle,success,fail){return this.garageRequest("/my-garage/SaveVehicle","POST",vehicle,success,fail)},Garage.prototype.saveSearch=function(search,success,fail){return this.garageRequest("/my-garage/SaveSearch","POST",search,success,fail)},Garage.prototype.deleteSavedSearch=function(name,success,fail){return this.garageRequest("/my-garage/DeleteSavedSearch","DELETE",{name:name},success,fail)},Garage.prototype.deleteSavedVehicle=function(foreignId,sourceId,success,fail){this.garageRequest("/my-garage/DeleteSavedVehicle","DELETE",{foreignId:foreignId,sourceId:sourceId},success,fail)},Garage}(),HttpClientRequest=function(){return function(){this.method="GET",this.accept="application/json",this.contentType="application/json"}}(),HttpClient=function(){function HttpClient(){}return HttpClient.prototype.makeRequest=function(options){var request=new XMLHttpRequest;if(request.onload=function(result){if(200===request.status){var json=request.responseText;""!==json&&(json=JSON.parse(json)),options.success&&options.success(json)}else options.fail&&options.fail(new Error(request.statusText))},request.onerror=function(e){options.fail&&options.fail(new Error(request.statusText))},request.open(options.method,options.url),request.setRequestHeader("Accept",options.accept),request.setRequestHeader("Content-Type",options.contentType),options.body){var body=options.body;"string"!=typeof body&&(body=JSON.stringify(body)),console.log("BODY:",body,typeof body),request.send(body)}else request.send()},HttpClient}();!function(ArrayExtensions){ArrayExtensions.nearestValue=function(array,target,excludeNegative,excludeZero){void 0===excludeNegative&&(excludeNegative=!1),void 0===excludeZero&&(excludeZero=!1);var targetArray=array;return excludeNegative?targetArray=excludeZero?array.filter(function(x){return x>0}):array.filter(function(x){return x>=0}):excludeZero&&(targetArray=array.filter(function(x){return 0!=x})),targetArray.reduce(function(accumulator,currentValue){return Math.abs(accumulator-target)>Math.abs(currentValue-target)?currentValue:accumulator})},ArrayExtensions.findIndex=function(array,comparer){var requestedIndex=-1;if(null==array)return requestedIndex;for(var i=0;i<array.length;++i)if(comparer(array[i])){requestedIndex=i;break}return requestedIndex},ArrayExtensions.clean=function(array,removeTarget){void 0===removeTarget&&(removeTarget="");for(var i=0;i<array.length;i++)array[i]===removeTarget&&(array.splice(i,1),i--);return array},ArrayExtensions.purge=function(array,removalCondition){for(var i=0;i<array.length;i++)removalCondition(array[i])&&(array.splice(i,1),i--);return array},ArrayExtensions.union=function(array,array2,equalityComparison){if(!array)throw new Error("array parameter can't be null");for(var a=array.concat(array2),i=0;i<a.length;++i)for(var j=i+1;j<a.length;++j)equalityComparison?0===equalityComparison(a[i],a[j])&&a.splice(j--,1):a[i]===a[j]&&a.splice(j--,1);return a},ArrayExtensions.subtract=function(minuend,subtrahend){minuend.sort(AdExtensions.sortAds),subtrahend.sort(AdExtensions.sortAds);for(var i=0,j=0;i<minuend.length&&j<subtrahend.length&&!(i>=minuend.length);){var compareResult=AdExtensions.sortAds(minuend[i],subtrahend[j]);0===compareResult?(minuend.slice(),j++):-1===compareResult?i++:j++}},ArrayExtensions.areEquivalent=function(left,right){if(null==left)return null==right;if(null==right)return!1;if(left.length!==right.length)return!1;for(var rightCopy=right.slice(),i=0;i<left.length;i++){for(var found=!1,j=0;j<rightCopy.length;j++)if(left[i]===rightCopy[j]){found=!0,rightCopy.splice(j,1);break}if(!found)return!1}return!0}}(ArrayExtensions||(ArrayExtensions={})),function(ObjectExtensions){ObjectExtensions.DiffObjects=function(object1,object2,isStrict){if(void 0===isStrict&&(isStrict=!0),object1.constructor.name!==object2.constructor.name)return null;for(var results=new Array,keys=Object.keys(object1),i=0;i<keys.length;i++){if(void 0===object1[keys[i]]||void 0===object2[keys[i]]&&isStrict)return null;object1[keys[i]]!=object2[keys[i]]&&results.push(new Tuple(new Tuple(keys[i],object1[keys[i]]),new Tuple(keys[i],object2[keys[i]])))}return results}}(ObjectExtensions||(ObjectExtensions={}));var CultureInfo,CultureFormatProvider=function(){function CultureFormatProvider(capitalizeCountry){void 0===capitalizeCountry&&(capitalizeCountry=!1),this.capitalizeCountry=capitalizeCountry}return CultureFormatProvider.prototype.format=function(culture){if(this.capitalizeCountry){var parts=culture.split("-");return parts[0]+"-"+parts[1].toUpperCase()}return culture},CultureFormatProvider}();function mobileFooterAccordion(){($("body").hasClass("mobile")&&window.screen.width<768&&window.screen.height<768||$("body").hasClass("desktop")&&window.innerWidth<768)&&$("#previousAdLink").addClass("hidden-xs")}function backToTop(){$(window).scroll(function(){$(this).scrollTop()>50?$("#back-to-top").fadeIn():$("#back-to-top").fadeOut()}),$("#back-to-top").click(function(){return $("#back-to-top").tooltip("hide"),$("body,html").animate({scrollTop:0},800),!1}),$("#back-to-top").tooltip("show")}function receiveMessage(event){if(event&&event.data&&0==event.data.toString().indexOf("{"))try{var data=JSON.parse(event.data.toString());if(null!==data&&"object"==typeof data&&void 0!==data.action){var dealerEvents=DealerEvents.getInstance();switch(data.action){case"ColorBoxClose":switch(data.source){case"FinanceLeadForm":$("#creditConnectModal").click()}break;case"HomePageTakeover":this.homePageTakeover(),$(".at_takeover").css("background-image","url("+data.parameters.backgroundImageUrl+")"),$("#header").css("margin-top","0"),data.parameters.clickUrl&&$(".at_takeover").click(function(e){e.preventDefault(),window.open(data.parameters.clickUrl)});break;case"HomePageTakeoverNotPresent":dealerEvents.homePageTakeoverNotPresent();break;case"HomePageDealerEvents":dealerEvents.homePageDealerEvents();break;case"HomePageDealerEventsNotPresent":dealerEvents.homePageDealerEventsNotPresent();var homePageDealerEventsNotPresentIframe=getIframe(event);homePageDealerEventsNotPresentIframe&&homePageDealerEventsNotPresentIframe.parents(".banners:first").addClass("empty");break;case"SearchPageTakeover":AddMastheadAds(""+data.parameters.tdsrNumber),$(".at_masthead").css("backgroundImage","url("+data.parameters.backgroundImageUrl+")"),$("body").addClass("mastheadDisplayed"),data.parameters.clickUrl&&$(".at_masthead #mastheadHotspot").click(function(e){e.preventDefault(),window.open(data.parameters.clickUrl)});break;case"SearchPageTakeoverNotPresent":dealerEvents.searchPageTakeoverNotPresent();break;case"SearchPageDealerEvents":dealerEvents.searchPageDealerEvents();break;case"SearchPageDealerEventsNotPresent":dealerEvents.searchPageDealerEventsNotPresent();var searchPageDealerEventsNotPresentIframe=getIframe(event);searchPageDealerEventsNotPresentIframe&&searchPageDealerEventsNotPresentIframe.parents(".banners:first").addClass("empty");break;case"DetailPageTakeover":dealerEvents.detailPageTakeover();break;case"DetailPageTakeoverNotPresent":dealerEvents.detailPageTakeoverNotPresent();break;case"DetailPageDealerEvents":dealerEvents.detailPageDealerEvents();break;case"DetailPageDealerEventsNotPresent":dealerEvents.detailPageDealerEventsNotPresent();var detailPageDealerEventsNotPresentIframe=getIframe(event);detailPageDealerEventsNotPresentIframe&&detailPageDealerEventsNotPresentIframe.parents(".banners:first").addClass("empty")}}}catch(err){console.log("receiveMessage :: err"),console.log(err)}}function getIframe(event){for(var frames=document.getElementsByTagName("iframe"),i=0;i<frames.length;i++)if(frames[i].contentWindow===event.source)return $(frames[i])}function cssIdentifyBrowser(){var browser,ua=window.navigator.userAgent,edge=ua.indexOf("Edge/"),trident=ua.indexOf("Trident/"),msie=ua.indexOf("MSIE ");if(ua.indexOf("Firefox")>0)browser="firefox";else if(edge>0)browser="edge";else if(trident>0){var rv=ua.indexOf("rv:");browser="ie"+parseInt(ua.substring(rv+3,ua.indexOf(".",rv)),10)}else browser=msie>0?"ie"+parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10):ua.indexOf("Safari")>0&&ua.indexOf("Mac")>0&&-1===ua.indexOf("Chrome")?"safari":ua.match(/ip(ad|od|hone)/i)?"ios":ua.indexOf("Chrome")>0?"chrome":"other_browser";$("body").addClass(browser)}!function(CultureInfo){var CANADIAN_ENGLISH="en-ca",CANADIAN_FRENCH="fr-ca";function getCultureName(formatProvider){void 0===formatProvider&&(formatProvider=null);var cultureProvider=null==formatProvider?new CultureFormatProvider:formatProvider,cultureName=$("#cultureName").attr("content");return null==cultureName?cultureProvider.format(CANADIAN_ENGLISH):cultureProvider.format(cultureName)}function formatNumber(number){if(null==number)return"";var decimal,digits,seperator,splitNumber,rgx;switch(getCultureName()){case CANADIAN_FRENCH:seperator=" ";break;case CANADIAN_ENGLISH:default:seperator=","}for(digits=(splitNumber=number.toString().split("."))[0],decimal=splitNumber.length>1?"."+splitNumber[1]:"",rgx=/(\d+)(\d{3})/;rgx.test(digits);)digits=digits.replace(rgx,"$1"+seperator+"$2");return digits+decimal}CultureInfo.getCultureName=getCultureName,CultureInfo.formatNumber=formatNumber,CultureInfo.formatPrice=function(price){if(null==price)return"";switch(price=formatNumber(price),getCultureName()){case CANADIAN_FRENCH:return price+" $";case CANADIAN_ENGLISH:default:return"$"+price}}}(CultureInfo||(CultureInfo={})),jQuery(document).ready(function(){mobileFooterAccordion(),cssIdentifyBrowser(),window.addEventListener?window.addEventListener("message",receiveMessage,!1):window.attachEvent&&window.attachEvent("onmessage",receiveMessage,!1),"xs"!==BootstrapExtensions.getBootstrapBreakpoint()&&"sm"!==BootstrapExtensions.getBootstrapBreakpoint()||window.addEventListener("scroll",function(){document.getElementById("navbarPrimary").getBoundingClientRect().top;window.scrollY>0?document.getElementById("logo").classList.add("shrinkLogo"):document.getElementById("logo").classList.remove("shrinkLogo")}),$(window).on("resize",function(){mobileFooterAccordion()}),$("#back-to-top").length>0&&backToTop()}),[].forEach.call(document.querySelectorAll("img[data-src]"),function(img){$(img).hasClass("lazyload")||(img.setAttribute("src",img.getAttribute("data-src")),img.onload=function(){img.removeAttribute("data-src")})}),jQuery(document).ready(function(){checkMotorcycleTooltipStatus(),$(".tooltip-Motorcycle").click(function(){$(this).detach(),removeToolipMotorcycleSmallViewportStyle()})});var url=window.location.href.split("/")[3],ret=url.split("?"),getmicrosite=ret[0],micrositeType=$("#vdpContainer").data("vehicle-category");$("#navbarPrimary .navbar-toggle").on("click",function(){setTimeout(function(){"true"===$("#navbarPrimary .navbar-collapse").attr("aria-expanded")?($("body").addClass("menu-open"),"xs"!==BootstrapExtensions.getBootstrapBreakpoint()&&"sm"!==BootstrapExtensions.getBootstrapBreakpoint()||"motorcycles-atvs"!==getmicrosite&&"motorcycles_atvs"!==getmicrosite&&"moto_vtt"!==getmicrosite&&"moto_vtts"!==getmicrosite&&"MotorcyclesATV"!==micrositeType||($(".tooltip-Motorcycle").detach(),removeToolipMotorcycleSmallViewportStyle())):$("body").removeClass("menu-open")},10)});var addTooltipMotorcycleSmallViewportStyle=function(){"xs"===BootstrapExtensions.getBootstrapBreakpoint()||"sm"===BootstrapExtensions.getBootstrapBreakpoint()?"motorcycles-atvs"!==getmicrosite&&"motorcycles_atvs"!==getmicrosite&&"moto_vtt"!==getmicrosite&&"moto_vtts"!==getmicrosite&&"motos-vtts"!==getmicrosite&&"MotorcyclesATV"!==micrositeType||($("#navbarPrimary .navbar-toggle.collapsed").addClass("tooltip-motorcyle-showroom"),$("body").addClass("navbar-fixed-top"),$("#tooltip-Motorcycle-xs").show(),$(".tooltip-popup").css("display","block")):$("#tooltip-Motorcycle").show()},removeToolipMotorcycleSmallViewportStyle=function(){$("#navbarPrimary .navbar-toggle.collapsed").removeClass("tooltip-motorcyle-showroom"),$("body").removeClass("navbar-fixed-top"),$(".tooltip-popup").hide()},checkMotorcycleTooltipStatus=function(){var cookieManager=new CookieManager;if("true"===cookieManager.get("MotorcycleTooltipStatus").value)$(".tooltip-Motorcycle").hide(),removeToolipMotorcycleSmallViewportStyle();else if("motorcycles-atvs"===getmicrosite||"motorcycles_atvs"===getmicrosite||"moto_vtt"===getmicrosite||"moto_vtts"===getmicrosite||"motos-vtts"===getmicrosite||"MotorcyclesATV"===micrositeType){var date=new Date;date.setDate(date.getDate()+7);var cookie=new Cookie("MotorcycleTooltipStatus",!0,"/",date);cookieManager.addOrUpdate(cookie),addTooltipMotorcycleSmallViewportStyle()}},URLSearchParams=URLSearchParams||function(){"use strict";function URLSearchParams(query){var index,key,value,pairs,i,length,dict=Object.create(null);if(this[secret]=dict,query)if("string"==typeof query)for("?"===query.charAt(0)&&(query=query.slice(1)),i=0,length=(pairs=query.split("&")).length;i<length;i++)-1<(index=(value=pairs[i]).indexOf("="))?appendTo(dict,decode(value.slice(0,index)),decode(value.slice(index+1))):value.length&&appendTo(dict,decode(value),"");else if(isArray(query))for(i=0,length=query.length;i<length;i++)appendTo(dict,(value=query[i])[0],value[1]);else for(key in query)appendTo(dict,key,query[key])}var isArray=Array.isArray,URLSearchParamsProto=URLSearchParams.prototype,find=/[!'\(\)~]|%20|%00/g,plus=/\+/g,replace={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},replacer=function(match){return replace[match]},secret="__URLSearchParams__:"+Math.random();function appendTo(dict,name,value){name in dict?dict[name].push(""+value):dict[name]=isArray(value)?value:[""+value]}function decode(str){return decodeURIComponent(str.replace(plus," "))}function encode(str){return encodeURIComponent(str).replace(find,replacer)}URLSearchParamsProto.append=function(name,value){appendTo(this[secret],name,value)},URLSearchParamsProto.delete=function(name){delete this[secret][name]},URLSearchParamsProto.get=function(name){var dict=this[secret];return name in dict?dict[name][0]:null},URLSearchParamsProto.getAll=function(name){var dict=this[secret];return name in dict?dict[name].slice(0):[]},URLSearchParamsProto.has=function(name){return name in this[secret]},URLSearchParamsProto.set=function(name,value){this[secret][name]=[""+value]},URLSearchParamsProto.forEach=function(callback,thisArg){var dict=this[secret];Object.getOwnPropertyNames(dict).forEach(function(name){dict[name].forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)},URLSearchParamsProto.toJSON=function(){return{}},URLSearchParamsProto.toString=function(){var i,key,name,value,dict=this[secret],query=[];for(key in dict)for(name=encode(key),i=0,value=dict[key];i<value.length;i++)query.push(name+"="+encode(value[i]));return query.join("&")};var dP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor,updateSearchParams=function(sp){var append=sp.append;sp.append=URLSearchParamsProto.append,URLSearchParams.call(sp,sp._usp.search.slice(1)),sp.append=append},verifySearchParams=function(obj,Class){if(!(obj instanceof Class))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+Class.name)},upgradeClass=function(Class){var createSearchParams,polluteSearchParams,ClassProto=Class.prototype,searchParams=gOPD(ClassProto,"searchParams"),href=gOPD(ClassProto,"href"),search=gOPD(ClassProto,"search");!searchParams&&search&&search.set&&(polluteSearchParams=function(search){function append(name,value){URLSearchParamsProto.append.call(this,name,value),name=this.toString(),search.set.call(this._usp,name?"?"+name:"")}function del(name){URLSearchParamsProto.delete.call(this,name),name=this.toString(),search.set.call(this._usp,name?"?"+name:"")}function set(name,value){URLSearchParamsProto.set.call(this,name,value),name=this.toString(),search.set.call(this._usp,name?"?"+name:"")}return function(sp,value){return sp.append=append,sp.delete=del,sp.set=set,dP(sp,"_usp",{configurable:!0,writable:!0,value:value})}}(search),createSearchParams=function(obj,sp){return dP(obj,"_searchParams",{configurable:!0,writable:!0,value:polluteSearchParams(sp,obj)}),sp},Object.defineProperties(ClassProto,{href:{get:function(){return href.get.call(this)},set:function(value){var sp=this._searchParams;href.set.call(this,value),sp&&updateSearchParams(sp)}},search:{get:function(){return search.get.call(this)},set:function(value){var sp=this._searchParams;search.set.call(this,value),sp&&updateSearchParams(sp)}},searchParams:{get:function(){return verifySearchParams(this,Class),this._searchParams||createSearchParams(this,new URLSearchParams(this.search.slice(1)))},set:function(sp){verifySearchParams(this,Class),createSearchParams(this,sp)}}}))};return upgradeClass(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&upgradeClass(URL),URLSearchParams}();!function(URLSearchParamsProto){var iterable=function(){try{return!!Symbol.iterator}catch(error){return!1}}();"forEach"in URLSearchParamsProto||(URLSearchParamsProto.forEach=function(callback,thisArg){var names=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(name){!name.length||name in names||(names[name]=this.getAll(name)).forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)}),"keys"in URLSearchParamsProto||(URLSearchParamsProto.keys=function(){var items=[];this.forEach(function(value,name){items.push(name)});var iterator={next:function(){var value=items.shift();return{done:void 0===value,value:value}}};return iterable&&(iterator[Symbol.iterator]=function(){return iterator}),iterator}),"values"in URLSearchParamsProto||(URLSearchParamsProto.values=function(){var items=[];this.forEach(function(value){items.push(value)});var iterator={next:function(){var value=items.shift();return{done:void 0===value,value:value}}};return iterable&&(iterator[Symbol.iterator]=function(){return iterator}),iterator}),"entries"in URLSearchParamsProto||(URLSearchParamsProto.entries=function(){var items=[];this.forEach(function(value,name){items.push([name,value])});var iterator={next:function(){var value=items.shift();return{done:void 0===value,value:value}}};return iterable&&(iterator[Symbol.iterator]=function(){return iterator}),iterator}),!iterable||Symbol.iterator in URLSearchParamsProto||(URLSearchParamsProto[Symbol.iterator]=URLSearchParamsProto.entries),"sort"in URLSearchParamsProto||(URLSearchParamsProto.sort=function(){for(var i,key,value,entries=this.entries(),entry=entries.next(),done=entry.done,keys=[],values=Object.create(null);!done;)key=(value=entry.value)[0],keys.push(key),key in values||(values[key]=[]),values[key].push(value[1]),done=(entry=entries.next()).done;for(keys.sort(),i=0;i<keys.length;i++)this.delete(keys[i]);for(i=0;i<keys.length;i++)key=keys[i],this.append(key,values[key].shift())})}(URLSearchParams.prototype);var DealerEvents=function(){function DealerEvents(){var _this=this;this.dealerEventSlots=[],this.otlHidden=!1,this.hasSlotWithContent=function(){return _this.dealerEventSlots.filter(function(item){return!item.isEmpty}).length>0},this.checkVisibility=function(slotInfo){console.log("checkVisibility:: { slotElementId = '"+slotInfo.slotElementId+"', isEmpty = "+slotInfo.isEmpty+" }");var isSrp=null!==document.getElementById("SearchListings"),hasSlotWithContent=_this.dealerEventSlots.filter(function(item){return!item.isEmpty}).length>0;if(isSrp)(3===_this.dealerEventSlots.length&&void 0!==_this.takeoverSlot||_this.takeoverSlot.isEmpty)&&hasSlotWithContent&&_this.show();else{var isVdp=null!==document.getElementById("vdp-hero-widget")||null!==document.getElementById("vdpContainer");(3===_this.dealerEventSlots.length||isVdp&&1===_this.dealerEventSlots.length)&&hasSlotWithContent&&(_this.show(),isVdp&&(window.ngVdpModel&&_this.hideNgOtl(),_this.hideOtl()))}},this.reset=function(){_this.takeoverSlot=void 0,_this.dealerEventSlots=[],$("#DealerEventHolder").hide(),$(".banners.empty").removeClass("empty")},this.show=function(){for(var index=0;index<_this.dealerEventSlots.length;index++){var slotInfo=_this.dealerEventSlots[index];slotInfo.isEmpty&&$("#"+slotInfo.slotElementId).parents(".banners").addClass("empty")}$(".bordercontainer").show(),$("#DealerEventHolder").show(),$(".banners:not('.empty'):last").css("margin-bottom","0px")},this.SetupNgDealerInfoCallback=function(callback){_this.ngDealerInfoHandler=callback},this.SetupNgGalleryCallback=function(callback){_this.ngGalleryHandler=callback},this.hideNgOtl=function(){_this.ngDealerInfoHandler&&_this.ngDealerInfoHandler(),_this.ngGalleryHandler&&_this.ngGalleryHandler(),_this.otlHidden=!0},this.hideOtl=function(){$("#otlEventsHolder").hide(),$("#OTLDealerEvent").hide();var imageparent=$("#carousel-galerry div.carousel-inner").children().find("#otldealerEventImage").parent();if(imageparent.length>0)for(var i=imageparent.length-1;i--;i>0)imageparent[i].remove();_this.otlHidden=!0},this.pushTakeoverRenderEnded=function(slotInfo){_this.takeoverSlot=slotInfo,_this.checkVisibility(slotInfo)},this.pushDealerEventRenderEnded=function(slotInfo){_this.dealerEventSlots.push(slotInfo),_this.checkVisibility(slotInfo)},this.dealerEvents=function(){},this.dealerEventsNotPresent=function(){},this.homePageTakeover=function(){},this.homePageTakeoverNotPresent=function(){},this.homePageDealerEvents=function(){},this.homePageDealerEventsNotPresent=function(){},this.searchPageTakeover=function(){},this.searchPageTakeoverNotPresent=function(){},this.searchPageDealerEvents=function(){},this.searchPageDealerEventsNotPresent=function(){},this.detailPageTakeover=function(){},this.detailPageTakeoverNotPresent=function(){},this.detailPageDealerEvents=function(){},this.detailPageDealerEventsNotPresent=function(){}}return DealerEvents.getInstance=function(){return void 0===DealerEvents.instance&&(DealerEvents.instance=new DealerEvents),DealerEvents.instance},DealerEvents}();Trader.initGoogleDfp=function(){$(".js-google-dfp").each(function(){var id=$(this).attr("id");googleDfpManager&&googleDfpManager.display(id)})},Trader.initHomeGtm=function(){$("[data-gtm-name]").on("change",function(){homeGtm.addCriteriaUpdatedEvent(this)})},function(InitTrader){InitTrader.callIfExists=function(fnName){"function"==typeof fnName&&fnName()},InitTrader.initBasics=function(){$(document).ready(function(){Trader.initSignInModal(),Trader.initSSOModal(),Trader.initGoogleDfp()})},InitTrader.home=function(){var _this=this;$(document).ready(function(){Trader.initHomePage(),_this.callIfExists(Trader.initGoogleDfpManager),isMobile&&_this.callIfExists(Trader.initSplash),Trader.initSignInModal(),Trader.initSSOModal();var enableAmazonHeaderBidding=!!$("#enableAmazonHeaderBidding").val()&&$("#enableAmazonHeaderBidding").val();!1!==enableAmazonHeaderBidding&&"false"!==enableAmazonHeaderBidding||Trader.initGoogleDfp(),Trader.initHomeGtm(),_this.callIfExists(Trader.initLazyLoad)})},InitTrader.cpo=function(){var _this=this;$(document).ready(function(){_this.callIfExists(Trader.initDataLayer),_this.callIfExists(Trader.initGoogleTagManager),_this.callIfExists(Trader.initGoogleDfpManager),_this.callIfExists(Trader.initCpo),_this.callIfExists(Trader.initGoogleDfp)})},InitTrader.cpoIndividualOEM=function(){var _this=this;$(document).ready(function(){_this.callIfExists(Trader.initDataLayer),_this.callIfExists(Trader.initCpo)})}}(InitTrader||(InitTrader={}));var LocationManager=function(){function LocationManager(manager){this.cm=manager}return LocationManager.prototype.getLocation=function(){var locationCookie=this.cm.get("srchLocation");try{if(locationCookie&&locationCookie.value){var value=JSON.parse(decodeURI(locationCookie.value));if(value)return value.Location}}catch(e){console.log("locationManager.getLocation exception:"+e),locationCookie&&locationCookie.value&&console.log("locationCookie.value:"+locationCookie.value)}return""},LocationManager.prototype.getLocationPostalCodeOrCity=function(){var locationCookie=this.cm.get("srchLocation");try{if(locationCookie&&locationCookie.value){var value=JSON.parse(decodeURI(locationCookie.value));if(value&&value.Location)return value.Location.PostalCode||value.UnparsedAddress}}catch(e){console.log("locationManager.getLocationPostalCodeOrCity exception:"+e),locationCookie&&locationCookie.value&&console.log("locationCookie.value:"+locationCookie.value)}return""},LocationManager.prototype.getLocationPostalCode=function(){var locationCookie=this.cm.get("srchLocation");try{if(locationCookie&&locationCookie.value){var value=JSON.parse(decodeURI(locationCookie.value));if(value&&value.Location)return value.Location.PostalCode||""}}catch(e){console.log("locationManager.getLocationPostalCode exception:"+e),locationCookie&&locationCookie.value&&console.log("locationCookie.value:"+locationCookie.value)}return""},LocationManager.prototype.getPostalCode=function(){var pCodeCookie=this.cm.get("pCode");try{if(pCodeCookie&&pCodeCookie.value){var value=pCodeCookie.value;if(value&&StringExtensions.IsPostalCodeFormatValid(value))return value}}catch(e){console.log("locationManager.getPostalCode exception:"+e),pCodeCookie&&pCodeCookie.value&&console.log("pCodeCookie.value:"+pCodeCookie.value)}return""},LocationManager.prototype.getUnparsedAddress=function(){var locationCookie=this.cm.get("srchLocation");try{if(locationCookie&&locationCookie.value){var value=JSON.parse(decodeURI(locationCookie.value));if(value&&value.UnparsedAddress)return value.UnparsedAddress}}catch(e){console.log("locationManager.getUnparsedAddress exception:"+e),locationCookie&&locationCookie.value&&console.log("locationCookie.value:"+locationCookie.value)}return""},LocationManager.prototype.isServerGeneratedLocation=function(){var locationCookie=this.cm.get("srchLocation");try{if(locationCookie&&locationCookie.value){var value=JSON.parse(decodeURI(locationCookie.value));if(value&&value.ServerGenerated)return!0}}catch(e){console.log("locationManager.isServerGeneratedLocation exception:"+e),locationCookie&&locationCookie.value&&console.log("locationCookie.value:"+locationCookie.value)}return!1},LocationManager.prototype.removeLegacyLocation=function(){var locationCookie;(locationCookie=this.cm.get("{E7ABF06F-D6A6-4c25-9558-3932D3B8A04D}")).domain=window.location.hostname;var newarr=locationCookie.value.split("&").filter(function(a){return a.indexOf("SearchLocation=",0)<0});locationCookie.value=newarr.join("&"),locationCookie.expiry=this.addMonths(new Date,1),this.cm.addOrUpdateWithoutDomain(locationCookie)},LocationManager.prototype.setLocation=function(locationJSON){var locationCookie,oldLocationCookie;(locationCookie=this.cm.get("srchLocation")).value=encodeURI(locationJSON),locationCookie.expiry=this.addMonths(new Date,12),this.cm.addOrUpdate(locationCookie),(oldLocationCookie=this.cm.get("locationCookie")).domain=window.location.hostname,oldLocationCookie.expiry=this.addMonths(new Date,-1),this.cm.addOrUpdate(oldLocationCookie)},LocationManager.prototype.setLocationCookies=function(locationJSON){this.setPostalCodeCookie(locationJSON);var previousPostalCode=this.getLocationPostalCode();!this.postalCodeCookieExists()&&previousPostalCode&&StringExtensions.IsPostalCodeFormatValid(previousPostalCode)&&this.setPostalCodeCookieByCode(previousPostalCode),this.setLocation(locationJSON),this.removeLegacyLocation()},LocationManager.prototype.addMonths=function(date,m){var d=new Date(date),years=Math.floor(m/12),months=m-12*years;return years&&d.setFullYear(d.getFullYear()+years),months&&d.setMonth(d.getMonth()+months),d},LocationManager.prototype.createPostalCodeCookie=function(){var postalCodeCookie;return(postalCodeCookie=this.cm.get("pCode"))||((postalCodeCookie=new Cookie("pCode","")).domain=window.location.hostname),postalCodeCookie},LocationManager.prototype.setPostalCodeCookie=function(locationJson){if(locationJson){var locationObj=JSON.parse(locationJson);if(locationObj&&locationObj.Location&&locationObj.Location.PostalCode){var postalCodeCookie=this.createPostalCodeCookie();postalCodeCookie.expiry=this.addMonths(new Date,12),postalCodeCookie.value=locationObj.Location.PostalCode||"",this.cm.addOrUpdate(postalCodeCookie)}}},LocationManager.prototype.setDevicePostalCodeCookie=function(postalCode){var postalCodeCookie=this.createPostalCodeCookie();postalCode&&(postalCodeCookie.expiry=this.addMonths(new Date,12),postalCodeCookie.value=postalCode||""),this.cm.addOrUpdate(postalCodeCookie)},LocationManager.prototype.setPostalCodeCookieByCode=function(postalCode){var postalCodeCookie;(postalCodeCookie=this.cm.get("pCode"))||((postalCodeCookie=new Cookie("pCode","")).domain=window.location.hostname),postalCodeCookie.value=postalCode,this.cm.addOrUpdate(postalCodeCookie)},LocationManager.prototype.postalCodeCookieExists=function(){var postalCodeCookie=this.cm.get("pCode");return StringExtensions.IsPostalCodeFormatValid(postalCodeCookie.value)},LocationManager}(),googletag=googletag||{};googletag.cmd=googletag.cmd||[],function(){var gads=document.createElement("script");gads.async=!0,gads.type="text/javascript",gads.src="https://www.googletagservices.com/tag/js/gpt.js";var node=document.getElementsByTagName("script")[0];node.parentNode.insertBefore(gads,node)}(),function(a9,a,p,s,t,A,g){function q(c,r){a[a9]._Q.push([c,r])}a[a9]||(a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(A=p.createElement(s)).async=!0,A.src="//c.amazon-adsystem.com/aax2/apstag.js",(g=p.getElementsByTagName(s)[0]).parentNode.insertBefore(A,g))}("apstag",window,document,"script");var StringExtensions,slotHulk=slotHulk||[],amazonSlots=amazonSlots||[],amazonStandardSizes=amazonStandardSizes||["300x250","300x600","728x90","300x50","320x50"],GoogleDfpManager=function(){function GoogleDfpManager(bannerSet){var _this=this;this.bannerSet=bannerSet,dealerEvent=DealerEvents.getInstance(),this.attacheEventHandler();var enableAmazonHeaderBidding=!!$("#enableAmazonHeaderBidding").val()&&$("#enableAmazonHeaderBidding").val();googletag.cmd.push(function(){for(var deacTileSizeMap=googletag.sizeMapping().addSize([1200,0],[480,360]).addSize([1024,0],[480,360]).addSize([768,0],[480,360]).addSize([375,0],[300,225]).build(),hulkTileSizeMap=googletag.sizeMapping().addSize([1200,0],[300,100]).addSize([992,0],[300,100]).addSize([768,0],[241,81]).addSize([375,0],[241,81]).build(),eventsSizeMap=googletag.sizeMapping().addSize([1200,0],[[300,120],"fluid"]).addSize([992,0],[[300,120],"fluid"]).addSize([768,0],[[241,96],"fluid"]).addSize([750,200],[200,90],"fluid").addSize([375,0],[[241,96],"fluid"]).build(),splashSizeMap=googletag.sizeMapping().addSize([480,320],[480,320]).addSize([320,480],[320,480]).build(),bigBoxSizeMap=googletag.sizeMapping().addSize([1200,0],[300,250]).addSize([992,0],[300,250]).addSize([0,0],[]).build(),bigBoxOneSizeMap=(googletag.sizeMapping().addSize([1200,0],[300,250]).addSize([0,0],[]).build(),googletag.sizeMapping().addSize([1200,0],[[300,250],[300,600]]).addSize([0,0],[]).build()),bigBoxHomeSizeMap=googletag.sizeMapping().addSize([1200,0],[300,250]).addSize([992,0],[300,250]).addSize([768,0],[300,250]).addSize([0,0],[]).build(),bigBoxVDPSizeMap=googletag.sizeMapping().addSize([0,0],[]).addSize([768,0],[300,250]).addSize([320,0],[300,250]).build(),leaderboardSizeMap=googletag.sizeMapping().addSize([1200,0],[728,90]).addSize([992,0],[728,90]).addSize([768,0],[728,90]).addSize([0,0],[]).build(),hulkbbCPOSizeMap=googletag.sizeMapping().addSize([1200,0],[300,250]).addSize([992,0],[300,250]).addSize([768,0],[728,90]).addSize([320,0],[300,250]).build(),MastheadCPOSizeMap=googletag.sizeMapping().addSize([1200,0],[1920,350]).addSize([992,0],[1024,270]).addSize([768,0],[768,270]).addSize([320,0],[376,220]).build(),_i=0,_a=bannerSet.pageLevelTargets;_i<_a.length;_i++){var pageLevelTarget=_a[_i];"screensize"===pageLevelTarget.key.toLowerCase()?googletag.pubads().setTargeting(pageLevelTarget.key,BootstrapExtensions.getBootstrapBreakpoint()):googletag.pubads().setTargeting(pageLevelTarget.key,pageLevelTarget.value)}for(var _b=0,_c=bannerSet.banners;_b<_c.length;_b++){var banner=_c[_b],isVdp=null!==document.getElementById("vdp-hero-widget")||null!==document.getElementById("vdpContainer");banner.isOopBanner?slotHulk[banner.htmlDivId]=googletag.defineOutOfPageSlot(banner.adUnitPath,banner.htmlDivId).addService(googletag.pubads()):slotHulk[banner.htmlDivId]=googletag.defineSlot(banner.adUnitPath,banner.sizes,banner.htmlDivId).addService(googletag.pubads()),-1!==banner.htmlDivId.indexOf("hulk-tile")&&slotHulk[banner.htmlDivId].defineSizeMapping(hulkTileSizeMap),"splashPlus"===banner.htmlDivId&&slotHulk[banner.htmlDivId].defineSizeMapping(splashSizeMap),"hulk-bb-cpo"===banner.htmlDivId&&slotHulk[banner.htmlDivId].defineSizeMapping(hulkbbCPOSizeMap),-1!==banner.htmlDivId.indexOf("events")&&(isVdp?slotHulk[banner.htmlDivId].defineSizeMapping(deacTileSizeMap):slotHulk[banner.htmlDivId].defineSizeMapping(eventsSizeMap)),"hulk-bb-advancedsearch"!==banner.htmlDivId&&"hulk-bb-vdp-gallery"!==banner.htmlDivId||slotHulk[banner.htmlDivId].defineSizeMapping(bigBoxSizeMap),"hulk-bb-homepage"===banner.htmlDivId&&slotHulk[banner.htmlDivId].defineSizeMapping(bigBoxHomeSizeMap),"hulk-bb1"===banner.htmlDivId&&slotHulk[banner.htmlDivId].defineSizeMapping(bigBoxOneSizeMap),"hulk-bb-vdp-gallery-xs"===banner.htmlDivId&&slotHulk[banner.htmlDivId].defineSizeMapping(bigBoxVDPSizeMap),"hulk-leaderboard"!==banner.htmlDivId&&"hulk-galleryleaderboard"!==banner.htmlDivId||slotHulk[banner.htmlDivId].defineSizeMapping(leaderboardSizeMap),"hulk-bb-cpo-masthead-0"!==banner.htmlDivId&&"hulk-bb-cpo-masthead-1"!==banner.htmlDivId&&"hulk-bb-cpo-masthead-2"!==banner.htmlDivId&&"hulk-bb-cpo-masthead-3"!==banner.htmlDivId||slotHulk[banner.htmlDivId].defineSizeMapping(MastheadCPOSizeMap);for(var _d=0,_e=banner.targets;_d<_e.length;_d++){var target=_e[_d];slotHulk[banner.htmlDivId].setTargeting(target.key,target.value)}if("true"===enableAmazonHeaderBidding||!0===enableAmazonHeaderBidding){var amazonSlotSizes,amazonSizeMap=[];amazonSizeMap.push(banner.sizes),(amazonSlotSizes=_this.isAmazonStandardSize(amazonSizeMap)).length&&_this.amazonHeaderBidSlotBuilder(banner.htmlDivId,banner.adUnitPath,amazonSlotSizes)}}("true"!==enableAmazonHeaderBidding&&!0!==enableAmazonHeaderBidding||_this.amazonHeaderBidFnInit(_this.bannerSet.pageName),_this.bannerSet.lazyLoadDisabled||"SRP"!==_this.bannerSet.pageName)?(googletag.pubads().collapseEmptyDivs(),!("SRP"!==_this.bannerSet.pageName||!isMobile)||(googletag.pubads().disableInitialLoad(),googletag.pubads().enableSingleRequest())):googletag.pubads().enableLazyLoad({fetchMarginPercent:0,renderMarginPercent:0,mobileScaling:2});googletag.pubads().enableAsyncRendering(),googletag.enableServices()})}return GoogleDfpManager.prototype.amazonHeaderBidFnInit=function(pageName){amazonSlots&&0!=amazonSlots.length&&(apstag.init({pubID:"3775",adServer:"googletag"}),apstag.fetchBids({slots:amazonSlots,timeout:2e3},function(bids){googletag.cmd.push(function(){apstag.setDisplayBids()}),"SRP"!==pageName||isMobile?"SRP"===pageName&&isMobile?(window.bannerManager=new SrpBannerManagerMobile(window.googleDfpManager),window.bannerManager.update()):"Home"!==pageName&&"VDP"!==pageName||Trader.initGoogleDfp():window.googleDfpManager.refreshAll()}))},GoogleDfpManager.prototype.amazonHeaderBidSlotBuilder=function(slotID,slotName,slotSize){var item={slotID:slotID,slotName:slotName,sizes:slotSize};amazonSlots.push(item)},GoogleDfpManager.prototype.isAmazonStandardSize=function(slots){for(var size="",amazonSlots=[],i=0;i<slots.length;i++)Array.isArray(slots[i])&&0!=slots[i].length&&(Array.isArray(slots[i][0])?-1!=$.inArray(slots[i][0].join("x"),amazonStandardSizes)?amazonSlots.push(slots[i][0]):slots[i][1]&&-1!=$.inArray(slots[i][1].join("x"),amazonStandardSizes)&&amazonSlots.push(slots[i][1]):(size=slots[i].join("x"),-1!=$.inArray(size,amazonStandardSizes)&&amazonSlots.push(slots[i])));return amazonSlots},GoogleDfpManager.prototype.isInview=function(indicator,percentinview){if(document.hasFocus()){var $indicator=$("#"+indicator);if(0===$indicator.length)return!1;var docViewTop=$(window).scrollTop(),docViewBottom=docViewTop+$(window).height(),elemTop=$indicator.offset().top,elemBottom=elemTop+$indicator.height(),flexHeight=(1-percentinview)*$indicator.height();return elemBottom>=docViewTop&&elemTop<=docViewBottom&&elemBottom-flexHeight<=docViewBottom&&elemTop+flexHeight>=docViewTop}return!1},GoogleDfpManager.prototype.openMidlistBanner=function(theBanner,delay){null!=theBanner.find("iframe")&&setTimeout(function(){(theBanner.data("openQueueTime")<=$.now()&&1==theBanner.data("mouseInBanner")||0==delay)&&(theBanner.data("openQueueTime",0),theBanner.find("iframe").contents().find("#ATsmallimage").fadeOut(),theBanner.find("iframe").contents().find("#ATlargeimage").fadeIn(),theBanner.find("iframe").delay(200).animate({height:"250px"},500,function(){theBanner.data("closeQueueTime",0),theBanner.data("openQueueTime",1),1==theBanner.data("triggerGA")&&theBanner.data("triggerGA",!1)}))},delay,theBanner)},GoogleDfpManager.prototype.closeMidlistBanner=function(theBanner,delay){setTimeout(function(){(theBanner.data("closeQueueTime")<=$.now()&&0==theBanner.data("mouseInBanner")||0==delay)&&(theBanner.data("closeQueueTime",0),theBanner.find("iframe").animate({height:"100px"},500,function(){theBanner.find("iframe").contents().find("#ATsmallimage").show(),theBanner.find("iframe").contents().find("#ATlargeimage").fadeOut()}),theBanner.data("closeQueueTime",1),theBanner.data("openQueueTime",0))},delay,theBanner)},GoogleDfpManager.prototype.display=function(htmldivid){googletag.cmd.push(function(){googletag.display(htmldivid)}),this.bannerSet.lazyLoadDisabled||"SRP"==this.bannerSet.pageName||this.refresh(htmldivid)},GoogleDfpManager.prototype.refreshWithCorrelator=function(htmldivid){googletag.cmd.push(function(){googletag.pubads().refresh([slotHulk[htmldivid]],{changeCorrelator:!0})})},GoogleDfpManager.prototype.refresh=function(htmldivid){$("#"+htmldivid).show(),googletag.cmd.push(function(){googletag.pubads().clear([slotHulk[htmldivid]])});var item=this.bannerSet.banners.filter(function(obj){return obj.htmlDivId===htmldivid})[0];item&&item.isOopBanner?($("body").removeClass("mastheadDisplayed"),$(".at_masthead").removeAttr("style"),googletag.cmd.push(function(){googletag.pubads().refresh([slotHulk[htmldivid]],{changeCorrelator:!1})})):item&&item.lazyLoading&&!this.isInview(htmldivid,.01)?($("#"+htmldivid).off("inview"),$("#"+htmldivid).on("inview",function(event,isInView){isInView&&($("#"+htmldivid).off("inview"),googletag.cmd.push(function(){googletag.pubads().refresh([slotHulk[htmldivid]],{changeCorrelator:!1})}))})):googletag.cmd.push(function(){googletag.pubads().refresh([slotHulk[htmldivid]],{changeCorrelator:!1})})},GoogleDfpManager.prototype.refreshAll=function(){if(dealerEvent.reset(),googletag.cmd.push(function(){googletag.pubads().updateCorrelator()}),$("body").removeClass("mastheadDisplayed"),$(".at_masthead").removeAttr("style"),this.bannerSet.lazyLoadDisabled)googletag.cmd.push(function(){googletag.pubads().refresh()});else for(var _i=0,_a=this.bannerSet.banners;_i<_a.length;_i++){var banner=_a[_i];this.refresh(banner.htmlDivId)}},GoogleDfpManager.prototype.clearAllTargetings=function(){googletag.cmd.push(function(){googletag.pubads().clearTargeting()})},GoogleDfpManager.prototype.clearTargeting=function(key){googletag.cmd.push(function(){googletag.pubads().clearTargeting(key)})},GoogleDfpManager.prototype.updateTargeting=function(key,value){googletag.cmd.push(function(){googletag.pubads().setTargeting(key,value)})},GoogleDfpManager.prototype.attacheEventHandler=function(){var _this=this;googletag.cmd.push(function(){googletag.pubads().addEventListener("slotRenderEnded",function(e){var slotElementId=e.slot.getSlotElementId();switch(slotElementId){case"hulk-midlist":_this.hulkMidlistCssAligment();break;case"hulk-oop":dealerEvent.pushTakeoverRenderEnded(new GoogleDfpSlotInfo(slotElementId,e.isEmpty));var prepopulatedSearchFields_1=$("#enablePrepopulatedSearchFieldsHomePage").data("enableprepopulatedsearchfieldshomepage"),enablePrepopulatedSearchFieldsHomePage_1=!!prepopulatedSearchFields_1&&"true"==prepopulatedSearchFields_1.toLowerCase();if(!e.isEmpty&&enablePrepopulatedSearchFieldsHomePage_1)try{var make=e.slot.getHtml().split('make = "')[1].split(";")[0].replace('"',"");$("#rfMakes").val(make).change(),dfpModel=e.slot.getHtml().split('model = "')[1].split(";")[0].replace('"',"")}catch(error){console.error("DFP HomePage prepopulated fields failed.")}break;case"gpt-ad-events1":case"gpt-ad-events2":case"gpt-ad-events3":case"gpt-ad-events4":dealerEvent.pushDealerEventRenderEnded(new GoogleDfpSlotInfo(slotElementId,e.isEmpty))}})})},GoogleDfpManager.prototype.hulkMidlistCssAligment=function(){var _this=this,currrentElement=$("#hulk-midlist");currrentElement.mouseover(function(){currrentElement&&0!==currrentElement.find("iframe").contents().find("#ATsmallimage").length&&1!=currrentElement.data("mouseInBanner")&&currrentElement.height()>=100&&(currrentElement.data("mouseInBanner",!0),null==currrentElement.data("preventOpen")&&(currrentElement.data("triggerGA",!0),currrentElement.data("preventOpen",!1)),1==currrentElement.data("preventOpen")?currrentElement.data("preventOpen",!1):(currrentElement.data("openQueueTime",$.now()+1e3),currrentElement.data("closeQueueTime",0),_this.openMidlistBanner(currrentElement,1e3)))}),currrentElement.mouseleave(function(){0!=currrentElement.data("mouseInBanner")&&"startExpanded"!=currrentElement.find("iframe").contents().find("#bannerURL").attr("class")&&currrentElement.height()>=100&&(currrentElement.data("mouseInBanner",!1),currrentElement.data("openQueueTime",0),currrentElement.data("closeQueueTime",$.now()+2e3),_this.closeMidlistBanner(currrentElement,2e3))})},GoogleDfpManager}(),GoogleDfpBannerSet=function(){return function(pageLevelTargets,banners,lazyLoadDisabled,pageName){this.pageLevelTargets=pageLevelTargets,this.banners=banners,this.lazyLoadDisabled=lazyLoadDisabled,this.pageName=pageName}}(),GoogleDfpBanner=function(){return function(htmlDivId,adUnitPath,sizes,targets,lazyLoading,isOopBanner){this.htmlDivId=htmlDivId,this.adUnitPath=adUnitPath,this.sizes=sizes,this.targets=targets,this.lazyLoading=lazyLoading,this.isOopBanner=isOopBanner}}(),GoogleDfpBannerTargeting=function(){return function(key,value){this.key=key,this.value=value}}(),GoogleDfpSlotInfo=function(){return function(slotElementId,isEmpty){this.slotElementId=slotElementId,this.isEmpty=isEmpty}}();!function(StringExtensions){StringExtensions.guid=function(format){var p8=function(s){void 0===s&&(s=!1);var p=(Math.random().toString(16)+"000000000").substr(2,8);return s?"-"+p.substr(0,4)+"-"+p.substr(4,4):p};return"D"==format?p8()+p8(!0)+p8(!0)+p8():"{"+p8()+p8(!0)+p8(!0)+p8()+"}"},StringExtensions.removeDiacritics=function(str){var diacriticsMap={E:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g,a:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g,e:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g};for(var x in diacriticsMap)str=str.replace(diacriticsMap[x],x);return str},StringExtensions.CultureSort=function(a,b){return a.localeCompare(b)},StringExtensions.IsPostalCodeFormatValid=function(input){return new RegExp(/^(\s*)[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]([ -])?\d[ABCEGHJKLMNPRSTVWXYZ]\d(\s*)$/i).test(input)},StringExtensions.camelize=function(str){return str.replace(/(?:^\w|[A-Z]|\b\w)/g,function(letter,index){return 0==index?letter.toLowerCase():letter.toUpperCase()}).replace(/\s+/g,"")},StringExtensions.titleCase=function(str){return str.toLowerCase().split(" ").map(function(word){return word.replace(word[0],word[0].toUpperCase())}).join(" ")},StringExtensions.sentenceCase=function(str){return str.charAt(0).toUpperCase()+str.slice(1)},StringExtensions.AreEquivalentStrings=function(left,right){return!(null!=left&&""!=left||null!=right&&""!=right)||left==right}}(StringExtensions||(StringExtensions={}));var DocumentCookieProvider=function(){function DocumentCookieProvider(){}return DocumentCookieProvider.prototype.get=function(){return document.cookie},DocumentCookieProvider.prototype.set=function(newCookies){document.cookie=newCookies},DocumentCookieProvider}(),Cookie=function(){function Cookie(name,value,_path,_expiry,_domain){this.name=name,this.value=value,this._expiry=_expiry,this._domain=_domain,this.EnglishDomain=".autotrader.ca",this.FrenchDomain=".autohebdo.net",this.path="/",this.domain=null!=_domain?_domain:-1!=window.location.hostname.indexOf(this.FrenchDomain)?this.FrenchDomain:this.EnglishDomain,null!=_path&&(this.path=_path),null!=_expiry&&(this.expiry=_expiry)}return Cookie.prototype.toString=function(){var dateString=null==this.expiry?"":"; expires="+this.expiry.toUTCString(),pathString=null==this.path?"":"; path="+this.path;return this.name+"="+this.value+dateString+pathString+"; domain="+this.domain},Cookie.prototype.toStringWithoutDomain=function(){var dateString=null==this.expiry?"":"; expires="+this.expiry.toUTCString(),pathString=null==this.path?"":"; path="+this.path;return this.name+"="+this.value+dateString+pathString},Cookie}(),CookieManager=function(){function CookieManager(_provider){void 0===_provider&&(_provider=null),this._provider=_provider,null==_provider&&(this._provider=new DocumentCookieProvider)}return CookieManager.prototype.getAll=function(){return this._provider.get()},CookieManager.prototype.get=function(name){if(null==name||""===name)throw new Error("Cookie name cannot be null or empty");var cookies=this._provider.get(),r=(cookies="; "+cookies).split("; "+name+"=").pop().split(";").shift();return new Cookie(name,null!=r?r:"")},CookieManager.prototype.addOrUpdate=function(cookie){if(null==cookie)throw new Error("Cookie name cannot be null or empty");this._provider.set(cookie.toString())},CookieManager.prototype.addOrUpdateWithoutDomain=function(cookie){if(null==cookie)throw new Error("Cookie name cannot be null or empty");this._provider.set(cookie.toStringWithoutDomain())},CookieManager}(),ResourcesManager=function(){function ResourcesManager(){var resources=globalResources;this.cultureName=CultureInfo.getCultureName(),this.searchResources=resources.srpResources,this.vdpResources=resources.vdpFrontEndResources}return ResourcesManager.prototype.getSearchResource=function(key){if(null==key)throw new Error("key parameter can't be null");return null==this.searchResources?"":null==this.searchResources[key]?"":null==this.searchResources[key][this.cultureName]?"":this.searchResources[key][this.cultureName]},ResourcesManager.prototype.getVdpResource=function(key){if(null==key)throw new Error("key parameter can't be null");return null==this.vdpResources?"":null==this.vdpResources[key]?"":null==this.vdpResources[key][this.cultureName]?"":this.vdpResources[key][this.cultureName]},ResourcesManager}(),tokenTypeKey="tokenType",tokenValueKey="accessToken";function isTokenSet(){return null!=sessionStorage.getItem(tokenTypeKey)&&null!=sessionStorage.getItem(tokenValueKey)}function resetToken(){sessionStorage.removeItem(tokenTypeKey),sessionStorage.removeItem(tokenValueKey)}function setToken(type,value){alert("setting"),sessionStorage.setItem(tokenTypeKey,type),sessionStorage.setItem(tokenValueKey,value)}function setRequestHeaders(xhr){xhr.setRequestHeader("Authorization",sessionStorage.getItem(tokenTypeKey)+" "+sessionStorage.getItem(tokenValueKey))}var googlekey="6Lel1kcUAAAAACq7KCKN1i-l_-1h8udifHjkrTFP",userValidated=!1,callbackRecaptcha=function(response){if(response.length>0){console.log("userValidated = "+!0)}};function resendActivateAccountEmail(){var email="test@trader.ca";$(".loginContainer, .loginContainer .headerRegister, .registerContainer, .headerForgotPassword, .registerContainer .headerRegister, .activateAccountContainer").hide(),$(".resendActivateContainer").show(),$.ajax({type:"POST",url:"/MyAccount/ResendActivateAccountEmail",contentType:"application/x-www-form-urlencoded",data:"Email="+email,async:!0,success:function(){$(".resendActivateStep1, .resendActivateErrorContainer").hide(),$(".resendActivateStep2").show()},error:function(){$(".resendActivateStep2").hide(),$(".resendActivateErrorContainer").show()}})}function activateAccount(){$(".registerContainer, .resendActivateContainer, .headerQuickSignin, .ssoSigninWrapper, .resetPasswordFormWrapper, .headerResetPassword").hide(),$(".activateAccountContainer, .registerSigninWrapper, .loginContainer, .loginContainer .headerRegister").show()}function organicRegister(email,pass,optInAutotrader,optInPartners){var registerInfo={UserEmail:email,ConfirmedPassWord:pass,NotifyMe:optInAutotrader,CommercialMe:optInPartners};$.ajax({type:"POST",url:"/MyAccount/RegisterOrganicNew",contentType:"application/json",data:JSON.stringify(registerInfo),async:!0,success:function(){$(".registerForm").hide(),$(".registerConfirmation").show()},error:function(xhr,textStatus,errorMes){403===xhr.status?($("#lbl-registerEmail").addClass("invalid-data"),$("#lbl-registerEmail .help-msg.required, #lbl-registerEmail .help-msg.invalid-format, .general-error").hide(),$("#lbl-registerEmail .help-msg.user-exists").show()):(xhr.status,$(".general-error").show())}})}function extAuth(url){resetToken(),window.location.href=url}function forgotPassword(email){function passwordForgotFailed(){$(".errorEmailNotFound, .errorEmailNotActive").hide(),$(".forgotPasswordFormWrapper .pw-reset-error-container, .forgotPasswordFormWrapper .txtGeneralError").show()}$.ajax({type:"POST",url:"/MyAccount/ResetMyPassword",contentType:"application/x-www-form-urlencoded",data:"Email="+email,async:!0,success:function(){$(".forgotPasswordFormWrapper").hide(),$(".forgotPasswordConfirmWrapper").show()},error:function(xhr,textStatus,errorMes){400==xhr.status?passwordForgotFailed():404==xhr.status?($(".errorEmailNotActive, .forgotPasswordFormWrapper .txtGeneralError").hide(),$(".forgotPasswordFormWrapper .pw-reset-error-container, .errorEmailNotFound").show()):406==xhr.status?($(".errorEmailNotFound, .forgotPasswordFormWrapper .txtGeneralError").hide(),$(".forgotPasswordFormWrapper .pw-reset-error-container, .errorEmailNotActive").show()):passwordForgotFailed()}})}function showResetPasswordForm(){$(".resetPasswordFormWrapper, .headerResetPassword").show(),$(".registerContainer, .registerSigninWrapper, .headerRegister, .resendActivateContainer, .resetPasswordConfirmWrapper, .headerForgotPassword, .forgotPasswordFormWrapper, .forgotPasswordConfirmWrapper, .activateAccountContainer").hide()}function resetPassword(email,password){$.ajax({type:"POST",url:"/MyAccount/ResetMyPassword",contentType:"application/x-www-form-urlencoded",data:"Email="+email+"&Password="+password,async:!0,success:function(){$(".resetPasswordFormWrapper").hide(),$(".resetPasswordConfirmWrapper").show()},error:function(xhr,textStatus,errorMes){$(".resetPasswordFormWrapper").hide(),$(".resetPasswordConfirmWrapper").show()}})}function organicAuth(email,pass){function failedOrganicLoginInternally(email){$(".organicSigninWrapper .row.general-error, .organicSigninWrapper .row.general-error .txtGeneralError").show(),$(".organicSigninWrapper .row.general-error .txtEmailPasswordError").hide()}resetToken();$.ajax({type:"POST",url:"/token",contentType:"application/x-www-form-urlencoded",data:"grant_type=password&username="+email+"&password="+pass+"&persist="+!0,async:!0,success:function(data){window.location.reload()},error:function(xhr,textStatus,errorMes){if(400===xhr.status){if(xhr.responseJSON&&xhr.responseJSON.error){var error=xhr.responseJSON.error;"invalid_grant"==error?($(".organicSigninWrapper .row.general-error, .organicSigninWrapper .row.general-error .txtEmailPasswordError").show(),$(".organicSigninWrapper .row.general-error .txtGeneralError").hide()):"user_not_verified"==error?($(".organicSigninWrapper .row.general-error, .organicSigninWrapper .row.general-error .txtEmailPasswordError").show(),$(".organicSigninWrapper .row.general-error .txtGeneralError").hide()):"user_not_exist"==error?($(".organicSigninWrapper .row.general-error, .organicSigninWrapper .row.general-error .txtEmailPasswordError").show(),$(".organicSigninWrapper .row.general-error .txtGeneralError").hide()):failedOrganicLoginInternally()}}else failedOrganicLoginInternally()}})}function validateFormFields(event){event.preventDefault(),event.stopPropagation();var formValid=!1;if("passAuth"===event.target.id)isValidEmail("username"),isValidPassword("password"),isValidEmail("username")&&isValidPassword("password")&&(organicAuth($("#username").val(),$("#password").val()),$(".organicSigninWrapper .row.general-error").hide(),formValid=!0);else if("btnRegSubmit"===event.target.id){var registerEmail=$("#registerEmail").val().toString(),registerPassword=$("#registerPassword").val().toString(),optInAutotrader=$("optInAutotrader").val().toString(),optInPartners=$("optInPartners").val().toString();isValidEmail("registerEmail"),isValidPassword("registerPassword"),isValidPassword("registerConfirmPassword"),isValidEmail("registerEmail")&&isValidPassword("registerPassword")&&isValidPassword("registerConfirmPassword")&&(organicRegister(registerEmail,registerPassword,optInAutotrader,optInPartners),formValid=!0)}else if("btnForgotPassword"===event.target.id)isValidEmail("emailForgotPassword"),isValidEmail("emailForgotPassword")&&(forgotPassword($("#emailForgotPassword").val().toString()),formValid=!0);else if("btnResetPassword"===event.target.id){if(isValidPassword("resetPassword"),isValidPassword("resetConfirmPassword"),isValidPassword("resetPassword")&&isValidPassword("resetConfirmPassword")){resetPassword("test@trader.ca",resetPassword),formValid=!0}}else"username"===event.target.id||"registerEmail"===event.target.id||"emailForgotPassword"===event.target.id?formValid=isValidEmail(event.target.id):"password"===event.target.id||"registerPassword"===event.target.id||"registerConfirmPassword"===event.target.id?formValid=isValidPassword(event.target.id):($("#lbl-"+event.target.id).removeClass("invalid-data"),$("#lbl-"+event.target.id+" .help-msg.required, #lbl-"+event.target.id+" .help-msg.invalid-format").hide(),formValid=!0);return formValid}function isValidEmail(emailField){var email=document.getElementById(emailField);return email.value.trim().length>0?("emailForgotPassword"===emailField&&($("#lbl-"+emailField+" .lbl-email").show(),$("#lbl-"+emailField+" .help-msg.general-error").hide()),$("#lbl-"+emailField).addClass("with-value"),email.validity.typeMismatch?($("#lbl-"+emailField).addClass("invalid-data type-mismatch"),$("#lbl-"+emailField+" .help-msg.required").hide(),$("#lbl-"+emailField+" .help-msg.invalid-format").show(),!1):($("#lbl-"+emailField).removeClass("invalid-data type-mismatch"),$("#lbl-"+emailField+" .help-msg.required, #lbl-"+emailField+" .help-msg.invalid-format").hide(),!0)):($("#lbl-"+emailField).removeClass("with-value"),$("#lbl-"+emailField).addClass("required"),$("#lbl-"+emailField+" .help-msg.required").show(),$("#lbl-"+emailField+" .help-msg.invalid-format").hide(),!1)}function isValidPassword(passwordField){var password=document.getElementById(passwordField),passwordValid=!1;return password.value.trim().length<=0?("registerPassword"!==passwordField&&"registerConfirmPassword"!==passwordField||($("#registerPassword").popover("hide"),$("#lbl-registerConfirmPassword").addClass("invalid-data"),$("#lbl-registerConfirmPassword .required").show()),$("#lbl-"+passwordField).removeClass("with-value"),$("#lbl-"+passwordField).addClass("invalid-data"),$("#lbl-"+passwordField+" .invalid-format").hide(),$("#lbl-"+passwordField+" .required").show(),passwordValid=!1):"registerPassword"===passwordField||"registerConfirmPassword"===passwordField?/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])\w{6,}$/.test(password.value.trim())?($("#"+passwordField).popover("hide"),$("#lbl-"+passwordField).removeClass("invalid-data"),$("#lbl-"+passwordField+" .invalid-format, #lbl-"+passwordField+" .password-mismatch, #lbl-"+passwordField+" .required").hide(),passwordValid=validateMatchingPasswords()):($("#"+passwordField).popover("show"),$("#lbl-"+passwordField).addClass("invalid-data"),$("#lbl-"+passwordField+" .invalid-format").show(),$("#lbl-"+passwordField+" .password-mismatch, #lbl-"+passwordField+".required").hide(),passwordValid=!1):($("#lbl-"+passwordField).addClass("with-value"),$("#lbl-"+passwordField).removeClass("invalid-data"),$("#lbl-"+passwordField+" .invalid-format, #lbl-"+passwordField+" .required").hide(),passwordValid=!0),passwordValid}function validateMatchingPasswords(){return $("#registerPassword").val()===$("#registerConfirmPassword").val()?($("#registerPassword").popover("hide"),$("#lbl-registerConfirmPassword").removeClass("invalid-data"),$("#lbl-registerConfirmPassword .invalid-format, #lbl-registerConfirmPassword .password-mismatch, #lbl-registerConfirmPassword .required").hide(),!0):($("#lbl-registerConfirmPassword").addClass("invalid-data"),$("#lbl-registerConfirmPassword .invalid-format, #lbl-registerConfirmPassword .required").hide(),$("#lbl-registerConfirmPassword .password-mismatch").show(),!1)}$(document).ready(function(){$(".registerContainer").hide(),$(".loginContainer").show(),$(".loginContainer .loginInput").each(function(e){""===$("#"+this.id).val()||null===$("#"+this.id).val()?$("label[for="+this.id+"]").addClass("noVal"):$("label[for="+this.id+"]").removeClass("noVal")})}),$("#login-modal-container input").on("focus",function(e){this.placeholder="",$("label[for="+this.id+"]").removeClass("noVal")}).on("blur",function(e){validateFormFields(e),""!==$("#"+this.id).val()&&null!==$("#"+this.id).val()||$("label[for="+this.id+"]").addClass("noVal")}),$(".loginContainer .lnkForgotPassword").click(function(e){e.preventDefault(),$(".headerForgotPassword, .forgotPasswordFormWrapper").show(),$(".headerRegister, .registerSigninWrapper").hide()}),$(".loginContainer #passAuth").click(function(e){validateFormFields(e)}),$("#benefits").hover(function(e){$(this).popover({html:!0,trigger:"hover",content:function(){return $("#tip-"+this.id).html()}})}),$(".loginContainer .btnRegister").click(function(){$(".loginContainer, .headerForgotPassword").hide(),$(".registerContainer, .headerRegister").show()}),$(".loginContainer .btnCancel").click(function(){$(".registerSigninWrapper").show(),$(".forgotPasswordFormWrapper, .forgotPasswordConfirmWrapper").hide()}),$(".forgotPasswordFormWrapper #btnForgotPassword").click(function(e){validateFormFields(e)}),$(".forgotPasswordFormWrapper .btnCancel,  .forgotPasswordConfirmWrapper .btnCancel").click(function(){$(".loginContainer, .loginContainer .headerRegister").show(),$(".registerContainer, .headerForgotPassword, .registerContainer .headerRegister").hide()}),$(".forgotPasswordFormWrapper .btnCancel,  .forgotPasswordConfirmWrapper .btnCancel").click(function(){$(".loginContainer, .loginContainer .headerRegister").show(),$(".registerContainer, .headerForgotPassword, .registerContainer .headerRegister").hide()}),$(".forgotPasswordFormWrapper .lnkAccountRegister").click(function(){$(".loginContainer, .headerForgotPassword").hide(),$(".registerContainer, .headerRegister").show()}),$(".registerContainer .loginInput").each(function(e){$(this).popover({html:!0,trigger:"hover",content:function(){return $("#tip-"+this.id).html()},placement:"xs"===BootstrapExtensions.getBootstrapBreakpoint()?"bottom":"right"})}),$(".registerContainer .btnSubmitRegister").click(function(e){$(".loginContainer").hide(),$(".registerContainer").show(),validateFormFields(e)}),$(".registerContainer .btnCancel").click(function(){$(".loginContainer, .loginContainer .headerRegister, .registerSigninWrapper").show(),$(".registerContainer, .headerForgotPassword, .registerContainer .headerRegister, .forgotPasswordFormWrapper").hide()}),$(".registerContainer .btnRegConfirmContinue").click(function(){$(".loginContainer, .loginContainer .headerRegister").show(),$(".registerContainer, .headerForgotPassword, .registerContainer .headerRegister, .resendActivateContainer").hide()}),$(".lnkResendActivate").click(function(){$(".loginContainer, .registerContainer, .activateAccountContainer").hide(),$(".resendActivateContainer").show()}),$(".resendActivateContainer .btnContinue").click(function(){$(".loginContainer, .loginContainer .headerRegister").show(),$(".registerContainer, .headerForgotPassword, .registerContainer .headerRegister, .activateAccountContainer").hide()}),$(".resendActivateContainer .btnResendActivate").click(function(){resendActivateAccountEmail()});var NotificationProviderType,NotificationType,Profile=function(){return function(){}}();!function(NotificationProviderType){NotificationProviderType[NotificationProviderType.Unknown=0]="Unknown"}(NotificationProviderType||(NotificationProviderType={})),function(NotificationType){NotificationType[NotificationType.Unknown=0]="Unknown",NotificationType[NotificationType.MobilePush=1]="MobilePush",NotificationType[NotificationType.Email=2]="Email",NotificationType[NotificationType.WebPush=3]="WebPush"}(NotificationType||(NotificationType={}));var NotificationToken=function(){return function(){}}(),ProfileSettings=function(){return function(){}}(),ProfileStats=function(){return function(){}}(),ProfileStatsResponse=function(){return function(){}}(),SavedAd=function(){return function(){}}(),SavedSearch=function(){return function(){}}(),SearchLocation=function(){return function(){}}(),ProfileService=function(){function ProfileService(){this.baseUrl=document.getElementById("env").dataset.profileapiendpoint,this.culture=CultureInfo.getCultureName()}return ProfileService.prototype.saveNotificationToken=function(profileId,data){var _this=this,url=this.baseUrl+"/api/profile/"+profileId+"/notificationToken";return $.ajax({method:"post",url:url,data:JSON.stringify(data),contentType:"application/json",beforeSend:function(request){request.setRequestHeader("Accept-Language",_this.culture)}}).then(function(response){return response.Data})},ProfileService.prototype.saveAd=function(profileId,data){var url=this.baseUrl+"/api/profile/"+profileId+"/savedad";return $.ajax({method:"post",url:url,data:JSON.stringify(data),contentType:"application/json"})},ProfileService.prototype.deleteAd=function(profileId,sourceId,foreignId){var params={sourceId:sourceId,foreignId:foreignId},url=this.baseUrl+"/api/profile/"+profileId+"/savedad?"+$.param(params);return $.ajax({method:"delete",url:url})},ProfileService.prototype.getAd=function(profileId,sourceId,foreignId){var params={sourceId:sourceId,foreignId:foreignId},url=this.baseUrl+"/api/profile/"+profileId+"/savedad?"+$.param(params);return $.ajax({method:"get",url:url}).then(function(response){return response.Data})},ProfileService.prototype.saveSearch=function(profileId,data){var url=this.baseUrl+"/api/profile/"+profileId+"/savedsearch";return $.ajax({method:"post",url:url,data:JSON.stringify(data),contentType:"application/json"})},ProfileService.prototype.deleteSearch=function(profileId,searchId){var params={id:searchId},url=this.baseUrl+"/api/profile/"+profileId+"/savedsearch?"+$.param(params);return $.ajax({method:"delete",url:url})},ProfileService}(),__assign=this&&this.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},ProfileManager=function(){function ProfileManager(){this.profileService=new ProfileService,this.profileCookie=new ProfileCookie,this.profileStats=new ProfileStats}return ProfileManager.prototype.getProfileId=function(){return this.profileCookie.getProfileId()},ProfileManager.prototype.getNewProfileId=function(){var profileId=document.getElementById("env").dataset.requestid;return this.profileCookie.setProfileId(profileId),profileId},ProfileManager.prototype.saveVehicle=function(savedAd){var profileId=this.getProfileId();return profileId||(profileId=this.getNewProfileId()),savedAd.PdnEnabled=!0,savedAd.SavedTime=(new Date).getTime(),savedAd.Location=this.updateSearchLocation(savedAd.Location),this.profileService.saveAd(profileId,savedAd)},ProfileManager.prototype.registerForPriceAlert=function(email,vehicleData,callBack){var _this=this;email&&vehicleData&&this.saveEmailAddress(email).done(function(){_this.saveVehicle(vehicleData).done(function(){"function"==typeof callBack&&callBack()})})},ProfileManager.prototype.removeVehicle=function(sourceId,foreignId){var profileId=this.getProfileId();return profileId?this.profileService.deleteAd(profileId,sourceId,foreignId).done(function(){vdpDataLayerManager.addPriceAlertEmailUnsubscribe()}):$.when()},ProfileManager.prototype.findVehicle=function(sourceId,foreignId){var _this=this,profileId=this.getProfileId();return profileId?this.profileService.getAd(profileId,sourceId,foreignId).then(function(response){return response.Profile&&(_this.profileStats=response.Profile),response.Data}):$.when(null)},ProfileManager.prototype.isEmailSaved=function(){return this.profileStats.HasNotificationToken},ProfileManager.prototype.saveEmailAddress=function(email){var _this=this,profileId=this.getProfileId();profileId||(profileId=this.getNewProfileId());var token=new NotificationToken;token.ProviderType=NotificationProviderType.Unknown,token.Type=NotificationType.Email,token.Value=email;var saveToken=this.profileService.saveNotificationToken(profileId,token);return $.when(saveToken).done(function(newProfileId){newProfileId!==profileId&&_this.profileCookie.setProfileId(newProfileId),_this.profileStats.HasNotificationToken=!0})},ProfileManager.prototype.getLocation=function(manager){var locationCookie=manager.get("srchLocation");try{if(locationCookie&&locationCookie.value){var value=JSON.parse(decodeURI(locationCookie.value));if(value)return value.Location}}catch(e){console.log("getLocation exception:"+e),locationCookie&&locationCookie.value&&console.log("locationCookie.value:"+locationCookie.value)}return""},ProfileManager.prototype.updateSearchLocation=function(searchLocation){var profileLocation=__assign({},searchLocation),location=this.getLocation(new CookieManager);return location&&(location.City&&location.Province&&(profileLocation.City=location.City,profileLocation.Province=location.Province),location.Latitude&&location.Longitude&&(profileLocation.Latitude=location.Latitude,profileLocation.Longitude=location.Longitude)),profileLocation},ProfileManager}(),ProfileCookie=function(){function ProfileCookie(){this.expiryDate=new Date(2038,0,1),this.cookieName="userProfile",this.cookieManager=new CookieManager}return ProfileCookie.prototype.getProfileId=function(){var cookie=this.cookieManager.get(this.cookieName);return cookie.value?cookie.value:null},ProfileCookie.prototype.setProfileId=function(value){if(value){var cookie=new Cookie(this.cookieName,value,null,this.expiryDate);this.cookieManager.addOrUpdate(cookie)}},ProfileCookie}();function saveCurrentSearch(){savedSearchData||console.log("savedSearchData not defined.");var profileId=(new ProfileCookie).getProfileId();profileId?(new ProfileService).saveSearch(profileId,savedSearchData).done(function(){console.log("Current search has been saved.")}):console.log("profileId does not exist.")}var CheckboxBusinessExtensions,SrpBannerManagerDesktop=function(){function SrpBannerManagerDesktop(dfpManager){this.dfpManager=dfpManager}return SrpBannerManagerDesktop.prototype.update=function(){this.dfpManager.refreshAll()},SrpBannerManagerDesktop}(),SimpleCache=function(){function SimpleCache(initialItems){void 0===initialItems&&(initialItems=null),this._initialized=!1,this._cache=[],null!=initialItems&&(this._cache=initialItems),this._initialized=!0}return SimpleCache.prototype.initialized=function(){return this._initialized},SimpleCache.prototype.count=function(){return this._cache.length},SimpleCache.prototype.get=function(comparer){var index=ArrayExtensions.findIndex(this._cache,comparer);return index>-1?this._cache[index]:null},SimpleCache.prototype.peek=function(index){return this._cache[index]},SimpleCache.prototype.put=function(item){this._cache.push(item)},SimpleCache.prototype.has=function(item,comparer){return ArrayExtensions.findIndex(this._cache,comparer)>-1},SimpleCache.prototype.putRange=function(items){for(var i=0;i<items.length;i++)this.put(items[i])},SimpleCache.prototype.map=function(selector){return this._cache.map(selector)},SimpleCache}(),CheckboxOptions=function(){return function(){}}(),Checkbox=function(){function Checkbox(_state,$element,display,bubbleHandler){var _this=this;this._state=_state,this.$element=$element,this.bubbleHandler=bubbleHandler,this._id=$element.attr("id"),this.facetedParent=$element.closest(".faceted-arrow").find(".faceted-mob"),display&&(this.updateUi=display),this.toggle(_state),$element.click(function(){if(_this.toggle(null),"undefined"!=typeof fb&&(_this._state?fb.multiSelectCount+=_this.$element.data("count")||0:fb.multiSelectCount-=_this.$element.data("count")||0,isMobile)){var id=_this.facetedParent.parent().attr("id");fb.updateAppliedValues(!1),fb.onRefinementChanged(!1,id.substring(15,id.length))}})}return Object.defineProperty(Checkbox.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(Checkbox.prototype,"value",{get:function(){var data=this.$element.data("value");return null==data||void 0==data?this.label:data.toString()},enumerable:!0,configurable:!0}),Checkbox.prototype.setId=function(id){if(id!=this._id){var label=this.getLabelElement();this._id=id,this.$element.attr("id",id),$(label).attr("id",this._id+"_label"),$(label).attr("for",this._id)}},Checkbox.prototype.setLabel=function(newLabel){var element=this.getLabelElement();null!=element&&(element.innerHTML=newLabel)},Object.defineProperty(Checkbox.prototype,"label",{get:function(){var element=this.getLabelElement();return null==element?null:element.innerHTML},enumerable:!0,configurable:!0}),Checkbox.prototype.getLabelElement=function(){var labelId=this._id+"_label";return document.getElementById(labelId)},Checkbox.prototype.toggle=function(state,runSubscribers){void 0===runSubscribers&&(runSubscribers=!0),this._state=null===state||void 0===state?!this._state:state,runSubscribers&&(this.callBackOnEveryToggle(),this.toggleStateChanged()),this.updateUi(this.$element,this.state)},Checkbox.prototype.toggleState=function(callback){var _this=this,tSc=this.toggleStateChanged;this.toggleStateChanged=function(){tSc.apply(_this),callback()}},Checkbox.prototype.addCallbackForEveryToggle=function(callback){var _this=this,tSc=this.callBackOnEveryToggle;this.callBackOnEveryToggle=function(){tSc.apply(_this),callback()}},Checkbox.prototype.callBackOnEveryToggle=function(){},Checkbox.prototype.toggleStateChanged=function(){},Checkbox.prototype.addBubbleClick=function(bubbleClass){var _this=this;this.bubble=$("."+bubbleClass),this.bubbleHandler&&this.bubble.click(function(){_this.bubbleHandler(_this)})},Checkbox.prototype.updateBubble=function(el,state){var bubbleClass=this.getBubbleClass();try{this.facetedParent.find("."+bubbleClass).remove()}catch(e){}var html="";if(state){if("faceted-Colours"===this.facetedParent.attr("id"))html="<span class='comma "+bubbleClass+"'><i class='fas fa-circle right-padding colour-swatches "+this.value+"'></i>"+this.value+"</span>";else if("faceted-PriceAnalysis"===this.facetedParent.attr("id")){html="<span class='comma "+bubbleClass+"'>"+(new Resources).getSearchResource(StringExtensions.camelize(this.value))+"</span>"}else html="<span class='comma "+bubbleClass+"'>"+this.value+"</span>";this.facetedParent.append(html),this.addBubbleClick(bubbleClass)}isMobile||this.getSelectedOverflowCount(el)},Checkbox.prototype.getBubbleClass=function(){if(null!=this.value&&void 0!=this.value&&0!==this.value.length){var escapedValue=this.value.replace(/[&\/\\#,+()$~%.'":*?<>{} ]/g,"_");return"bubble_"+this._id.split("_")[0]+"_"+escapedValue}return null},Checkbox.prototype.getBubble=function(){return $("."+this.getBubbleClass())},Checkbox.prototype.updateUi=function(el,state){state?el.prop("checked",!0):el.prop("checked",!1),this.updateBubble(el,state)},Checkbox.prototype.getSelectedOverflowCount=function(el){var bubbleParent=this.facetedParent,parentHeight=bubbleParent.height();if(parentHeight>0&&bubbleParent.children().length>0){var hiddenElements_1=new Array;bubbleParent.children("span").each(function(i,element){var bubble=$(element);bubble.position().top>=bubbleParent.position().top+parentHeight&&hiddenElements_1.push(bubble)});var overflowCount="";hiddenElements_1.length>0&&(overflowCount="+ "+hiddenElements_1.length),bubbleParent.parent().find(".overflow-count").text(overflowCount)}},Checkbox}(),CheckboxGroup=function(){function CheckboxGroup(checkboxes,allowEmptySelection,clearElParent,name){this.checkboxes=checkboxes,this.allowEmptySelection=allowEmptySelection,this.clearElParent=clearElParent,this.name=name,this.propertize();for(var i=0;i<checkboxes.length;i++)this.checkboxClickHandler(i);clearElParent&&this.clearClickHandler(clearElParent),!allowEmptySelection&&this.isNothingSelected()&&checkboxes[0].toggle(!0)}return CheckboxGroup.prototype.control=function(id){return this[id]},CheckboxGroup.prototype.controls=function(){for(var result=[],i=0;i<this.checkboxes.length;i++)result.push(this.checkboxes[i].$element);return result},CheckboxGroup.prototype.selected=function(){for(var result=new Array,i=0;i<this.checkboxes.length;i++)this.checkboxes[i].state&&result.push(this.checkboxes[i]);return result},CheckboxGroup.prototype.selectedLabels=function(updateCount,resourcesForTranslation){void 0===updateCount&&(updateCount=""),void 0===resourcesForTranslation&&(resourcesForTranslation=null);for(var result=new Array,i=0;i<this.checkboxes.length;i++)if(this.checkboxes[i].state){var label=this.checkboxes[i].value;null!=label&&null!=resourcesForTranslation&&(label=resourcesForTranslation.getSearchResource(StringExtensions.camelize(label))),"undefined"!=typeof fb&&fb&&updateCount&&(fb.multiSelectCount+=this.checkboxes[i].$element.data("count")),null!=label&&result.push(label)}return result},CheckboxGroup.prototype.clear=function(runSubscribers,runClearHandlers){void 0===runSubscribers&&(runSubscribers=!1),void 0===runClearHandlers&&(runClearHandlers=!1);for(var i=0;i<this.checkboxes.length;i++)this.checkboxes[i].toggle(!1,runSubscribers);runClearHandlers&&this.clearHandlers()},CheckboxGroup.prototype.clearHandlers=function(){},CheckboxGroup.prototype.onClear=function(newHandle){var handler=this.clearHandlers;this.clearHandlers=function(){handler.call(this),newHandle.call(this)}},CheckboxGroup.prototype.checkboxClickHandler=function(clickedIndex){var _this=this,fallbackIndex=0===clickedIndex?1:clickedIndex-1;this.checkboxes[clickedIndex].toggleState(function(){!_this.allowEmptySelection&&_this.isNothingSelected()&&_this.checkboxes[fallbackIndex].toggle(!0)})},CheckboxGroup.prototype.clearFacetLabel=function(el){var resources=new Resources,anyLabel=isMobile?"":resources.getSearchResource("any");el.find(".selectedLabel").text(anyLabel),el.removeClass("filtered")},CheckboxGroup.prototype.clearClickHandler=function(el){var _this=this;el.find(".trader-reset").unbind().click(function(e){_this.clear(),fb.updateAppliedValues(!1),fb.onRefinementChanged(),_this.clearFacetLabel(el),e.stopPropagation()})},CheckboxGroup.prototype.isNothingSelected=function(){for(var i=0;i<this.checkboxes.length;i++)if(this.checkboxes[i].state)return!1;return!0},CheckboxGroup.prototype.propertize=function(){for(var i=0;i<this.checkboxes.length;i++){var id=this.checkboxes[i].$element.attr("id");""!==id&&void 0!==id&&null!==id?this[id]=this.checkboxes[i]:this["element"+i]=this.checkboxes[i]}},CheckboxGroup}();!function(CheckboxBusinessExtensions){CheckboxBusinessExtensions.getStatus=function(checkboxes){var resourceManager=new ResourcesManager,items=[],isNew=checkboxes.rfNew&&checkboxes.rfNew.state,isUsed=checkboxes.rfUsed&&checkboxes.rfUsed.state,isDamaged=checkboxes.rfDamaged&&checkboxes.rfDamaged.state;return isNew&&isUsed&&isDamaged?"":(isNew&&items.push(resourceManager.getSearchResource("adStatusNew")),isUsed&&items.push(resourceManager.getSearchResource("adStatusUsed")),isDamaged&&items.push(resourceManager.getSearchResource("adStatusDamaged")),items.join("-"))},CheckboxBusinessExtensions.getCpo=function(checkboxes){if(void 0!==checkboxes.rfPreOwned){var isNew=checkboxes.rfNew.state,isUsed=checkboxes.rfUsed.state,isCpo=checkboxes.rfPreOwned&&checkboxes.rfPreOwned.state;if(!isCpo)return"1";if(!isNew&&!isUsed&&isCpo)return"2"}return""}}(CheckboxBusinessExtensions||(CheckboxBusinessExtensions={}));var ScrollDirection,IUiRangeExtensions,DropdownItem=function(){function DropdownItem(value,selected,disabled,display,elem,count,group){this.value=value,this.selected=selected,this.disabled=disabled,this.count=count,this.group=group,display&&(this.dispFunction=display),this.$element=elem}return Object.defineProperty(DropdownItem.prototype,"display",{get:function(){return this.dispFunction(this.value)},enumerable:!0,configurable:!0}),DropdownItem.prototype.dispFunction=function(n){return String(this.value)},DropdownItem}(),DropdownSection=function(){return function(options,sort,title){switch(this.title=null==title?null:title,this.options=options.slice(0),sort){case SortType.Ascending:this.options.sort(function(a,b){return null===a.value&&null===b.value?0:null===a.value?-1:null===b.value?1:"string"!=typeof a.value||"string"!=typeof b.value||isNaN(a.value)||isNaN(b.value)?a.value<b.value?-1:1:parseFloat(a.value)-parseFloat(b.value)});break;case SortType.Descending:this.options.sort(function(a,b){return null===a.value&&null===b.value?0:null===a.value?-1:null===b.value?1:"string"!=typeof a.value||"string"!=typeof b.value||isNaN(a)||isNaN(b)?b.value<a.value?-1:1:parseFloat(b.value)-parseFloat(a.value)})}}}(),Dropdown=function(){function Dropdown(backingSelect,options,clampValue,isNumeric,hasHeader,getBubbleTextFromValue,isPartOfRange,clearOnHeaderClick,name){void 0===isPartOfRange&&(isPartOfRange=!1),void 0===clearOnHeaderClick&&(clearOnHeaderClick=!1),void 0===name&&(name=""),this.backingSelect=backingSelect,this.isNumeric=isNumeric,this.hasHeader=hasHeader,this.getBubbleTextFromValue=getBubbleTextFromValue,this.isPartOfRange=isPartOfRange,this.clearOnHeaderClick=clearOnHeaderClick,this.name=name,this.facetedParent=backingSelect.parentElement.closest(".faceted-arrow").find(".faceted-mob").children("[id^='faceted-']"),this.applyButton=backingSelect.parentElement.closest("[id^='faceted-parent-']").find(".apply-btn-wrapper").children().first(),null!=options?this._sections=options:this.generateItems(),this._cache=new Array,this.updateUi();for(var items=new Array,i=0;i<this._sections.length;i++)items=items.concat(this._sections[i].options);var selected=items.filter(function(x){return x.selected});selected.length>0&&this.select(selected[0].value),this._sectionsArchive=[],this.clampValue=clampValue,this.addBubbleClick()}return Object.defineProperty(Dropdown.prototype,"options",{get:function(){return this._sections},enumerable:!0,configurable:!0}),Object.defineProperty(Dropdown.prototype,"item",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(Dropdown.prototype,"value",{get:function(){if(null!=this._value)return this._value.value},enumerable:!0,configurable:!0}),Object.defineProperty(Dropdown.prototype,"count",{get:function(){if(null!=this._value)return this._value.count},enumerable:!0,configurable:!0}),Dropdown.prototype.isNullOrEmpty=function(){return void 0===this._value||""===String(this._value.value)||null===this._value.value||void 0===this._value.value},Dropdown.prototype.setCache=function(){this._cache=this._sections.slice(0)},Dropdown.prototype.disable=function(disabled){void 0===disabled&&(disabled=!0),this.backingSelect.optionsElement.prop("disabled",disabled)},Dropdown.prototype.retrieveFromCache=function(){this._sections=this._cache,this.updateOptions(this._sections)},Dropdown.prototype.appendOption=function(item){if(this._sections&&!(this._sections.length<=0)){for(var found=!1,i=0;i<this._sections[0].options.length;i++)if(this._sections[0].options[i].value==item.value){found=!0;break}if(!found){this._sections[0].options.push(item);var option=this.backingSelect.createOption(String(item.value),String(item.value));this.backingSelect.optionsElement.append(option)}}},Dropdown.prototype.select=function(value,runSubscribers){if(void 0===runSubscribers&&(runSubscribers=!1),void 0!==value){var val;if(null==value||""===value||"null"===value)val=null;else if(value===(new ResourcesManager).getSearchResource("minYearListDefault")||value===(new ResourcesManager).getSearchResource("maxYearListDefault"))val=null;else if(this.isNumeric){if(isNaN(value))return;val=parseFloat(value)}else val=value;for(var count=0,i=0;i<this.options.length;i++)for(var j=0;j<this.options[i].options.length;j++){if((null==val||""===val?null==this.options[i].options[j].value||""===this.options[i].options[j].value:this.options[i].options[j].value==val)&&!this.options[i].options[j].disabled){if(this.deselect(),this.options[i].options[j].selected=!0,null!=val){for(var opts=this.backingSelect.options(),k=0;k<opts.length;k++)if(opts[k].getAttribute("data-dropdownvalue")===val){var valDisplay=val;valDisplay.length>30&&(valDisplay=valDisplay.substr(0,27)+"…"),this.updateBubble(!0,val,this.options[i].options[j].display),opts[k]=this.backingSelect.createOption(val,valDisplay)[0],opts[k].classList.add("selected")}else opts[k].classList.remove("selected");this.backingSelect.parentElement.empty();for(var groupName="",l=0;l<opts.length;l++){var currGroup=this._sections[0].options[l].group;if(""===currGroup||void 0===currGroup)this.backingSelect.parentElement.append(opts[l]);else if(currGroup!==groupName){var optgroup=this.backingSelect.createOptionGroup(currGroup);optgroup.append(opts[l]),this.backingSelect.parentElement.append(optgroup),groupName=currGroup}else this.backingSelect.parentElement.find("optgroup[label='"+groupName+"']").append(opts[l])}this.backingSelect.attachEvents(this)}this.backingSelect.valueElement[0].selectedIndex=count,this._value=this.options[i].options[j],runSubscribers&&this.changeValue(val);break}count++}}},Dropdown.prototype.selectAt=function(index,runSubscribers){if(void 0===runSubscribers&&(runSubscribers=!1),void 0!==index)for(var count=0,i=0;i<this.options.length;i++)for(var j=0;j<this.options[i].options.length;j++){if(count===index&&!this.options[i].options[j].disabled)return this.deselect(),0==j&&0==i&&this.backingSelect.optionsElement.removeClass("selected-option"),this.options[i].options[j].selected=!0,this.backingSelect.valueElement[0].selectedIndex=index,this._value=this.options[i].options[j],this.updateBubble(!0,String(this.options[i].options[j].value),this.options[i].options[j].display),void(runSubscribers&&this.changeValue(this.options[i].options[j].value));count++}},Dropdown.prototype.deselect=function(){this.beforeChange(),null!=this._value&&(this._value.selected=!1)},Dropdown.prototype.updateOptions=function(sections,displayCount){null!=sections&&(this._sections=sections,this._sectionsArchive=[],this.updateUi(displayCount))},Dropdown.prototype.removeElement=function(index){var s=this._sections[0].options[index];this._sections[0].options.splice(index,1),this._sectionsArchive.push([index,s]),this.updateUi()},Dropdown.prototype.restoreOptions=function(){for(;this._sectionsArchive.length>0;){var element=this._sectionsArchive.pop();this._sections[0].options.splice(element[0],0,element[1])}this.updateUi()},Dropdown.prototype.updateUi=function(displayCount){var _this=this;this.backingSelect.optionsElement.children().not(".dropdown-header, .no-model, .dropdown-top-row").remove();for(var items=new Array,i=0;i<this._sections.length;i++)items=items.concat(this._sections[i].options);var groupName="";$.each(items,function(k){var display=items[k].display.toString().replace("&amp;","&");if(displayCount&&null!=items[k].count&&(display=display+" ("+items[k].count+") "),0!==k||!_this.hasHeader){var isDisabled=!1;items[k].$element&&(isDisabled=items[k].$element.is('[disabled=""]'));var element=_this.backingSelect.createOption(items[k].value,display,isDisabled);items[k].selected&&_this.updateBubble(!0,String(items[k].value),items[k].display),items[k].$element=element;var currGroup=_this._sections[0].options[k].group;if(""===currGroup||void 0===currGroup)_this.backingSelect.optionsElement.append(element);else if(currGroup!==groupName){var optgroup=_this.backingSelect.createOptionGroup(currGroup);optgroup.append(element),_this.backingSelect.optionsElement.append(optgroup),groupName=currGroup}else _this.backingSelect.optionsElement.find("optgroup[label='"+groupName+"']").append(element)}}),this.backingSelect.attachEvents(this)},Dropdown.prototype.changeValue=function(value){},Dropdown.prototype.beforeChange=function(){},Dropdown.prototype.generateItems=function(display){var dataVal,_this=this;dataVal=this.backingSelect.valueElement.attr("data-value")?""===this.backingSelect.valueElement.attr("data-value")?null:this.backingSelect.valueElement.attr("data-value"):null;var opts=this.backingSelect.options(),dropdowns=[];opts.each(function(i){var func;func=null==display?_this.backingSelect.childDisplayFunction(opts[i]):display;var val=opts[i].getAttribute("value");null==val&&(val=opts[i].dataset.dropdownvalue),null!=val&&""!==val&&"null"!==val||(val=null);var el=$(opts[i]),group=$(opts[i]).parent().attr("label");dropdowns.push(new DropdownItem(val,val===dataVal,!1,func,el,el.data("count"),group))}),this._sections=[new DropdownSection(dropdowns,null,null)],this.backingSelect.attachEvents(this)},Dropdown.prototype.setFacetLabel=function(val){var parentOpt=this.backingSelect.parentElement.closest("[id^='faceted-parent']");parentOpt.find(".selectedLabel").text(val),parentOpt.addClass("filtered")},Dropdown.prototype.clearFacetLabel=function(){var parentOpt=this.backingSelect.parentElement.closest("[id^='faceted-parent']"),resources=new Resources,anyLabel=isMobile?"":resources.getSearchResource("any");parentOpt.find(".selectedLabel").text(anyLabel),parentOpt.removeClass("filtered")},Dropdown.prototype.onValueChange=function(handler){var oldChange=this.changeValue;this.changeValue=function(value){oldChange.call(this,value),handler.call(this),this.value&&(this.backingSelect.optionsElement.addClass("selected-option"),this.setFacetLabel(this.value))}},Dropdown.prototype.beforeValueChange=function(handler){var oldChange=this.beforeChange;this.beforeChange=function(){oldChange.call(this),handler.call(this)}},Dropdown.prototype.onFocus=function(handler){var me=this;null!==handler&&this.backingSelect.valueElement.on("mousedown",handler),this.clearOnHeaderClick&&this.backingSelect.valueElement.on("mousedown",function(e){me.clearOnClick(me,this,e)})},Dropdown.prototype.clearOnClick=function(me,caller,e){me.isNullOrEmpty()||(me.select(null,!0),e.preventDefault(),caller.blur(),window.focus(),me.backingSelect.optionsElement.removeClass("selected-option"))},Dropdown.prototype.addBubbleClick=function(){var _this=this;this.isPartOfRange||this.facetedParent.click(function(){_this.select(null,!1),_this.updateBubble(!1),"undefined"!=typeof fb&&("rfMakes"===_this.backingSelect.parentElement.attr("id")&&(fb.$modelDropdown.select(null,!1),fb.$modelDropdown.updateBubble(!1),(new FacetedResultsPage).clearModelDropdown(),fb.advancedOptions.trims.clear(),fb.advancedOptions.trims.clearFacetLabel($("#faceted-parent-Trim"))),"rfModel"===_this.backingSelect.parentElement.attr("id")&&(fb.advancedOptions.trims.clear(),fb.advancedOptions.trims.clearFacetLabel($("#faceted-parent-Trim"))),fb.updateAppliedValues(!1),fb.onRefinementChanged())})},Dropdown.prototype.updateBubble=function(state,val,display){if(!this.isPartOfRange)if(state){var value=String(this.getBubbleTextFromValue?val:display);null!=val&&"undefined"!==val&&"null"!==val&&null!=value&&"null"!==value&&"undefined"!==value&&(this.facetedParent.addClass("comma"),this.facetedParent.removeClass("hidden"),this.facetedParent.text(value))}else"proximity"===this.backingSelect.parentElement.attr("id")?(this.facetedParent.addClass("hidden"),$("#rfLocation").removeClass("dropdown-menu"),this.facetedParent.closest("li").addClass("open"),$("#rfLocation").toggleClass("dropdown-menu open")):(this.facetedParent.addClass("hidden"),this.facetedParent.text(""),this.applyButton.click())},Dropdown}();!function(ScrollDirection){ScrollDirection[ScrollDirection.Up=0]="Up",ScrollDirection[ScrollDirection.Down=1]="Down"}(ScrollDirection||(ScrollDirection={})),function(IUiRangeExtensions){IUiRangeExtensions.ToggleApplyButton=function(currentState,lastState,applyButton){null!=lastState&&((currentState.minValue===lastState.minValue||isNaN(currentState.minValue)&&isNaN(lastState.minValue))&&(currentState.maxValue===lastState.maxValue||isNaN(currentState.maxValue)&&isNaN(lastState.maxValue))?applyButton.removeClass("appliable"):applyButton.addClass("appliable"))}}(IUiRangeExtensions||(IUiRangeExtensions={}));var SortType,AutoComplete=function(){function AutoComplete($autocomplete,enable,suggestions,ajaxM){this.$autocomplete=$autocomplete,this.highlightIndex=-1,this.isEnabled=enable,this.displayed=!1,this.Ajax=ajaxM,this.suggestions=suggestions,this.$autocomplete.children("ul").length<=0&&this.$autocomplete.append("<ul></ul>"),this.$list=this.$autocomplete.children("ul").first(),this.items=[];var list=this.items;this.$list.children("li").each(function(){list.push($(this).attr("value"))})}return Object.defineProperty(AutoComplete.prototype,"enabled",{get:function(){return this.isEnabled},set:function(value){this.isEnabled=value},enumerable:!0,configurable:!0}),Object.defineProperty(AutoComplete.prototype,"displayed",{get:function(){return this.isDisplayed},set:function(value){this.enabled?this.isDisplayed=value:this.isDisplayed=!1,this.isDisplayed?this.$autocomplete.show():this.$autocomplete.hide()},enumerable:!0,configurable:!0}),AutoComplete.prototype.scroll=function(dir){},AutoComplete.prototype.suggestions=function(target,callback){},AutoComplete.MinToSearch=2,AutoComplete}(),TextInputOptions=function(){return function(){}}(),TrimOptions=function(){return function(){}}(),OnClickUpdate=function(){return function(){}}(),ActiveStyle=function(){return function(){}}(),CodeSpaces=function(){return function(){}}(),TextInput=function(){function TextInput($input,autoComplete,isNumeric,display,options){var _this=this;this.$input=$input,this.autoComplete=autoComplete,this.isNumeric=isNumeric,this.removeLeadTrailQuotesAndSpace=function(component){if(!component)return"";var result=component.trim();return result=(result=result.replace(new RegExp(/^"(.+(?="$))"$/),"$1")).replace(new RegExp(/ /g),"+")},this.createOptions(options);var inputVal=$input.val();this.value=inputVal||null,this.match=!1,null!=display&&(this.display=display);var me=this,originalVal=$input.val;$input.val=function(value){return arguments.length>=1?(me.value=value,originalVal.call(this,me.display(value))):originalVal.call(this)},this.$input.bind("input",function(){_this.$input[0];var oldVal=_this.value;if(_this.isNumeric){var val=_this.$input.val();val=val.replace(/\D/g,""),_this.value=val,_this.valueChanged=_this.value!=oldVal,_this.$input[0].value=val}else _this.value=_this.$input.val(),_this.valueChanged=_this.value!=oldVal;_this.value!=oldVal&&(null!=_this.autoComplete&&_this.autoComplete.enabled?_this.autoComplete.suggestions(_this.$input,_this.getSuggestions):_this.onValueChanged&&_this.onValueChanged(_this)),_this.$input.removeClass("warning-refinement")}),this.$input.on("focus touchstart",function(){_this._options.activeStyle.enabled&&_this.$input.addClass(_this._options.activeStyle.className),$input[0].value=_this.value}),this.$input.blur(function(e){if(_this._options.activeStyle.enabled&&_this._options.activeStyle.disabledOnBlur&&_this.$input.removeClass(_this._options.activeStyle.className),_this.isNumeric){_this.trim();var val=parseInt(_this.value,10);_this.$input.attr("type","text"),_this.$input.val(isNaN(val)?"":val)}else _this.trim(),_this.$input.attr("type","text"),_this.$input.val(_this.value);_this.autoComplete&&(_this.autoComplete.displayed=!1)}),this.$input.keydown(function(e){switch(e.which){case 38:_this.autoComplete&&_this.autoComplete.scroll(ScrollDirection.Up);break;case 40:_this.autoComplete&&_this.autoComplete.scroll(ScrollDirection.Down);break;case 9:return void(_this.autoComplete&&_this.autoComplete.enabled&&_this.autoComplete.displayed&&_this.autoComplete.highlightIndex>-1?_this.processItemSelection():(_this.$input.val(_this.$input.val()),_this.autoComplete&&(_this.autoComplete.displayed=!1)));default:return}e.preventDefault()}),this.$input.keypress(function(e){13===e.keyCode&&(_this.autoComplete&&_this.autoComplete.enabled&&_this.autoComplete.displayed&&_this.autoComplete.highlightIndex>-1?_this.processItemSelection():_this.$input.blur())})}return TextInput.prototype.createOptions=function(options){var _this=this;this._options=new TextInputOptions,this._options.onClickUpdate=new OnClickUpdate,this._options.onClickUpdate.enabled=!1,this._options.activeStyle=new ActiveStyle,this._options.activeStyle.enabled=!1,this._options.trimOptions=new TrimOptions,this._options.trimOptions.enabled=!1,this._options.codeSpaces=new CodeSpaces,this._options.codeSpaces.enabled=!1,null!=options&&(null!=options.onClickUpdate&&(this._options.onClickUpdate.enabled=options.onClickUpdate.enabled,this._options.onClickUpdate.isCodeAutoUpdate=options.onClickUpdate.isCodeAutoUpdate,this._options.onClickUpdate.triggerElement=options.onClickUpdate.triggerElement,this._options.onClickUpdate.triggerElement&&this._options.onClickUpdate.triggerElement.click(function(){_this.lastValue=_this.value})),null!=options.activeStyle&&(this._options.activeStyle.enabled=options.activeStyle.enabled,this._options.activeStyle.disabledOnBlur=options.activeStyle.disabledOnBlur,this._options.activeStyle.className=options.activeStyle.className),null!=options.trimOptions&&(this._options.trimOptions.enabled=options.trimOptions.enabled,this._options.trimOptions.trimStart=options.trimOptions.trimStart,this._options.trimOptions.trimEnd=options.trimOptions.trimEnd),null!==options.codeSpaces&&(this._options.codeSpaces.enabled=options.codeSpaces.enabled))},TextInput.prototype.trim=function(){this.value&&this._options.trimOptions.enabled&&(this._options.trimOptions.trimStart&&(this.value=this.value.replace(new RegExp("^\\s*"),"")),this._options.trimOptions.trimEnd&&(this.value=this.value.replace(new RegExp("\\s*$"),"")))},TextInput.prototype.fireOnValueChanged=function(){this.onValueChanged&&this.onValueChanged(this)},TextInput.prototype.HasValueChanged=function(){var oldValue=this.valueChanged;return this.valueChanged=!1,oldValue},TextInput.prototype.processItemSelection=function(){this.value=this.autoComplete.items[this.autoComplete.highlightIndex],this.$input.val(this.value),$("#locationerror").hide(),this.autoComplete.displayed=!1,this.match=!0,this.$input.blur(),this.fireOnValueChanged()},TextInput.prototype.getSuggestions=function(input){input.autoComplete.$list.html("");for(var items=input.autoComplete.items,i=0;i<items.length;i++)input.func(input,items[i]);input.fireOnValueChanged()},TextInput.prototype.func=function(input,item){input.autoComplete.$list.append($("<li class='suggestionListItem'></li>").attr("value",item).html(item).on("mousedown touch",function(e){input.value=item,input.$input.val(item),$("#locationerror").hide(),input.match=!0,input.fireOnValueChanged(),input.autoComplete.$autocomplete.displayed=!1}))},TextInput.prototype.val=function(input,fireEvent){return void 0===fireEvent&&(fireEvent=!1),arguments.length>=1&&(this.value=input,this.$input.val(this.value),fireEvent&&this.fireOnValueChanged()),this._options.onClickUpdate.enabled?this.lastValue:this.value},TextInput.prototype.displayText=function(){return this._options.codeSpaces.enabled?this.removeLeadTrailQuotesAndSpace(this.$input.val()):this.$input.val()},TextInput.prototype.displayVal=function(){return this.display(this.value)},TextInput.prototype.display=function(input){return input},TextInput}(),NumericRange=function(){function NumericRange(low,high,range){null!=range?(this.setRange=range.slice(0),this.min=Math.min.apply(Math,range),this.max=Math.max.apply(Math,range)):(this.min=low,this.max=high,this.setRange=null)}return NumericRange.prototype.range=function(increment){var _this=this;if(void 0===increment&&(increment=1),null!==this.setRange)return this.setRange;var count=Math.floor((this.max-this.min+1*increment)/increment);return Array.apply(null,Array(count)).map(function(_,i){return i*increment+_this.min})},NumericRange.prototype.test=function(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];for(var i=0;i<values.length;i++)if(values[i]<this.min||values[i]>this.max)return!1;return!0},NumericRange.prototype.sub=function(min,max,increment){return void 0===increment&&(increment=1),(null!==this.setRange?this.setRange:this.range(increment)).filter(function(v){return v>=min&&v<=max})},NumericRange}();!function(SortType){SortType[SortType.Ascending=1]="Ascending",SortType[SortType.Descending=2]="Descending"}(SortType||(SortType={}));var Ui,AdExtensions,Alerts,RangeWarnings=function(){return function($lowReverseWarning,$lowRangeWarning,$highReverseWarning,$highRangeWarning,$lowRequiredWarning,$highRequiredWarning,$outOfRangeWarning,highLowMaxRange){void 0===$lowRequiredWarning&&($lowRequiredWarning=null),void 0===$highRequiredWarning&&($highRequiredWarning=null),void 0===$outOfRangeWarning&&($outOfRangeWarning=null),void 0===highLowMaxRange&&(highLowMaxRange=null),this.$lowReverseWarning=$lowReverseWarning,this.$lowRangeWarning=$lowRangeWarning,this.$highReverseWarning=$highReverseWarning,this.$highRangeWarning=$highRangeWarning,this.$lowRequiredWarning=$lowRequiredWarning,this.$highRequiredWarning=$highRequiredWarning,this.$outOfRangeWarning=$outOfRangeWarning,this.highLowMaxRange=highLowMaxRange}}(),InputRange=function(){function InputRange(values,lowElement,highElement,warnings,parentWrapper,lowStateName,highStateName,clearCallback){void 0===clearCallback&&(clearCallback=null);var _this=this;this.warnings=warnings,this.lowStateName=lowStateName,this.highStateName=highStateName,this.range=values,this.lowElement=lowElement,this.highElement=highElement,this.clearElement=parentWrapper.find(".trader-reset"),this.applyButton=parentWrapper.find(".trader-search"),this.parentWrapper=parentWrapper,this.bubble=this.parentWrapper.find(".filterValMobile"),this.addBubbleClick(),this.lowElement.$input.blur(function(){_this.validateLow(_this.lowElement.val())}),this.lowElement.$input.on("touchstart",function(){_this.lowElement.$input.attr("type","number")}),this.highElement.$input.blur(function(){_this.validateHigh(_this.highElement.val())}),this.highElement.$input.on("touchstart",function(){_this.highElement.$input.attr("type","number")});var oldLowChange=this.lowElement.onValueChanged;this.lowElement.onValueChanged=function(input){if(null!=oldLowChange&&oldLowChange.apply(_this,input),"undefined"!=typeof fb&&null!=fb){var oldState=new RangeState(fb.appliedValues[_this.lowStateName],fb.appliedValues[_this.highStateName]);IUiRangeExtensions.ToggleApplyButton(new RangeState(_this.low(),_this.high()),oldState,_this.applyButton)}};var oldHighChange=this.highElement.onValueChanged;this.highElement.onValueChanged=function(input){if(null!=oldHighChange&&oldHighChange.apply(_this,input),"undefined"!=typeof fb&&null!=fb){var oldState=new RangeState(fb.appliedValues[_this.lowStateName],fb.appliedValues[_this.highStateName]);IUiRangeExtensions.ToggleApplyButton(new RangeState(_this.low(),_this.high()),oldState,_this.applyButton)}},this.clearElement.click(function(e){null!==clearCallback&&clearCallback(),_this.lowElement.$input.val(null),_this.highElement.$input.val(null),fb.updateAppliedValues(!1),fb.onRefinementChanged(!1),_this.lowElement.$input.attr("id").indexOf("Payment")>=0||_this.lowElement.$input.attr("id").indexOf("Price")>=0?(fb.savePaymentParameter(),fb.setPricePaymentLabel()):_this.setRangeLabel(),e.stopPropagation()}),this.applyButton.click(function(){_this.lowElement.$input.attr("id").indexOf("Payment")>=0||_this.lowElement.$input.attr("id").indexOf("Price")>=0?(fb.savePaymentParameter(),fb.setPricePaymentLabel()):_this.setRangeLabel(),_this.updateBubble(!0)})}return InputRange.prototype.hasError=function(){return this._errorLow||this._errorHigh},InputRange.prototype.addBubbleClick=function(){var _this=this;this.bubble.click(function(){_this.clearElement.click(),_this.updateBubble(!1)})},InputRange.prototype.updateBubble=function(state){state?(this.bubble.addClass("comma"),this.bubble.removeClass("hide")):(this.bubble.addClass("hide"),this.applyButton.click())},InputRange.prototype.setRangeLabel=function(){var resources=new Resources,anyText=isMobile?"":resources.getSearchResource("any"),result=this.getRangeLabel(),filterVal=this.parentWrapper.find(".filterVal");result?(filterVal.text(result),this.parentWrapper.addClass("filtered")):(filterVal.text(anyText),this.parentWrapper.removeClass("filtered"))},InputRange.prototype.getRangeLabel=function(){var min=this.lowElement.$input.val(),max=this.highElement.$input.val(),result=null;return min&&max?result=min+" - "+max:min&&!max?result="> "+min:!min&&max&&(result="< "+max),result},InputRange.prototype.getRange=function(useLow,useHigh,insertEmpty){void 0===insertEmpty&&(insertEmpty=!0);var lowElement=useLow&&null!=this.low()&&!isNaN(this.low())?this.low():this.min(),highElement=useHigh&&null!=this.high()&&!isNaN(this.high())?this.high():this.max(),range=this.range.sub(lowElement,highElement);return insertEmpty&&range.unshift(null),range},InputRange.prototype.low=function(value,runSubscribers,state){return void 0!==value&&(this.validateLow(value),this.lowElement.val(value),IUiRangeExtensions.ToggleApplyButton(new RangeState(this.low(),this.high()),state,this.applyButton)),void 0===this.lowElement.val()?this.min():parseFloat(this.lowElement.val())},InputRange.prototype.high=function(value,runSubscribers,state){return void 0!==value&&(this.validateHigh(value),this.highElement.val(value),IUiRangeExtensions.ToggleApplyButton(new RangeState(this.low(),this.high()),state,this.applyButton)),void 0===this.highElement.val()?this.max():parseFloat(this.highElement.val())},InputRange.prototype.validateLow=function(value){if(this.warnings.$lowRangeWarning.hide(),this.warnings.$lowReverseWarning.hide(),null!=this.warnings.$lowRequiredWarning&&this.warnings.$lowRequiredWarning.hide(),null!=this.warnings.$outOfRangeWarning&&this.warnings.$outOfRangeWarning.hide(),this.removeWarning(),this._errorLow=!1,""===value||null===value){if(null==this.warnings.$lowRequiredWarning)return;this.warnings.$lowRequiredWarning.show(),this._errorLow=!0,this.setWarning()}var high=this.high();null===high||isNaN(high)||(value>=high&&(this.warnings.$lowReverseWarning.show(),this._errorLow=!0,this.setWarning(!0)),null!=this.warnings.highLowMaxRange&&null!=this.warnings.$outOfRangeWarning&&high-value>this.warnings.highLowMaxRange&&(this.warnings.$outOfRangeWarning.show(),this._errorLow=!0,this.setWarning())),value>this.max()&&(this.warnings.$lowRangeWarning.show(),this._errorLow=!0,this.setWarning()),value<this.min()&&(this.warnings.$lowRangeWarning.show(),this._errorLow=!0,this.setWarning())},InputRange.prototype.validateHigh=function(value){if(this.warnings.$highRangeWarning.hide(),this.warnings.$highReverseWarning.hide(),null!=this.warnings.$highRequiredWarning&&this.warnings.$highRequiredWarning.hide(),null!=this.warnings.$outOfRangeWarning&&this.warnings.$outOfRangeWarning.hide(),this.removeWarning(),this._errorHigh=!1,""!==value&&null!==value){var low=this.low();null===low||isNaN(this.low())?value<this.min()&&(this.warnings.$highReverseWarning.show(),this._errorHigh=!0,this.setWarning(!0)):(value<=low&&(this.warnings.$highReverseWarning.show(),this._errorHigh=!0,this.setWarning(!0)),null!=this.warnings.highLowMaxRange&&null!=this.warnings.$outOfRangeWarning&&value-low>this.warnings.highLowMaxRange&&(this.warnings.$outOfRangeWarning.show(),this._errorHigh=!0,this.setWarning(!0))),value>this.max()&&(this.warnings.$highRangeWarning.show(),this._errorHigh=!0,this.setWarning(!0))}else null!=this.warnings.$highRequiredWarning&&(this.warnings.$highRequiredWarning.show(),this._errorHigh=!0,this.setWarning())},InputRange.prototype.min=function(){return this.range.min},InputRange.prototype.max=function(){return this.range.max},InputRange.prototype.clear=function(newRange){this.update(newRange),this.lowElement.val(null),this.highElement.val(null)},InputRange.prototype.update=function(range){null!=range&&(this.range=range)},InputRange.prototype.setWarning=function(high){void 0===high&&(high=!1),this.lowElement.$input.closest(".open").find(".btn-success").prop("disabled",!0),high?this.highElement.$input.addClass("warning-outline"):this.lowElement.$input.addClass("warning-outline")},InputRange.prototype.removeWarning=function(){this.lowElement.$input.closest(".open").find(".btn-success").prop("disabled",!1),this.highElement.$input.removeClass("warning-outline"),this.lowElement.$input.removeClass("warning-outline")},InputRange}(),RangeState=function(){return function(minValue,maxValue){this.minValue=minValue,this.maxValue=maxValue}}(),DropdownRange=function(){function DropdownRange(values,lowElementSelector,highElementSelector,insertEmpty,parentWrapper,lowStateName,highStateName,display,lowElementSortType,highElementSortType){var _this=this;this.lowStateName=lowStateName,this.highStateName=highStateName;var browserType=(new BrowserDetect).GetBrowser();browserType!==BrowserType.IE&&browserType!==BrowserType.Safari&&browserType!==BrowserType.SafariMobile&&browserType!==BrowserType.iOS11&&browserType!==BrowserType.iOS12||(this.hideAboveBelow=this.hideAboveBelowIE),this.insertEmpty=insertEmpty,this.range=new NumericRange(null,null,values),this.dispFunction=null===display||void 0===display?Ui.displayAny:display;var range=this.range.range();insertEmpty&&range.unshift(null);var itemsLow=range.map(function(item){return new DropdownItem(null===item?null:item,!1,!1,function(n){return _this.dispFunction(n,!0)})}),itemsHigh=range.map(function(item){return new DropdownItem(null===item?null:item,!1,!1,function(n){return _this.dispFunction(n,!1)})});this.lowElement=new Dropdown(new SelectDropdown($(lowElementSelector)),[new DropdownSection(itemsLow,lowElementSortType||SortType.Ascending,null)],!1,!0,!1,!1,!0),this.highElement=new Dropdown(new SelectDropdown($(highElementSelector)),[new DropdownSection(itemsHigh,highElementSortType||SortType.Descending,null)],!1,!0,!1,!1,!0),this.lowElement.selectAt(0),this.highElement.selectAt(0),this.parentWrapper=parentWrapper,this.bubble=this.parentWrapper.find(".filterValMobile"),this.addBubbleClick(),this.applyButton=parentWrapper.find(".trader-search"),this.clearButton=parentWrapper.find(".trader-reset"),this.applyButton.click(function(){_this.setRangeLabel(),_this.updateBubble(!0)}),this.clearButton.click(function(e){_this.lowElement.selectAt(0),_this.highElement.selectAt(0),fb.updateAppliedValues(!1),fb.onRefinementChanged(),_this.setRangeLabel(),e.stopPropagation()});var toggleApplyButton=function(){if("undefined"!=typeof fb&&null!=fb){var oldState=new RangeState(fb.appliedValues[_this.lowStateName],fb.appliedValues[_this.highStateName]);IUiRangeExtensions.ToggleApplyButton(new RangeState(_this.low(),_this.high()),oldState,_this.applyButton)}};this.lowElement.onValueChange(toggleApplyButton),this.highElement.onValueChange(toggleApplyButton)}return DropdownRange.prototype.hasError=function(){return this._errorLow||this._errorHigh},DropdownRange.prototype.addBubbleClick=function(){var _this=this;this.bubble.click(function(){_this.clearButton.click(),_this.updateBubble(!1)})},DropdownRange.prototype.updateBubble=function(state){state?(this.bubble.addClass("comma"),this.bubble.removeClass("hidden")):(this.bubble.addClass("hidden"),this.applyButton.click())},DropdownRange.prototype.setRangeLabel=function(){var resources=new Resources,anyText=isMobile?"":resources.getSearchResource("any"),filterVal=this.parentWrapper.find(".filterVal"),result=this.getRangeLabel();result?(filterVal.text(result),this.parentWrapper.addClass("filtered")):(filterVal.text(anyText),this.parentWrapper.removeClass("filtered"))},DropdownRange.prototype.getRangeLabel=function(){var min=this.lowElement.value,max=this.highElement.value,result=null;return min&&max?result=min+" - "+max:min&&!max?result="> "+min:!min&&max&&(result="< "+max),result},DropdownRange.prototype.getRange=function(useLow,useHigh,insertEmpty){void 0===insertEmpty&&(insertEmpty=!0);var lowElement=useLow&&null!=this.low()&&!isNaN(this.low())?this.low():this.min(),highElement=useHigh&&null!=this.high()&&!isNaN(this.high())?this.high():this.max(),range=this.range.sub(lowElement,highElement);return insertEmpty&&range.unshift(null),range},DropdownRange.prototype.low=function(value,runSubscribers,state){if(void 0===runSubscribers&&(runSubscribers=!0),void 0===state&&(state=null),this._errorLow=!1,void 0!==value){if(null!==value){if(null===this.high()){if(value>this.max())throw this._errorLow=!0,new Error("can't set low higher than the max")}else if(value>this.high())throw this._errorLow=!0,new Error("can't set low to be higher than high");if(value<this.min())throw this._errorLow=!0,new Error("can't set low lower than the min")}this.lowElement.select(value,runSubscribers),IUiRangeExtensions.ToggleApplyButton(new RangeState(this.low(),this.high()),state,this.applyButton)}return void 0===this.lowElement.value?this.min():this.lowElement.value},DropdownRange.prototype.hideAboveBelow=function(element,compareValue,high){void 0===high&&(high=!0),element.backingSelect.optionsElement.children().each(function(){$(this).show(),isNaN(parseInt($(this).val()))||isNaN(parseInt(compareValue))||(high?parseInt($(this).val())<compareValue&&$(this).hide():parseInt($(this).val())>compareValue&&$(this).hide())}),$(".yearOption").prop("disabled",!1)},DropdownRange.prototype.hideAboveBelowIE=function(element,compareValue,high){void 0===high&&(high=!0),element.restoreOptions();for(var i=0;i<element.options[0].options.length;i++){var optionValue=parseInt(element.options[0].options[i].$element.val());isNaN(optionValue)||isNaN(parseInt(compareValue))||(high?optionValue<compareValue&&(element.removeElement(i),i--):optionValue>compareValue&&(element.removeElement(i),i--))}$(".yearOption").prop("disabled",!1)},DropdownRange.prototype.high=function(value,runSubscribers,state){if(void 0===runSubscribers&&(runSubscribers=!0),void 0===state&&(state=null),this._errorHigh=!1,void 0!==value){if(null!==value){if(null===this.low()){if(value<this.min())throw this._errorHigh=!0,new Error("can't set high to be lower than low")}else if(value<this.low())throw this._errorHigh=!0,new Error("can't set high to be lower than low");if(value>this.max())throw this._errorHigh=!0,new Error("can't set high to be higher than max")}this.highElement.select(value,runSubscribers),IUiRangeExtensions.ToggleApplyButton(new RangeState(this.low(),this.high()),state,this.applyButton)}return void 0===this.highElement.value?this.max():this.highElement.value},DropdownRange.prototype.min=function(){return this.range.min},DropdownRange.prototype.max=function(){return this.range.max},DropdownRange.prototype.clear=function(newRange){this.update(newRange,SortType.Descending,SortType.Descending),this.lowElement.select(null),this.highElement.select(null)},DropdownRange.prototype.update=function(range,lowElementSortType,highElementSortType){var _this=this,low=this.low(),high=this.high();null!=range&&(this.range=range);var r=this.range.range();this.insertEmpty&&r.unshift(null);var itemsL=r.map(function(item){return new DropdownItem(item,!1,!1,function(n){return _this.dispFunction(n,!0)})});this.lowElement.updateOptions([new DropdownSection(itemsL,lowElementSortType||SortType.Ascending,null)]);var itemsH=r.map(function(item){return new DropdownItem(item,!1,!1,function(n){return _this.dispFunction(n,!1)})});this.highElement.updateOptions([new DropdownSection(itemsH,highElementSortType||SortType.Descending,null)]),this.low(low,!1),this.high(high,!1),this.hideAboveBelow(this.highElement,this.low()),this.hideAboveBelow(this.lowElement,this.high(),!1);var browserType=(new BrowserDetect).GetBrowser();browserType!=BrowserType.IE&&browserType!=BrowserType.Safari&&browserType!=BrowserType.SafariMobile&&browserType!=BrowserType.iOS11||(this.low(low,!1),this.high(high,!1))},DropdownRange.prototype.dispFunction=function(n,isLow){return""},DropdownRange}();!function(Ui){Ui.displayValue=function(n,langVal){var resources=new Resources;return null===n||""===n||"none"===n?resources.getSearchResource(langVal):String(n)},Ui.kmDesktop=function(n){return null===n||""===n?"":(n=CultureInfo.formatNumber(n))+" km"},Ui.formatFeet=function(n){return null===n||""===n?"":(n=CultureInfo.formatNumber(n))+" ft"},Ui.formatCC=function(n){return null===n||""===n?"":(n=CultureInfo.formatNumber(n))+" cc"},Ui.formatHP=function(n){return null===n||""===n?"":(n=CultureInfo.formatNumber(n))+" hp"},Ui.formatHours=function(n){return null===n||""===n?"":(n=CultureInfo.formatNumber(n))+" h"},Ui.formatPounds=function(n){return null===n||""===n?"":(n=CultureInfo.formatNumber(n))+" lb"},Ui.displayMake=function(n){return Ui.displayValue(n,"makeHeading")},Ui.displayMakeFormatted=function(n){return null===n||void 0===n?Ui.displayMake(null):n},Ui.displayModel=function(n){return Ui.displayValue(n,"modelHeading")},Ui.displayModelFormatted=function(n){return null===n||void 0===n?Ui.displayModel(null):n},Ui.displayTransmission=function(n){return Ui.displayValue(n,"transmissionHeading")},Ui.displayBodyTypes=function(n){return Ui.displayValue(n,"bodyStyle")},Ui.displayPriceAnalysis=function(n){return Ui.displayValue(n,"priceAnalysis")},Ui.displayVehicleType=function(n){return Ui.displayValue(n,"type")},Ui.displayVehicleTypeFormatted=function(n){return null===n||void 0===n?Ui.displayVehicleType(null):n},Ui.displayVehicleSubtype=function(n){return Ui.displayValue(n,"subtype")},Ui.displayVehicleSubtypeFormatted=function(n){return null===n||void 0===n?Ui.displayVehicleSubtype(null):n},Ui.displayColour=function(n){return Ui.displayValue(n,"exteriorColourHeading")},Ui.displayFuel=function(n){return Ui.displayValue(n,"fuelTypeHeading")},Ui.displayTrims=function(n){return Ui.displayValue(n,"trimsHeading")},Ui.displaySleeps=function(n){return Ui.displayValue(n,"sleepsHeading")},Ui.displaySlideOuts=function(n){return Ui.displayValue(n,"slideOutsHeading")},Ui.displayDrivetrain=function(n){return Ui.displayValue(n,"drivetrainHeading")},Ui.displayEngine=function(n){return Ui.displayValue(n,"engineHeading")},Ui.displaySeatingCapacity=function(n){return Ui.displayValue(n,"seatingCapacityHeading")},Ui.displayNumberOfDoors=function(n){return Ui.displayValue(n,"numberOfDoorsHeading")},Ui.displayAny=function(n){return Ui.displayValue(n,"any")},Ui.displayMakeDef=function(n){return Ui.displayValue(n,"makesListDefault")},Ui.displayModelDef=function(n){return Ui.displayValue(n,"modelsListDefault")},Ui.displayTransmissionDef=function(n){return Ui.displayValue(n,"transmissionListDefault")},Ui.displayBodyTypesDef=function(n){return Ui.displayValue(n,"bodyTypesListDefault")},Ui.displayColourDef=function(n){return Ui.displayValue(n,"exteriorColourListDefault")},Ui.displayFuelDef=function(n){return Ui.displayValue(n,"fuelTypeListDefault")},Ui.displayTrimsDef=function(n){return Ui.displayValue(n,"trimsListDefault")},Ui.displayTypeFilter=function(n){var resources=new Resources;return null===n||""===n?'<div class="form-group" > <input type="text" id= "typeSearch" class="form-control" placeholder= "'+resources.getSearchResource("typeToFilter")+'" > </div>':String(n)},Ui.displaySubTypeFilter=function(n){var resources=new Resources;return null===n||""===n?'<div class="form-group" > <input type="text" id= "subTypeSearch" class="form-control" placeholder= "'+resources.getSearchResource("typeToFilter")+'" > </div>':String(n)},Ui.displayPrice=function(n){return null===n||""===n?"":n=CultureInfo.formatPrice(n)},Ui.displayPayment=function(n){return null===n||""===n?"":n=CultureInfo.formatPrice(n)},Ui.displayPaymentFrequency=function(n){var resources=new Resources;if(null===n||""===n)return"";switch(n){case 1:return resources.getSearchResource("paymentFrequencyMonthly");case 2:return resources.getSearchResource("paymentFrequencyBiMonthly");case 3:return resources.getSearchResource("paymentFrequencyBiWeekly");case 4:return resources.getSearchResource("paymentFrequencyWeekly");default:return""}},Ui.displayCreditRating=function(n){var resources=new Resources;if(null===n||""===n)return"";switch(n){case 1:return resources.getSearchResource("creditRatingExcellent");case 2:return resources.getSearchResource("creditRatingVeryGood");case 3:return resources.getSearchResource("creditRatingGood");case 4:return resources.getSearchResource("creditRatingFair");case 5:return resources.getSearchResource("creditRatingPoor");default:return""}},Ui.displayTerm=function(n){var resources=new Resources;return null===n||""===n?"":0===n?resources.getSearchResource("termLongestAvailable"):n},Ui.displayYear=function(n,isLow){var resources=new Resources;return null===n||""===n?isLow?resources.getSearchResource("minYearListDefault"):resources.getSearchResource("maxYearListDefault"):String(n)},Ui.displayCategories=function(n){var nNumber=parseInt(n);return isNaN(nNumber)?String(n):categoryNames.filter(function(value){return value.Key===nNumber})[0].Value},Ui.displayKilometres=function(n){return null===n||""===n?"Any":n>2e5?"Over 200000 km":String(n)+" km and under"},Ui.displayOdometer=function(n){return null==n||void 0==n?"":(n=CultureInfo.formatNumber(n),String(n)+" km")},Ui.displayDistance=function(n){return-1==n?"National":-2==n?"Provincial":(n=CultureInfo.formatNumber(n),"+"+String(n)+" km")}}(Ui||(Ui={})),function(AdExtensions){AdExtensions.sortAds=function(ad1,ad2){return ad1.PublicKey<ad2.PublicKey?-1:ad1.PublicKey>ad2.PublicKey?1:0}}(AdExtensions||(AdExtensions={})),function(Alerts){Alerts.noVehiclesFoundProximityAlert=function(proximity){var resources=new Resources;return-1==proximity?resources.getSearchResource("noVehiclesFoundNationalAlert"):-2==proximity?resources.getSearchResource("noVehiclesFoundProvinceAlert"):resources.getSearchResource("noVehiclesFoundProximityAlert").replace("{0}",proximity.toString())}}(Alerts||(Alerts={}));var DropdownFactory,Resources=function(){function Resources(){var resources=globalResources;this.cultureName=CultureInfo.getCultureName(),this.searchResources=resources.srpResources}return Resources.prototype.getSearchResource=function(key){if(null==key)throw new Error("key parameter can't be null");return null==this.searchResources?"":null==this.searchResources[key]?"":null==this.searchResources[key][this.cultureName]?"":this.searchResources[key][this.cultureName]},Resources}();!function(DropdownFactory){function fromNumbers(numbers,selectAt,display){void 0===selectAt&&(selectAt=-1);for(var disp=null==display?Ui.displayAny:display,result=[],i=0;i<numbers.length;i++)result.push(new DropdownItem(numbers[i],selectAt===i,!1,disp));return result}function fromStrings(words,selectAt,display){void 0===selectAt&&(selectAt=-1);for(var disp=null==display?Ui.displayAny:display,result=[],i=0;i<words.length;i++)result.push(new DropdownItem(words[i],selectAt===i,!1,disp));return result}DropdownFactory.fromNumbers=fromNumbers,DropdownFactory.fromStrings=fromStrings,DropdownFactory.sectionFromNumbers=function(numbers,sort,selectAt,display){void 0===selectAt&&(selectAt=-1);var disp=null==display?Ui.displayAny:display;return[new DropdownSection(fromNumbers(numbers,selectAt,disp),sort,null)]},DropdownFactory.sectionFromStrings=function(words,sort,selectAt,display){void 0===selectAt&&(selectAt=-1);var disp=null==display?Ui.displayAny:display;return[new DropdownSection(fromStrings(words,selectAt,disp),sort,null)]},DropdownFactory.addRangeCutoff=function(range){range.lowElement.onValueChange(function(){var lowEl=range.lowElement,highEl=range.highElement;lowEl.value&&(range.hideAboveBelow(highEl,lowEl.value),range.hideAboveBelow(lowEl,highEl.value,!1),lowEl.select(lowEl.value,!1),highEl.select(highEl.value,!1))}),range.highElement.onValueChange(function(){var lowEl=range.lowElement,highEl=range.highElement;highEl.value&&(range.hideAboveBelow(highEl,lowEl.value),range.hideAboveBelow(lowEl,highEl.value,!1),highEl.select(highEl.value,!1),lowEl.select(lowEl.value,!1))})}}(DropdownFactory||(DropdownFactory={}));var SelectDropdown=function(){function SelectDropdown(parentElement){this.parentElement=parentElement,this.optionsElement=parentElement,this.valueElement=parentElement,this.inactive=!parentElement.length,this.attached=!1,this.cheetah=!0,this.facetedParentMain=parentElement.closest("[id^='faceted-parent']")}return SelectDropdown.prototype.options=function(){return this.optionsElement.find("option")},SelectDropdown.prototype.createOptionGroup=function(label){var optGroup=$("<optgroup>");return optGroup.attr("label",label),optGroup},SelectDropdown.prototype.createOption=function(value,display,isDisabled){return $("<option>",{value:value,text:display,disabled:isDisabled})},SelectDropdown.prototype.attachEvents=function(dropdown){this.attached||this.attach(dropdown,this)},SelectDropdown.prototype.attach=function(dropdown,select){select.optionsElement.change(function(){dropdown.select(select.optionsElement.val(),!0)}),this.attached=!0},SelectDropdown.prototype.childDisplayFunction=function(el){var val=$(el).html();return function(n){return val}},SelectDropdown}(),BootstrapDropdown=function(){function BootstrapDropdown(parentElement,callRefinement){void 0===callRefinement&&(callRefinement=!1),this.parentElement=parentElement,this.callRefinement=callRefinement,this.optionsElement=parentElement,this.valueElement=parentElement,this.inactive=!parentElement.length,this.facetedParentMain=parentElement.closest("[id^='faceted-parent']"),this.clearElement=this.facetedParentMain.find(".trader-reset"),this.facetedParent=parentElement.parent()}return BootstrapDropdown.prototype.options=function(){return this.optionsElement.children("li")},BootstrapDropdown.prototype.createOption=function(value,display){var element,className="";return"fbExteriorColour"!==this.parentElement.attr("id")?element=$("<li><a>"+display+"</a></li>"):(value&&(className=StringExtensions.removeDiacritics(value.replace(/\s+/g,""))),element=$('<li><a><i class="fas fa-circle colour-swatches '+className+'" aria-hidden="true" ></i>'+display+"</a></li>")),element.attr("data-dropdownvalue",value),element},BootstrapDropdown.prototype.createOptionGroup=function(){return null},BootstrapDropdown.prototype.attachEvents=function(dropdown){var _this=this;this.options().each(function(i,el){var jel=$(el);void 0!==jel.data("dropdownvalue")&&jel.click(function(){dropdown.setCache(),dropdown.select(jel.data("dropdownvalue"),!0)})}),this.clearElement.off("click"),this.clearElement.click(function(e){_this.clearElement.off("click"),dropdown.selectAt(0,!1),"rfMakes"==dropdown.backingSelect.parentElement.attr("id")?(fb.$modelDropdown.clearFacetLabel(),fb.$modelDropdown.selectAt(0,!1),fb.advancedOptions.trims.clearFacetLabel($("#faceted-parent-Trim")),fb.advancedOptions.trims.clear(),fb.updateAppliedValues(!1)):"rfModel"===dropdown.backingSelect.parentElement.attr("id")&&(fb.advancedOptions.trims.clearFacetLabel($("#faceted-parent-Trim")),fb.advancedOptions.trims.clear(),fb.updateAppliedValues(!1)),!_this.callRefinement||fb.quickSearch?fb.onRefinementChanged(!1):fb.onRefinementChanged(!0,"",null,!0),_this.clearFacetLabel(),"sm"!==BootstrapExtensions.getBootstrapBreakpoint()&&e.stopPropagation()})},BootstrapDropdown.prototype.clearFacetLabel=function(){var resources=new Resources,parentOpt=this.facetedParentMain,anyLabel=resources.getSearchResource("any");parentOpt.find(".selectedLabel").text(anyLabel),parentOpt.removeClass("filtered")},BootstrapDropdown.prototype.childDisplayFunction=function(el){var disp,jel=$(el);return disp=0===jel.children("a").length?jel.html():jel.children("a").html(),function(n){return disp}},BootstrapDropdown}(),MastHeadControl=function(){function MastHeadControl($element,searchBox,isEnabled){void 0===isEnabled&&(isEnabled=!0);var _this=this;if(this.$element=$element,this.searchBox=searchBox,this.isEnabled=isEnabled,window.AddMastheadAds=function(companyForeignId){var dealerEvents=DealerEvents.getInstance();_this.showMastheadAds(companyForeignId),dealerEvents.searchPageTakeover()},!isMobile){window.googleDfpManager.display("hulk-oop");var enableAmazonHeaderBidding=!!$("#enableAmazonHeaderBidding").val()&&$("#enableAmazonHeaderBidding").val();!1!==enableAmazonHeaderBidding&&"false"!==enableAmazonHeaderBidding||window.googleDfpManager.refreshAll()}}return MastHeadControl.prototype.showMastheadAds=function(companyForeignId){if(this.isEnabled){var query=this.searchBox.getRefinementQuery();query.RelatedCompanyOwnerCompositeId="5-"+companyForeignId,$.ajax({url:"/Masthead/Index",type:"POST",data:JSON.stringify(query),accepts:{text:"text/html; charset=utf-8"},contentType:"application/json",success:function(result){$("#mastheadContentIn").html(result)}})}},MastHeadControl}(),RefinementQuery=function(){return function(){}}(),SrpUrlManager=function(){function SrpUrlManager(){this.isHistoryEnabled()&&window.history.replaceState(window.location.href,null,window.location.href),SrpUrlManager.popstateAttached||(window.addEventListener("popstate",function(evt){evt.state&&window.location.reload()}),SrpUrlManager.popstateAttached=!0)}return SrpUrlManager.prototype.isHistoryEnabled=function(){return!!(window.history&&window.history.pushState&&window.history.replaceState)},SrpUrlManager.prototype.updateUrl=function(url){this.isHistoryEnabled()&&url&&window.history.pushState(url,null,url)},SrpUrlManager.popstateAttached=!1,SrpUrlManager}(),globalResources={srpResources:{},queryStringResources:{}};globalResources.srpResources.popoverGreat={"en-ca":"We analyzed similar vehicles in your area and calculated that this vehicle is priced lower than the average making it a <b>Great Price</b>.","fr-ca":"Selon l'analyse d'annonces de véhicules similaires offerts dans votre région, ce prix est clairement inférieur à la moyenne: c'est un <b>Super prix</b>."},globalResources.srpResources.maxPaymentPlaceholder={"en-ca":"Max. Payment","fr-ca":"Paiements max."},globalResources.srpResources.clearAll={"en-ca":"Clear All","fr-ca":"Effacer"},globalResources.srpResources.detailsButtonLabel={"en-ca":"See more details","fr-ca":"Tous les détails"},globalResources.srpResources.vehiclesAdded={"en-ca":"vehicles added","fr-ca":"véhicules ajouté"},globalResources.srpResources.termLongestAvailable={"en-ca":"Longest available","fr-ca":"Plus long possible"},globalResources.srpResources.dPlusEmailSubjectUsedVehicle={"en-ca":"Inquiry about USED vehicle","fr-ca":"Véhicule d'OCCASION"},globalResources.srpResources.goldSeries={"en-ca":"Gold Series","fr-ca":"Occasion en or"},globalResources.srpResources.searchExpansionText={"en-ca":"To get more results, try adjusting your search by changing your distance, or removing filters","fr-ca":"Modifiez vos critères pour obtenir plus de résultats: augmentez la distance ou retirez des filtres."},globalResources.srpResources.maxPaymentRequiredAlert={"en-ca":"Max payment is required","fr-ca":"Le paiement max. est requis"},globalResources.srpResources.any={"en-ca":"Any","fr-ca":"Tout"},globalResources.srpResources.adSimilarVehicles={"en-ca":"View {0} similar vehicles from this dealer","fr-ca":"Voir les {0} véhicules similaires de ce détaillant"},globalResources.srpResources.removeFromCompare={"en-ca":"Remove from Compare","fr-ca":"Retirer de comparaison"},globalResources.srpResources.invalidPostalCodeFacetsFrozenInfoLabel={"en-ca":"You need to enter your postal code in order to use other search filters","fr-ca":"Le code postal est requis pour utiliser les filtres de recherche"},globalResources.srpResources.contentBoatBanner={"en-ca":'Reach millions of boat shoppers locally and nationally, <a href="{0}">for free</a>',"fr-ca":"Rejoignez d’acheteurs de bateaux localement et dans le reste du Canada"},globalResources.srpResources.buttonFarmEquipmentBanner={"en-ca":"List your farm equipment for free","fr-ca":"Annoncez ici, c'est gratuit"},globalResources.srpResources.dPlusEmailSubjectPlaceholder={"en-ca":"Please select a subject","fr-ca":"(Sélectionner le sujet)"},globalResources.srpResources.makesListDefault={"en-ca":"Make (any)","fr-ca":"Marque (toute)"},globalResources.srpResources.removeFilters={"en-ca":"Clear your search or change the distance, make, model, year and other search options to provide more results.","fr-ca":"Veuillez réinitialiser votre recherche ou modifier des critères (distance, marque, modèle, année et autres), afin d’obtenir plus de résultats."},globalResources.srpResources.keywordsPlaceholder={"en-ca":"Refine with Keywords","fr-ca":"Raffinez avec mots-clés"},globalResources.srpResources.dPlusValidationRequiredFieldOption={"en-ca":"Please select an item in this list.","fr-ca":"Veuillez sélectionner un élément de cette liste."},globalResources.srpResources.paymentRange={"en-ca":"Payment range","fr-ca":"Plage de paiement"},globalResources.srpResources.bodyType={"en-ca":"Body Type","fr-ca":"Type véhicule"},globalResources.srpResources.noMatch={"en-ca":"No listings match your criteria","fr-ca":"Aucune annonce ne correspond à vos critères"},globalResources.srpResources.maxPrice={"en-ca":"Max. price","fr-ca":"Prix&nbsp;max."},globalResources.srpResources.downPaymentLabel={"en-ca":"Down payment","fr-ca":"Acompte"},globalResources.srpResources.adWithPhotos={"en-ca":"With Photos","fr-ca":"Avec photos"},globalResources.srpResources.dPlusSendCopy={"en-ca":"Send me a copy of this message","fr-ca":"M'envoyer une copie de ce message"},globalResources.srpResources.creditRatingPoor={"en-ca":"Poor","fr-ca":"Mauvaise"},globalResources.srpResources.exteriorColourListDefault={"en-ca":"Exterior colour (any)","fr-ca":"Couleur ext. (toutes)"},globalResources.srpResources.wheelbaseMin={"en-ca":"Min. Wheelbase","fr-ca":"Empattement min."},globalResources.srpResources.priceHeading={"en-ca":"Price","fr-ca":"Prix"},globalResources.srpResources.spec_FuelHwy={"en-ca":"{0} (Hwy)","fr-ca":"{0} (autoroute)"},globalResources.srpResources.sortByRecentlyAdded={"en-ca":"Recently Added","fr-ca":"Plus récente"},globalResources.srpResources.titleWatercraftBanner={"en-ca":"List your watercraft here!","fr-ca":"Annoncez votre motomarine ici"},globalResources.srpResources.paginationNext={"en-ca":"Next","fr-ca":"Suiv."},globalResources.srpResources.transmissionHeading={"en-ca":"Transmission","fr-ca":"Transmission"},globalResources.srpResources.invalidPostalCodeMessage={"en-ca":"Please enter a valid postal code.","fr-ca":"Veuillez saisir un code postal."},globalResources.srpResources.contentFarmEquipmentBanner={"en-ca":'Reach millions of farm equipment shoppers locally and nationally, <a href="{0}">for free</a>',"fr-ca":"Rejoignez d’acheteurs d’équipements de ferme localement et dans le reste du Canada"},globalResources.srpResources.maxHorsepowerLessThanAlert={"en-ca":"Must be greater than Min Horsepower.","fr-ca":"Doit être plus grand que cheval-vapeur min."},globalResources.srpResources.loadingMore={"en-ca":"Loading more results...","fr-ca":"Chargement de plus de résultats..."},globalResources.srpResources.listYourLabel={"en-ca":"List your","fr-ca":"Énumérez votre"},globalResources.srpResources.anyType={"en-ca":"Any Type","fr-ca":"Tous types"},globalResources.srpResources.paymentFrequencyWeekly={"en-ca":"Weekly","fr-ca":"Hebdomadaire"},globalResources.srpResources.popoverFair={"en-ca":"We analyzed similar vehicles in your area and calculated that this vehicle is priced slightly higher than average making it a <b>Fair Price</b>.","fr-ca":"Selon l'analyse d'annonces de véhicules similaires offerts dans votre région, dont ce prix est légèrement supérieur à la moyenne: c'est un <b>Juste prix</b>."},globalResources.srpResources.noVehiclesFoundAlert={"en-ca":"No vehicles were found that matched your selections.","fr-ca":"Aucun véhicule ne correspond à vos sélections."},globalResources.srpResources.invalidLocationLabel={"en-ca":"Invalid location","fr-ca":"Lieu invalide"},globalResources.srpResources.adTypePrivate={"en-ca":"Private","fr-ca":"Particulier"},globalResources.srpResources.bodyStyle={"en-ca":"Body Style","fr-ca":"Type de carrosserie"},globalResources.srpResources.sbpPriceHeading={"en-ca":"Price/Payments","fr-ca":"Prix/Paiements"},globalResources.srpResources.invalidPostalCodeHomePageSearch={"en-ca":"Invalid postal code","fr-ca":"Code postal invalide"},globalResources.srpResources.bannerText={"en-ca":"Viewing deals on new car inventory","fr-ca":"Affichage des offres de véhicules neufs"},globalResources.srpResources.similarVehiclesLinkText={"en-ca":'<a href="{0}">{1} similar vehicles</a> from this dealer',"fr-ca":'Voir les <a href="{0}"> {1} véhicules similaires </a> de ce détaillant'},globalResources.srpResources.buttonMotorcycleBanner={"en-ca":"List your motorcycle for free","fr-ca":"Annoncez ici, c'est gratuit"},globalResources.srpResources.gACarFaxRequest={"en-ca":"history report - request","fr-ca":"history report - request"},globalResources.srpResources.titleMotorcycleBanner={"en-ca":"List your motorcycle here!","fr-ca":"Annoncez votre moto ou votre VTT ici"},globalResources.srpResources.tradeinValueLabel={"en-ca":"Trade-in value","fr-ca":"Valeur de reprise"},globalResources.srpResources.paymentDownText={"en-ca":"down","fr-ca":"acompte"},globalResources.srpResources.anyPrice={"en-ca":"Any Price","fr-ca":"Tous Prix"},globalResources.srpResources.typesListDefault={"en-ca":"Type (any)","fr-ca":"Type (any)"},globalResources.srpResources.popoverAbove={"en-ca":"This vehicle may be certified, include additional options, warranties making it Above Average Price. Contact seller for details.","fr-ca":"Ce véhicule pourrait être certifié ou inclure des options et garanties additionnelles qui justifient son prix supérieur à la moyenne. N’hésitez pas à joindre le vendeur."},globalResources.srpResources.fairPrice={"en-ca":"Fair Price","fr-ca":"Juste Prix"},globalResources.srpResources.transmissionListDefault={"en-ca":"Transmission (any)","fr-ca":"Transmission (toutes)"},globalResources.srpResources.engineListDefault={"en-ca":"Engine (any)","fr-ca":"Moteur (toutes)"},globalResources.srpResources.paymentFrequencyBiMonthly={"en-ca":"Bi-monthly","fr-ca":"Aux deux-semaines"},globalResources.srpResources.minPricePlaceholder={"en-ca":"Min.&nbsp;Price","fr-ca":"Prix&nbsp;min."},globalResources.srpResources.saveToGarage={"en-ca":"Save to garage","fr-ca":"Sauvegarder au garage"},globalResources.srpResources.shoppersLocallyNationally={"en-ca":"shoppers locally and nationally","fr-ca":"acheteurs locaux et nationaux"},globalResources.srpResources.locationWarning={"en-ca":"Your {0} is required.","fr-ca":"Votre {0} est requis."},globalResources.srpResources.bannerBtnText={"en-ca":"Return to all listings","fr-ca":"retour à toutes les annonces"},globalResources.srpResources.freeLabelBanner={"en-ca":"for free","fr-ca":"gratuitement"},globalResources.srpResources.similarVehiclesLinkTextMobile={"en-ca":"{0} similar","fr-ca":"{0} similaires"},globalResources.srpResources.minPaymentRequiredAlert={"en-ca":"Min payment is required","fr-ca":"Le paiement min. est requis "},globalResources.srpResources.forSale={"en-ca":"vehicles for sale in","fr-ca":"véhicules à vendre à"},globalResources.srpResources.slideOutsListDefault={"en-ca":"Slide Outs (any)","fr-ca":"Rallonges (tous)"},globalResources.srpResources.minPaymentPlaceholder={"en-ca":"Min. Payment","fr-ca":"Paiements min."},globalResources.srpResources.popoverGood={"en-ca":"We analyzed similar vehicles in your area and calculated that this vehicle is priced a bit lower than the average making it a <b>Good Price</b>.","fr-ca":"Selon l'analyse d'annonces de véhicules similaires offerts dans votre région, ce prix est légèrement inférieur à la moyenne: c'est un <b>Bon prix</b>."},globalResources.srpResources.titleRVBanner={"en-ca":"List your RV here!","fr-ca":"Annoncez votre VR ici"},globalResources.srpResources.engineSizeMax={"en-ca":"Max Engine Size","fr-ca":"Taille moteur max."},globalResources.srpResources.modelHeading={"en-ca":"Model","fr-ca":"Modèle"},globalResources.srpResources.paymentTagDisclaimerTemplateWithDiscountUsed={"en-ca":"Total Price of Vehicle: {0}. {5}{6}Manufacturer’s discount: {1}. {2}Total Obligation: {3}. Total cost of credit: {4}. On Approved Credit {7} Sales tax not included.","fr-ca":"Prix total du véhicule : {0}. {5}{6}Réduction du constructeur: {1}. {2}Obligation totale: {3}. Coût de financement: {4}. Sur approbation de crédit {7} Taxes de vente non incluses."},globalResources.srpResources.sellerType={"en-ca":"Seller Type","fr-ca":"Type vendeur"},globalResources.srpResources.featured={"en-ca":"Featured","fr-ca":"En vedette"},globalResources.srpResources.gACarFaxBuy={"en-ca":"history report - buy","fr-ca":"history report - buy"},globalResources.srpResources.minKilometresPlaceholder={"en-ca":"Min. Kilometres","fr-ca":"Kilomètres min."},globalResources.srpResources.hotDealMakeModelLinkText={"en-ca":"{0} deals on {1} {2} models","fr-ca":"{0} offres de {1} {2} modèles"},globalResources.srpResources.sortByDefault={"en-ca":"Default","fr-ca":"Défaut"},globalResources.srpResources.goodPrice={"en-ca":"Good Price","fr-ca":"Bon Prix"},globalResources.srpResources.anyModel={"en-ca":"Any Model","fr-ca":"Tous modèles"},globalResources.srpResources.contactSeller={"en-ca":"CONTACT SELLER","fr-ca":"Contacter le vendeur"},globalResources.srpResources.makeLabel={"en-ca":"Make","fr-ca":"Marque"},globalResources.srpResources.srpFlyoverNotFoundTitle={"en-ca":"The vehicle you are looking for is no longer available.","fr-ca":"Le véhicule que vous recherchez n'est plus disponible."},globalResources.srpResources.viewSavedSearches={"en-ca":"View Saved Searches ({0})","fr-ca":"Mes recherches ({0})"},globalResources.srpResources.maxPaymentLessThanAlert={"en-ca":"Must be greater than Min Payment.","fr-ca":"Doit être plus grand que paiement min."},globalResources.srpResources.adCarFaxFreeV2={"en-ca":"Free report","fr-ca":"Gratuit"},globalResources.srpResources.dPlusValidationRequiredField={"en-ca":"Please fill out this field.","fr-ca":"Veuillez remplir ce champ."},globalResources.srpResources.spec_ExteriorColour={"en-ca":"{0} (Ext)","fr-ca":"{0} (ext)"},globalResources.srpResources.spec_Engine={"en-ca":"{0}","fr-ca":"{0}"},globalResources.srpResources.typeToFilter={"en-ca":"Type to filter","fr-ca":"Taper marque"},globalResources.srpResources.conquestBottomText={"en-ca":"Scroll for More Search Results","fr-ca":"Faites défiler la liste pour plus de résultats de recherche."},globalResources.srpResources.deltaPriceContactDelaer={"en-ca":"Contact dealer for details","fr-ca":"Contacter le commerçant pour le détails"},globalResources.srpResources.priceAnalysis={"en-ca":"Price Analysis","fr-ca":"Analyse du prix"},globalResources.srpResources.proximityLabel={"en-ca":"Distance from me","fr-ca":"Distance de moi"},globalResources.srpResources.paymentFrequencyBiWeekly={"en-ca":"Bi-weekly","fr-ca":"/2 sem"},globalResources.srpResources.nationalSearch={"en-ca":"National Search","fr-ca":"Recherche nationale"},globalResources.srpResources.greatPrice={"en-ca":"Great Price","fr-ca":"Super Prix"},globalResources.srpResources.spec_FuelType={"en-ca":"{0}","fr-ca":"{0}"},globalResources.srpResources.alternativeAdLinkText={"en-ca":"View all","fr-ca":"Tout voir"},globalResources.srpResources.adCompared={"en-ca":"Compared","fr-ca":"Comparé"},globalResources.srpResources.privateSeller={"en-ca":"Private Seller","fr-ca":"Vendeur Particulier"},globalResources.srpResources.minWeightPlaceholder={"en-ca":"Min. Weight","fr-ca":"Poids min."},globalResources.srpResources.engineSize={"en-ca":"Engine Size","fr-ca":"Taille moteur"},globalResources.srpResources.postalCodeWarningFacet={"en-ca":"Enter your postal code*","fr-ca":"Entrez votre code postal S.V.P.*"},globalResources.srpResources.filterResults={"en-ca":"Filter Results","fr-ca":"Résultats filtrés"},globalResources.srpResources.maxWeightLessThanAlert={"en-ca":"Must be greater than Min Weight.","fr-ca":"Doit être plus grand que poids min."},globalResources.srpResources.financingOptionsAvailable={"en-ca":"Financing  Available","fr-ca":"Financement offert"},globalResources.srpResources.locationFormatError={"en-ca":"Postal Code must be in A1A 1A1 format.","fr-ca":"Le code postal doit utiliser le format: A1A 1A1"},globalResources.srpResources.modelsListDefault={"en-ca":"Model (any)","fr-ca":"Modèle (tous)"},globalResources.srpResources.searchErrorTitle={"en-ca":"Sorry, looks like the site is not responding.","fr-ca":"Désolé, le site ne répond pas."},globalResources.srpResources.paymentTagDisclaimerTemplateWithoutDiscountUsed={"en-ca":"Total Price of Vehicle: {0}. {5}{6}{2}Total Obligation: {3}.  Total cost of credit: {4}. On Approved Credit {7} Sales tax not included.","fr-ca":"Prix total du véhicule : {0}. {5}{6}{2}Obligation totale: {3}. Coût de financement: {4}. Sur approbation de crédit {7} Taxes de vente non incluses."},globalResources.srpResources.creditRatingLabel={"en-ca":"Credit rating","fr-ca":"Cote de crédit"},globalResources.srpResources.maxEngineSizeLessThenAlert={"en-ca":"Must be greater than Min Engine Size","fr-ca":"Doit être plus grand que Taille moteur min."},globalResources.srpResources.exteriorColourHeading={"en-ca":"Exterior Colour","fr-ca":"Couleur ext."},globalResources.srpResources.length={"en-ca":"Length","fr-ca":"Longueur"},globalResources.srpResources.paymentTagTradeIn={"en-ca":"Trade in: {0}.","fr-ca":"Valeur de reprise: {0}. "},globalResources.srpResources.or={"en-ca":" or ","fr-ca":" ou "},globalResources.srpResources.sortByPriceDescending={"en-ca":"Price: High to Low","fr-ca":"Prix : décroissant"},globalResources.srpResources.buttonRVBanner={"en-ca":"List our RV for free","fr-ca":"Annoncez ici, c'est gratuit"},globalResources.srpResources.beginNewSearch={"en-ca":"Begin a new search to provide more results.","fr-ca":"Effectuer une nouvelle recherche pour obtenir plus de résultats."},globalResources.srpResources.readMore={"en-ca":"Read more","fr-ca":"Lire plus"},globalResources.srpResources.maxPricePlaceholder={"en-ca":"Max.&nbsp;Price","fr-ca":"Prix max."},globalResources.srpResources.viewResults={"en-ca":"View Results","fr-ca":"Afficher résultats"},globalResources.srpResources.adStatusDamaged={"en-ca":"Damaged","fr-ca":"Endommagé"},globalResources.srpResources.newSearch={"en-ca":"New Search","fr-ca":"Nouvelle recherche"},globalResources.srpResources.seller={"en-ca":"Seller","fr-ca":"Vendeur"},globalResources.srpResources.minHoursPlaceholder={"en-ca":"Min Hours","fr-ca":"Heures min."},globalResources.srpResources.trimsHeading={"en-ca":"Trim","fr-ca":"Version"},globalResources.srpResources.saveThisSearchButton={"en-ca":"Save this search","fr-ca":"Sauvegarder la recherche"},globalResources.srpResources.trimsListDefault={"en-ca":"Trim (any)","fr-ca":"Version (toutes)"},globalResources.srpResources.fuelTypeHeading={"en-ca":"Fuel Type","fr-ca":"Type de carburant"},globalResources.srpResources.missingLocationModalText={"en-ca":"Please enter your {0} so we can find search results closest to you.","fr-ca":"Veuillez S.V.P. fournir votre {0} afin que nous puissions trouver des résultats de recherche plus près de chez vous."},globalResources.srpResources.firstPage={"en-ca":"< First page","fr-ca":"< Première page"},globalResources.srpResources.searchErrorCallToAction={"en-ca":"Click here to try again.","fr-ca":"Cliquer ici pour réessayer."},globalResources.srpResources.spec_BodyType={"en-ca":"{0}","fr-ca":"{0}"},globalResources.srpResources.to={"en-ca":"to","fr-ca":"à"},globalResources.srpResources.gACarFaxFree={"en-ca":"history report - free","fr-ca":"history report - free"},globalResources.srpResources.modelLabel={"en-ca":"Model","fr-ca":"Modèle"},globalResources.srpResources.icoOnSrpBadge={"en-ca":"Instant Trade-in","fr-ca":"Échange instantané"},globalResources.srpResources.minPaymentRangeAlert={"en-ca":"Please enter a number between 0 and 1,000,000","fr-ca":"Veuillez saisir un nombre entre 0 et 1 000 000 S.V.P."},globalResources.srpResources.no={"en-ca":"No","fr-ca":"Non"},globalResources.srpResources.adWithFreeCarFax={"en-ca":"With Free CARFAX Report","fr-ca":"Avec CARFAX gratuit"},globalResources.srpResources.engineHeading={"en-ca":"Engine","fr-ca":"Moteur"},globalResources.srpResources.deltaPriceAboveMarket={"en-ca":"{0:C0} Above Market","fr-ca":"{0:C0} Supérieur au prix du marchê"},globalResources.srpResources.weeklyPaymentsAvailable={"en-ca":"Weekly Financing","fr-ca":"Financement/sem."},globalResources.srpResources.maxLengthPlaceholder={"en-ca":"Max. Length","fr-ca":"Longueur max."},globalResources.srpResources.keyConditions={"en-ca":"Key Conditions","fr-ca":"Conditions"},globalResources.srpResources.adMsrp={"en-ca":"MSRP","fr-ca":"PDSF"},globalResources.srpResources.adCarFaxBuy={"en-ca":"Buy CARFAX Canada","fr-ca":"Acheter CARFAX Canada"},globalResources.srpResources.noVehiclesFoundProvinceAlert={"en-ca":"No vehicles were found within the province that matched your search selections.","fr-ca":"Aucun véhicule n'a été trouvé à l'intérieur de la province correspondant à vos sélections de recherche."},globalResources.srpResources.maxKilometreLessThenAlert={"en-ca":"Must be greater than Min Kilometres","fr-ca":"Doit être plus grand que Kilomètres min."},globalResources.srpResources.maxPriceRangeAlert={"en-ca":"Please enter a number between 0 and 10,000,000","fr-ca":"Veuillez saisir un nombre entre 0 et 10 000 000 S.V.P."},globalResources.srpResources.searchModelWait={"en-ca":"Vehicle models are loading","fr-ca":"Chargement des résultats"},globalResources.srpResources.maxLengthLessThanAlert={"en-ca":"Must be greater than Min Length.","fr-ca":"Doit être plus grand que la Longueur min."},globalResources.srpResources.adProximity={"en-ca":"Within {0} km","fr-ca":"À {0} km"},globalResources.srpResources.backToAdDetails={"en-ca":"Back to ad details","fr-ca":"Retour aux détails de l'annonce"},globalResources.srpResources.adStatusNew={"en-ca":"New","fr-ca":"Neuf"},globalResources.srpResources.creditRatingGood={"en-ca":"Good","fr-ca":"Bonne"},globalResources.srpResources.contentMotorcycleBanner={"en-ca":'Reach millions of motorcycle shoppers locally and nationally, <a href="{0}">for free</a>',"fr-ca":"Rejoignez d’acheteurs de motos et de VTT localement et dans le reste du Canada"},globalResources.srpResources.dPlusEmailSubjectService={"en-ca":"Inquiry about SERVICE","fr-ca":"Service"},globalResources.srpResources.noVehiclesFoundProximityAlert={"en-ca":'No vehicles were found within <b id="noCarsDistance">{0}</b> kms of your location that matched your search selections.<br />',"fr-ca":"Aucun véhicule n'a été trouvé à l'intérieur de <b id=\"noCarsDistance\">{0}</b> kms de votre emplacement correspondant à vos sélections de recherche.<br />"},globalResources.srpResources.fuelTypeListDefault={"en-ca":"Fuel Type (any)","fr-ca":"Type de carburant (tout)"},globalResources.srpResources.sortByKilometresDescending={"en-ca":"Kilometres: High to Low","fr-ca":"Kilomètres: décroissant"},globalResources.srpResources.resultsWithin={"en-ca":"results within","fr-ca":"résultats à moins de"},globalResources.srpResources.maxWheelbaseLessThenAlert={"en-ca":"Must be greater than Min Wheelbase","fr-ca":"Doit être plus grand que Empattement min."},globalResources.srpResources.adQuickViewLabel={"en-ca":"Quick View","fr-ca":"Aperçu"},globalResources.srpResources.trimsSelectMakeModel={"en-ca":"Please select a make and model first","fr-ca":"Sélectionner une marque et modèle"},globalResources.srpResources.missingLocationModalGo={"en-ca":"GO","fr-ca":"Aller"},globalResources.srpResources.weight={"en-ca":"Weight","fr-ca":"Poids"},globalResources.srpResources.titleBoatBanner={"en-ca":"List your boat here!","fr-ca":"Annoncez votre bateau ici"},globalResources.srpResources.maxPaymentRangeAlert={"en-ca":"Please enter a number between 0 and 1,000,000","fr-ca":"Veuillez saisir un nombre entre 0 et 1 000 000 S.V.P."},globalResources.srpResources.makeNoMatch={"en-ca":"Nothing matches your search","fr-ca":"Rien ne correspond à votre recherche"},globalResources.srpResources.similarVehiclesLinkTextv1={"en-ca":"View {0} similar vehicles from this dealer","fr-ca":"Voir les {0} véhicules similaires de ce détaillant"},globalResources.srpResources.clear={"en-ca":"Clear","fr-ca":"Effacer"},globalResources.srpResources.wheelbaseMax={"en-ca":"Max. Wheelbase","fr-ca":"Empattement max."},globalResources.srpResources.maxHoursLessThenAlert={"en-ca":"Must be greater than Min Hours","fr-ca":"Doit être plus grand que la Heures min."},globalResources.srpResources.dPlusContactDealer={"en-ca":"Contact {0}","fr-ca":"Contacter {0}"},globalResources.srpResources.spec_FuelCity={"en-ca":"{0} (City)","fr-ca":"{0} (ville)"},globalResources.srpResources.titleFarmEquipmentBanner={"en-ca":"List your farm equipment here!","fr-ca":"Annoncez votre équipement de ferme ici"},globalResources.srpResources.maxHoursPlaceholder={"en-ca":"Max Hours","fr-ca":"Heures max."},globalResources.srpResources.seatingCapacityListDefault={"en-ca":"Seating Capacity (any)","fr-ca":"Places (toutes)"},globalResources.srpResources.dPlusEmailSubjectNewVehicle={"en-ca":"Inquiry about NEW vehicle","fr-ca":"Véhicule NEUF"},globalResources.srpResources.locationExample={"en-ca":"e.g. A1A 1A1","fr-ca":"ex.: A1A 1A1"},globalResources.srpResources.subtype={"en-ca":"Sub-type","fr-ca":"Sous-type"},globalResources.srpResources.clickToViewVehicles={"en-ca":"Click here to view the vehicles.","fr-ca":"Cliquez ici pour afficher les résultats."},globalResources.srpResources.nextListing={"en-ca":"Next","fr-ca":"Suivant"},globalResources.srpResources.paymentLabelTemplate={"en-ca":"{0}, {1}, {2} months, {3} down, {4} trade-in","fr-ca":"{0}, {1}, {2} mois, {3} acompte, {4} valeur de reprise"},globalResources.srpResources.searchExpansionCallToActionLink={"en-ca":"Clear all filters","fr-ca":"Réinitialiser filtres"},globalResources.srpResources.locationRequired={"en-ca":"Location - Required","fr-ca":"Emplacement - requis"},globalResources.srpResources.hotDealWidgetTitle={"en-ca":"New Car Deals","fr-ca":"Véhicules neufs"},globalResources.srpResources.creditRatingFair={"en-ca":"Fair","fr-ca":"Passable"},globalResources.srpResources.spec_DriveTrain={"en-ca":"{0}","fr-ca":"{0}"},globalResources.srpResources.paymentFrequencyMonthly={"en-ca":"Monthly","fr-ca":"Mensuel"},globalResources.srpResources.maxHorsepowerPlaceholder={"en-ca":"Max. Horsepower","fr-ca":"Chevaux-vap. max."},globalResources.srpResources.adCarFaxFree={"en-ca":"Free CARFAX Canada","fr-ca":"CARFAX Canada gratuit"},globalResources.srpResources.adCompare={"en-ca":"Compare","fr-ca":"Comparer"},globalResources.srpResources.adStatusUsed={"en-ca":"Used","fr-ca":"Occasion"},globalResources.srpResources.adSaved={"en-ca":"Saved","fr-ca":"Sauvegardé"},globalResources.srpResources.titleTruckBanner={"en-ca":"List your truck here!","fr-ca":"Annoncez votre équipement lourd ici"},globalResources.srpResources.hotDealDefaultLinkText={"en-ca":"{0} more deals","fr-ca":"Plus d'annonces {0}"},globalResources.srpResources.contentTrailerBanner={"en-ca":'Reach millions of trailer shoppers locally and nationally,<a href="{0}">for free</a>',"fr-ca":"Rejoignez d’acheteurs de remorques localement et dans le reste du Canada"},globalResources.srpResources.missingLocationAlert={"en-ca":"{0} is required.","fr-ca":"{0} est requis."},globalResources.srpResources.sort={"en-ca":"Sort:","fr-ca":"Tri:"},globalResources.srpResources.seatingCapacityHeading={"en-ca":"Seating Capacity","fr-ca":"Places"},globalResources.srpResources.sleepsHeading={"en-ca":"Sleeps","fr-ca":"Couche"},globalResources.srpResources.searchButton={"en-ca":"Search","fr-ca":"Rechercher"},globalResources.srpResources.condition={"en-ca":"Condition","fr-ca":"État"},globalResources.srpResources.spec_InteriorColour={"en-ca":"{0} (Int)","fr-ca":"{0} (int)"},globalResources.srpResources.type={"en-ca":"Type","fr-ca":"Type"},globalResources.srpResources.contentWatercraftBanner={"en-ca":'Reach millions of watercraft shoppers locally and nationally, <a href="{0}">for free</a>',"fr-ca":"Rejoignez d’acheteurs de motomarines localement et dans le reste du Canada"},globalResources.srpResources.maxKilometresPlaceholder={"en-ca":"Max. Kilometres","fr-ca":"Kilomètres max."},globalResources.srpResources.lastPage={"en-ca":"Last page >","fr-ca":"Dernière page >"},globalResources.srpResources.reachMillions={"en-ca":"Reach millions of","fr-ca":"Atteindre des millions de"},globalResources.srpResources.sortByLocationNearest={"en-ca":"Location Nearest","fr-ca":"Endroit le plus près"},globalResources.srpResources.addToCompare={"en-ca":"Add to compare","fr-ca":"Ajouter à la comparaison"},globalResources.srpResources.adNewVehicle={"en-ca":"New Vehicle","fr-ca":"Véhicule Neuf"},globalResources.srpResources.maxWeightPlaceholder={"en-ca":"Max. Weight","fr-ca":"Poids max."},globalResources.srpResources.of={"en-ca":"of","fr-ca":"de"},globalResources.srpResources.relatedVehicles={"en-ca":"Here are related vehicles based on your search.","fr-ca":"Voici les véhicules correspondant à vos critères de recherche."},globalResources.srpResources.goButton={"en-ca":"GO","fr-ca":"RECHERCHER"},globalResources.srpResources.priceAnalysisText={"en-ca":"autoTrader compares all vehicles to the average market price in your area based on mileage, region and options.","fr-ca":"autoHEBDO compile le prix moyen de tous les modèles de véhicules dans votre marché local, en fonction du kilométrage et des options."},globalResources.srpResources.contactDealer={"en-ca":"Contact dealer for details","fr-ca":"Joindre vendeur pour détails"},globalResources.srpResources.advancedQuickSearchHeading={"en-ca":"Refine results","fr-ca":"Raffiner résultats"},globalResources.srpResources.keywordSearch={"en-ca":"Keyword Search","fr-ca":"Mots-clés"},globalResources.srpResources.resetAllFilters={"en-ca":"Reset all filters","fr-ca":"Réinitialiser filtres"},globalResources.srpResources.buttonBoatBanner={"en-ca":"List your boat for free","fr-ca":"Annoncez votre bateau, c’est gratuit"},globalResources.srpResources.resultsDisclaimer={"en-ca":'*On approved credit. <br>Click on the bi-weekly payment amount estimate to see Financing details. All new vehicles offered for sale are being offered by registered motor vehicle dealers. For more information, including the APR & financing terms go to the specific vehicle\'s details page. <a href="/dealer/dealerfinder/DealerFinder.aspx">View a list</a> of all dealers and dealer telephone numbers.',"fr-ca":'*Sur approbation de crédit. <br>Cliquer sur l’estimation de paiement pour voir les détails de financement.Tous les véhicules neufs offerts en vente le sont par des concessionnaires de véhicules moteur enregistrés. Pour plus d’information sur les taux et conditions de financement, veuillez consulter la page des détails du véhicule.  <a href="http://wwwa.autohebdo.net/dealer/dealerfinder/dealerfinder.aspx">Consulter la liste</a> de tous les concessionnaires et leur numéro de téléphone.'},globalResources.srpResources.priceAnalysisTextTitle={"en-ca":"What is price analysis iQ?","fr-ca":"Analyse Qi du prix?"},globalResources.srpResources.resetForMoreResultsAlert={"en-ca":"Reset your search or change keyword, distance, make, model, year or other search options to provide more results.","fr-ca":"Réinitialisez votre recherche ou raffinez le mot-clé, la distance, marque, modèle, année, ou autres options pour vous fournir davantage de résultats."},globalResources.srpResources.contentSnowmobileBanner={"en-ca":'Reach millions of snowmobile shoppers locally and nationally, <a href="{0}">for free</a>',"fr-ca":"Rejoignez d’acheteurs de motoneiges localement et dans le reste du Canada"},globalResources.srpResources.buttonTrailerBanner={"en-ca":"List your trailer for free","fr-ca":"Annoncez ici, c'est gratuit"},globalResources.srpResources.searchExpansionListingsTitle={"en-ca":"You might be interested in","fr-ca":"Susceptibles de vous intéresser"},globalResources.srpResources.adCarFaxBuyV2={"en-ca":"Buy report","fr-ca":"Achetez-le"},globalResources.srpResources.adProximityV2={"en-ca":"In {0}, {1} km","fr-ca":"À {0}, {1} km"},globalResources.srpResources.previousListing={"en-ca":"Previous","fr-ca":"Précédent"},globalResources.srpResources.buttonWatercraftBanner={"en-ca":"List your watercraft for free","fr-ca":"Annoncez ici, c'est gratuit"},globalResources.srpResources.termLabel={"en-ca":"Term","fr-ca":"Durée"},globalResources.srpResources.searchExpansionHeader={"en-ca":"No listings match your search criteria","fr-ca":"Aucun véhicule selon vos critères."},globalResources.srpResources.hours={"en-ca":"Hours","fr-ca":"Heures"},globalResources.srpResources.adNewNpvVehicle={"en-ca":"New Inventory","fr-ca":"Véhicule Neuf"},globalResources.srpResources.buttonSnowmobileBanner={"en-ca":"List your snowmobile for free","fr-ca":"Annoncez ici, c'est gratuit"},globalResources.srpResources.previousPage={"en-ca":"Prev","fr-ca":"Préc."},globalResources.srpResources.dPlusPhone={"en-ca":"Phone","fr-ca":"Téléphone"},globalResources.srpResources.adCarFaxRequest={"en-ca":"Request CARFAX Canada","fr-ca":"Demander CARFAX Canada"},globalResources.srpResources.dPlusEmailMessageBox={"en-ca":"Please type your message here","fr-ca":"Veuillez taper votre message ici"},globalResources.srpResources.engineSizeMin={"en-ca":"Min Engine Size","fr-ca":"Taille moteur min."},globalResources.srpResources.advancedInvalidPostalCode={"en-ca":"Postal code must be in A1A 1A1 format.","fr-ca":"Le code postal doit utiliser le format: A1A 1A1."},globalResources.srpResources.anySubType={"en-ca":"Any Sub-type","fr-ca":"Tous sous-types"},globalResources.srpResources.creditRatingVeryGood={"en-ca":"Very Good","fr-ca":"Très bonne"},globalResources.srpResources.minHorsepowerPlaceholder={"en-ca":"Min. Horsepower","fr-ca":"Chevaux-vap. min."},globalResources.srpResources.done={"en-ca":"Done","fr-ca":""},globalResources.srpResources.spec_Doors={"en-ca":"{0} (Doors)","fr-ca":"{0} (portes)"},globalResources.srpResources.postalCode={"en-ca":"postal code","fr-ca":"code postal"},globalResources.srpResources.preferredDate={"en-ca":"Preferred date","fr-ca":"Date voulue"},globalResources.srpResources.buttonHeavyEquipmentBanner={"en-ca":"List your heavy equipment for free","fr-ca":"Annoncez ici, c'est gratuit"},globalResources.srpResources.dPlusName={"en-ca":"Name","fr-ca":"Nom"},globalResources.srpResources.contentHeavyEquipmentBanner={"en-ca":'Reach millions of heavy equipment shoppers locally and nationally, <a href="{0}">for free</a>',"fr-ca":"Rejoignez des acheteurs d’équipements lourds localement et dans le reste du Canada"},globalResources.srpResources.compareModalHeader={"en-ca":"You may only <b>compare 4 vehicles</b>. Remove one vehicle to continue.","fr-ca":"Limite de <b>4 véhicules à comparer</b>. Veuillez retirer un véhicule pour continuer."},globalResources.srpResources.sortByYearAscending={"en-ca":"Year: Old to New","fr-ca":"Année : croissant"},globalResources.srpResources.subPrimeFinanceBadge={"en-ca":"Easy finance approvals","fr-ca":"Financement facile et rapide"},globalResources.srpResources.paymentRateDisclaimer={"en-ca":"APR","fr-ca":"TAP"},globalResources.srpResources.bodyTypesListDefault={"en-ca":"Body Types (any)","fr-ca":"Type de carrosserie (tout)"},globalResources.srpResources.paymentTagDisclaimerTemplateWithDiscount={"en-ca":"Total Price of Vehicle: {0}. {5}{6}Manufacturer’s discount: {1}. {2}Total Obligation: {3}. Total cost of credit: {4}. Freight & PDI included. On Approved Credit {7} Sales tax not included.","fr-ca":"Prix total du véhicule : {0}. {5}{6}Réduction du constructeur: {1}. {2}Obligation totale: {3}. Coût de financement: {4}. Transport et préparation inclus. Sur approbation de crédit {7} Taxes de vente non incluses."},globalResources.srpResources.maxHourRangeAlert={"en-ca":"Please enter a number between 0 and 10,000,000,000","fr-ca":"Veuillez saisir un nombre entre 0 et 10 000 000 000 S.V.P."},globalResources.srpResources.spec_Trim={"en-ca":"{0}","fr-ca":"{0}"},globalResources.srpResources.ad360={"en-ca":"View in 360°","fr-ca":"Vue à 360°"},globalResources.srpResources.yes={"en-ca":"Yes","fr-ca":"Oui"},globalResources.srpResources.titleCarBanner={"en-ca":"List your car here!","fr-ca":"Annoncez votre auto ici!"},globalResources.srpResources.subtypesListDefault={"en-ca":"Sub-type (any)","fr-ca":"Sous-type (tous)"},globalResources.srpResources.dPlusEmail={"en-ca":"Email","fr-ca":"Courriel"},globalResources.srpResources.contentCarBanner={"en-ca":'Reach millions of car shoppers locally and nationally <a href="{0}">for free</a>',"fr-ca":'Joignez des millions d’acheteurs canadiens et locaux, <a href="{0}">c’est gratuit</a>'},globalResources.srpResources.sortByYearDescending={"en-ca":"Year: New to Old","fr-ca":"Année : décroissant"},globalResources.srpResources.spec_Passenger={"en-ca":"{0} (Pass)","fr-ca":"{0} (pass)"},globalResources.srpResources.sortByPriceAscending={"en-ca":"Price: Low to High","fr-ca":"Prix : croissant"},globalResources.srpResources.wheelbase={"en-ca":"Wheelbase","fr-ca":"Empattement"},globalResources.srpResources.dPlusTypeMessage={"en-ca":"Please type your message here","fr-ca":"Veuillez saisir votre message ici"},globalResources.srpResources.adSave={"en-ca":"Save","fr-ca":"Sauvegarder"},globalResources.srpResources.alternativeAdWidgetTitle={"en-ca":"You might also consider","fr-ca":"Modèles semblables à considérer"},globalResources.srpResources.spec_Transmission={"en-ca":"{0}","fr-ca":"{0}"},globalResources.srpResources.keyFeatures={"en-ca":"Key Features","fr-ca":"Faits saillants"},globalResources.srpResources.yearHeading={"en-ca":"Year","fr-ca":"Année"},globalResources.srpResources.titleHeavyEquipmentBanner={"en-ca":"List your heavy equipment here!","fr-ca":"Annoncez votre équipement lourd ici"},globalResources.srpResources.display={"en-ca":"Display:","fr-ca":"Afficher:"},globalResources.srpResources.monthlyPaymentsAvailable={"en-ca":"Monthly Financing","fr-ca":"Financement/mois"},globalResources.srpResources.cancel={"en-ca":"Cancel","fr-ca":"Annuler"},globalResources.srpResources.facetsLoading={"en-ca":"Loading Your Search Results...","fr-ca":"Lire plus"},globalResources.srpResources.paginationFirstPage={"en-ca":"First","fr-ca":"Première"},globalResources.srpResources.paymentTagTermInfo={"en-ca":"based on {0} APR and {1} months term. ","fr-ca":", basé sur taux de {0} sur {1} mois. "},globalResources.srpResources.paymentTagDisclaimerTemplateWithoutDiscount={"en-ca":"Total Price of Vehicle: {0}. {5}{6}{2}Total Obligation: {3}.  Total cost of credit: {4}. Freight & PDI included. On Approved Credit {7} Sales tax not included.","fr-ca":"Prix total du véhicule : {0}. {5}{6}{2}Obligation totale: {3}. Coût de financement: {4}. Transport et préparation inclus. Sur approbation de crédit {7} Taxes de vente non incluses."},globalResources.srpResources.buttonTruckBanner={"en-ca":"List your truck for free","fr-ca":"Annoncez ici, c'est gratuit"},globalResources.srpResources.location={"en-ca":"Location","fr-ca":"Localisation"},globalResources.srpResources.sleepsListDefault={"en-ca":"Sleeps (any)","fr-ca":"Couche (toutes)"},globalResources.srpResources.anyMake={"en-ca":"Any Make","fr-ca":"Toutes marques"},globalResources.srpResources.removeFromGarage={"en-ca":"Remove from garage","fr-ca":"Retirer de garage"},globalResources.srpResources.minLengthPlaceholder={"en-ca":"Min. Length","fr-ca":"Longueur min."},globalResources.srpResources.drivetrainHeading={"en-ca":"Drivetrain","fr-ca":"Entraînement"},globalResources.srpResources.adLocation={"en-ca":"In {0}","fr-ca":"à {0}"},globalResources.srpResources.adMobialsReviews={"en-ca":"({0} reviews)","fr-ca":"({0} avis)"},globalResources.srpResources.dPlusSendMessage={"en-ca":"Send message","fr-ca":"Envoyer message"},globalResources.srpResources.paymentsTabLabel={"en-ca":"Payments","fr-ca":"Paiements"},globalResources.srpResources.conquestTopText={"en-ca":"Advertising - More Search Results Below","fr-ca":"Publicité – voir plus de résultats de recherche ci-dessous"},globalResources.srpResources.paymentFrequencyLabel={"en-ca":"Payment frequency","fr-ca":"Fréquence de paiement"},globalResources.srpResources.belowMsrp={"en-ca":"Below MSRP","fr-ca":"Sous PDSF"},globalResources.srpResources.aboveAverage={"en-ca":"Above Average","fr-ca":"Sup. A Moy."},globalResources.srpResources.advancedMissingPostalCode={"en-ca":"We couldn’t find {0}. Please enter another postal code","fr-ca":"{0}: introuvable. Veuillez entrer un autre code postal."},globalResources.srpResources.makeHeading={"en-ca":"Make","fr-ca":"Marque"},globalResources.srpResources.maxPriceLessThanAlert={"en-ca":"Must be greater than Min Price.","fr-ca":"Doit être plus grand que Prix min."},globalResources.srpResources.titleSnowmobileBanner={"en-ca":"List your snowmobile here!","fr-ca":"Annoncez votre motoneige ici"},globalResources.srpResources.paymentTagFinanceFee={"en-ca":"Finance Fee {0}.","fr-ca":"Frais de financement {0}. "},globalResources.srpResources.hotDealMakeOnlyLinkText={"en-ca":"{0} deals on {1} models","fr-ca":"{0} offres de {1} modèles"},globalResources.srpResources.minYearListDefault={"en-ca":"Min Year","fr-ca":"An. min."},globalResources.srpResources.paginationPrevious={"en-ca":"Prev","fr-ca":"Préc."},globalResources.srpResources.buttonCarBanner={"en-ca":"List your car for free","fr-ca":"Annoncez ici, c'est gratuit"},globalResources.srpResources.adTypeDealer={"en-ca":"Dealer","fr-ca":"Détaillant"},globalResources.srpResources.found={"en-ca":"found","fr-ca":"trouvés"},globalResources.srpResources.priceTabLabel={"en-ca":"Price","fr-ca":"Prix"},globalResources.srpResources.paymentOutOfRangeAlert={"en-ca":"Payment range must not be greater than $1000","fr-ca":"L'écart des paiements doit être < 1000$"},globalResources.srpResources.noMakeModelFound={"en-ca":" No match found","fr-ca":"Aucun résultat"},globalResources.srpResources.noVehiclesFoundNationalAlert={"en-ca":"No vehicles were found within Canada that matched your search selections.","fr-ca":"Aucun véhicule n'a été trouvé à l'intérieur du Canada correspondant à vos sélections de recherche."},globalResources.srpResources.sortByPublishedDateAscending={"en-ca":"Posted Date: Old to New","fr-ca":"Publié : plus anciennes en premier"},globalResources.srpResources.maxYearListDefault={"en-ca":"Max Year","fr-ca":"An. max."},globalResources.srpResources.otherOptions={"en-ca":"Other Options","fr-ca":"Autres options"},globalResources.srpResources.selectMake={"en-ca":"Please select a make first","fr-ca":"Sélectionner une marque"},globalResources.srpResources.minPriceRangeAlert={"en-ca":"Please enter a number between 0 and 10,000,000","fr-ca":"Veuillez saisir un nombre entre 0 et 10 000 000 S.V.P."},globalResources.srpResources.priorityListings={"en-ca":"Priority Listings","fr-ca":"Annonces prioritaires"},globalResources.srpResources.drivetrainListDefault={"en-ca":"Drivetrain (any)","fr-ca":"Entraînement (toutes)"},globalResources.srpResources.contentTruckBanner={"en-ca":'Reach millions of truck shoppers locally and nationally, <a href="{0}">for free</a>',"fr-ca":"Rejoignez des acheteurs d’équipements lourds localement et dans le reste du Canada"},globalResources.srpResources.searchChangeAlert={"en-ca":"You have made changes to your search.","fr-ca":"Vous avez changé votre recherche."},globalResources.srpResources.compareCertifiedPrograms={"en-ca":"Compare Certified Programs","fr-ca":"Comparer les Programmes <br> Certifiés d’occasion"},globalResources.srpResources.horsepower={"en-ca":"Horsepower","fr-ca":"Chevaux-vapeur"},globalResources.srpResources.adAmvicLicensedDealer={"en-ca":"AMVIC Licensed Dealer","fr-ca":"AMVIC Licensed Dealer"},globalResources.srpResources.deltaPriceBelowMarket={"en-ca":"{0:C0} Below Market","fr-ca":"{0:C0} Inférieur au prix du marchê"},globalResources.srpResources.hereLabel={"en-ca":"here!","fr-ca":"ici!"},globalResources.srpResources.adCertifiedPreOwned={"en-ca":"Certified Pre-Owned","fr-ca":"Véhicules Certifiés"},globalResources.srpResources.trimsSelectModel={"en-ca":"Please select a model first","fr-ca":"Sélectionner une modèle"},globalResources.srpResources.invalidLocationAlert={"en-ca":"Please enter a valid {0}.","fr-ca":"Veuillez saisir un {0}."},globalResources.srpResources.adDealerPrice={"en-ca":"Dealer Price","fr-ca":"Prix détaillant"},globalResources.srpResources.contentRVBanner={"en-ca":'Reach millions of RV shoppers locally and nationally, <a href="{0}">for free</a>',"fr-ca":"Rejoignez d’acheteurs de VR localement et dans le reste du Canada"},globalResources.srpResources.srpFlyoverNotFoundSubTitle={"en-ca":"Here are some similar {0}.","fr-ca":"Voici quelques {0} qui correspondent à votre recherche."},globalResources.srpResources.apply={"en-ca":"Apply","fr-ca":"Appliquer"},globalResources.srpResources.sponsoredLinks={"en-ca":"Sponsored Links","fr-ca":"Liens de nos annonceurs"},globalResources.srpResources.omvicResultsDisclaimer={"en-ca":"Disclaimer Information: Please confirm with seller accuracy of information. Mileage recorded at time of listing. Taxes and license are not included in listing price.","fr-ca":"Avis: Veuillez confirmer auprès du vendeur l’exactitude des renseignements publiés. Le kilométrage affiché est la valeur apparaissant au moment de la publication de l’annonce. Taxes et plaque d’immatriculation en sus."},globalResources.srpResources.postalCodeRequired={"en-ca":"Postal code - Required","fr-ca":"Code postal - requis"},globalResources.srpResources.adWithPrice={"en-ca":"With Price","fr-ca":"Avec prix"},globalResources.srpResources.numberOfDoorsHeading={"en-ca":"Doors","fr-ca":"Portières"},globalResources.srpResources.missingLocationModalHeader={"en-ca":"Enter your {0}.","fr-ca":"Fournissez votre {0}."},globalResources.srpResources.adCarFaxRequestV2={"en-ca":"Request report","fr-ca":"Demandez-le"},globalResources.srpResources.nextPage={"en-ca":"Next","fr-ca":"Suiv."},globalResources.srpResources.compareNow={"en-ca":"Compare now","fr-ca":"Comparer maintenant"},globalResources.srpResources.paymentTagCashDown={"en-ca":"Cash down: {0}.","fr-ca":"Acompte: {0}. "},globalResources.srpResources.titleTrailerBanner={"en-ca":"List your trailer here!","fr-ca":"Annoncez votre remorque ici"},globalResources.srpResources.slideOutsHeading={"en-ca":"Slide Outs","fr-ca":"Rallonges"},globalResources.srpResources.dPlusEmailSubjectGeneral={"en-ca":"General Inquiry","fr-ca":"Général"},globalResources.srpResources.paginationLastPage={"en-ca":"Last","fr-ca":"Dernière"},globalResources.srpResources.adSpsStrikethroughText={"en-ca":"Sale! {0} days left","fr-ca":"Sale! {0} days left"},globalResources.srpResources.paymentTagAsLowAs={"en-ca":"As low as","fr-ca":"Pour seulement"},globalResources.srpResources.specs={"en-ca":"Specs","fr-ca":"Spécifications"},globalResources.srpResources.statusNew={"en-ca":"New","fr-ca":"Nouveau"},globalResources.srpResources.sortByPublishedDateDescending={"en-ca":"Posted Date: New to Old","fr-ca":"Publié : plus récentes en premier"},globalResources.srpResources.noMatchFound={"en-ca":"No match found","fr-ca":"Aucun résultat"},globalResources.srpResources.numberOfDoorsListDefault={"en-ca":"Doors (any)","fr-ca":"Portières (toutes)"},globalResources.srpResources.sortByKilometresAscending={"en-ca":"Kilometres: Low to High","fr-ca":"Kilomètres: croissant"},globalResources.srpResources.loadingListings={"en-ca":"Loading your search results...","fr-ca":"Chargement les résultats de votre recherche..."},globalResources.srpResources.creditRatingExcellent={"en-ca":"Excellent","fr-ca":"Excellente"},globalResources.srpResources.mileage={"en-ca":"Mileage","fr-ca":"Kilométrage"},globalResources.queryStringResources.adTypePrivate={"en-ca":"Private","fr-ca":"Particuliers"},globalResources.queryStringResources.adStatusDamaged={"en-ca":"Damaged","fr-ca":"Endommagé"},globalResources.queryStringResources.adTypeDealer={"en-ca":"Dealer","fr-ca":"Commercants"},globalResources.queryStringResources.adStatusUsed={"en-ca":"Used","fr-ca":"Occasion"},globalResources.queryStringResources.adStatusNew={"en-ca":"New","fr-ca":"Neuf"};var ResearchWidget=function(){function ResearchWidget($element){this.$element=$element}return ResearchWidget.prototype.clear=function(){this.$element.html("")},ResearchWidget.prototype.refresh=function(query){var _this=this,str="";isMobile||(str=enableBigBoxRepositionSrp&&"lg"!==BootstrapExtensions.getBootstrapBreakpoint()?'<div id="srpPanel2_lg"></div>':'<div id="srpPanel2_lg"><div id="hulk-bb2" class="col-xs-6 col-lg-12"><script>googleDfpManager.display("hulk-bb2");<\/script></div></div>'),$.ajax({url:"/ResearchBox/Index",type:"POST",data:JSON.stringify(query),accepts:{text:"text/html; charset=utf-8"},headers:{AllowMvt:"true",isAjax:"true",ms:query.micrositeType},contentType:"application/json",success:function(result){_this.$element.html(result),_this.$element.append(str),_this.$element.ready(fb.changeImgSrc())}}).then(function(){$("#researchboxContainer").empty(),$("#researchcollapsedWidget").appendTo("#researchboxContainer"),this.callIfExists(Trader.initSearchModulesDataLayer("False"))})},ResearchWidget}(),FeaturedListing=function(){function FeaturedListing($element,$elementExp){this.$element=$element,this.$elementExp=$elementExp}return FeaturedListing.prototype.addEvents=function(){var me=this;me.$element.on("mouseenter",function(){me.$elementExp.addClass("currentlyMousedOver"),me.clearInterval=setTimeout(function(){me.$elementExp.hasClass("currentlyMousedOver")&&window.innerWidth>1199&&me.$elementExp.fadeIn(10)},800)}),me.$element.on("mouseleave",function(){me.$elementExp.removeClass("currentlyMousedOver"),clearTimeout(me.clearInterval)}),me.$elementExp.on("mouseleave",function(){me.$elementExp.fadeOut(10)})},FeaturedListing}();String.prototype.format||(String.prototype.format=function(){var args=arguments;return this.replace(/{(\d+)}/g,function(match,number){return void 0!==args[number]?args[number]:match})}),function(window,undefined){var Globalize,regexHex,regexInfinity,regexParseFloat,regexTrim,arrayIndexOf,endsWith,extend,isArray,isFunction,isObject,startsWith,trim,truncate,zeroPad,appendPreOrPostMatch,expandFormat,formatDate,formatNumber,getTokenRegExp,getEra,getEraYear,parseExact,parseNegativePattern,expandNumber,expandYear,getDayIndex,getMonthIndex,getParseRegExp,outOfRange,toUpper,toUpperArray;Globalize=function(cultureSelector){return new Globalize.prototype.init(cultureSelector)},"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=Globalize:window.Globalize=Globalize,Globalize.cultures={},Globalize.prototype={constructor:Globalize,init:function(cultureSelector){return this.cultures=Globalize.cultures,this.cultureSelector=cultureSelector,this}},Globalize.prototype.init.prototype=Globalize.prototype,Globalize.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},Globalize.cultures.default.calendar=Globalize.cultures.default.calendars.standard,Globalize.cultures.en=Globalize.cultures.default,Globalize.cultureSelector="en",regexHex=/^0x[a-f0-9]+$/i,regexInfinity=/^[+\-]?infinity$/i,regexParseFloat=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,regexTrim=/^\s+|\s+$/g,arrayIndexOf=function(array,item){if(array.indexOf)return array.indexOf(item);for(var i=0,length=array.length;i<length;i++)if(array[i]===item)return i;return-1},endsWith=function(value,pattern){return value.substr(value.length-pattern.length)===pattern},extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),"object"==typeof target||isFunction(target)||(target={});i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],target!==(copy=options[name])&&(deep&&copy&&(isObject(copy)||(copyIsArray=isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&isArray(src)?src:[]):clone=src&&isObject(src)?src:{},target[name]=extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},isArray=Array.isArray||function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},isFunction=function(obj){return"[object Function]"===Object.prototype.toString.call(obj)},isObject=function(obj){return"[object Object]"===Object.prototype.toString.call(obj)},startsWith=function(value,pattern){return 0===value.indexOf(pattern)},trim=function(value){return(value+"").replace(regexTrim,"")},truncate=function(value){return isNaN(value)?NaN:Math[value<0?"ceil":"floor"](value)},zeroPad=function(str,count,left){var l;for(l=str.length;l<count;l+=1)str=left?"0"+str:str+"0";return str},appendPreOrPostMatch=function(preMatch,strings){for(var quoteCount=0,escaped=!1,i=0,il=preMatch.length;i<il;i++){var c=preMatch.charAt(i);switch(c){case"'":escaped?strings.push("'"):quoteCount++,escaped=!1;break;case"\\":escaped&&strings.push("\\"),escaped=!escaped;break;default:strings.push(c),escaped=!1}}return quoteCount},expandFormat=function(cal,format){format=format||"F";var pattern,patterns=cal.patterns,len=format.length;if(1===len){if(!(pattern=patterns[format]))throw"Invalid date format string '"+format+"'.";format=pattern}else 2===len&&"%"===format.charAt(0)&&(format=format.charAt(1));return format},formatDate=function(value,format,culture){var ret,cal=culture.calendar,convert=cal.convert;if(!format||!format.length||"i"===format){if(culture&&culture.name.length)if(convert)ret=formatDate(value,cal.patterns.F,culture);else{var eraDate=new Date(value.getTime()),era=getEra(value,cal.eras);eraDate.setFullYear(getEraYear(value,cal,era)),ret=eraDate.toLocaleString()}else ret=value.toString();return ret}var eras=cal.eras,sortable="s"===format;format=expandFormat(cal,format),ret=[];var hour,foundDay,checkedDay,converted,zeros=["0","00","000"],dayPartRegExp=/([^d]|^)(d|dd)([^d]|$)/g,quoteCount=0,tokenRegExp=getTokenRegExp();function padZeros(num,c){var r,s=num+"";return c>1&&s.length<c?(r=zeros[c-2]+s).substr(r.length-c,c):r=s}function getPart(date,part){if(converted)return converted[part];switch(part){case 0:return date.getFullYear();case 1:return date.getMonth();case 2:return date.getDate();default:throw"Invalid part value "+part}}for(!sortable&&convert&&(converted=convert.fromGregorian(value));;){var index=tokenRegExp.lastIndex,ar=tokenRegExp.exec(format),preMatch=format.slice(index,ar?ar.index:format.length);if(quoteCount+=appendPreOrPostMatch(preMatch,ret),!ar)break;if(quoteCount%2)ret.push(ar[0]);else{var current=ar[0],clength=current.length;switch(current){case"ddd":case"dddd":var names=3===clength?cal.days.namesAbbr:cal.days.names;ret.push(names[value.getDay()]);break;case"d":case"dd":foundDay=!0,ret.push(padZeros(getPart(value,2),clength));break;case"MMM":case"MMMM":var part=getPart(value,1);ret.push(cal.monthsGenitive&&(foundDay||checkedDay?foundDay:(foundDay=dayPartRegExp.test(format),checkedDay=!0,foundDay))?cal.monthsGenitive[3===clength?"namesAbbr":"names"][part]:cal.months[3===clength?"namesAbbr":"names"][part]);break;case"M":case"MM":ret.push(padZeros(getPart(value,1)+1,clength));break;case"y":case"yy":case"yyyy":part=converted?converted[0]:getEraYear(value,cal,getEra(value,eras),sortable),clength<4&&(part%=100),ret.push(padZeros(part,clength));break;case"h":case"hh":0===(hour=value.getHours()%12)&&(hour=12),ret.push(padZeros(hour,clength));break;case"H":case"HH":ret.push(padZeros(value.getHours(),clength));break;case"m":case"mm":ret.push(padZeros(value.getMinutes(),clength));break;case"s":case"ss":ret.push(padZeros(value.getSeconds(),clength));break;case"t":case"tt":part=value.getHours()<12?cal.AM?cal.AM[0]:" ":cal.PM?cal.PM[0]:" ",ret.push(1===clength?part.charAt(0):part);break;case"f":case"ff":case"fff":ret.push(padZeros(value.getMilliseconds(),3).substr(0,clength));break;case"z":case"zz":hour=value.getTimezoneOffset()/60,ret.push((hour<=0?"+":"-")+padZeros(Math.floor(Math.abs(hour)),clength));break;case"zzz":hour=value.getTimezoneOffset()/60,ret.push((hour<=0?"+":"-")+padZeros(Math.floor(Math.abs(hour)),2)+":"+padZeros(Math.abs(value.getTimezoneOffset()%60),2));break;case"g":case"gg":cal.eras&&ret.push(cal.eras[getEra(value,eras)].name);break;case"/":ret.push(cal["/"]);break;default:throw"Invalid date format pattern '"+current+"'."}}}return ret.join("")},expandNumber=function(number,precision,formatInfo){var groupSizes=formatInfo.groupSizes,curSize=groupSizes[0],curGroupIndex=1,factor=Math.pow(10,precision),rounded=Math.round(number*factor)/factor;isFinite(rounded)||(rounded=number);var numberString=(number=rounded)+"",right="",split=numberString.split(/e/i),exponent=split.length>1?parseInt(split[1],10):0;numberString=(split=(numberString=split[0]).split("."))[0],right=split.length>1?split[1]:"",exponent>0?(numberString+=(right=zeroPad(right,exponent,!1)).slice(0,exponent),right=right.substr(exponent)):exponent<0&&(right=(numberString=zeroPad(numberString,1+(exponent=-exponent),!0)).slice(-exponent,numberString.length)+right,numberString=numberString.slice(0,-exponent)),right=precision>0?formatInfo["."]+(right.length>precision?right.slice(0,precision):zeroPad(right,precision)):"";for(var stringIndex=numberString.length-1,sep=formatInfo[","],ret="";stringIndex>=0;){if(0===curSize||curSize>stringIndex)return numberString.slice(0,stringIndex+1)+(ret.length?sep+ret+right:right);ret=numberString.slice(stringIndex-curSize+1,stringIndex+1)+(ret.length?sep+ret:""),stringIndex-=curSize,curGroupIndex<groupSizes.length&&(curSize=groupSizes[curGroupIndex],curGroupIndex++)}return numberString.slice(0,stringIndex+1)+sep+ret+right},formatNumber=function(value,format,culture){if(!isFinite(value))return value===1/0?culture.numberFormat.positiveInfinity:value===-1/0?culture.numberFormat.negativeInfinity:culture.numberFormat.NaN;if(!format||"i"===format)return culture.name.length?value.toLocaleString():value.toString();format=format||"D";var pattern,nf=culture.numberFormat,number=Math.abs(value),precision=-1;format.length>1&&(precision=parseInt(format.slice(1),10));var formatInfo,current=format.charAt(0).toUpperCase();switch(current){case"D":pattern="n",number=truncate(number),-1!==precision&&(number=zeroPad(""+number,precision,!0)),value<0&&(number="-"+number);break;case"N":formatInfo=nf;case"C":formatInfo=formatInfo||nf.currency;case"P":formatInfo=formatInfo||nf.percent,pattern=value<0?formatInfo.pattern[0]:formatInfo.pattern[1]||"n",-1===precision&&(precision=formatInfo.decimals),number=expandNumber(number*("P"===current?100:1),precision,formatInfo);break;default:throw"Bad number format specifier: "+current}for(var patternParts=/n|\$|-|%/g,ret="";;){var index=patternParts.lastIndex,ar=patternParts.exec(pattern);if(ret+=pattern.slice(index,ar?ar.index:pattern.length),!ar)break;switch(ar[0]){case"n":ret+=number;break;case"$":ret+=nf.currency.symbol;break;case"-":/[1-9]/.test(number)&&(ret+=nf["-"]);break;case"%":ret+=nf.percent.symbol}}return ret},getTokenRegExp=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},getEra=function(date,eras){if(!eras)return 0;for(var start,ticks=date.getTime(),i=0,l=eras.length;i<l;i++)if(null===(start=eras[i].start)||ticks>=start)return i;return 0},getEraYear=function(date,cal,era,sortable){var year=date.getFullYear();return!sortable&&cal.eras&&(year-=cal.eras[era].offset),year},expandYear=function(cal,year){if(year<100){var now=new Date,era=getEra(now),curr=getEraYear(now,cal,era),twoDigitYearMax=cal.twoDigitYearMax;(year+=curr-curr%100)>(twoDigitYearMax="string"==typeof twoDigitYearMax?(new Date).getFullYear()%100+parseInt(twoDigitYearMax,10):twoDigitYearMax)&&(year-=100)}return year},getDayIndex=function(cal,value,abbr){var ret,days=cal.days,upperDays=cal._upperDays;return upperDays||(cal._upperDays=upperDays=[toUpperArray(days.names),toUpperArray(days.namesAbbr),toUpperArray(days.namesShort)]),value=toUpper(value),abbr?-1===(ret=arrayIndexOf(upperDays[1],value))&&(ret=arrayIndexOf(upperDays[2],value)):ret=arrayIndexOf(upperDays[0],value),ret},getMonthIndex=function(cal,value,abbr){var months=cal.months,monthsGen=cal.monthsGenitive||cal.months,upperMonths=cal._upperMonths,upperMonthsGen=cal._upperMonthsGen;upperMonths||(cal._upperMonths=upperMonths=[toUpperArray(months.names),toUpperArray(months.namesAbbr)],cal._upperMonthsGen=upperMonthsGen=[toUpperArray(monthsGen.names),toUpperArray(monthsGen.namesAbbr)]),value=toUpper(value);var i=arrayIndexOf(abbr?upperMonths[1]:upperMonths[0],value);return i<0&&(i=arrayIndexOf(abbr?upperMonthsGen[1]:upperMonthsGen[0],value)),i},getParseRegExp=function(cal,format){var re=cal._parseRegExp;if(re){var reFormat=re[format];if(reFormat)return reFormat}else cal._parseRegExp=re={};for(var match,expFormat=expandFormat(cal,format).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),regexp=["^"],groups=[],index=0,quoteCount=0,tokenRegExp=getTokenRegExp();null!==(match=tokenRegExp.exec(expFormat));){var preMatch=expFormat.slice(index,match.index);if(index=tokenRegExp.lastIndex,(quoteCount+=appendPreOrPostMatch(preMatch,regexp))%2)regexp.push(match[0]);else{var add,m=match[0],len=m.length;switch(m){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":add="(\\D+)";break;case"tt":case"t":add="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":add="(\\d{"+len+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":add="(\\d\\d?)";break;case"zzz":add="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":add="([+-]?\\d\\d?)";break;case"/":add="(\\/)";break;default:throw"Invalid date format pattern '"+m+"'."}add&&regexp.push(add),groups.push(match[0])}}appendPreOrPostMatch(expFormat.slice(index),regexp),regexp.push("$");var parseRegExp={regExp:regexp.join("").replace(/\s+/g,"\\s+"),groups:groups};return re[format]=parseRegExp},outOfRange=function(value,low,high){return value<low||value>high},toUpper=function(value){return value.split(" ").join(" ").toUpperCase()},toUpperArray=function(arr){for(var results=[],i=0,l=arr.length;i<l;i++)results[i]=toUpper(arr[i]);return results},parseExact=function(value,format,culture){value=trim(value);var cal=culture.calendar,parseInfo=getParseRegExp(cal,format),match=new RegExp(parseInfo.regExp).exec(value);if(null===match)return null;for(var hourOffset,groups=parseInfo.groups,era=null,year=null,month=null,date=null,weekDay=null,hour=0,min=0,sec=0,msec=0,tzMinOffset=null,pmHour=!1,j=0,jl=groups.length;j<jl;j++){var matchGroup=match[j+1];if(matchGroup){var current=groups[j],clength=current.length,matchInt=parseInt(matchGroup,10);switch(current){case"dd":case"d":if(outOfRange(date=matchInt,1,31))return null;break;case"MMM":case"MMMM":if(month=getMonthIndex(cal,matchGroup,3===clength),outOfRange(month,0,11))return null;break;case"M":case"MM":if(outOfRange(month=matchInt-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(year=clength<4?expandYear(cal,matchInt):matchInt,outOfRange(year,0,9999))return null;break;case"h":case"hh":if(12===(hour=matchInt)&&(hour=0),outOfRange(hour,0,11))return null;break;case"H":case"HH":if(outOfRange(hour=matchInt,0,23))return null;break;case"m":case"mm":if(outOfRange(min=matchInt,0,59))return null;break;case"s":case"ss":if(outOfRange(sec=matchInt,0,59))return null;break;case"tt":case"t":if(!(pmHour=cal.PM&&(matchGroup===cal.PM[0]||matchGroup===cal.PM[1]||matchGroup===cal.PM[2]))&&(!cal.AM||matchGroup!==cal.AM[0]&&matchGroup!==cal.AM[1]&&matchGroup!==cal.AM[2]))return null;break;case"f":case"ff":case"fff":if(msec=matchInt*Math.pow(10,3-clength),outOfRange(msec,0,999))return null;break;case"ddd":case"dddd":if(weekDay=getDayIndex(cal,matchGroup,3===clength),outOfRange(weekDay,0,6))return null;break;case"zzz":var offsets=matchGroup.split(/:/);if(2!==offsets.length)return null;if(hourOffset=parseInt(offsets[0],10),outOfRange(hourOffset,-12,13))return null;var minOffset=parseInt(offsets[1],10);if(outOfRange(minOffset,0,59))return null;tzMinOffset=60*hourOffset+(startsWith(matchGroup,"-")?-minOffset:minOffset);break;case"z":case"zz":if(outOfRange(hourOffset=matchInt,-12,13))return null;tzMinOffset=60*hourOffset;break;case"g":case"gg":var eraName=matchGroup;if(!eraName||!cal.eras)return null;eraName=trim(eraName.toLowerCase());for(var i=0,l=cal.eras.length;i<l;i++)if(eraName===cal.eras[i].name.toLowerCase()){era=i;break}if(null===era)return null}}}var defaultYear,result=new Date,convert=cal.convert;if(defaultYear=convert?convert.fromGregorian(result)[0]:result.getFullYear(),null===year?year=defaultYear:cal.eras&&(year+=cal.eras[era||0].offset),null===month&&(month=0),null===date&&(date=1),convert){if(null===(result=convert.toGregorian(year,month,date)))return null}else{if(result.setFullYear(year,month,date),result.getDate()!==date)return null;if(null!==weekDay&&result.getDay()!==weekDay)return null}if(pmHour&&hour<12&&(hour+=12),result.setHours(hour,min,sec,msec),null!==tzMinOffset){var adjustedMin=result.getMinutes()-(tzMinOffset+result.getTimezoneOffset());result.setHours(result.getHours()+parseInt(adjustedMin/60,10),adjustedMin%60)}return result},parseNegativePattern=function(value,nf,negativePattern){var ret,neg=nf["-"],pos=nf["+"];switch(negativePattern){case"n -":neg=" "+neg,pos=" "+pos;case"n-":endsWith(value,neg)?ret=["-",value.substr(0,value.length-neg.length)]:endsWith(value,pos)&&(ret=["+",value.substr(0,value.length-pos.length)]);break;case"- n":neg+=" ",pos+=" ";case"-n":startsWith(value,neg)?ret=["-",value.substr(neg.length)]:startsWith(value,pos)&&(ret=["+",value.substr(pos.length)]);break;case"(n)":startsWith(value,"(")&&endsWith(value,")")&&(ret=["-",value.substr(1,value.length-2)])}return ret||["",value]},Globalize.prototype.findClosestCulture=function(cultureSelector){return Globalize.findClosestCulture.call(this,cultureSelector)},Globalize.prototype.format=function(value,format,cultureSelector){return Globalize.format.call(this,value,format,cultureSelector)},Globalize.prototype.localize=function(key,cultureSelector){return Globalize.localize.call(this,key,cultureSelector)},Globalize.prototype.parseInt=function(value,radix,cultureSelector){return Globalize.parseInt.call(this,value,radix,cultureSelector)},Globalize.prototype.parseFloat=function(value,radix,cultureSelector){return Globalize.parseFloat.call(this,value,radix,cultureSelector)},Globalize.prototype.culture=function(cultureSelector){return Globalize.culture.call(this,cultureSelector)},Globalize.addCultureInfo=function(cultureName,baseCultureName,info){var base={},isNew=!1;"string"!=typeof cultureName?(info=cultureName,cultureName=this.culture().name,base=this.cultures[cultureName]):"string"!=typeof baseCultureName?(info=baseCultureName,isNew=null==this.cultures[cultureName],base=this.cultures[cultureName]||this.cultures.default):(isNew=!0,base=this.cultures[baseCultureName]),this.cultures[cultureName]=extend(!0,{},base,info),isNew&&(this.cultures[cultureName].calendar=this.cultures[cultureName].calendars.standard)},Globalize.findClosestCulture=function(name){var match;if(!name)return this.findClosestCulture(this.cultureSelector)||this.cultures.default;if("string"==typeof name&&(name=name.split(",")),isArray(name)){var lang,i,cultures=this.cultures,list=name,l=list.length,prioritized=[];for(i=0;i<l;i++){var pri,parts=(name=trim(list[i])).split(";");lang=trim(parts[0]),1===parts.length?pri=1:0===(name=trim(parts[1])).indexOf("q=")?(name=name.substr(2),pri=parseFloat(name),pri=isNaN(pri)?0:pri):pri=1,prioritized.push({lang:lang,pri:pri})}for(prioritized.sort(function(a,b){return a.pri<b.pri?1:a.pri>b.pri?-1:0}),i=0;i<l;i++)if(match=cultures[lang=prioritized[i].lang])return match;for(i=0;i<l;i++)for(lang=prioritized[i].lang;;){var index=lang.lastIndexOf("-");if(-1===index)break;if(match=cultures[lang=lang.substr(0,index)])return match}for(i=0;i<l;i++)for(var cultureKey in lang=prioritized[i].lang,cultures){var culture=cultures[cultureKey];if(culture.language==lang)return culture}}else if("object"==typeof name)return name;return match||null},Globalize.format=function(value,format,cultureSelector){var culture=this.findClosestCulture(cultureSelector);return value instanceof Date?value=formatDate(value,format,culture):"number"==typeof value&&(value=formatNumber(value,format,culture)),value},Globalize.localize=function(key,cultureSelector){return this.findClosestCulture(cultureSelector).messages[key]||this.cultures.default.messages[key]},Globalize.parseDate=function(value,formats,culture){var date,prop,patterns;if(culture=this.findClosestCulture(culture),formats){if("string"==typeof formats&&(formats=[formats]),formats.length)for(var i=0,l=formats.length;i<l;i++){var format=formats[i];if(format&&(date=parseExact(value,format,culture)))break}}else for(prop in patterns=culture.calendar.patterns)if(date=parseExact(value,patterns[prop],culture))break;return date||null},Globalize.parseInt=function(value,radix,cultureSelector){return truncate(Globalize.parseFloat(value,radix,cultureSelector))},Globalize.parseFloat=function(value,radix,cultureSelector){"number"!=typeof radix&&(cultureSelector=radix,radix=10);var culture=this.findClosestCulture(cultureSelector),ret=NaN,nf=culture.numberFormat;if(value.indexOf(culture.numberFormat.currency.symbol)>-1&&(value=(value=value.replace(culture.numberFormat.currency.symbol,"")).replace(culture.numberFormat.currency["."],culture.numberFormat["."])),value=trim(value),regexInfinity.test(value))ret=parseFloat(value);else if(!radix&&regexHex.test(value))ret=parseInt(value,16);else{var signInfo=parseNegativePattern(value,nf,nf.pattern[0]),sign=signInfo[0],num=signInfo[1];""===sign&&"(n)"!==nf.pattern[0]&&(sign=(signInfo=parseNegativePattern(value,nf,"(n)"))[0],num=signInfo[1]),""===sign&&"-n"!==nf.pattern[0]&&(sign=(signInfo=parseNegativePattern(value,nf,"-n"))[0],num=signInfo[1]),sign=sign||"+";var exponent,intAndFraction,exponentPos=num.indexOf("e");exponentPos<0&&(exponentPos=num.indexOf("E")),exponentPos<0?(intAndFraction=num,exponent=null):(intAndFraction=num.substr(0,exponentPos),exponent=num.substr(exponentPos+1));var integer,fraction,decSep=nf["."],decimalPos=intAndFraction.indexOf(decSep);decimalPos<0?(integer=intAndFraction,fraction=null):(integer=intAndFraction.substr(0,decimalPos),fraction=intAndFraction.substr(decimalPos+decSep.length));var groupSep=nf[","];integer=integer.split(groupSep).join("");var altGroupSep=groupSep.replace(/\u00A0/g," ");groupSep!==altGroupSep&&(integer=integer.split(altGroupSep).join(""));var p=sign+integer;if(null!==fraction&&(p+="."+fraction),null!==exponent){var expSignInfo=parseNegativePattern(exponent,nf,"-n");p+="e"+(expSignInfo[0]||"+")+expSignInfo[1]}regexParseFloat.test(p)&&(ret=parseFloat(p))}return ret},Globalize.culture=function(cultureSelector){return void 0!==cultureSelector&&(this.cultureSelector=cultureSelector),this.findClosestCulture(cultureSelector)||this.cultures.default}}(this),function(window,undefined){("undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?require("globalize"):window.Globalize).addCultureInfo("en-CA","default",{name:"en-CA",englishName:"English (Canada)",nativeName:"English (Canada)",numberFormat:{currency:{pattern:["-$n","$n"]}},calendars:{standard:{patterns:{d:"dd/MM/yyyy",D:"MMMM-dd-yy",f:"MMMM-dd-yy h:mm tt",F:"MMMM-dd-yy h:mm:ss tt"}}}})}(this),function(window,undefined){("undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?require("globalize"):window.Globalize).addCultureInfo("fr-CA","default",{name:"fr-CA",englishName:"French (Canada)",nativeName:"français (Canada)",language:"fr",numberFormat:{",":" ",".":",",NaN:"Non Numérique",negativeInfinity:"-Infini",positiveInfinity:"+Infini",percent:{",":" ",".":","},currency:{pattern:["(n $)","n $"],",":" ",".":","}},calendars:{standard:{"/":"-",days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"yyyy-MM-dd",D:"d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d MMMM yyyy HH:mm",F:"d MMMM yyyy HH:mm:ss",M:"d MMMM"}}}})}(this);var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.LazyLoad=b()}(this,function(){"use strict";var a={elements_selector:"img",container:window,threshold:300,throttle:150,data_src:"original",data_srcset:"originalSet",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_initial:"initial",skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null},b=!("onscroll"in window)||/glebot/.test(navigator.userAgent),c=function(a,b){a&&a(b)},d=function(a){return a.getBoundingClientRect().top+window.pageYOffset-a.ownerDocument.documentElement.clientTop},f=function(a){return a.getBoundingClientRect().left+window.pageXOffset-a.ownerDocument.documentElement.clientLeft},j=function(a,b,c){return!(function(a,b,c){return(b===window?window.innerHeight+window.pageYOffset:d(b)+b.offsetHeight)<=d(a)-c}(a,b,c)||function(a,b,c){return(b===window?window.pageYOffset:d(b))>=d(a)+c+a.offsetHeight}(a,b,c)||function(a,b,c){var d=window.innerWidth;return(b===window?d+window.pageXOffset:f(b)+d)<=f(a)-c}(a,b,c)||function(a,b,c){return(b===window?window.pageXOffset:f(b))>=f(a)+c+a.offsetWidth}(a,b,c))},k=function(a,b){var c=new a(b),d=new CustomEvent("LazyLoad::Initialized",{detail:{instance:c}});window.dispatchEvent(d)},n=function(b){this._settings=_extends({},a,b),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._boundHandleScroll=this.handleScroll.bind(this),this._isFirstLoop=!0,window.addEventListener("resize",this._boundHandleScroll),this.update()};n.prototype={_reveal:function(a){var b=this._settings,d=function d(){b&&(a.removeEventListener("load",e),a.removeEventListener("error",d),a.classList.remove(b.class_loading),a.classList.add(b.class_error),c(b.callback_error,a))},e=function e(){b&&(a.classList.remove(b.class_loading),a.classList.add(b.class_loaded),a.removeEventListener("load",e),a.removeEventListener("error",d),c(b.callback_load,a))};"IMG"!==a.tagName&&"IFRAME"!==a.tagName||(a.addEventListener("load",e),a.addEventListener("error",d),a.classList.add(b.class_loading)),function(a,b,c){var d=a.tagName,e=a.dataset[c];if("IMG"===d){!function(a,b){var c=a.parentElement;if("PICTURE"===c.tagName)for(var d=0;d<c.children.length;d++){var e=c.children[d];if("SOURCE"===e.tagName){var f=e.dataset[b];f&&e.setAttribute("srcset",f)}}}(a,b);var f=a.dataset[b];return f&&a.setAttribute("srcset",f),void(e&&a.setAttribute("src",e))}"IFRAME"!==d?e&&(a.style.backgroundImage='url("'+e+'")'):e&&a.setAttribute("src",e)}(a,b.data_srcset,b.data_src),c(b.callback_set,a)},_loopThroughElements:function(){var a=this._settings,d=this._elements,e=d?d.length:0,f=void 0,g=[],h=this._isFirstLoop;for(f=0;f<e;f++){var i=d[f];a.skip_invisible&&null===i.offsetParent||(b||j(i,a.container,a.threshold))&&(h&&i.classList.add(a.class_initial),this._reveal(i),g.push(f),i.dataset.wasProcessed=!0)}for(;g.length;)d.splice(g.pop(),1),c(a.callback_processed,d.length);0===e&&this._stopScrollHandler(),h&&(this._isFirstLoop=!1)},_purgeElements:function(){var a=this._elements,b=a.length,c=void 0,d=[];for(c=0;c<b;c++)a[c].dataset.wasProcessed&&d.push(c);for(;d.length>0;)a.splice(d.pop(),1)},_startScrollHandler:function(){this._isHandlingScroll||(this._isHandlingScroll=!0,this._settings.container.addEventListener("scroll",this._boundHandleScroll))},_stopScrollHandler:function(){this._isHandlingScroll&&(this._isHandlingScroll=!1,this._settings.container.removeEventListener("scroll",this._boundHandleScroll))},handleScroll:function(){var a=this._settings.throttle;if(0!==a){var b=Date.now(),c=a-(b-this._previousLoopTime);c<=0||c>a?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=b,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(function(){this._previousLoopTime=Date.now(),this._loopTimeout=null,this._loopThroughElements()}.bind(this),c))}else this._loopThroughElements()},update:function(){this._elements=Array.prototype.slice.call(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()},destroy:function(){window.removeEventListener("resize",this._boundHandleScroll),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null}};var o=window.lazyLoadOptions;return o&&function(a,b){var c=b.length;if(c)for(var d=0;d<c;d++)k(a,b[d]);else k(a,b)}(n,o),n});var PaymentTag=function(){function PaymentTag(url,timeout,disclaimerTemplateWithDiscount,disclaimerTemplateWithoutDiscount,disclaimerTemplateWithDiscountUsed,disclaimerTemplateWithoutDiscountUsed,tradeInText,cashDownText,financeFeeText,termInfoText,isEnabled,culture){void 0===isEnabled&&(isEnabled=!0),void 0===culture&&(culture="en-CA"),this.timeout=timeout,this.url=url,this.isEnabled=isEnabled,this.disclaimerTemplateWithDiscount=disclaimerTemplateWithDiscount,this.disclaimerTemplateWithoutDiscount=disclaimerTemplateWithoutDiscount,this.disclaimerTemplateWithDiscountUsed=disclaimerTemplateWithDiscountUsed,this.disclaimerTemplateWithoutDiscountUsed=disclaimerTemplateWithoutDiscountUsed,this.tradeInText=tradeInText,this.cashDownText=cashDownText,this.financeFeeText=financeFeeText,this.termInfoText=termInfoText,this.culture=culture}return PaymentTag.prototype.getAdIds=function(){var adIds="";return $(".asLowAs[style*='display: none']").each(function(){adIds+=$(this).data("payment-tag-adid")+","}),adIds.length>0&&(adIds=adIds.substr(0,adIds.length-1)),adIds},PaymentTag.prototype.getFullUrl=function(){if(this.adIds=this.getAdIds(),0===this.adIds.length)return"";if(null===fb)return"";var isPaymentTabActive=$(".paymentTab").parent().hasClass("active")&&!$("#expandedSearchMessage").is(":visible");this.cashDown=isPaymentTabActive?Number(fb.cashDownInput.val()):0,this.tradeIn=isPaymentTabActive?Number(fb.tradeInInput.val()):0,this.paymentFrequency=isPaymentTabActive?Number(fb.$paymentFrequencyDropdown.value):3,this.creditRating=isPaymentTabActive?Number(fb.$creditRatingDropdown.value):1,this.terms=isPaymentTabActive?Number(fb.$termDropdown.value):0;var fullUrl=this.url+"?adIds="+this.adIds;return 0!==this.cashDown&&(fullUrl=fullUrl+"&cashDown="+this.cashDown),0!==this.tradeIn&&(fullUrl=fullUrl+"&tradeIn="+this.tradeIn),fullUrl=fullUrl+"&terms="+this.terms,this.paymentFrequency&&(fullUrl=fullUrl+"&paymentFrequency="+this.paymentFrequency),this.creditRating&&(fullUrl=fullUrl+"&creditRating="+this.creditRating),fullUrl},PaymentTag.prototype.showDisclaimer=function(adId,paymentTagViewModel,culture,isNew,province){var disclaimerTemplate=paymentTagViewModel.Discount>0?this.disclaimerTemplateWithDiscount:this.disclaimerTemplateWithoutDiscount;"False"===isNew&&(disclaimerTemplate=paymentTagViewModel.Discount>0?this.disclaimerTemplateWithDiscountUsed:this.disclaimerTemplateWithoutDiscountUsed);var tradeInText=paymentTagViewModel.TradeIn>0?this.tradeInText.format(Globalize.format(parseFloat(paymentTagViewModel.TradeIn),"C0",culture)):"",cashDownText=paymentTagViewModel.TradeIn>0?this.cashDownText.format(Globalize.format(parseFloat(paymentTagViewModel.CashDown),"C0",culture)):"",financeFeeText=paymentTagViewModel.Fee>0?this.financeFeeText.format(Globalize.format(parseFloat(paymentTagViewModel.Fee),"C0",culture)):"",rate=paymentTagViewModel.Rate?parseFloat(paymentTagViewModel.Rate)/100:0,termInfo=this.termInfoText.format(Globalize.format(parseFloat(rate.toString()),"P2",culture),paymentTagViewModel.Term),disclaimerText=disclaimerTemplate.format(Globalize.format(parseFloat(paymentTagViewModel.TotalPriceOfVehicle),"C0",culture),Globalize.format(parseFloat(paymentTagViewModel.Discount),"C0",culture),financeFeeText,Globalize.format(parseFloat(paymentTagViewModel.TotalObligation),"C0",culture),Globalize.format(parseFloat(paymentTagViewModel.TotalCostOfCredit),"C0",culture),tradeInText,cashDownText,termInfo);isMobile||$("div[data-payment-tag-adid="+adId+"]").popover({html:!0,trigger:"click",content:function(){return disclaimerText},placement:"top"}).on("click",function(){$(this).siblings(".popover").addClass("payment-tag-popover")})},PaymentTag.prototype.showPaymentTags=function(){var self=this;if(this.isEnabled&&null!=this.url&&""!==this.url){var fullUrl=this.getFullUrl();if(""!==fullUrl){var srpDataLayerManager=window.srpDataLayerManager||new SrpDataLayerManager;$.ajax({url:fullUrl,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},timeout:this.timeout,success:function(result){$.each(result,function(adId,paymentTagViewModel){if(null!=paymentTagViewModel&&null!=paymentTagViewModel.Installment&&paymentTagViewModel.Installment>0&&null!=paymentTagViewModel.AllowedPaymentFrequency&&paymentTagViewModel.AllowedPaymentFrequency.length>0){var paymentInfoContainerSelector="div[data-payment-tag-adid="+adId+"]";if(paymentTagViewModel.AllowedPaymentFrequency.includes(paymentTagViewModel.PaymentFrequency)){var modelInstallment=paymentTagViewModel.Installment?parseFloat(paymentTagViewModel.Installment):0,installment=Globalize.format(modelInstallment,"C0",self.culture),modelRate=paymentTagViewModel.Rate?parseFloat(paymentTagViewModel.Rate)/100:0,rate=Globalize.format(modelRate,"P2",self.culture),isNew=$(paymentInfoContainerSelector).data("paymentTagIsnew"),province=$(paymentInfoContainerSelector).data("paymentProvince");self.showDisclaimer(adId,paymentTagViewModel,self.culture,isNew,province),1===paymentTagViewModel.PaymentFrequency&&$(paymentInfoContainerSelector+" .paymentTagMonthly").show(),3===paymentTagViewModel.PaymentFrequency&&$(paymentInfoContainerSelector+" .paymentTagBiWeekly").show(),4===paymentTagViewModel.PaymentFrequency&&$(paymentInfoContainerSelector+" .paymentTagWeekly").show(),$(paymentInfoContainerSelector+" .payment-tag-rate").text(rate),$(paymentInfoContainerSelector+" .payment-tag-installment").text(installment),$(paymentInfoContainerSelector+" .payment-tag-with-rate-text").show(),$(paymentInfoContainerSelector+" .line1").show(),$(paymentInfoContainerSelector+" .line2").show()}else $(paymentInfoContainerSelector+" .alternative-payment-options").show(),paymentTagViewModel.AllowedPaymentFrequency.length>1?$(paymentInfoContainerSelector+" .financing-options-available").show():1==paymentTagViewModel.AllowedPaymentFrequency.find(function(freq){return freq})?$(paymentInfoContainerSelector+" .monthly-payments-available").show():4==paymentTagViewModel.AllowedPaymentFrequency.find(function(freq){return freq})&&$(paymentInfoContainerSelector+" .weekly-payments-available").show();isMobile&&$("#payment-tag-container-"+adId).show(),$(paymentInfoContainerSelector).show(500)}else $("div[data-hotdeal-price-adid="+adId+"]").show(500)}),srpDataLayerManager.addDataLayerAjaxListImpressions(result)},error:function(result){console.log("showPaymentTags: "+result),$(".hot-deal-price").show(500),srpDataLayerManager.addDataLayerAjaxListImpressions(result)}})}else $(".hot-deal-price").show(500)}else $(".hot-deal-price").show(500)},PaymentTag}(),PaymentTagSrp=function(){function PaymentTagSrp(){}return PaymentTagSrp.generate=function(adid){if($(window).width()<=767){var paymentTagMonthly=$("<span>",{class:"paymentTagMonthly",style:"display:none",text:" "+(new Resources).getSearchResource("paymentFrequencyMonthly")}),paymentTagBiWeekly=$("<span>",{class:"paymentTagBiWeekly",style:"display:none",text:" "+(new Resources).getSearchResource("paymentFrequencyBiWeekly")}),paymentTagWeekly=$("<span>",{class:"paymentTagWeekly",style:"display:none",text:" "+(new Resources).getSearchResource("paymentFrequencyWeekly")}),redTag=$("<div>",{class:"red-tag hidden"}).append($("<div>",{class:"payment-tag-img"})).append($("<div>",{class:"payment-tag-installment"})),paymentTagTax=$("<div>",{class:"payment-tag-text hidden"}).append(paymentTagMonthly+"*").append(paymentTagBiWeekly+"*").append(paymentTagWeekly+"*"),alternativePaymentOption=$("<div>",{class:"alternative-payment-options"}).append($("<span>",{class:"financing-options-available",text:(new Resources).getSearchResource("financingOptionsAvailable")})).append($("<span>",{class:"monthly-payments-available",text:(new Resources).getSearchResource("monthlyPaymentsAvailable")})).append($("<span>",{class:"weekly-payments-available",text:(new Resources).getSearchResource("weeklyPaymentsAvailable")})),paymentTagwithRateText=$("<div>",{class:"payment-tag-with-rate-text "}).append($("<div>",{class:"line1"}).append($("<span>",{class:"payment-tag-installment"})).append($("<span>",{class:"payment-tag-frequency"}).append(paymentTagMonthly).append(paymentTagBiWeekly).append(paymentTagWeekly).append($("<div>",{class:"line2",style:"display: none"}).append($("<span>",{class:"payment-tag-rate"})).append($("<span>",{text:" "+(new Resources).getSearchResource("paymentRateDisclaimer")+"*"}).append($("<i>",{class:"fas fa-question-circle hidden-xs"}))))));return $("<div>",{class:"asLowAs payment-tag-disclaimer","data-payment-tag-adid":adid,style:"display: none"}).append(redTag).append(paymentTagTax).append(paymentTagwithRateText).append(alternativePaymentOption)}return'\n            <div class="asLowAs payment-tag-disclaimer" data-payment-tag-adid="'+adid+'" style="display: none" data-toggle="popover">\n                <div class="red-tag hidden">\n                  <div class="payment-tag-img"></div>\n                  <div class="payment-tag-installment"></div>\n                </div>\n                <div class="payment-tag-text hidden">\n                    <span class="paymentTagMonthly" style="display:none">'+(new Resources).getSearchResource("paymentFrequencyMonthly")+'*</span>\n                    <span class="paymentTagBiWeekly" style="display:none">'+(new Resources).getSearchResource("paymentFrequencyBiWeekly")+'*</span>\n                    <span class="paymentTagWeekly" style="display:none">'+(new Resources).getSearchResource("paymentFrequencyWeekly")+'*</span>\n                </div>\n                <div class="payment-tag-with-rate-text ">\n                    <div class="line1">\n                        <span class="payment-tag-installment"></span>\n                        <span class="payment-tag-frequency">\n                            <span class="paymentTagMonthly" style="display:none">'+(new Resources).getSearchResource("paymentFrequencyMonthly")+'</span>\n                            <span class="paymentTagBiWeekly" style="display:none">'+(new Resources).getSearchResource("paymentFrequencyBiWeekly")+'</span>\n                            <span class="paymentTagWeekly" style="display:none">'+(new Resources).getSearchResource("paymentFrequencyWeekly")+'</span>\n                        </span>\n                    </div>\n                    <div class="line2" style="display: none">\n                        <span class="payment-tag-rate"></span> '+(new Resources).getSearchResource("paymentRateDisclaimer")+'* <i class="fas fa-question-circle hidden-xs"></i>\n                    </div>                 \n                </div>\n                <div class="alternative-payment-options">\n                    <span class="financing-options-available">'+(new Resources).getSearchResource("financingOptionsAvailable")+'</span>\n                    <span class="monthly-payments-available">'+(new Resources).getSearchResource("monthlyPaymentsAvailable")+'</span>\n                    <span class="weekly-payments-available" >'+(new Resources).getSearchResource("weeklyPaymentsAva ilable")+"</span>\n                  </div>\n                </div>"},PaymentTagSrp}(),SearchResultsCacheManager=function(){function SearchResultsCacheManager(clearSearchResultsDataCache){clearSearchResultsDataCache&&(console.log("cleaning the cache"),localStorage.removeItem("SearchResultsDataNewPlatform"),localStorage.removeItem("SearchResultsData"))}return SearchResultsCacheManager.prototype.getVDPFromSearchCriteria=function(input){var result={savedSearch:{},savedSearchCriteria:{}};return result.savedSearch.id=StringExtensions.guid("D"),result.savedSearchCriteria.micrositeType=input.microsite.micrositeType,result.savedSearchCriteria.micrositeCulture=input.microsite.culture,result.savedSearchCriteria.location=input.location&&input.location.city?input.location.city.coordinates:null,result.savedSearchCriteria.city=input.Location&&input.Location.City?input.Location.City.Name:null,result.savedSearchCriteria.provinceAbbreviation=input.Location&&input.location.city&&input.location.city.province?input.location.city.province.abbreviation:null,result.savedSearchCriteria.proximity=input.proximity,result.savedSearchCriteria.adStatus=input.adStatus,result.savedSearchCriteria.adType=input.adType,result.savedSearchCriteria.withFreeCarProof=input.withFreeCarProof,result.savedSearchCriteria.withPhotos=input.withPhotos,result.savedSearchCriteria.withPrice=input.withPrice,result.savedSearchCriteria.cpoStatus=input.cpoStatus,result.savedSearchCriteria.cpoStatus=input.cpoStatus,result.savedSearchCriteria.keywords=input.keywords,result.savedSearchCriteria.yearRange=input.yearRange,result.savedSearchCriteria.makes=input.makes,result.savedSearchCriteria.models=input.models,result.savedSearchCriteria.types=input.types,result.savedSearchCriteria.subTypes=input.subTypes,result.savedSearchCriteria.sortBy=input.sortBy,result.savedSearchCriteria.trims=input.trims,result.savedSearchCriteria.bodyTypes=input.bodyTypes,result.savedSearchCriteria.colours=input.colours,result.savedSearchCriteria.fuelTypes=input.fuelTypes,result.savedSearchCriteria.lengthRange=input.lengthRange,result.savedSearchCriteria.odometerRange=input.odometerRange,result.savedSearchCriteria.weightRange=input.weightRange,result.savedSearchCriteria.engineSizeRange=input.engineSizeRange,result.savedSearchCriteria.horsePowerRange=input.horsePowerRange,result.savedSearchCriteria.hoursRange=input.hoursRange,result.savedSearchCriteria.wheelBaseRange=input.wheelBaseRange,result.savedSearchCriteria.priceRange=input.priceRange,result.savedSearchCriteria.sleeps=input.sleeps,result.savedSearchCriteria.slideOut=input.slideOut,result.savedSearchCriteria.transmissions=input.transmissions,result.savedSearchCriteria.trailerType=input.trailerType,result.savedSearchCriteria.paymentRange=input.paymentRange,result.savedSearchCriteria.paymentFrequency=input.paymentFrequency,result.savedSearchCriteria.term=input.term,result.savedSearchCriteria.creditRating=input.CcreditRating,result.savedSearchCriteria.cashDown=input.cashDown,result.savedSearchCriteria.tradeIn=input.tradeIn,result.savedSearchCriteria.searchCriteriaType=2,result},SearchResultsCacheManager.prototype.setSearchResultsDataMobile=function(searchResultsData,isSRP){console.log("setting the cache - Mobile");var searchResultsDataObj=JSON.parse(searchResultsData),searchResultsDataCache=this.getSearchResultsFromCache();if(searchResultsDataCache){for(var _i=0,_a=searchResultsDataObj.compositeIdUrls;_i<_a.length;_i++){var searchResult=_a[_i];searchResultsDataCache.compositeIdUrls.push(searchResult)}for(var _b=0,_c=searchResultsDataObj.compositeIds;_b<_c.length;_b++){searchResult=_c[_b];searchResultsDataCache.compositeIds.push(searchResult)}if(isSRP){var toListings=$(".top-listing");if(toListings)for(var _d=0,_e=toListings.toArray();_d<_e.length;_d++){var topListing=_e[_d],compositeId=topListing.attributes["data-source-id"].value+"_"+topListing.attributes["data-foreign-id"].value+"_ta",compositeIdUrl=topListing.firstElementChild.attributes.href.value,position=topListing.attributes["data-list-numerical-position"].value-1;searchResultsDataCache.compositeIds.indexOf(compositeId)<0&&(searchResultsDataCache.compositeIds.splice(position,0,compositeId),searchResultsDataCache.compositeIdUrls.splice(position,0,compositeIdUrl))}}var searchResultsDataJson=JSON.stringify(searchResultsDataCache);localStorage.setItem("SearchResultsDataNewPlatform",searchResultsDataJson)}else localStorage.setItem("SearchResultsDataNewPlatform",searchResultsData)},SearchResultsCacheManager.prototype.setSearchResultsData=function(searchResultsData){console.log("setting the cache - Desktop");try{localStorage.setItem("SearchResultsDataNewPlatform",searchResultsData)}catch(e){}},SearchResultsCacheManager.prototype.setSearchResultsDataOldPlatform=function(searchResultsData){console.log("setting the cache - Desktop");try{localStorage.setItem("SearchResultsData",searchResultsData)}catch(e){}},SearchResultsCacheManager.prototype.setSearchCriteria=function(searchCriteria){try{searchCriteria&&localStorage.setItem("SearchCriteria",searchCriteria)}catch(e){}},SearchResultsCacheManager.prototype.getSearchResultsFromCache=function(){var searchResultsDataJSON=localStorage.getItem("SearchResultsDataNewPlatform");if(null==searchResultsDataJSON||""==searchResultsDataJSON)return null;var searchResultsData=null;try{searchResultsData=JSON.parse(searchResultsDataJSON)}catch(e){return null}return searchResultsData},SearchResultsCacheManager.prototype.getSearchCriteriaFromCache=function(){var searchCriteriaJSON=localStorage.getItem("SearchCriteria");if(null==searchCriteriaJSON||""==searchCriteriaJSON)return null;var searchCriteria=null;try{searchCriteria=JSON.parse(searchCriteriaJSON)}catch(e){return null}return searchCriteria},SearchResultsCacheManager.prototype.setSavedSearchData=function(savedSearchData){try{savedSearchData&&sessionStorage.setItem("SavedSearchData",savedSearchData)}catch(e){console.error(e)}},SearchResultsCacheManager}(),SearchResultsInfo=function(){return function(isSearchExpanded,isSearchEmpty,isPageNotFoundRedirect){this.isSearchExpanded=isSearchExpanded,this.isSearchEmpty=isSearchEmpty,this.isPageNotFoundRedirect=isPageNotFoundRedirect}}(),Tuple=function(){function Tuple(_item1,_item2){this._item1=_item1,this._item2=_item2}return Object.defineProperty(Tuple.prototype,"item1",{get:function(){return this._item1},enumerable:!0,configurable:!0}),Object.defineProperty(Tuple.prototype,"item2",{get:function(){return this._item2},enumerable:!0,configurable:!0}),Tuple}(),Triple=function(){function Triple(_item1,_item2,_item3){this._item1=_item1,this._item2=_item2,this._item3=_item3}return Object.defineProperty(Triple.prototype,"item1",{get:function(){return this._item1},enumerable:!0,configurable:!0}),Object.defineProperty(Triple.prototype,"item2",{get:function(){return this._item2},enumerable:!0,configurable:!0}),Object.defineProperty(Triple.prototype,"item3",{get:function(){return this._item3},enumerable:!0,configurable:!0}),Triple}(),Quad=function(){function Quad(_item1,_item2,_item3,_item4){this._item1=_item1,this._item2=_item2,this._item3=_item3,this._item4=_item4}return Object.defineProperty(Quad.prototype,"item1",{get:function(){return this._item1},enumerable:!0,configurable:!0}),Object.defineProperty(Quad.prototype,"item2",{get:function(){return this._item2},enumerable:!0,configurable:!0}),Object.defineProperty(Quad.prototype,"item3",{get:function(){return this._item3},enumerable:!0,configurable:!0}),Object.defineProperty(Quad.prototype,"item4",{get:function(){return this._item4},enumerable:!0,configurable:!0}),Quad}(),AjaxManager=function(){function AjaxManager(options){void 0===options&&(options=null),this.options=options,this._requests=new Array,this.id=(AjaxManager.counter++).toString()}return AjaxManager.prototype.send=function(settings,block){null!=settings.headers?settings.headers.isAjax="true":settings.headers={isAjax:"true"};for(var request,aO,blocked=!1,i=0;i<this._requests.length;i++){if(!this.options.SendRequestWithTheSameData&&this._requests[i].settings.data===settings.data)return void this.log("_requests["+i+"] Dont send same request.");this._requests[i].block&&(this.log("_requests["+i+"] Dont send request if any other is blocked."),blocked=!0)}blocked?aO=new AjaxObject(null,settings,block,0,!1):(request=$.ajax(settings),aO=new AjaxObject(request,settings,block,0,!0),this.setCallHandlers(request,aO)),this._requests.push(aO),this.logRequests()},AjaxManager.prototype.setCallHandlers=function(request,aO){var _this=this;request.always(function(data){setTimeout(function(){return _this.pruneEarlierRequests(aO)},0)}),request.fail(function(data){if(_this.options.retryOptions.enableRetry){var requestedIndex=ArrayExtensions.findIndex(_this._requests,function(x){return x.id===aO.id});_this._requests[requestedIndex].currentAttempt+1<_this.options.retryOptions.maxRetryAttempts?(_this._requests[requestedIndex].needsResend=!0,_this._requests[requestedIndex].currentAttempt+=1):(_this._requests[requestedIndex].needsResend=!1,_this.options.retryOptions.retryCallback.apply(data))}})},AjaxManager.prototype.sendNextInQueue=function(ajaxObject){if(null!=ajaxObject){ajaxObject.sent=!0;var request=$.ajax(ajaxObject.settings);this.setCallHandlers(request,ajaxObject)}},AjaxManager.prototype.pruneEarlierRequests=function(ajaxObject){var requestedIndex=ArrayExtensions.findIndex(this._requests,function(x){return x.id===ajaxObject.id});if(-1!==requestedIndex&&void 0!=this._requests[requestedIndex]){for(var index=0;index<this._requests.length;index++){if(this._requests[index].id===ajaxObject.id){ajaxObject.needsResend?(ajaxObject.needsResend=!1,ajaxObject.sent=!1):this._requests.splice(index,1);break}null!=this._requests[index].request&&this._requests[index].request.abort(),this._requests.splice(index,1),index--}this._requests.length>0&&this.sendNextInQueue(this.getNextUnsent())}},AjaxManager.prototype.getNextUnsent=function(){for(var i=0;i<this._requests.length;i++)if(!this._requests[i].sent)return this._requests[i];return null},AjaxManager.prototype.log=function(message){console.log("[AjaxManager]-["+this.id+"] "+message)},AjaxManager.prototype.warn=function(message){console.warn("[AjaxManager]-["+this.id+"] "+message)},AjaxManager.prototype.logRequests=function(){console.log("[AjaxManager]-["+this.id+"] _requests.length: "+this._requests.length)},AjaxManager.counter=0,AjaxManager}(),AjaxObject=function(){return function(request,settings,block,currentAttempt,sent){this.request=request,this.settings=settings,this.block=block,this.currentAttempt=currentAttempt,this.sent=sent,this.needsResend=!1,this.id=StringExtensions.guid()}}(),AjaxOptions=function(){return function(params){void 0===params&&(params=null),this.SendRequestWithTheSameData=!1,this.AllowBlockingRequests=!0,this.retryOptions=new RetryOptions,null!=params&&(void 0!==params.SendRequestWithTheSameData&&(this.SendRequestWithTheSameData=params.SendRequestWithTheSameData),void 0!==params.AllowBlockingRequests&&(this.AllowBlockingRequests=params.AllowBlockingRequests),void 0!==params.AllowBlockingRequests&&(this.AllowBlockingRequests=params.AllowBlockingRequests),void 0!==params.retryOptions&&(this.retryOptions=params.retryOptions))}}(),RetryOptions=function(){return function(params){void 0===params&&(params=null),this.enableRetry=!1,this.maxRetryAttempts=0,this.retryCallback=function(xhr){},null!=params&&(void 0!==params.enableRetry&&(this.enableRetry=params.enableRetry),void 0!==params.maxRetryAttempts&&(this.maxRetryAttempts=params.maxRetryAttempts),void 0!==params.retryCallback&&(this.retryCallback=params.retryCallback))}}();!function(DataLayerFactory){DataLayerFactory.srpDataLayer=function(){return window.srpDataLayerManager||new SrpDataLayerManager}}(DataLayerFactory||(DataLayerFactory={}));var DataLayerFactory,SrpDataLayerManager=function(){function SrpDataLayerManager(){this.advancedSearchKey="advancedSearch",this.advancedSearchName="advanced search",this.basicSearchKey="basicSearch",this.basicSearchName="basic search",this.vehicleSpecialistKey="vehicleSpecialist",this.vehicleSpecialistName="vehicle specialist",this.dealerInventoryKey="dealerInventory",this.dealerInventoryName="dealer inventory",this.previousAdCount=0,window.dataLayer||(window.dataLayer=new Array),this.dataLayer=window.dataLayer,null==window.srpDataLayerManager&&(window.srpDataLayerManager=this)}return SrpDataLayerManager.prototype.setPreviousAdCount=function(count){this.previousAdCount=count},SrpDataLayerManager.prototype.updateDataLayerDirectly=function(serverDataLayer){this.fullDataLayer=serverDataLayer;var dl=this.dataLayer[0];dl&&(dl.pageType=this.getPageType(),dl.lists&&dl.lists.length>0&&(dl.lists=this.fullDataLayer.lists),dl.search&&(dl.search=this.fullDataLayer.search),dl.googleRemarketingParams&&(dl.googleRemarketingParams=this.fullDataLayer.googleRemarketingParams))},SrpDataLayerManager.prototype.appendToListings=function(ad){var dl=this.dataLayer[0];dl&&dl.lists&&dl.lists.length>0&&dl.lists[0].vehicles&&this.dataLayer[0].lists[0].vehicles.push(ad)},SrpDataLayerManager.prototype.addToListings=function(ad,analyticsOrdinalPosition,totalListings){var dl=this.fullDataLayer;if(dl&&dl.lists&&dl.lists.length>0&&dl.lists[0].vehicles){var posOnPage=analyticsOrdinalPosition-totalListings;dl.lists[0].vehicles.splice(posOnPage-1,0,ad)}},SrpDataLayerManager.prototype.addAdClickEvent=function(listKey,anchorElement){var position=Number(anchorElement.dataset.listNumericalPosition)+this.previousAdCount;this.dataLayer.push({event:"gtm_ad_click",list:listKey,listNumericalPosition:String(position)})},SrpDataLayerManager.prototype.addAjaxListImpressionsEvent=function(listName){this.dataLayer.push({event:"ajaxListImpressions",ajaxListName:listName})},SrpDataLayerManager.prototype.addClearSearchFiltersEvent=function(){this.dataLayer.push({event:"gtm_search_clear",eventAction:"clear search filters"})},SrpDataLayerManager.prototype.addCompareVehicleEvent=function(adId,isAdded){if(""!==adId){var inMarketType=document.getElementById("SearchListings").dataset.listKey,adOrdinalPosition=document.getElementById(adId).dataset.listNumericalPosition;this.dataLayer.push({event:isAdded?"gtm_add_to_compare":"gtm_compare_remove_vehicle",list:inMarketType,listNumericalPosition:adOrdinalPosition})}},SrpDataLayerManager.prototype.addDealerLogoClickEvent=function(inMarketType,anchorElement){this.dataLayer.push({event:"gtm_ad_click",list:inMarketType,listNumericalPosition:anchorElement.dataset.listNumericalPosition,eventAction:"ad click - dealer logo"})},SrpDataLayerManager.prototype.addFailedLocationEvent=function(address){this.dataLayer.push({event:"gtm_search_failed_location",eventAction:"failed location search - postal code not found",eventLabel:address})},SrpDataLayerManager.prototype.addCreditConnectEvent=function(numericalPosition){void 0!==this.dataLayer[0]&&void 0!==this.dataLayer[0].lists[0]&&this.dataLayer.push({event:"gtm_srp_credit_connect_click",list:this.dataLayer[0].lists[0].key,listNumericalPosition:numericalPosition})},SrpDataLayerManager.prototype.addGarageVehicleEvent=function(adOrdinalPosition,isSaved){if(!(adOrdinalPosition<1)){var inMarketType=document.getElementById("SearchListings").dataset.listKey;this.dataLayer.push({event:isSaved?"gtm_garage_save_vehicle":"gtm_garage_remove_vehicle",list:inMarketType,listNumericalPosition:adOrdinalPosition})}},SrpDataLayerManager.prototype.addNoSearchResultsEvent=function(withExpansionResults){this.dataLayer.push({event:"gtm_no_search_results",eventLabel:withExpansionResults?"with expansion":"without expansion"})},SrpDataLayerManager.prototype.addQuickSearchClickedEvent=function(){this.dataLayer.push({event:"gtm_search_redux_click",eventAction:"click on search redux button"})},SrpDataLayerManager.prototype.addCriteriaUpdatedEvents=function(newDataLayer){if(this.dataLayer.length>0&&this.dataLayer[0].search&&newDataLayer&&newDataLayer.search){var fields=ObjectExtensions.DiffObjects(this.dataLayer[0].search,newDataLayer.search);if(fields)for(var i=0;i<fields.length;i++)this.addCriteriaUpdatedEvent(fields[i].item2.item1,fields[i].item2.item2)}},SrpDataLayerManager.prototype.addCriteriaUpdatedEvent=function(key,value){if(key&&value){var json={};json[key]=value,this.dataLayer.push({searchUpdates:json})}},SrpDataLayerManager.prototype.addPageSizeChangedEvent=function(oldValue,newValue){this.dataLayer.push({event:"gtm_search_change_number_of_results",eventAction:"change number of search results shown",eventLabel:oldValue+"|"+newValue})},SrpDataLayerManager.prototype.addMerchandisingClickEvent=function(anchorElement){var id=anchorElement.dataset.id,label=anchorElement.dataset.label,inMarketType=document.getElementById("SearchListings").dataset.listKey,adOrdinalPosition=document.getElementById(id).dataset.listNumericalPosition;this.dataLayer.push({event:"gtm_merchandising_click",list:inMarketType,listNumericalPosition:adOrdinalPosition,eventLabel:label})},SrpDataLayerManager.prototype.addDataLayerAjaxListImpressions=function(paymentData){var dl=this.dataLayer[0];dl&&dl.lists&&dl.lists.length>0&&(this.dataLayer[0].lists.map(function(list){return list.vehicles.map(function(vehicle){var paymentInfo=paymentData[1*vehicle.adID.split("-")[1]+2e7];vehicle.financingPrice=void 0!==paymentInfo&&null!=paymentInfo?"yes":"no"})}),this.dataLayer.push(function(){this.set("lists",dl.lists)}),this.logDataLayerAjaxListImpressions())},SrpDataLayerManager.prototype.logDataLayerAjaxListImpressions=function(){var _this=this,dl=this.dataLayer[0];dl.lists&&dl.lists.length>0&&dl.lists.forEach(function(list){_this.addAjaxListImpressionsEvent(list.key)})},SrpDataLayerManager.prototype.createPaginationEvent=function(){if(this.fullDataLayer&&this.fullDataLayer.search&&this.fullDataLayer.search.pageNumber&&this.fullDataLayer.lists&&!(this.fullDataLayer.lists.length<1)&&this.fullDataLayer.lists[0].vehicles){var list={key:document.getElementById("SearchListings").dataset.listKey,name:this.getListName(),vehicles:this.fullDataLayer.lists[0].vehicles};this.dataLayer.push({event:"gtm_ajax_pagination",pageNumber:this.fullDataLayer.search.pageNumber,ajaxLists:list});var dl=this.dataLayer[0];dl&&dl.lists&&dl.lists.length>0&&(dl.lists=this.fullDataLayer.lists),dl&&(dl.search=this.fullDataLayer.search,dl.search&&!isMobile&&(dl.search.searchType=void 0))}},SrpDataLayerManager.prototype.createRefinementEvent=function(){if(this.fullDataLayer&&null!==this.fullDataLayer.search&&null!==this.fullDataLayer.search.pageNumber&&!(null===this.fullDataLayer.lists||this.fullDataLayer.lists.length<1||null===this.fullDataLayer.lists[0].vehicles)){var listKey=this.getListKey(),list={key:listKey,name:this.getListName(),vehicles:this.fullDataLayer.lists[0].vehicles};this.dataLayer.push({event:"gtm_ajax_refinement",search:this.fullDataLayer.search,ajaxLists:list});var dl=this.dataLayer[0];dl&&(dl.pageType=this.getPageType(),dl.lists&&dl.lists.length>0&&(dl.lists=this.fullDataLayer.lists),dl.search&&(dl.search=this.fullDataLayer.search),dl.googleRemarketingParams&&(dl.googleRemarketingParams=this.fullDataLayer.googleRemarketingParams)),document.getElementById("SearchListings").dataset.listKey=listKey}},SrpDataLayerManager.prototype.addSortChangedEvent=function(oldValue,newValue){this.fullDataLayer&&this.fullDataLayer.search&&this.dataLayer.push({event:"gtm_search_sort_change",eventAction:"sort order change",eventLabel:oldValue.toString()+"|"+newValue.toString(),search:this.fullDataLayer.search})},SrpDataLayerManager.prototype.addGoogleReviewsEvent=function(){this.dataLayer.push({event:"gtm_srp_googleReview_click",eventAction:"click on google review"})},SrpDataLayerManager.prototype.addAdvancedSearchClick=function(){this.dataLayer.push({event:"gtm_search_advanced_search_link_click",eventAction:"SRP - click on advanced search"})},SrpDataLayerManager.prototype.addQuickViewShow=function(){this.dataLayer.push({event:"gtm_quickview_ad_click_srp",eventAction:"click quickview from srp"})},SrpDataLayerManager.prototype.addQuickViewClose=function(){this.dataLayer.push({event:"gtm_quickview_close_modal",eventAction:"click on close button"})},SrpDataLayerManager.prototype.addQuickViewPrev=function(){this.dataLayer.push({event:"gtm_quickview_navigation_click",eventAction:"click on previous button"})},SrpDataLayerManager.prototype.addQuickViewNext=function(){this.dataLayer.push({event:"gtm_quickview_navigation_click",eventAction:"click on next button"})},SrpDataLayerManager.prototype.addQuickViewPrevArrowKey=function(){this.dataLayer.push({event:"gtm_quickview_navigation_keyboard",eventAction:"previous - keyboard left arrow"})},SrpDataLayerManager.prototype.addQuickViewNextArrowKey=function(){this.dataLayer.push({event:"gtm_quickview_navigation_keyboard",eventAction:"next - keyboard right arrow"})},SrpDataLayerManager.prototype.addQuickViewVehicle=function(position){var dl=this.dataLayer[0],vehicle=[];dl.lists.length>0&&dl.lists[0].vehicles.length>0&&(vehicle=dl.lists[0].vehicles[position-1]),this.dataLayer.push({event:"gtm_quickview_vehicle_load",vehicle:vehicle})},SrpDataLayerManager.prototype.addQuickViewDetails=function(){this.dataLayer.push({event:"gtm_quickview_more_details_click",eventAction:"click on more details"})},SrpDataLayerManager.prototype.addQuickViewGallery=function(){this.dataLayer.push({event:"gtm_quickview_gallery_icon_click",eventAction:"click on gallery icon"})},SrpDataLayerManager.prototype.headerClickPagination=function(currentPage,pageNumber,position){this.dataLayer.push({event:"gtm_search_pagination_click",eventAction:"click on "+position+" pagination",eventLabel:currentPage+"|"+pageNumber})},SrpDataLayerManager.prototype.searchResultNumber=function(searchResultNo){this.dataLayer.push({event:"gtm_search_number_of_search_results",eventAction:"number of search results",eventLabel:searchResultNo})},SrpDataLayerManager.prototype.addDealerPlusVisitWebsite=function(){this.dataLayer.push({event:"gtm_dealer_visitDealerWebsite",eventAction:"visit dealer website"})},SrpDataLayerManager.prototype.addDealerPlusEmail=function(subject){this.dataLayer.push({event:"gtm_dealer_inventory_email",eventLabel:subject})},SrpDataLayerManager.prototype.addDealerPlusToggle=function(expanding){this.dataLayer.push({event:"gtm_dealer_inventory_show_info",eventAction:"show dealer info",eventLabel:expanding?"expand":"collapse"})},SrpDataLayerManager.prototype.addDealerPlusCall=function(){this.dataLayer.push({event:"gtm_dealer_inventory_call"})},SrpDataLayerManager.prototype.addDealerPlusViewMap=function(){this.dataLayer.push({event:"gtm_dealer_inventory_map"})},SrpDataLayerManager.prototype.addDealerPlusBackToVdp=function(){this.dataLayer.push({event:"gtm_dealer_back_to_vdp",eventAction:"click on back to vdp"})},SrpDataLayerManager.prototype.getPageType=function(){var inMarketType=document.getElementById("SearchListings").dataset.listKey;return inMarketType===this.vehicleSpecialistKey?"vehicle-specialist":inMarketType===this.dealerInventoryKey?"dealer-inventory":"search-results"},SrpDataLayerManager.prototype.getListKey=function(){var inMarketType=document.getElementById("SearchListings").dataset.listKey;return inMarketType===this.vehicleSpecialistKey?this.vehicleSpecialistKey:inMarketType===this.dealerInventoryKey?this.dealerInventoryKey:this.advancedSearchKey},SrpDataLayerManager.prototype.getListName=function(){var inMarketName="";switch(document.getElementById("SearchListings").dataset.listKey){case this.advancedSearchKey:inMarketName=this.advancedSearchName;break;case this.basicSearchKey:inMarketName=this.basicSearchName;break;case this.vehicleSpecialistKey:inMarketName=this.vehicleSpecialistName;break;case this.dealerInventoryKey:inMarketName=this.dealerInventoryName}return inMarketName},SrpDataLayerManager}();!function(DataLayerFactory){DataLayerFactory.srpModulesDataLayer=function(){return window.srpModulesDataLayerManager||new SrpModulesDataLayerManager}}(DataLayerFactory||(DataLayerFactory={}));var FacetType,SavedSearchType,SrpModulesDataLayerManager=function(){function SrpModulesDataLayerManager(){window.dataLayer||(window.dataLayer=new Array),this.dataLayer=window.dataLayer,null==window.srpModulesDataLayerManager&&(window.srpModulesDataLayerManager=this)}return SrpModulesDataLayerManager.prototype.addResearchModuleImpressionsEvent=function(make,model){if(make&&"Any"!==make){var eventLabel=make;model&&"Any"!==model&&(eventLabel+="|"+model),this.dataLayer.push({event:"gtm_research_article_module",eventAction:"research module impression",eventLabel:eventLabel.toLowerCase()})}},SrpModulesDataLayerManager.prototype.addResearchModuleClickEvent=function(make,model){if(make&&"Any"!==make){var eventLabel=make;model&&"Any"!==model&&(eventLabel+="|"+model),this.dataLayer.push({event:"gtm_research_article_module",eventAction:"research module click",eventLabel:eventLabel.toLowerCase()})}},SrpModulesDataLayerManager.prototype.addArticleModuleImpressionsEvent=function(make,model){if(make&&"Any"!==make){var eventLabel=make;model&&"Any"!==model&&(eventLabel+="|"+model),this.dataLayer.push({event:"gtm_research_article_module",eventAction:"article module impression",eventLabel:eventLabel.toLowerCase()})}},SrpModulesDataLayerManager.prototype.addArticleModuleClickEvent=function(make,model){if(make&&"Any"!==make){var eventLabel=make;model&&"Any"!==model&&(eventLabel+="|"+model),this.dataLayer.push({event:"gtm_research_article_module",eventAction:"article module click",eventLabel:eventLabel.toLowerCase()})}},SrpModulesDataLayerManager}(),MultiSelectFactory=function(){function MultiSelectFactory(){this.priceAnalysisKeysOrder=["GreatPrice","GoodPrice","FairPrice","AboveAverage","ContactDealer"]}return MultiSelectFactory.prototype.setupMultiselect=function(returnedFacets,selectedItems,filterType,bubbleClick,showEmptySelectedFacets,checkboxToggle,state,clearHandler){void 0===showEmptySelectedFacets&&(showEmptySelectedFacets=!0);var facetNames=Object.keys(returnedFacets);if(showEmptySelectedFacets&&null!=selectedItems&&void 0!=selectedItems)for(var i=0;i<selectedItems.length;i++)-1===facetNames.indexOf(selectedItems[i])&&(returnedFacets[selectedItems[i]]=0);var facetInfo=this.getMultiSelectFilterInfo(filterType);if(null==facetInfo)return null;this.renderMultiSelect(returnedFacets,facetInfo.parent,facetInfo.applyId,facetInfo.header,facetInfo.checkboxPrefix);var multiselect=this.createMultiSelect(returnedFacets,selectedItems,facetInfo,bubbleClick,checkboxToggle);return state&&(multiselect.state=state),clearHandler&&multiselect.onClear(clearHandler),multiselect},MultiSelectFactory.prototype.updateMultiselect=function(multiSelect,returnedFacets,selectedItems,filterType,bubbleClick,showEmptySelectedFacets,checkboxToggle,state,clearHandler){void 0===showEmptySelectedFacets&&(showEmptySelectedFacets=!0);var facetNames=Object.keys(returnedFacets);if(showEmptySelectedFacets&&null!=selectedItems&&void 0!=selectedItems)for(var i=0;i<selectedItems.length;i++)-1===facetNames.indexOf(selectedItems[i])&&(returnedFacets[selectedItems[i]]=0);var facetInfo=this.getMultiSelectFilterInfo(filterType);if(null==facetInfo)return null;this.renderMultiSelectOptimized(returnedFacets,multiSelect.checkboxes,facetInfo.parent,facetInfo.applyId,facetInfo.header,facetInfo.checkboxPrefix);var multiselect=this.createMultiSelect(returnedFacets,selectedItems,facetInfo,bubbleClick,checkboxToggle);return state&&(multiselect.state=state),clearHandler&&multiselect.onClear(clearHandler),multiselect},MultiSelectFactory.prototype.getMultiSelectFilterInfo=function(filterType){switch(filterType){case FacetType.NumberOfDoors:return new MultiSelectFilterInfo($(document.getElementById("fbNumberOfDoors")),"applyNumberOfDoors",Ui.displayNumberOfDoors,"do_","numberOfDoors");case FacetType.Colours:return new MultiSelectFilterInfo($(document.getElementById("fbExteriorColour")),"applyColour",Ui.displayColour,"cl_","colours");case FacetType.Transmissions:return new MultiSelectFilterInfo($(document.getElementById("fbTransmission")),"applyTransmission",Ui.displayTransmission,"tm_","transmissions");case FacetType.Drivetrain:return new MultiSelectFilterInfo($(document.getElementById("fbDrivetrain")),"applyDrivetrain",Ui.displayDrivetrain,"dt_","drivetrain");case FacetType.Engine:return new MultiSelectFilterInfo($(document.getElementById("fbEngine")),"applyEngine",Ui.displayEngine,"en_","engine");case FacetType.SeatingCapacity:return new MultiSelectFilterInfo($(document.getElementById("fbSeatingCapacity")),"applySeatingCapacity",Ui.displaySeatingCapacity,"st_","seating");case FacetType.FuelTypes:return new MultiSelectFilterInfo($(document.getElementById("fbFuelType")),"applyFuel",Ui.displayFuel,"fl_","fueltype");case FacetType.Sleeps:return new MultiSelectFilterInfo($(document.getElementById("fbSleeps")),"applySleeps",Ui.displaySleeps,"st_","sleeps");case FacetType.SlideOuts:return new MultiSelectFilterInfo($(document.getElementById("fbSlideOuts")),"applySlideOuts",Ui.displaySlideOuts,"so_","slidesOut");case FacetType.BodyType:return new MultiSelectFilterInfo($(document.getElementById("rfBodyStyle")),"applyBodyStyles",Ui.displayBodyTypes,"bs_","bodyTypes");case FacetType.PriceAnalysis:return new MultiSelectFilterInfo($(document.getElementById("rfPriceAnalysis")),"applyPriceAnalysis",Ui.displayPriceAnalysis,"pac_","priceAnalysis");case FacetType.Trim:return new MultiSelectFilterInfo($(document.getElementById("fbTrim")),"applyTrim",Ui.displayTrims,"tr_","trim");default:return null}},MultiSelectFactory.prototype.orderPriceAnalysisKey=function(a,b){return this.priceAnalysisKeysOrder.indexOf(a)>this.priceAnalysisKeysOrder.indexOf(b)?1:this.priceAnalysisKeysOrder.indexOf(a)<this.priceAnalysisKeysOrder.indexOf(b)?-1:0},MultiSelectFactory.prototype.createMultiSelect=function(arrayOfElements,selectedItems,facetInfo,bubbleClick,checkboxToggle){var arrayOfFacets,checkboxes=new Array;"priceAnalysis"!==facetInfo.appliedValuesKey?arrayOfFacets=Object.keys(arrayOfElements).sort(StringExtensions.CultureSort):(arrayOfFacets=Object.keys(arrayOfElements).sort(this.orderPriceAnalysisKey.bind(this)),null!=selectedItems&&selectedItems.sort(this.orderPriceAnalysisKey.bind(this)));for(var isAnythingSelected=null==selectedItems||void 0==selectedItems,facetParent=facetInfo.parent.closest("[id^='faceted-parent']"),index=0;index<arrayOfFacets.length;index++){var state=!isAnythingSelected&&selectedItems.indexOf(arrayOfFacets[index])>-1;checkboxes.push(new Checkbox(state,$("#"+facetInfo.checkboxPrefix+index),null,bubbleClick))}var group=new CheckboxGroup(checkboxes,!0,facetParent,facetInfo.appliedValuesKey);return checkboxToggle&&this.setCheckboxCallBacks(group,function(){checkboxToggle(facetInfo,group)}),group},MultiSelectFactory.prototype.setCheckboxCallBacks=function(group,callback){for(var i=0;i<group.checkboxes.length;i++)group.checkboxes[i].addCallbackForEveryToggle(callback)},MultiSelectFactory.prototype.setCheckboxCallBacksForAll=function(callback){for(var groups=[],_i=1;_i<arguments.length;_i++)groups[_i-1]=arguments[_i];for(var j=0;j<groups.length;j++)for(var i=0;i<groups[j].checkboxes.length;i++)groups[j].checkboxes[i].addCallbackForEveryToggle(callback)},MultiSelectFactory.prototype.renderMultiSelect=function(arrayOfElements,parent,applyId,header,checkboxPrefix){var arrayOfFacets;arrayOfFacets="rfPriceAnalysis"!==parent.attr("id")?Object.keys(arrayOfElements).sort(StringExtensions.CultureSort):Object.keys(arrayOfElements).sort(this.orderPriceAnalysisKey.bind(this)),"fbTrim"===parent.attr("id")&&parent.children().remove();(new Resources).getSearchResource("any");parent.children("li").each(function(i,e){var je=$(e);je.children(".loading-filler").length>0||je.hasClass("checkboxWrapper")?je.remove():je.removeClass("hidden")});for(var i=0;i<arrayOfFacets.length;i++){var display=arrayOfFacets[i]+" ("+arrayOfElements[arrayOfFacets[i]]+")",item=void 0,id=checkboxPrefix+i,count=arrayOfElements[arrayOfFacets[i]];if("rfPriceAnalysis"===parent.attr("id")){var priceId=this.mapPriceAnalysisValueClass(arrayOfFacets[i]);item=$(FacetedBoxTemplates.FairPriceCheckbox(id,arrayOfFacets[i],priceId,display,count))}else{var swatchHtml="fbExteriorColour"===parent.attr("id")?FacetedBoxTemplates.ColourSwatch(arrayOfFacets[i]):"";item=$(FacetedBoxTemplates.Checkbox(id,arrayOfFacets[i],id+"_label",display,swatchHtml,count))}item.click(function(e){e.stopPropagation()}),parent.append(item)}},MultiSelectFactory.prototype.mapPriceAnalysisValueClass=function(value){return value+"-label"},MultiSelectFactory.prototype.renderMultiSelectOptimized=function(arrayOfElements,existingElements,parent,applyId,header,checkboxPrefix){var arrayOfFacets,checkAndRemoveElement=function(x,label){for(var j=0;j<existingElements.length;j++)if(existingElements[j].label&&existingElements[j].label.indexOf(label)>-1)return existingElements.splice(j,1)[0];return null};arrayOfFacets="rfPriceAnalysis"!==parent.attr("id")?Object.keys(arrayOfElements).sort(StringExtensions.CultureSort):Object.keys(arrayOfElements).sort(this.orderPriceAnalysisKey.bind(this));for(var insertions=[],lastCheckbox=null,i=0;i<arrayOfFacets.length;i++){var display=arrayOfFacets[i]+" ("+arrayOfElements[arrayOfFacets[i]]+")",checkbox=checkAndRemoveElement(0,arrayOfFacets[i]),id=checkboxPrefix+(i+0);if(null!=checkbox)checkbox.setId(id),display!=checkbox.label&&checkbox.setLabel(display);else{var swatchHtml="fbExteriorColour"===parent.attr("id")?FacetedBoxTemplates.ColourSwatch(arrayOfFacets[i]):"",id_1=checkboxPrefix+(i+0),count=arrayOfElements[arrayOfFacets[i]],item=$(FacetedBoxTemplates.Checkbox(id_1,arrayOfFacets[i],id_1+"_label",display,swatchHtml,count));item.click(function(e){e.stopPropagation()}),insertions.push({prev:lastCheckbox,item:item})}lastCheckbox=id}for(var k=0;k<existingElements.length;k++)existingElements[k].$element.closest("li").remove();for(var l=0;l<insertions.length;l++)if(insertions[l].prev){var anchors=$(document.getElementById(insertions[l].prev)).closest(".checkboxWrapper");anchors.length>0&&anchors[0].parentNode.insertBefore(insertions[l].item[0],anchors[0].nextSibling)}else parent.prepend(insertions[l].item)},MultiSelectFactory}(),MultiSelectFilterInfo=function(){return function(parent,applyId,header,checkboxPrefix,appliedValuesKey){this.parent=parent,this.applyId=applyId,this.header=header,this.checkboxPrefix=checkboxPrefix,this.appliedValuesKey=appliedValuesKey}}();!function(FacetType){FacetType[FacetType.Drivetrain=0]="Drivetrain",FacetType[FacetType.Engine=1]="Engine",FacetType[FacetType.FuelTypes=2]="FuelTypes",FacetType[FacetType.Transmissions=3]="Transmissions",FacetType[FacetType.SeatingCapacity=4]="SeatingCapacity",FacetType[FacetType.NumberOfDoors=5]="NumberOfDoors",FacetType[FacetType.Mileage=6]="Mileage",FacetType[FacetType.Colours=7]="Colours",FacetType[FacetType.BodyType=8]="BodyType",FacetType[FacetType.Price=9]="Price",FacetType[FacetType.Year=10]="Year",FacetType[FacetType.Model=11]="Model",FacetType[FacetType.Make=12]="Make",FacetType[FacetType.Location=13]="Location",FacetType[FacetType.Sleeps=14]="Sleeps",FacetType[FacetType.SlideOuts=15]="SlideOuts",FacetType[FacetType.VehicleType=16]="VehicleType",FacetType[FacetType.VehicleSubType=17]="VehicleSubType",FacetType[FacetType.VehicleCategory=18]="VehicleCategory",FacetType[FacetType.PriceAnalysis=20]="PriceAnalysis",FacetType[FacetType.Trim=21]="Trim"}(FacetType||(FacetType={})),function(SavedSearchType){SavedSearchType[SavedSearchType.NotSet=0]="NotSet",SavedSearchType[SavedSearchType.SRP=1]="SRP",SavedSearchType[SavedSearchType.VDP=2]="VDP",SavedSearchType[SavedSearchType.DeepLink=3]="DeepLink"}(SavedSearchType||(SavedSearchType={}));var FacetedBoxTemplates,FacetedParameters=function(){function FacetedParameters(obj){this.SearchCriteriaType=SavedSearchType.SRP,obj&&(void 0!==obj.Microsite&&(this.Microsite=obj.Microsite),void 0!==obj.micrositeType&&(this.micrositeType=obj.micrositeType),void 0!==obj.Address&&(this.Address=obj.Address),void 0!==obj.BodyType&&(this.BodyType=obj.BodyType),void 0!==obj.Colours&&(this.Colours=obj.Colours),void 0!==obj.FuelTypes&&(this.FuelTypes=obj.FuelTypes),void 0!==obj.InMarketType&&(this.InMarketType=obj.InMarketType),void 0!==obj.IsCommercial&&(this.IsCommercial=obj.IsCommercial),void 0!==obj.IsCpo&&(this.IsCpo=obj.IsCpo),void 0!==obj.IsCpoOnly&&(this.IsCpoOnly=obj.IsCpoOnly),void 0!==obj.IsDamaged&&(this.IsDamaged=obj.IsDamaged),void 0!==obj.IsDealer&&(this.IsDealer=obj.IsDealer),void 0!==obj.IsHotDeal&&(this.IsHotDeal=obj.IsHotDeal),void 0!==obj.IsNew&&(this.IsNew=obj.IsNew),void 0!==obj.IsPrivate&&(this.IsPrivate=obj.IsPrivate),void 0!==obj.IsUniqueSearch&&(this.IsUniqueSearch=obj.IsUniqueSearch),void 0!==obj.IsUsed&&(this.IsUsed=obj.IsUsed),void 0!==obj.Keywords&&(this.Keywords=obj.Keywords),void 0!==obj.Make&&(this.Make=obj.Make),void 0!==obj.Model&&(this.Model=obj.Model),void 0!==obj.OdometerMax&&(this.OdometerMax=obj.OdometerMax),void 0!==obj.OdometerMin&&(this.OdometerMin=obj.OdometerMin),void 0!==obj.LengthMin&&(this.LengthMin=obj.LengthMin),void 0!==obj.LengthMax&&(this.LengthMax=obj.LengthMax),void 0!==obj.WeightMin&&(this.WeightMin=obj.WeightMin),void 0!==obj.WeightMax&&(this.WeightMax=obj.WeightMax),void 0!==obj.PriceMax&&(this.PriceMax=obj.PriceMax),void 0!==obj.PriceMin&&(this.PriceMin=obj.PriceMin),void 0!==obj.PaymentMax&&(this.PaymentMax=obj.PaymentMax),void 0!==obj.PaymentMin&&(this.PaymentMin=obj.PaymentMin),void 0!==obj.PaymentFrequency&&(this.PaymentFrequency=obj.PaymentFrequency),void 0!==obj.CreditRating&&(this.CreditRating=obj.CreditRating),void 0!==obj.Term&&(this.Term=obj.Term),void 0!==obj.CashDown&&(this.CashDown=obj.CashDown),void 0!==obj.TradeIn&&(this.TradeIn=obj.TradeIn),void 0!==obj.Proximity&&(this.Proximity=obj.Proximity),void 0!==obj.RelatedCompanyOwnerCompositeId&&(this.RelatedCompanyOwnerCompositeId=obj.RelatedCompanyOwnerCompositeId),void 0!==obj.Skip&&(this.Skip=obj.Skip),void 0!==obj.SortBy&&(this.SortBy=obj.SortBy),void 0!==obj.Top&&(this.Top=obj.Top),void 0!==obj.Transmissions&&(this.Transmissions=obj.Transmissions),void 0!==obj.VehicleSubType&&(this.VehicleSubType=obj.VehicleSubType),void 0!==obj.VehicleType&&(this.VehicleType=obj.VehicleType),void 0!==obj.WithFreeCarProof&&(this.WithFreeCarProof=obj.WithFreeCarProof),void 0!==obj.WithPhotos&&(this.WithPhotos=obj.WithPhotos),void 0!==obj.WithPrice&&(this.WithPrice=obj.WithPrice),void 0!==obj.YearMax&&(this.YearMax=obj.YearMax),void 0!==obj.YearMin&&(this.YearMin=obj.YearMin),void 0!==obj.WheelBaseMin&&(this.WheelBaseMin=obj.WheelBaseMin),void 0!==obj.WheelBaseMax&&(this.WheelBaseMax=obj.WheelBaseMax),void 0!==obj.HorsepowerMin&&(this.HorsepowerMin=obj.HorsepowerMin),void 0!==obj.HorsepowerMax&&(this.HorsepowerMax=obj.HorsepowerMax),void 0!==obj.EngineSizeMin&&(this.EngineSizeMin=obj.EngineSizeMin),void 0!==obj.EngineSizeMax&&(this.EngineSizeMax=obj.EngineSizeMax),void 0!==obj.Drivetrain&&(this.Drivetrain=obj.Drivetrain),void 0!==obj.Engine&&(this.Engine=obj.Engine),void 0!==obj.SeatingCapacity&&(this.SeatingCapacity=obj.SeatingCapacity),void 0!==obj.NumberOfDoors&&(this.NumberOfDoors=obj.NumberOfDoors),void 0!==obj.Sleeps&&(this.Sleeps=obj.Sleeps),void 0!==obj.SlideOuts&&(this.SlideOuts=obj.SlideOuts),void 0!==obj.HoursMin&&(this.HoursMin=obj.HoursMin),void 0!==obj.HoursMax&&(this.HoursMax=obj.HoursMax),void 0!==obj.FacetsOverride&&(this.FacetsOverride=obj.FacetsOverride),void 0!==obj.TopListings&&(this.TopListings=obj.TopListings),void 0!==obj.PriceAnalysis&&(this.PriceAnalysis=obj.PriceAnalysis),void 0!==obj.Trim&&(this.Trim=obj.Trim),void 0!==obj.SearchCriteriaType&&(this.SearchCriteriaType=obj.SearchCriteriaType),void 0!==obj.AdId&&(this.SearchCriteriaType=obj.AdId))}return FacetedParameters.prototype.isEquivalentTo=function(other){return this.Address==other.Address&&this.Microsite.MicrositeType==other.Microsite.MicrositeType&&ArrayExtensions.areEquivalent(this.BodyType,other.BodyType)&&this.IsCpo==other.IsCpo&&this.IsDamaged==other.IsDamaged&&this.IsDealer==other.IsDealer&&this.IsNew==other.IsNew&&this.IsPrivate==other.IsPrivate&&this.IsUsed==other.IsUsed&&StringExtensions.AreEquivalentStrings(this.Keywords,other.Keywords)&&this.Make==other.Make&&this.Model==other.Model&&(this.OdometerMax==other.OdometerMax||this.AreBothNullOrNaN(this.OdometerMax,other.OdometerMax))&&(this.OdometerMin==other.OdometerMin||this.AreBothNullOrNaN(this.OdometerMin,other.OdometerMin))&&(this.LengthMin==other.LengthMin||this.AreBothNullOrNaN(this.LengthMin,other.LengthMin))&&(this.LengthMax==other.LengthMax||this.AreBothNullOrNaN(this.LengthMax,other.LengthMax))&&(this.WeightMin==other.WeightMin||this.AreBothNullOrNaN(this.WeightMin,other.WeightMin))&&(this.WeightMax==other.WeightMax||this.AreBothNullOrNaN(this.WeightMax,other.WeightMax))&&(this.PriceMax==other.PriceMax||this.AreBothNullOrNaN(this.PriceMax,other.PriceMax))&&(this.PriceMin==other.PriceMin||this.AreBothNullOrNaN(this.PriceMin,other.PriceMin))&&(this.Proximity==other.Proximity||this.AreBothNullOrNaN(this.Proximity,other.Proximity))&&this.VehicleSubType==other.VehicleSubType&&this.VehicleType==other.VehicleType&&this.WithFreeCarProof==other.WithFreeCarProof&&this.WithPhotos==other.WithPhotos&&this.WithPrice==other.WithPrice&&(this.YearMax==other.YearMax||this.AreBothNullOrNaN(this.YearMax,other.YearMax))&&(this.YearMin==other.YearMin||this.AreBothNullOrNaN(this.YearMin,other.YearMin))&&(this.WheelBaseMin==other.WheelBaseMin||this.AreBothNullOrNaN(this.WheelBaseMin,other.WheelBaseMin))&&(this.WheelBaseMax==other.WheelBaseMax||this.AreBothNullOrNaN(this.WheelBaseMax,other.WheelBaseMax))&&(this.HorsepowerMin==other.HorsepowerMin||this.AreBothNullOrNaN(this.HorsepowerMin,other.HorsepowerMin))&&(this.HorsepowerMax==other.HorsepowerMax||this.AreBothNullOrNaN(this.HorsepowerMax,other.HorsepowerMax))&&(this.EngineSizeMin==other.EngineSizeMin||this.AreBothNullOrNaN(this.EngineSizeMin,other.EngineSizeMin))&&(this.EngineSizeMax==other.EngineSizeMax||this.AreBothNullOrNaN(this.EngineSizeMax,other.EngineSizeMax))&&(this.HoursMin==other.HoursMin||this.AreBothNullOrNaN(this.HoursMin,other.HoursMin))&&(this.HoursMax==other.HoursMax||this.AreBothNullOrNaN(this.HoursMax,other.HoursMax))&&ArrayExtensions.areEquivalent(this.Transmissions,other.Transmissions)&&ArrayExtensions.areEquivalent(this.Drivetrain,other.Drivetrain)&&ArrayExtensions.areEquivalent(this.Engine,other.Engine)&&ArrayExtensions.areEquivalent(this.SeatingCapacity,other.SeatingCapacity)&&ArrayExtensions.areEquivalent(this.NumberOfDoors,other.NumberOfDoors)&&ArrayExtensions.areEquivalent(this.Sleeps,other.Sleeps)&&ArrayExtensions.areEquivalent(this.SlideOuts,other.SlideOuts)&&ArrayExtensions.areEquivalent(this.Colours,other.Colours)&&ArrayExtensions.areEquivalent(this.FuelTypes,other.FuelTypes)&&ArrayExtensions.areEquivalent(this.PriceAnalysis,other.PriceAnalysis)&&ArrayExtensions.areEquivalent(this.Trim,other.Trim)&&(this.PaymentMax==other.PaymentMax||this.AreBothNullOrNaN(this.PaymentMax,other.PaymentMax))&&(this.PaymentMin==other.PaymentMin||this.AreBothNullOrNaN(this.PaymentMin,other.PaymentMin))&&(this.PaymentFrequency==other.PaymentFrequency||this.AreBothNullOrNaN(this.PaymentFrequency,other.PaymentFrequency))&&(this.CreditRating==other.CreditRating||this.AreBothNullOrNaN(this.CreditRating,other.CreditRating))&&(this.Term==other.Term||this.AreBothNullOrNaN(this.Term,other.Term))&&(this.CashDown==other.CashDown||this.AreBothNullOrNaN(this.CashDown,other.CashDown))&&(this.TradeIn==other.TradeIn||this.AreBothNullOrNaN(this.TradeIn,other.TradeIn))&&this.AdId==other.AdId},FacetedParameters.prototype.AreBothNullOrNaN=function(left,right){var isLeftNullOrNaN=null==left||isNaN(left);return(null==right||isNaN(right))&&isLeftNullOrNaN},FacetedParameters}();!function(FacetedBoxTemplates){FacetedBoxTemplates.ColourSwatch=function(colourName){return'<i class="fas fa-circle colour-swatches '+StringExtensions.removeDiacritics(colourName)+'" aria-hidden="true" ></i>'},FacetedBoxTemplates.Checkbox=function(inputId,inputValue,labelId,labelValue,colourSwatchHtml,inputCount){return'<li class="checkboxWrapper"><div class="refinement-checkbox checkbox checkbox-primary"><input id="'+inputId+'" type="checkbox" data-value="'+inputValue+'" data-count="'+inputCount+'" checked=""><label for="'+inputId+'" id="'+labelId+'">'+labelValue+"</label>"+(null==colourSwatchHtml||void 0==colourSwatchHtml||""==colourSwatchHtml?"":colourSwatchHtml)+"</div></li>"},FacetedBoxTemplates.FairPriceCheckbox=function(inputId,inputValue,labelId,labelValue,inputCount){return"ContactDealer"!=inputValue?'<li class="checkboxWrapper"><div class="refinement-checkbox checkbox checkbox-primary"><input id="'+inputId+'" type="checkbox" data-value="'+inputValue+'" data-count="'+inputCount+'" checked=""><label for="'+inputId+'" class="'+labelId+'"><img/>('+inputCount+')</label></div><hr class="price-analysis-hr"></li>':'<li class="checkboxWrapper"><div class="refinement-checkbox checkbox checkbox-primary"><input id="'+inputId+'" type="checkbox" data-value="'+inputValue+'" data-count="'+inputCount+'" checked=""><label for="'+inputId+'" class="'+labelId+'"> <b>'+(new Resources).getSearchResource("contactDealer")+"</b> ("+inputCount+')</label></div><hr class="price-analysis-hr"></li>'}}(FacetedBoxTemplates||(FacetedBoxTemplates={}));var FacetedAdvancedSearch=function(){function FacetedAdvancedSearch(exteriorColor,kilometres,transmission,fueltype,carState,sellerType,withPriceOnly,withPhotoOnly,withCarProof,$keywords,$keywordsAc,isHotDeal,drivetrain,engine,seatingCapacity,numberOfDoors,sleeps,slideouts,bodyTypes,priceAnalysis,trims){var _this=this;this.exteriorColor=exteriorColor,this.kilometres=kilometres,this.transmission=transmission,this.fueltype=fueltype,this.carState=carState,this.sellerType=sellerType,this.withPriceOnly=withPriceOnly,this.withPhotoOnly=withPhotoOnly,this.withCarProof=withCarProof,this.isHotDeal=isHotDeal,this.drivetrain=drivetrain,this.engine=engine,this.seatingCapacity=seatingCapacity,this.numberOfDoors=numberOfDoors,this.sleeps=sleeps,this.slideouts=slideouts,this.bodyTypes=bodyTypes,this.priceAnalysis=priceAnalysis,this.trims=trims,this.controls=[this.withPriceOnly.$element,this.withPhotoOnly.$element,this.withCarProof.$element].concat(carState.controls()).concat(sellerType.controls()),this.conditionControls=carState.controls();var callback=function(){var current=fb.appliedValues;current.withPrice!==_this.withPriceOnly.state||current.withPhotos!==_this.withPhotoOnly.state||current.withCarproof!==_this.withCarProof.state?$("#applyOthers").addClass("appliable"):$("#applyOthers").removeClass("appliable")};this.withPriceOnly.addCallbackForEveryToggle(callback),this.withPhotoOnly.addCallbackForEveryToggle(callback),this.withCarProof.addCallbackForEveryToggle(callback),this.dropdowns=[this.exteriorColor,this.transmission,this.fueltype,this.drivetrain,this.engine,this.seatingCapacity,this.numberOfDoors,this.sleeps,this.slideouts,this.trims];var textInputOptions=new TextInputOptions;textInputOptions.onClickUpdate=new OnClickUpdate,textInputOptions.onClickUpdate.enabled=!0,textInputOptions.onClickUpdate.triggerElement=$("#keywordSearch"),textInputOptions.activeStyle=new ActiveStyle,textInputOptions.activeStyle.enabled=!0,textInputOptions.activeStyle.className="active",textInputOptions.activeStyle.disabledOnBlur=!0,textInputOptions.trimOptions=new TrimOptions,textInputOptions.trimOptions.enabled=!0,textInputOptions.trimOptions.trimEnd=!0,textInputOptions.trimOptions.trimStart=!0,textInputOptions.codeSpaces=new CodeSpaces,textInputOptions.codeSpaces.enabled=!0,this.keywordInput=new TextInput($keywords,new AutoComplete($keywordsAc,!0,function(target,callback){_this.keywordInput.displayText().length>=AutoComplete.MinToSearch?$.ajax({url:"/Refinement/Keywords",type:"GET",data:{text:_this.keywordInput.displayText()},dataType:"json",contentType:"application/json",success:function(result){_this.keywordInput.autoComplete.items=result.Keywords,_this.keywordInput.autoComplete.displayed=_this.keywordInput.autoComplete.items.length>0,_this.keywordInput.autoComplete.highlightIndex=-1,callback(_this.keywordInput)}}):_this.keywordInput.autoComplete.displayed=!1},new AjaxManager(new AjaxOptions)),!1,null,textInputOptions)}return FacetedAdvancedSearch.prototype.updateMultiSelects=function(result,selected,updateDropdowns){void 0===selected&&(selected=null),void 0===updateDropdowns&&(updateDropdowns=!0);var multiSelectFactory=new MultiSelectFactory,selectedFacet=FacetType[selected],click=function(me){me.toggle(null),fb.updateAppliedValues(!1),fb.onRefinementChanged()};updateDropdowns&&(selected&&selectedFacet!==FacetType.Colours||(this.exteriorColor=multiSelectFactory.setupMultiselect(result.ExteriorColour,this.exteriorColor.selectedLabels(selected),FacetType.Colours,click)),selected&&selectedFacet!==FacetType.Transmissions||(this.transmission=multiSelectFactory.setupMultiselect(result.Transmission,this.transmission.selectedLabels(selected),FacetType.Transmissions,click)),selected&&selectedFacet!==FacetType.Drivetrain||(this.drivetrain=multiSelectFactory.setupMultiselect(result.Drivetrain,this.drivetrain.selectedLabels(selected),FacetType.Drivetrain,click)),selected&&selectedFacet!==FacetType.Engine||(this.engine=multiSelectFactory.setupMultiselect(result.Engine,this.engine.selectedLabels(selected),FacetType.Engine,click)),selected&&selectedFacet!==FacetType.SeatingCapacity||(this.seatingCapacity=multiSelectFactory.setupMultiselect(result.SeatingCapacity,this.seatingCapacity.selectedLabels(selected),FacetType.SeatingCapacity,click)),selected&&selectedFacet!==FacetType.NumberOfDoors||(this.numberOfDoors=multiSelectFactory.setupMultiselect(result.NumberOfDoors,this.numberOfDoors.selectedLabels(selected),FacetType.NumberOfDoors,click)),selected&&selectedFacet!==FacetType.FuelTypes||(this.fueltype=multiSelectFactory.setupMultiselect(result.FuelType,this.fueltype.selectedLabels(selected),FacetType.FuelTypes,click)),selected&&selectedFacet!==FacetType.Sleeps||(this.sleeps=multiSelectFactory.setupMultiselect(result.Sleeps,this.sleeps.selectedLabels(selected),FacetType.Sleeps,click)),selected&&selectedFacet!==FacetType.SlideOuts||(this.slideouts=multiSelectFactory.setupMultiselect(result.SlideOuts,this.slideouts.selectedLabels(selected),FacetType.SlideOuts,click)),selected&&selectedFacet!==FacetType.BodyType||(this.bodyTypes=multiSelectFactory.setupMultiselect(result.Body,this.bodyTypes.selectedLabels(selected),FacetType.BodyType,click)),selected&&selectedFacet!==FacetType.PriceAnalysis||(this.priceAnalysis=multiSelectFactory.setupMultiselect(result.PriceAnalysis,this.priceAnalysis.selectedLabels(selected),FacetType.PriceAnalysis,click)),selected&&selectedFacet!==FacetType.Trim||(this.trims=multiSelectFactory.setupMultiselect(result.Trims,this.trims.selectedLabels(selected),FacetType.Trim,click)))},FacetedAdvancedSearch}(),AppliedValues=function(){return function(){}}(),FacetedResultsPage=function(){function FacetedResultsPage(){}return FacetedResultsPage.prototype.init=function(microsite,query,searchResultsInfo,updateSort,fuels,seats,doors,engines,trains,colours,transmissions,sleeps,slideouts,bodyTypes,priceAnalysis,trim,isLocationValid,quickSearch){var _this=this;this.isDealerInventory="dealerInventory"===query.InMarketType,$(document).ready(function(){var locationForm=document.getElementById("locationInputForm");null!=locationForm&&locationForm.addEventListener("submit",function(e){e.preventDefault()},!1),PageOptionExtensions.SetupPageOptions(microsite.MicrositeType);var backToSearchUrl=window.location.pathname+window.location.search;if(fb=(new FacetedBoxFactory).create(microsite,query,searchResultsInfo,fuels,seats,doors,engines,trains,colours,transmissions,sleeps,slideouts,bodyTypes,priceAnalysis,trim,quickSearch),fb.IsLocationNotValid({LocationIsValid:isLocationValid})&&fb.showLocationError(),_this.setPageErrorHandler(fb),"dealerInventory"!==query.InMarketType){try{localStorage.setItem("lastsrpurl",backToSearchUrl)}catch(Error){}(new CookieManager).addOrUpdate(new Cookie("lastsrpurl",backToSearchUrl))}new MastHeadControl($(".at_masthead"),fb,!0),new SrpUrlManager;var $pageSize=$("#pageSize");$pageSize.attr("data-old",$pageSize.val()),PageOptionExtensions.CreatePageSizeCookie();var $sortBy=$("#sortBy");$sortBy.attr("data-old",$sortBy.val()),$("#width_tmp_option").html($("#sortBy option:selected").text()),$sortBy.width($("#width_tmp_select").width()),$sortBy.change(),updateSort&&PageOptionExtensions.CreateSortOrderCookie(microsite.MicrositeType);var proximity=fb.$proximityDropdown?fb.$proximityDropdown.item.value:-2,message=Alerts.noVehiclesFoundProximityAlert(proximity);fb.$noVehiclesFoundProximityAlert.html(message),_this.setLocation(),"undefined"!=typeof paymentTag&&null!==paymentTag&&paymentTag.showPaymentTags();var getCheckedArr=function(arr){for(var el,checkedArr=[],i=0;i<arr.length;i++)checkedArr.push((el=arr[i],$(el).is(":checked")));return console.log(checkedArr),checkedArr},resources=new Resources,paginationFirstPage=resources.getSearchResource("paginationFirstPage"),paginationLastPage=resources.getSearchResource("paginationLastPage"),pagerOptions=new PagerOptions(paginationFirstPage,paginationLastPage,3,5),pager=new Pager($(".srpPager"),pagerOptions,function(page){window.scroll(0,1),fb.executeSearch(fb.getRefinementQuery(),new SearchOptions({IsRefinement:!1,Page:page,Pager:pager,IsPaging:!0}))});fb.$newSearch.click(function(){"sm"===fb.getBootstrapBreakpoint()&&fb.$title.hide();var refreshListings=!isMobile;_this.resetSearch(refreshListings),(window.srpDataLayerManager||new SrpDataLayerManager).addClearSearchFiltersEvent(),fb.savePaymentParameter()}),fb.$searchButton.click(function(e){if(fb.setLastFacet(""),""===$("#locationAddress").val())$("#rfLocationMissingAlert").show();else{var currentButton=$(e.currentTarget),applyButtonId=currentButton.attr("id");if(currentButton.removeClass("appliable"),"keywordSearch"!==applyButtonId?fb.updateAppliedValues(!1):fb.updateAppliedValues(!0),"applyLocation"===applyButtonId&&!isMobile&&fb.lastResultsInfo.isSearchEmpty)(new FacetedResultsPage).resetSearch(!0);else{if(fb.quickSearch&&"quickSearchBtn"===applyButtonId)(window.srpDataLayerManager||new SrpDataLayerManager).addQuickSearchClickedEvent();fb.onRefinementChanged(!0,"",fb.multiSelectCount)}if("applyCondition"===applyButtonId)arr=getCheckedArr(["#rfNew","#rfUsed","#rfPreOwned","#rfDamaged"]),FacetedBoxFactory.prototype.setConditionValue(arr[0],arr[1],arr[2],arr[3]);else if("applyLocation"===applyButtonId)_this.setLocation();else if("applySeller"===applyButtonId)!function(){var arr=getCheckedArr(["#rfDealer","#rfPrivate"]);FacetedBoxFactory.prototype.setSellerTypeValue(arr[0],arr[1])}();else if("applyOthers"===applyButtonId)!function(){var arr=getCheckedArr(["#rfPhoto","#rfPrice","#rfCarFax"]);FacetedBoxFactory.prototype.setOtherOptions(arr[0],arr[1],arr[2])}();else if("keywordSearch"!==applyButtonId){$(e.target).parent();var multiSelectApplies=["applyDrivetrain","applyColour","applyFuel","applyEngine","applyTransmission","applySeatingCapacity","applyNumberOfDoors","applySleeps","applySlideOuts","applyBodyStyles","applyPriceAnalysis","applyTrim"],index=multiSelectApplies.indexOf(applyButtonId);index>-1&&($("#"+multiSelectApplies[index]).closest(".faceted-mob").empty(),function(index){var resources=new Resources,anyResource=isMobile?"":resources.getSearchResource("any"),setMultiselectLabel=function(parentId,selections){var elementId=parentId.replace("-parent",""),element=document.getElementById(elementId),parent=document.getElementById(parentId);0===selections.length?(element.innerHTML=anyResource,element.classList.remove("selectedLabel"),parent.classList.remove("filtered")):(isMobile||(element.innerHTML=selections.join(", ")),element.classList.add("selectedLabel"),parent.classList.add("filtered"))};switch(index){case 0:setMultiselectLabel("faceted-parent-Drivetrain",fb.advancedOptions.drivetrain.selectedLabels());break;case 1:setMultiselectLabel("faceted-parent-Colours",fb.advancedOptions.exteriorColor.selectedLabels());break;case 2:setMultiselectLabel("faceted-parent-FuelTypes",fb.advancedOptions.fueltype.selectedLabels());break;case 3:setMultiselectLabel("faceted-parent-Engine",fb.advancedOptions.engine.selectedLabels());break;case 4:setMultiselectLabel("faceted-parent-Transmissions",fb.advancedOptions.transmission.selectedLabels());break;case 5:setMultiselectLabel("faceted-parent-SeatingCapacity",fb.advancedOptions.seatingCapacity.selectedLabels());break;case 6:setMultiselectLabel("faceted-parent-NumberOfDoors",fb.advancedOptions.numberOfDoors.selectedLabels());break;case 7:setMultiselectLabel("faceted-parent-Sleeps",fb.advancedOptions.sleeps.selectedLabels());break;case 8:setMultiselectLabel("faceted-parent-SlideOuts",fb.advancedOptions.slideouts.selectedLabels());break;case 9:setMultiselectLabel("faceted-parent-BodyType",fb.advancedOptions.bodyTypes.selectedLabels());break;case 10:setMultiselectLabel("faceted-parent-PriceAnalysis",fb.advancedOptions.priceAnalysis.selectedLabels("",new Resources));break;case 11:setMultiselectLabel("faceted-parent-Trim",fb.advancedOptions.trims.selectedLabels())}}(index))}}var arr}),$pageSize.change(function(){PageOptionExtensions.SetupPageSizeChangeTrigger($pageSize,fb)}),$sortBy.off("change").on("change",function(e){PageOptionExtensions.SetupSortOrderChangeTrigger($sortBy,fb),$("#width_tmp_option").html($("#sortBy option:selected").text()),$sortBy.width($("#width_tmp_select").width())}),pager.build(initialPageNumber,query.Top,initialAdsCount),FacetedBoxFactory.prototype.makeSearchBoxChange(),"undefined"!=typeof displayer&&displayer.showCompareTooltip(),isIPadBrowser||$(".save-to-garage").popover({trigger:"manual",html:!0,animation:!1}).on("mouseenter",function(){var me=this;$(this).popover("show"),$(".popover").on("mouseleave",function(){$(me).popover("hide")})}).on("mouseleave",function(){var me=this;setTimeout(function(){$(".popover:hover").length||$(me).popover("hide")},300)});var originalHeight=window.innerHeight;isAndroid&&$(".keyboard-fix").focus(function(){if(isMobile){if(window.innerHeight==originalHeight){var topPos=$(this)[0].getBoundingClientRect().top,topKeyboardEdge=window.outerHeight-(250+$("a.result-filter-btn")[0].getBoundingClientRect().height);if(topPos>topKeyboardEdge){var scrollDir=topPos-topKeyboardEdge/2;$(".srp-filter-mobile")[0].scrollTop+=scrollDir}}}else $(".facetedBox").addClass("move-up")}).blur(function(event){$(".facetedBox").removeClass("move-up"),null==event||null==event.relatedTarget||event.relatedTarget.disabled||event.relatedTarget.click()}),PageOptionExtensions.SetupAlerts(),fb.showAlerts(searchResultsInfo),isMobile||_this.isDealerInventory||_this.stickyLeaderboard(),fb.changeImgSrc(),_this.getUrlParameter("srpAdBlockDetected")&&$("#faceted-parent-Price").addClass("open"),isMobile&&$("#faceted-parent-Make, #faceted-parent-Model, #faceted-parent-Trim").on("touchstart",function(e){var target=e.currentTarget;if(!$(target).hasClass("open")){var listOptions=$(target).find(".list-options");0===$(listOptions).scrollTop()&&$(listOptions).animate({scrollTop:"5px"},400)}})})},FacetedResultsPage.prototype.getUrlParameter=function(sParam){return window.location.search.substring.toString().indexOf(sParam)>0},FacetedResultsPage.prototype.setPageErrorHandler=function(f){$("[data-hide]").on("click",function(){$("#"+$(this).attr("data-hide")).addClass("hidden")}),$("#pageErrorLink").click(function(){f.executeSearch(f.getRefinementQuery())})},FacetedResultsPage.prototype.setLocation=function(){var loc=$("#locationAddress").val(),prox=fb.$proximityDropdown?fb.$proximityDropdown.value:-2,label=$("#faceted-Location");$("#faceted-Location").removeClass("genericwarning"),$("#rfLocation").removeClass("open"),fb.enableMandatoryPostalCode&&!StringExtensions.IsPostalCodeFormatValid(fb.locationInput.val())?(label.text(StringExtensions.sentenceCase((new Resources).getSearchResource("postalCode")+"*")),label.addClass("genericwarning"),fb.locationInput.val("")):(label.text(loc),label.closest(".faceted-arrow").find(".faceted-mob").children("[id^='faceted-']").removeClass("hidden")),$("#faceted-Proximity").text(Ui.displayDistance(prox)),label.closest("li").addClass("filtered")},FacetedResultsPage.prototype.resetSearch=function(refreshListings){var resources=new Resources;(new ResetSearch).reset(fb,fb.microsite,null!==fb.lastQuery&&"vehicleSpecialist"===fb.lastQuery.InMarketType),fb.updateAppliedValues(),refreshListings?fb.executeSearch(fb.getRefinementQuery(),new SearchOptions):fb.refresh(fb.getRefinementQuery(),"",!0,function(result){fb.setVehicleCount(result.Count)}),"sm"!==fb.getBootstrapBreakpoint()&&fb.$title.removeClass("hidden"),$(".at-faceted-wrapper .filtered").removeClass("filtered");var anyText=isMobile?"":resources.getSearchResource("any");this.isDealerInventory?$(".at-faceted-wrapper .dropdown-toggle > span:not(.beta-icon)").text(anyText):$(".at-faceted-wrapper .dropdown-toggle > span:not(:last,.beta-icon)").text(anyText),$("#facetedBoxWrapper").removeClass("showOnSmall"),$(".faceted-arrow").find(".faceted-mob .comma").empty(),this.resetConditions(),this.resetSellerType(),this.resetOthersValue(),this.setLocation(),this.clearModelDropdown()},FacetedResultsPage.prototype.resetConditions=function(){for(var selected=fb.advancedOptions.carState.selected(),anyText=(new Resources).getSearchResource("any"),$condition=$("#faceted-condition"),newCondition=[],i=0;i<selected.length;i++)selected[i].toggle(selected[i].state),newCondition.push(selected[i].value);selected.length>0?($condition.closest("li").addClass("filtered"),$condition.empty().append(newCondition.join(", "))):$condition.empty().append(anyText)},FacetedResultsPage.prototype.resetSellerType=function(){for(var selected=fb.advancedOptions.sellerType.selected(),anyText=(new Resources).getSearchResource("any"),$types=$("#faceted-type"),newType=[],i=0;i<selected.length;i++)selected[i].toggle(selected[i].state),newType.push(selected[i].value);selected.length>0?($types.closest("li").addClass("filtered"),$types.empty().append(newType.join(", "))):$types.empty().append(anyText)},FacetedResultsPage.prototype.resetOthersValue=function(){var selected=[];selected[0]=fb.advancedOptions.withPhotoOnly,selected[1]=fb.advancedOptions.withPriceOnly,selected[2]=fb.advancedOptions.withCarProof;for(var i=0;i<selected.length;i++)selected[i].toggle(selected[i].state);(new FacetedBoxFactory).setOtherOptions(selected[0].state,selected[1].state,selected[2].state)},FacetedResultsPage.prototype.clearModelDropdown=function(){var modelWarning='<li value data-dropdownvalue><a href="#"><div class="form-group"><div id="modelerror" class="genericwarning" style= "display: block;">'+(new Resources).getSearchResource("selectMake")+"</div></div></a></li>";$("#rfModel").children().remove(),$("#rfModel").append(modelWarning),isMobile&&$("#faceted-Model").addClass("hidden"),$("#faceted-parent-Model").removeClass("filtered")},FacetedResultsPage.prototype.clearTrimDropdown=function(resource){var trimWarning='<li value data-dropdownvalue><a href="#"><div class="form-group"><div id="trimerror" class="genericwarning" style= "display: block;">'+(new Resources).getSearchResource(resource)+"</div></div></a></li>",trimOptions=$("#fbTrim");trimOptions.children().remove(),trimOptions.append(trimWarning),isMobile&&$("#faceted-Trims").addClass("hidden"),$("#faceted-parent-Trims").removeClass("filtered")},FacetedResultsPage.prototype.stickyLeaderboard=function(){var leaderboard=$(".leaderboard"),backToTop=$(".back-to-top"),hulk=document.getElementById("hulk-leaderboard2"),closeLeaderboard=$("#closeLeaderboard"),leaderboardClosed=sessionStorage.getItem("leaderboardClosed");null==leaderboardClosed&&(sessionStorage.setItem("leaderboardClosed","false"),leaderboardClosed="false"),$(window).scroll(function(){"false"===leaderboardClosed&&($(this).scrollTop()>700?(leaderboard.addClass("fixed_button"),closeLeaderboard.show(),backToTop.addClass("has-sticky-leaderboard"),hulk.className="",$(window).scrollTop()+$(window).height()>$(document).height()-400?(leaderboard.removeClass("fixed_button"),closeLeaderboard.hide(),backToTop.removeClass("has-sticky-leaderboard"),hulk.className="col-xs-12 col-md-9 col-md-offset-3"):(leaderboard.addClass("fixed_button"),closeLeaderboard.show(),leaderboard.removeClass("hidden"),backToTop.addClass("has-sticky-leaderboard"),hulk.className="")):(leaderboard.removeClass("fixed_button"),closeLeaderboard.hide(),backToTop.removeClass("has-sticky-leaderboard"),hulk.className="col-xs-12 col-md-9 col-md-offset-3"))}),$("#closeLeaderboard").click(function(){leaderboard.removeClass("fixed_button"),leaderboard.removeClass("hidden"),closeLeaderboard.hide(),hulk.className="col-xs-12 col-md-9 col-md-offset-3",window.dataLayer.push({event:"gtm_srp_close_sticky_footer",eventAction:"close sticky footer",eventLabel:""}),leaderboardClosed="true",sessionStorage.setItem("leaderboardClosed","true")})},FacetedResultsPage}(),userAgent=navigator.userAgent,isIPadBrowser=null!=userAgent&&userAgent.toLowerCase().indexOf("ipad")>=0,isAndroid=userAgent.toLowerCase().indexOf("android")>=0,currentViewport="",enableBigBoxRepositionSrp=!!$("#enableBigBoxSrp").data("enablebigboxsrp")&&"true"===$("#enableBigBoxSrp").data("enablebigboxsrp").toLowerCase(),isEnglish=window.location.hostname.lastIndexOf("autotrader.ca")>0,isMobile=$(window).width()<=767,enableReviewsVideoWidgetSRP=!!$("#enableReviewsVideoWidgetSRP").data("enablereviewsvideowidgetsrp")&&("true"===$("#enableReviewsVideoWidgetSRP").data("enablereviewsvideowidgetsrp").toLowerCase()&&isEnglish&&!isMobile),enableReviewsVideoWidgetSRPXS=!!$("#enableReviewsVideoWidgetSRPXS").data("enablereviewsvideowidgetsrpxs")&&("true"===$("#enableReviewsVideoWidgetSRPXS").data("enablereviewsvideowidgetsrpxs").toLowerCase()&&isEnglish&&isMobile),FacetSearchBox=function(){function FacetSearchBox(lastQuery,lastResultsInfo,microsite,topValue,$newSearch,locationInput,$makeDropdown,$modelDropdown,$noVehiclesFoundProximityAlert,$proximityDropdown,$searchButton,$vehicleTypeDropdown,$vehicleSubtypeDropdown,$ui,price,year,wheelbase,enginesize,lengthRange,weightRange,horsePowerRange,hoursRange,payment,$paymentFrequencyDropdown,$creditRatingDropdown,$termDropdown,cashDownInput,tradeInInput,advanced,quickSearch){var _this=this;if(this.lastQuery=lastQuery,this.lastResultsInfo=lastResultsInfo,this.microsite=microsite,this.topValue=topValue,this.$newSearch=$newSearch,this.locationInput=locationInput,this.$makeDropdown=$makeDropdown,this.$modelDropdown=$modelDropdown,this.$noVehiclesFoundProximityAlert=$noVehiclesFoundProximityAlert,this.$proximityDropdown=$proximityDropdown,this.$searchButton=$searchButton,this.$vehicleTypeDropdown=$vehicleTypeDropdown,this.$vehicleSubtypeDropdown=$vehicleSubtypeDropdown,this.$ui=$ui,this.price=price,this.year=year,this.wheelbase=wheelbase,this.enginesize=enginesize,this.lengthRange=lengthRange,this.weightRange=weightRange,this.horsePowerRange=horsePowerRange,this.hoursRange=hoursRange,this.payment=payment,this.$paymentFrequencyDropdown=$paymentFrequencyDropdown,this.$creditRatingDropdown=$creditRatingDropdown,this.$termDropdown=$termDropdown,this.cashDownInput=cashDownInput,this.tradeInInput=tradeInInput,this.quickSearch=quickSearch,this.multiSelectCount=0,this.hasError=!1,this.nullChoice="",this.sidebarScroll=0,this.lastScroll=0,this.topMargin=0,this.makeValues={},this.resultsDepleted=!1,this.refinementCalled=!1,this.ajaxManager=new AjaxManager(new AjaxOptions({retryOptions:{enableRetry:!0,maxRetryAttempts:3,retryCallback:function(j){_this.$title.parent().addClass("hidden"),$("#pageErrorWarning").removeClass("hidden"),$("#pageNotFoundRedirectWarning").addClass("hidden"),$("#searchExpansionWarning").addClass("hidden"),$("#zeroResultsWarning").addClass("hidden"),$("#SearchListings").html("")}}})),this.$facetedWrapper=$("#facetedBoxWrapper"),isMobile||$(document).keypress(function(e){13==e.which&&_this.handleEnterPress()}),isMobile){var os=(new BrowserDetect).GetOs();(browser=(new BrowserDetect).GetBrowser())===BrowserType.iOS11&&$(".list-options, .facet-main").addClass("ios"),os===OsType.iOS&&document.body.classList.add("overflow-scrolling")}this.stickyHeaderOnExtraSmall(),this.dropdowns=new Array,this.dropdowns.push($makeDropdown),this.dropdowns.push($modelDropdown),this.dropdowns.push($vehicleTypeDropdown),this.dropdowns.push($vehicleSubtypeDropdown);var $sortBy=$("#sortBy");this.sortOrder=$sortBy.val(),this.$countElement=$("#sbCount"),this.$filterCount=$("#filterCount"),this.$filterCount2=$("#filterCount2"),this.$filterCount3=$("#filterCount3"),this.$titleCount=$(".title-count"),this.$title=$("#rfTitle"),this.$filterHeader=$("#filter-header"),this.$mobileFacetMenu=$(".srp-filter-mobile"),this.$quickSearchBtn=$("#quickSearchBtn"),this.$advancedSearchLink=$(".advanced-search-link"),this.$filterCount.text(this.$countElement.text()),this.$filterCount2.text(this.$countElement.text()),this.$filterCount3.text(this.$countElement.text()),this.$titleCount.text(this.$countElement.text()),this.resultsDepleted=$("#SearchListings").children(".list-container").not(".top-listing").length==Number(this.$countElement.text()),this.topMargin=this.$ui.offset().top,this.advancedOptions=advanced,this.$locationFacet=$("#faceted-parent-Location");var make=this.$makeDropdown.value,model=this.$modelDropdown.value;savedSearchData&&(savedSearchData.SavedSearchCriteria.SearchCriteriaType=SavedSearchType.SRP);var isFacetType=function(e,target){if($(e.target).hasClass("filtered")||isMobile&&_this.refinementCalled){return $(e.target).attr("id")==="faceted-parent-"+target}return!1},getFacetType=function(e){var id=$(e.target).attr("id");return id.substring(15,id.length)},blockWrapper=function(){$("#wrapper").block({overlayCSS:{backgroundColor:"#C1C4C6",opacity:.7,cursor:"auto"},message:null,fadeIn:0}),$(".blockUI, #closeFilters").click(function(){$("#wrapper").unblock(),isIPadBrowser&&$(window).width()<=991&&$("body").css({overflow:"",height:""}),_this.hideFacetsOnSmall()}),isIPadBrowser&&$(window).width()<=991&&$("body").css({overflow:"hidden",height:"100vh"})},showFacetsOnSmall=function(){if(_this.$facetedWrapper.addClass("showOnSmall").removeAttr("style"),(new BrowserDetect).GetBrowser()==BrowserType.iOS11){var count=document.getElementById("sbCount");_this.checkVisible(count)||count.scrollIntoView()}},updateSearchBtnonIE=function(){browser==BrowserType.IE&&(_this.$quickSearchBtn.prop("disabled",!1),document.getElementById("quickSearchBtn").setActive())};$(document).scroll(function(){!function(){var facetedBoxShown=_this.$facetedWrapper.hasClass("showOnSmall");if("sm"!==fb.getBootstrapBreakpoint()||facetedBoxShown)_this.$filterHeader.hide();else{var zeroresults=$("#filterBtn2").hasClass("filter-zero-results"),y=$(document).scrollTop();zeroresults?_this.$filterHeader.addClass("hide-stickyheader"):_this.$filterHeader.removeClass("hide-stickyheader"),y>190?_this.$filterHeader.fadeIn("slow"):_this.$filterHeader.fadeOut("slow")}}()}),[this.$vehicleTypeDropdown,this.$vehicleSubtypeDropdown].forEach(function(el){el.onValueChange(function(){el.isNullOrEmpty()||fb.onRefinementChanged(!0,"",el.item.count,_this.quickSearch),_this.quickSearch&&updateSearchBtnonIE()})});var browser=(new BrowserDetect).GetBrowser();this.$modelDropdown.onValueChange(function(){_this.advancedOptions.trims.clearFacetLabel($("#faceted-parent-Trim")),_this.advancedOptions.trims.clear(),fb.updateAppliedValues(!1),_this.$modelDropdown.isNullOrEmpty()||fb.onRefinementChanged(!0,"",_this.$modelDropdown.item.count,_this.quickSearch),_this.quickSearch&&updateSearchBtnonIE()}),this.$makeDropdown.onValueChange(function(){_this.$modelDropdown.clearFacetLabel(),FacetedResultsPage.prototype.clearModelDropdown(),_this.advancedOptions.trims.clearFacetLabel($("#faceted-parent-Trim")),_this.advancedOptions.trims.clear(),fb.updateAppliedValues(!1),$("#modelerror").html((new Resources).getSearchResource("searchModelWait")),_this.$makeDropdown.isNullOrEmpty()||(fb.onRefinementChanged(!0,"",_this.$makeDropdown.item.count,_this.quickSearch,!0,"Make"),_this.$modelDropdown.backingSelect.facetedParentMain.prop("disabled",!1)),_this.quickSearch&&updateSearchBtnonIE()}),this.$vehicleTypeDropdown.onFocus(null),this.$vehicleSubtypeDropdown.onFocus(null),this.$makeDropdown.onFocus(function(){_this.$makeDropdown.isNullOrEmpty()||_this.$modelDropdown.select(null)}),this.$modelDropdown.onFocus(null),this.locationInput.val(this.locationInput.$input.val()),this.locationInput.$input.blur(function(){null!==_this.locationInput.val()&&""!==_this.locationInput.val()||_this.showLocationError()});var yearRange=this.year;if(DropdownFactory.addRangeCutoff(yearRange),this.quickSearch&&(yearRange.lowElement.onValueChange(function(){_this.updateAppliedValues(),fb.onRefinementChanged(!0,"",15,!0,!1)}),yearRange.highElement.onValueChange(function(){_this.updateAppliedValues(),fb.onRefinementChanged(!0,"",15,!0,!1)})),this.quickSearch){for(var i=0;i<this.advancedOptions.conditionControls.length;i++)this.advancedOptions.conditionControls[i].click(function(){_this.updateAppliedValues(),fb.onRefinementChanged(!0,"",null,!0)});this.$proximityDropdown&&this.$proximityDropdown.onValueChange(function(){_this.updateAppliedValues(),fb.onRefinementChanged(!0,"",null,!0)})}isMobile&&this.$proximityDropdown&&this.$proximityDropdown.onValueChange(function(){try{localStorage.setItem("Proximity",String(_this.$proximityDropdown.value))}catch(e){console.error(e)}}),new FeaturedListing($("#left"),$("#faExpleft")).addEvents(),new FeaturedListing($("#right"),$("#faExpright")).addEvents(),$(".dropdown-menu").find(".form-group, .checkboxWrapper").click(function(e){e.stopPropagation()}),$("#_FacetedSearchWrapper").on("hide.bs.collapse",function(){"undefined"!=typeof infiniteScroll&&null!=infiniteScroll&&infiniteScroll.disable();var query=fb.getRefinementQuery();query.isEquivalentTo(_this.lastQuery)?infiniteScroll.enable():fb.executeSearch(query,new SearchOptions({IsRefinement:!0,IsPaging:!0}))}),$("#filterBtn, #filterBtn2 ").click(function(){showFacetsOnSmall(),_this.$filterHeader.hide(),blockWrapper()}),$(".facet-main").on("shown.bs.dropdown",function(e){$(e.currentTarget).removeClass("scroll-nav"),$(e.currentTarget).closest("#facetedBoxWrapper").removeClass("facetedBoxRedux"),showFacetsOnSmall(),blockWrapper(),function(e){isMobile&&($(e.target).find(".faceted-mob").addClass("hide"),_this.$mobileFacetMenu.animate({scrollTop:_this.$mobileFacetMenu.scrollTop()+$(e.target).offset().top},500))}(e);var target,positionedWithinViewport=!1;if($(e.target).hasClass("reload-on-close"))if(isFacetType(e,"Year"))_this.refresh(_this.getRefinementQuery(!1,!1));else if("faceted-parent-Trim"===$(e.target).attr("id")&&null==$makeDropdown.value&&null==$modelDropdown.value)FacetedResultsPage.prototype.clearTrimDropdown("trimsSelectMakeModel");else if("faceted-parent-Trim"===$(e.target).attr("id")&&null==$modelDropdown.value&&null!=$makeDropdown.value)FacetedResultsPage.prototype.clearTrimDropdown("trimsSelectModel");else if(isFacetType(e,getFacetType(e))){!isMobile&&(target=getFacetType(e),["Drivetrain","Colours","FuelTypes","Engine","Transmissions","SeatingCapacity","NumberOfDoors","Sleeps","SlideOuts","BodyType","PriceAnalysis","Trims"].indexOf(target)>-1)?function(e){var menu=$(e.target).find(".list-options"),children=menu.children();children.each(function(i,el){0===i||i===children.length-1?el.classList.add("hidden"):el.outerHTML=""});for(var i=0;i<3;i++)menu.append('<li><a class="loading-filler" href="#"><span class="animated-background"> </span></a></li>');$("#filterBtn").removeClass("filter-zero-results"),$("#filterBtn2").removeClass("filter-zero-results")}(e):isMobile||isFacetType(e,"Model")&&null==$makeDropdown.value||function(e){var menu=$(e.target).find(".list-options");menu.children().remove();for(var i=0;i<3;i++)menu.append('<li><a class="loading-filler" href="#"><span class="animated-background"></span></a></li>');$("#filterBtn").removeClass("filter-zero-results"),$("#filterBtn2").removeClass("filter-zero-results")}(e),positionedWithinViewport=!0;var facetType=getFacetType(e);if(facetType===_this.lastFacet)for(var i=0;i<_this.dropdowns.length;i++)if(_this.dropdowns[i].name===facetType)return _this.dropdowns[i].retrieveFromCache(),void _this.positionFlyoutWithinViewport($(e.target));_this.refresh(_this.getRefinementQuery(!0,!0,facetType),facetType,!0,function(result){fb.positionFlyoutWithinViewport($(e.target)),fb.setLastFacet(facetType);for(var j=0;j<_this.dropdowns.length;j++)if(_this.dropdowns[j].name===facetType){_this.dropdowns[j].setCache();break}})}isMobile||isIPadBrowser||isAndroid||$(e.target).find("input:text").first().focus(),positionedWithinViewport||fb.positionFlyoutWithinViewport($(e.target))}),isMobile&&$("#filter").click(function(e){$(e.target).parents(".advanced-search").length?function(e){isMobile&&isAndroid&&!$(e.target).hasClass("disabled")&&($(".keyword-search").addClass("extra-height"),_this.$mobileFacetMenu.animate({scrollTop:_this.$mobileFacetMenu.scrollTop()+$(e.target).offset().top+10},500))}(e):isMobile&&isAndroid&&$(".keyword-search").removeClass("extra-height")}),$(".facet-main").on("hidden.bs.dropdown",function(e){fb.quickSearch?$(e.currentTarget).closest("#facetedBoxWrapper").addClass("facetedBoxRedux"):$(e.currentTarget).addClass("scroll-nav"),fb&&(fb.multiSelectCount=0),function(e){isMobile&&$(e.target).find(".faceted-mob").removeClass("hide")}(e);var facet=$(e.target);facet.children(".dropdown-container").removeAttr("style"),facet.children(".dropdown-toggle").removeClass("hide-chevron")});new SearchStateManager(new CookieManager).updateState(make,model);this.appliedValues=new AppliedValues,this.updateAppliedValues(),$("[id^=faceted-parent]").on("hide.bs.dropdown",function(x){isIPadBrowser&&"sm"===_this.getBootstrapBreakpoint()||$("#wrapper").unblock(),_this.revertAppliedValues(x.currentTarget.id),"faceted-parent-Year"===x.target.id&&null==_this.appliedValues.yearMax&&null==_this.appliedValues.yearMin&&x.target.classList.remove("filtered"),"faceted-parent-Location"===x.currentTarget.id&&(_this.enableMandatoryPostalCode?StringExtensions.IsPostalCodeFormatValid(_this.appliedValues.location)?fb.hideLocationError(!0):fb.showLocationError(_this.locationInput.val().length>0?"invalidFormat":null):_this.appliedValues.location?fb.hideLocationError(!0):fb.showLocationError())}),$(".facet-main > li:not(#faceted-parent-Location), #proximity-Link, .facet-main > li:not(#faceted-parent-Location) > a, #txtKeywords, #newSearch").click(function(event){if($(this).hasClass("disabled")){if(fb.quickSearch){var zeroResultsWarning=document.getElementById("zeroResultsWarning");null==zeroResultsWarning||fb.checkVisible(zeroResultsWarning)||zeroResultsWarning.scrollIntoView()}else{$("#locationAddress").is(":visible")||$("#faceted-parent-Location>a").eq(0).click();var locationFilter=document.getElementById("faceted-parent-Location");null==locationFilter||fb.checkVisible(locationFilter)||locationFilter.scrollIntoView()}event.stopImmediatePropagation()}}),this.quickSearch&&($("#quickSearchBox").keypress(function(e){13===e.keyCode&&fb&&fb.executeSearch(fb.getRefinementQuery())}),$("#quickSearchBox select").keypress(function(e){13===e.keyCode&&(e.preventDefault(),$(e.target).blur(),window.focus())})),this.$advancedSearchLink.click(function(){DataLayerFactory.srpDataLayer().addAdvancedSearchClick()}),$(document).ready(function(){enableReviewsVideoWidgetSRP?new VideosWidget($("#expertvideoreviews")).refresh():enableReviewsVideoWidgetSRPXS&&new VideosWidget($("#expertMobileVideoReviewsCall")).refresh()})}return FacetSearchBox.prototype.setLastFacet=function(newFacet){this.lastFacet=newFacet},FacetSearchBox.prototype.handleEnterPress=function(){document.activeElement.id==fb.advancedOptions.keywordInput.$input.attr("id")&&document.hasFocus()?(fb.advancedOptions.keywordInput.$input.blur(),$("#keywordSearch").click()):$("li.open").find(".appliable").first().click()},FacetSearchBox.prototype.setPricePaymentLabel=function(){var result,resources=new Resources,anyText=isMobile?"":resources.getSearchResource("any"),priceRange=this.price,paymentRange=this.payment,paymentRangeLabel=null!==paymentRange?paymentRange.getRangeLabel():null,priceRangeLabel=null!=priceRange?priceRange.getRangeLabel():null,paymentFrequencyLabel=Ui.displayPaymentFrequency(this.$paymentFrequencyDropdown.value),termLabel=(Ui.displayCreditRating(this.$creditRatingDropdown.value),Ui.displayTerm(this.$termDropdown.value)),cashDownLabel=Ui.displayPrice(this.cashDownInput.val()),tradeInLabel=Ui.displayPrice(this.tradeInInput.val()),paymentLabelTemplate=resources.getSearchResource("paymentLabelTemplate"),filterVal=paymentRange.parentWrapper.find(".filterVal");$(".priceTab").parent().hasClass("active")?result=priceRangeLabel:paymentRangeLabel&&(result=paymentLabelTemplate.format(paymentRangeLabel,paymentFrequencyLabel,termLabel,cashDownLabel,tradeInLabel)),result?(filterVal.text(result),paymentRange.parentWrapper.addClass("filtered")):(filterVal.text(anyText),paymentRange.parentWrapper.removeClass("filtered"))},FacetSearchBox.prototype.hideFacetsOnSmall=function(){this.$facetedWrapper.removeClass("showOnSmall")},FacetSearchBox.prototype.setLocalStorageFieldValue=function(incentiveType,field,value){void 0!==value&&null!==value&&""!==value&&localStorage.setItem("PaymentOptions_"+incentiveType+"_"+field,value)},FacetSearchBox.prototype.clearPaymentFields=function(){this.payment.low("",!1),this.payment.high("",!1),this.$paymentFrequencyDropdown.selectAt(1,!1),this.$termDropdown.selectAt(0,!1),this.cashDownInput.val("0"),this.tradeInInput.val("0")},FacetSearchBox.prototype.clearPaymentLocalStorage=function(){localStorage.removeItem("PaymentOptions_finance_PaymentFrequency"),localStorage.removeItem("PaymentOptions_finance_CashDown"),localStorage.removeItem("PaymentOptions_finance_TradeIn"),localStorage.removeItem("PaymentOptions_finance_Term")},FacetSearchBox.prototype.savePaymentParameter=function(){if($(".paymentTab").parent().hasClass("active")){this.setLocalStorageFieldValue("finance","CashDown",String(this.cashDownInput.val())),this.setLocalStorageFieldValue("finance","TradeIn",String(this.tradeInInput.val()));var paymentFrequency="";switch(this.$paymentFrequencyDropdown.value){case 1:paymentFrequency="Monthly";break;case 2:paymentFrequency="BiMonthly";break;case 3:paymentFrequency="BiWeekly";break;case 4:paymentFrequency="Weekly"}this.setLocalStorageFieldValue("finance","PaymentFrequency",paymentFrequency),this.setLocalStorageFieldValue("finance","Term",String(this.$termDropdown.value))}},FacetSearchBox.prototype.checkVisible=function(elm){var rect=elm.getBoundingClientRect(),viewHeight=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(rect.bottom<0||rect.top-viewHeight>=0)},FacetSearchBox.prototype.revertAppliedValues=function(currentTargetId){var resetMultiselect=function(group,selectedValues){for(var i=0;i<group.checkboxes.length;i++)group.checkboxes[i].toggle(selectedValues.indexOf(group.checkboxes[i].value)>-1,!1)};switch(currentTargetId){case"faceted-parent-Location":this.locationInput.val(this.appliedValues.location);break;case"faceted-parent-Condition":this.advancedOptions.carState.checkboxes[0].toggle(this.appliedValues.new,!1),this.advancedOptions.carState.checkboxes[1].toggle(this.appliedValues.used,!1),this.advancedOptions.carState.checkboxes[2].toggle(this.appliedValues.cpo,!1),this.advancedOptions.carState.checkboxes[3].toggle(this.appliedValues.damaged,!1);break;case"faceted-parent-Type":this.advancedOptions.sellerType.checkboxes[0].toggle(this.appliedValues.dealer,!1),this.advancedOptions.sellerType.checkboxes[1].toggle(this.appliedValues.private,!1);break;case"faceted-parent-Make":case"faceted-parent-Model":break;case"faceted-parent-Trim":resetMultiselect(this.advancedOptions.trims,this.appliedValues.trims);break;case"faceted-parent-Year":this.year.high(isNaN(this.appliedValues.yearMax)?null:this.appliedValues.yearMax,!1),this.year.low(isNaN(this.appliedValues.yearMin)?null:this.appliedValues.yearMin,!1);break;case"faceted-parent-Price":this.price.high(isNaN(this.appliedValues.priceMax)?null:this.appliedValues.priceMax,!1),this.price.low(isNaN(this.appliedValues.priceMin)?null:this.appliedValues.priceMin,!1),this.payment.high(isNaN(this.appliedValues.paymentMax)?null:this.appliedValues.paymentMax,!1),this.payment.low(isNaN(this.appliedValues.paymentMin)?null:this.appliedValues.paymentMin,!1);break;case"faceted-parent-BodyType":resetMultiselect(this.advancedOptions.bodyTypes,this.appliedValues.bodyTypes);break;case"faceted-parent-Colours":resetMultiselect(this.advancedOptions.exteriorColor,this.appliedValues.colours);break;case"faceted-parent-Mileage":this.advancedOptions.kilometres.high(isNaN(this.appliedValues.mileageMax)?null:this.appliedValues.mileageMax),this.advancedOptions.kilometres.low(isNaN(this.appliedValues.mileageMin)?null:this.appliedValues.mileageMin);break;case"faceted-parent-Drivetrain":resetMultiselect(this.advancedOptions.drivetrain,this.appliedValues.drivetrain);break;case"faceted-parent-FuelTypes":resetMultiselect(this.advancedOptions.fueltype,this.appliedValues.fueltype);break;case"faceted-parent-Engine":resetMultiselect(this.advancedOptions.engine,this.appliedValues.engine);break;case"faceted-parent-Transmissions":resetMultiselect(this.advancedOptions.transmission,this.appliedValues.transmissions);break;case"faceted-parent-SeatingCapacity":resetMultiselect(this.advancedOptions.seatingCapacity,this.appliedValues.seating);break;case"faceted-parent-NumberOfDoors":resetMultiselect(this.advancedOptions.numberOfDoors,this.appliedValues.numberOfDoors);break;case"faceted-parent-Other":this.advancedOptions.withCarProof.toggle(this.appliedValues.withCarproof,!1),this.advancedOptions.withPriceOnly.toggle(this.appliedValues.withPrice,!1),this.advancedOptions.withPhotoOnly.toggle(this.appliedValues.withPhotos,!1);break;case"faceted-parent-Wheelbase":this.wheelbase.high(isNaN(this.appliedValues.wheelbaseMax)?null:this.appliedValues.wheelbaseMax,!1),this.wheelbase.low(isNaN(this.appliedValues.wheelbaseMin)?null:this.appliedValues.wheelbaseMin,!1);break;case"faceted-parent-Sleeps":resetMultiselect(this.advancedOptions.sleeps,this.appliedValues.sleeps);break;case"faceted-parent-SlideOuts":resetMultiselect(this.advancedOptions.slideouts,this.appliedValues.slidesOut);break;case"faceted-parent-Length":this.lengthRange.high(isNaN(this.appliedValues.lengthMax)?null:this.appliedValues.lengthMax,!1),this.lengthRange.low(isNaN(this.appliedValues.lengthMin)?null:this.appliedValues.lengthMin,!1);break;case"faceted-parent-Hours":this.hoursRange.high(isNaN(this.appliedValues.hoursMax)?null:this.appliedValues.hoursMax,!1),this.hoursRange.low(isNaN(this.appliedValues.hoursMin)?null:this.appliedValues.hoursMin,!1);break;case"faceted-parent-Horsepower":this.horsePowerRange.high(isNaN(this.appliedValues.horsepowerMax)?null:this.appliedValues.horsepowerMax,!1),this.horsePowerRange.low(isNaN(this.appliedValues.horsepowerMin)?null:this.appliedValues.horsepowerMin,!1);break;case"faceted-parent-EngineSize":this.enginesize.high(isNaN(this.appliedValues.engineSizeMax)?null:this.appliedValues.engineSizeMax,!1),this.enginesize.low(isNaN(this.appliedValues.engineSizeMin)?null:this.appliedValues.engineSizeMin,!1);break;case"faceted-parent-Weight":this.weightRange.high(isNaN(this.appliedValues.weightMax)?null:this.appliedValues.weightMax,!1),this.weightRange.low(isNaN(this.appliedValues.weightMin)?null:this.appliedValues.weightMin,!1);break;case"faceted-parent-PriceAnalysis":resetMultiselect(this.advancedOptions.priceAnalysis,this.appliedValues.priceAnalysis);break;default:this.cashDownInput.val(this.appliedValues.cashDown+""),this.tradeInInput.val(this.appliedValues.tradeIn+"")}this.advancedOptions.keywordInput.val(this.appliedValues.keyword)},FacetSearchBox.prototype.updateAppliedValues=function(includeKeyword){void 0===includeKeyword&&(includeKeyword=!0),this.appliedValues.yearMax=this.year.high(),this.appliedValues.yearMin=this.year.low(),this.appliedValues.priceMax=this.price.high(),this.appliedValues.priceMin=this.price.low(),this.appliedValues.wheelbaseMax=this.wheelbase.high(),this.appliedValues.wheelbaseMin=this.wheelbase.low(),this.appliedValues.horsepowerMax=this.horsePowerRange.high(),this.appliedValues.horsepowerMin=this.horsePowerRange.low(),this.appliedValues.hoursMax=this.hoursRange.high(),this.appliedValues.hoursMin=this.hoursRange.low(),this.appliedValues.engineSizeMax=this.enginesize.high(),this.appliedValues.engineSizeMin=this.enginesize.low(),this.appliedValues.lengthMax=this.lengthRange.high(),this.appliedValues.lengthMin=this.lengthRange.low(),this.appliedValues.weightMax=this.weightRange.high(),this.appliedValues.weightMin=this.weightRange.low(),this.appliedValues.mileageMin=this.advancedOptions.kilometres.low(),this.appliedValues.mileageMax=this.advancedOptions.kilometres.high(),this.appliedValues.new=this.advancedOptions.carState.checkboxes[0].state,this.appliedValues.used=this.advancedOptions.carState.checkboxes[1].state,this.appliedValues.cpo=this.advancedOptions.carState.checkboxes[2].state,this.appliedValues.damaged=this.advancedOptions.carState.checkboxes[3].state,this.appliedValues.withCarproof=this.advancedOptions.withCarProof.state,this.appliedValues.withPhotos=this.advancedOptions.withPhotoOnly.state,this.appliedValues.withPrice=this.advancedOptions.withPriceOnly.state,this.appliedValues.dealer=this.advancedOptions.sellerType.checkboxes[0].state,this.appliedValues.private=this.advancedOptions.sellerType.checkboxes[1].state,includeKeyword&&(this.appliedValues.keyword=this.advancedOptions.keywordInput.displayText()),this.appliedValues.location=this.locationInput.val(),this.appliedValues.colours=this.advancedOptions.exteriorColor.selectedLabels(),this.appliedValues.drivetrain=this.advancedOptions.drivetrain.selectedLabels(),this.appliedValues.fueltype=this.advancedOptions.fueltype.selectedLabels(),this.appliedValues.engine=this.advancedOptions.engine.selectedLabels(),this.appliedValues.transmissions=this.advancedOptions.transmission.selectedLabels(),this.appliedValues.seating=this.advancedOptions.seatingCapacity.selectedLabels(),this.appliedValues.numberOfDoors=this.advancedOptions.numberOfDoors.selectedLabels(),this.appliedValues.sleeps=this.advancedOptions.sleeps.selectedLabels(),this.appliedValues.slidesOut=this.advancedOptions.slideouts.selectedLabels(),this.appliedValues.bodyTypes=this.advancedOptions.bodyTypes.selectedLabels(),this.appliedValues.priceAnalysis=this.advancedOptions.priceAnalysis.selectedLabels(),this.appliedValues.trims=this.advancedOptions.trims.selectedLabels(),this.appliedValues.paymentMax=this.payment.high(),this.appliedValues.paymentMin=this.payment.low();var cashDown=Number(this.cashDownInput.val());this.appliedValues.cashDown=isNaN(cashDown)?0:cashDown;var tradeIn=Number(this.tradeInInput.val());this.appliedValues.tradeIn=isNaN(tradeIn)?0:tradeIn},FacetSearchBox.prototype.locationChanged=function(input){input.match?this.enableMandatoryPostalCode?StringExtensions.IsPostalCodeFormatValid(input.val())?fb.hideLocationError(!1):fb.showLocationError(input.val().length>0?"invalidFormat":null):this.hideLocationError(!0):this.enableMandatoryPostalCode?StringExtensions.IsPostalCodeFormatValid(input.val())?this.showLocationError():this.showLocationError(input.val().length>0?"invalidFormat":null):this.showLocationError()},FacetSearchBox.prototype.selectPriceAnalysisFilter=function(){var selected=[];return $("#rfPriceAnalysis input:checked").each(function(){selected.push($(this).attr("data-id"))}),selected},FacetSearchBox.prototype.revertPriceAnalysisFilter=function(appliedValues){$("#rfPriceAnalysis input:checked").prop("checked",!1),appliedValues.forEach(function(c){$('#rfPriceAnalysis input[data-id="'+c+'"]').prop("checked",!0)}),appliedValues.length>0?$("#faceted-parent-PriceAnalysis").addClass("filterOn"):$("#faceted-parent-PriceAnalysis").removeClass("filterOn")},FacetSearchBox.prototype.setVehicleCount=function(count){count=CultureInfo.formatNumber(count),initialAdsCount=count,this.$countElement.html(count),this.$filterCount.html(count),this.$filterCount2.html(count),this.$filterCount3.html(count),this.$titleCount.html(count),"sm"===this.getBootstrapBreakpoint()&&this.$title.hide()},FacetSearchBox.prototype.disableSearchBox=function(excludeLocation){void 0===excludeLocation&&(excludeLocation=!0),$(".facet-main > li, .facet-main > li > a").addClass("disabled");var keywordInput=document.getElementById("txtKeywords");if(keywordInput&&(keywordInput.classList.add("disabled"),keywordInput.setAttribute("readonly","readonly"),"sm"===this.getBootstrapBreakpoint()&&keywordInput.classList.add("disabled-click")),this.quickSearch||document.getElementById("newSearch").classList.add("disabled"),excludeLocation){var loc=document.getElementById("faceted-parent-Location");null!=loc&&(loc.classList.remove("disabled"),loc.firstElementChild.classList.remove("disabled"))}},FacetSearchBox.prototype.enableSearchBox=function(){$(".facet-main > li, .facet-main > li > a").removeClass("disabled");var keywordInput=document.getElementById("txtKeywords");keywordInput&&(keywordInput.classList.remove("disabled"),keywordInput.removeAttribute("readonly"),keywordInput.classList.remove("disabled-click")),document.getElementById("newSearch").classList.remove("disabled")},FacetSearchBox.prototype.showSeachOverlay=function(count){void 0===count&&(count=15),$("#SearchListings").html(""),"sm"===this.getBootstrapBreakpoint()&&this.$title.hide();var titleArea="";$(".listingHeading").hasClass("hidden")&&(titleArea='<div class="col-xs-12 listings-title-area"></div>');var htmlToAppend=titleArea+(new SearchLoading).generate(count);$("#SearchListings").html(htmlToAppend)},FacetSearchBox.prototype.showLocationError=function(errorType){var locationLabel=$(document.getElementById("locationLabel")),locationError=$(document.getElementById("locationerror")),locationAddress=$(document.getElementById("locationAddress"));if(locationLabel.length>0)locationLabel.removeClass("floating-label").addClass("floating-label-error"),this.enableMandatoryPostalCode?"invalidFormat"===errorType?locationLabel.text((new Resources).getSearchResource("locationFormatError")).show():(locationLabel.text((new Resources).getSearchResource("postalCodeRequired")),locationAddress.attr("placeholder","")):locationLabel.text((new Resources).getSearchResource("invalidLocationLabel"));else{var resources_1=new Resources,location_1=resources_1.getSearchResource("location")+" "+resources_1.getSearchResource("or")+" "+resources_1.getSearchResource("postalCode"),postalCode=resources_1.getSearchResource("postalCode"),locationNone=resources_1.getSearchResource("locationWarning").replace("{0}",this.enableMandatoryPostalCode?postalCode:location_1),locationInvalid=resources_1.getSearchResource("invalidLocationAlert").replace("{0}",this.enableMandatoryPostalCode?postalCode:location_1),locationFormatError=resources_1.getSearchResource("locationFormatError"),locationFrozenError=resources_1.getSearchResource("invalidPostalCodeFacetsFrozenInfoLabel");null===this.locationInput.val()||""===this.locationInput.val()?this.enableMandatoryPostalCode?locationError.text(locationFrozenError).show():locationError.text(locationNone).show():"invalidFormat"===errorType?locationError.text(locationFormatError).show():locationError.text(locationInvalid).show()}this.hasError=!0,this.validateSearch(-1),this.locationInput.$input.addClass("warning-outline"),this.disableSearchBox(),this.$searchButton.prop("disabled",!0),$("#applyLocation").removeClass("appliable")},FacetSearchBox.prototype.hideLocationError=function(enableSearchBox){this.hasError=!1,$(".facet-main").find("input, select").prop("disabled",!1),this.locationInput.$input.removeClass("warning-refinement warning-outline"),fb.$searchButton.prop("disabled",!1);var locationLabel=$(document.getElementById("locationLabel"));locationLabel.length>0?(locationLabel.addClass("floating-label"),locationLabel.removeClass("floating-label-error"),locationLabel.text((new Resources).getSearchResource("location"))):$("#locationerror").hide(),$("#applyLocation").addClass("appliable"),enableSearchBox&&this.enableSearchBox()},FacetSearchBox.prototype.IsLocationNotValid=function(result){this.locationInput.match=result.LocationIsValid;var isValidPostalCode=StringExtensions.IsPostalCodeFormatValid(this.locationInput.val());return!this.locationInput.match||null===this.locationInput.val()||""===this.locationInput.val()||fb.enableMandatoryPostalCode&&!isValidPostalCode},FacetSearchBox.prototype.validateLocation=function(result,isSearchExpanded){this.locationInput.match=result.LocationIsValid;var isValidPostalCode=StringExtensions.IsPostalCodeFormatValid(this.locationInput.val());!this.locationInput.match||null===this.locationInput.val()||""===this.locationInput.val()||fb.enableMandatoryPostalCode&&!isValidPostalCode?this.showLocationError():(this.hideLocationError(!0),this.saveLocationToCookie(result)),0===result.Count&&isSearchExpanded?(this.$title.hide(),$("#filterBtn").addClass("filter-zero-results"),$("#filterBtn2").addClass("filter-zero-results")):(this.$title.show(),$("#filterBtn").removeClass("filter-zero-results"),$("#filterBtn2").removeClass("filter-zero-results"))},FacetSearchBox.prototype.saveLocationToCookie=function(result){new LocationManager(new CookieManager).setLocationCookies(result.LocationJson)},FacetSearchBox.prototype.validateSearch=function(count){var isPostalCode=null!==this.locationInput.$input.val()&&""!==this.locationInput.$input.val()&&/^[A-Z]\d[A-Z](\ |-)?\d[A-Z]\d$/i.test(this.locationInput.$input.val());if(!this.locationInput.match&&isPostalCode){var address=this.locationInput.$input.val();DataLayerFactory.srpDataLayer().addFailedLocationEvent(address)}var hasError=this.price.hasError()||this.hasError||this.advancedOptions.kilometres.hasError();return hasError||0==count?(this.$proximityDropdown&&$("#noCarsDistance").html(String(this.$proximityDropdown.value)),hasError?this.$searchButton.prop("disabled",!0):this.$searchButton.prop("disabled",!1),!1):(this.$searchButton.prop("disabled",!1),!0)},FacetSearchBox.prototype.getBootstrapBreakpoint=function(){var w=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;return w<768?"xs":w<992?"sm":w<1200?"md":"lg"},FacetSearchBox.prototype.updateLists=function(result,selected,updateDropdowns){void 0===selected&&(selected=""),void 0===updateDropdowns&&(updateDropdowns=!0);var vehicleType=this.$vehicleTypeDropdown.value,vehicleSubtype=this.$vehicleSubtypeDropdown.value,make=this.$makeDropdown.value,model=this.$modelDropdown.value,makeMissing=make===this.nullChoice||null===make||void 0===make;this.updateDropdownList(result.VehicleTypes,this.$vehicleTypeDropdown,vehicleType,!1,Ui.displayVehicleType,null,selected),this.updateDropdownList(result.VehicleSubtypes,this.$vehicleSubtypeDropdown,vehicleSubtype,!1,Ui.displayVehicleSubtype,null,selected),this.updateDropdownList(result.Makes,this.$makeDropdown,make,!1,Ui.displayMake,null,selected),make&&this.updateDropdownList(result.Models,this.$modelDropdown,model,makeMissing,Ui.displayModel,null,selected),FacetedBoxFactory.prototype.makeSearchBoxChange(),makeMissing?($("#rfModel").addClass("model-empty"),(new FacetedResultsPage).clearModelDropdown()):$("#rfModel").removeClass("model-empty"),this.advancedOptions.updateMultiSelects(result,selected,updateDropdowns)},FacetSearchBox.prototype.updateRanges=function(result){var years=result.Years,low=this.year.low();null!=low&&-1===years.indexOf(low)&&years.unshift(low);var high=this.year.high();null!=high&&-1===years.indexOf(high)&&years.push(high),this.year.update(new NumericRange(null,null,result.Years),SortType.Descending,SortType.Descending)},FacetSearchBox.prototype.dropdownEvents=function(result){var proximity=fb.$proximityDropdown?fb.$proximityDropdown.item.value:-2,message=Alerts.noVehiclesFoundProximityAlert(proximity);fb.$noVehiclesFoundProximityAlert.html(message),$(".btn-success").removeClass("disabled")},FacetSearchBox.prototype.updateAllDropdowns=function(result,selected,updateDropdowns,updateYears){void 0===selected&&(selected=""),void 0===updateDropdowns&&(updateDropdowns=!0),void 0===updateYears&&(updateYears=!0),this.updateLists(result,selected,updateDropdowns),selected||(updateYears&&this.updateRanges(result),this.dropdownEvents(result))},FacetSearchBox.prototype.setupPager=function(){var resources=new Resources,paginationFirstPage=resources.getSearchResource("paginationFirstPage"),paginationLastPage=resources.getSearchResource("paginationLastPage"),pagerOptions=new PagerOptions(paginationFirstPage,paginationLastPage,3,5);return new Pager($(".srpPager"),pagerOptions,function(page){})},FacetSearchBox.prototype.doPagination=function(pager,page,result,query,isRefinement,isPaging,isSortOrderChanged){if(result.Count>0){var srpDataLayerManager_1=DataLayerFactory.srpDataLayer();isRefinement&&srpDataLayerManager_1.createRefinementEvent(),isPaging&&srpDataLayerManager_1.createPaginationEvent(),isSortOrderChanged&&srpDataLayerManager_1.addSortChangedEvent(this.prevSortOrder,query.SortBy),setGATracking()}if(null!=result.SearchResultsDataJson)try{var searchResultsCacheManager=new SearchResultsCacheManager(1==page);isMobile?searchResultsCacheManager.setSearchResultsDataMobile(result.SearchResultsDataJson,!0):(searchResultsCacheManager.setSearchResultsData(result.SearchResultsDataJson),searchResultsCacheManager.setSearchResultsDataOldPlatform(result.SearchResultsDataOldPlatformJson)),searchResultsCacheManager.setSearchCriteria(result.SearchCriteriaJson),savedSearchData&&searchResultsCacheManager.setSavedSearchData(JSON.stringify(savedSearchData))}catch(q){}null!=pager&&pager.build(page,query.Top,result.Count)},FacetSearchBox.prototype.updatePageData=function(result,updateUrl){if(updateUrl&&((new SrpUrlManager).updateUrl(result.Url),"dealerInventory"!==result.SearchCriteria.InMarketType)){try{localStorage.setItem("lastsrpurl",result.Url)}catch(Error){}(new CookieManager).addOrUpdate(new Cookie("lastsrpurl",result.Url))}document.title=result.Title,$(".great-popover").popover({html:!0,trigger:"hover",content:function(){return $("#great-popover").html()}}),$(".good-popover").popover({html:!0,trigger:"hover",content:function(){return $("#good-popover").html()}}),$(".fair-popover").popover({html:!0,trigger:"hover",content:function(){return $("#fair-popover").html()}}),$(".above-popover").popover({html:!0,trigger:"hover",content:function(){return $("#above-popover").html()}})},FacetSearchBox.prototype.updateGoogleTargeting=function(location,query){if(null!=location){var provinceFullName=this.getProvinceNames(location.Province),locationArray=[location.Province];provinceFullName&&locationArray.push(provinceFullName),window.googleDfpManager.updateTargeting("province",locationArray),window.googleDfpManager.updateTargeting("city",location.City)}window.googleDfpManager.updateTargeting("make",null==query.Make?[]:query.Make),window.googleDfpManager.updateTargeting("model",null==query.Model?[]:query.Model),window.googleDfpManager.updateTargeting("body_type",null==query.BodyType?[]:query.BodyType),window.googleDfpManager.updateTargeting("price",query.PriceMin+"-"+query.PriceMax);var conditions=new Array;query.IsNew&&conditions.push("new"),query.IsUsed&&conditions.push("used"),query.IsDamaged&&conditions.push("damaged"),query.IsCpo&&conditions.push("cpo"),window.googleDfpManager.updateTargeting("condition",conditions)},FacetSearchBox.prototype.getProvinceNames=function(province){var result="";try{var allProvinces=localStorage.getItem("locationGoogleDfp");null!==allProvinces&&null!==province&&(result=(result=JSON.parse(allProvinces)[province.toLowerCase()]).replace("'",""))}catch(e){return""}return result},FacetSearchBox.prototype.updateBanners=function(){window.bannerManager&&window.bannerManager.update()},FacetSearchBox.prototype.updatePageDomDesktop=function(result,inMarketType){$("#arrivedFromPageContainer").hide(),this.$title.show().children(".title-text").html(result.Header),$("#rfTitle2 .title-text").html(result.Header),"vehicleSpecialist"!==inMarketType&&"dealerInventory"!==inMarketType&&$("#breadcrumb").html(result.BreadcrumbsHtml),$("#AdSense").html(""),$("#AdSense").html(result.AdSenseHtml),"vehicleSpecialist"!==inMarketType&&"dealerInventory"!==inMarketType&&($("#deepLink").html(""),$("#deepLink").append(result.DeepLinkHtml)),$("#languageSwitch").attr("href",result.AlternativeLanguageUri)},FacetSearchBox.prototype.updatePageDomMobile=function(result,inMarketType){this.$title.html(result.Header),"vehicleSpecialist"!==inMarketType&&"dealerInventory"!==inMarketType&&($("#breadcrumb").html(result.BreadcrumbsHtml),$("#deepLink").html(""),$("#deepLink").append(result.DeepLinkHtml)),$("#languageSwitch").attr("href",result.AlternativeLanguageUri)},FacetSearchBox.prototype.updateAdvancedSearchUrl=function(result){var el=document.getElementById("advancedSearchLink");null!=el&&el.setAttribute("href",result.AdvancedSearchUrl),null!=(el=document.getElementById("advancedSearchLinkSmall"))&&el.setAttribute("href",result.AdvancedSearchUrl)},FacetSearchBox.prototype.generateListings=function(result){for(var htmlToAppend,topItem,offset=$("#SearchListings").children(".list-container").not(".top-listing").length,totalListings=$("#SearchListings").children(".list-container").length,srpV2=result.EnableXsSrpV2,i=0;i<result.AllListings.length;i++){var pos=offset+i;if(result.AllListings[i].AnalyticsOrdinalPosition+=totalListings,result.AllListings[i].EnablePaymentTagWithRate=result.EnablePaymentTagWithRate,htmlToAppend=srpV2?(new BaseListingMobileV2).generate(result.AllListings[i]):(new BaseListingMobile).generate(result.AllListings[i]),3==pos&&$("#SearchListings").append('<div id="expertMobileVideoReviewsSRPDisplay"><div id="expertMobileVideoReviewsModal" class="modal fade" role="document"></div></div>'),"undefined"!=typeof topListings&&null!=topListings)if(topListings.needsTopListing(pos)){var adInfo=topListings.getTopListings(pos);null!=adInfo?(adInfo.ad.AnalyticsOrdinalPosition=totalListings+i+2,topItem=(new BaseListingMobile).generate(adInfo.ad),DataLayerFactory.srpDataLayer().addToListings(adInfo.gtmAd,adInfo.ad.AnalyticsOrdinalPosition,totalListings),offset++,$("#SearchListings").append(htmlToAppend).append(topItem)):$("#SearchListings").append(htmlToAppend)}else $("#SearchListings").append(htmlToAppend);else $("#SearchListings").append(htmlToAppend);result.AllListings.length<=3&&i==result.AllListings.length-1&&$("#SearchListings").append('<div id="expertMobileVideoReviewsSRPDisplay"><div id="expertMobileVideoReviewsModal" class="modal fade" role="document"></div></div>')}},FacetSearchBox.prototype.onRefinementChanged=function(updateDropdowns,selected,count,isQuickSearch,updateYear,facetName){var _this=this;void 0===updateDropdowns&&(updateDropdowns=!0),void 0===selected&&(selected=""),void 0===count&&(count=15),void 0===isQuickSearch&&(isQuickSearch=!1),void 0===updateYear&&(updateYear=!0),void 0===facetName&&(facetName=""),this.setLastFacet(facetName),isMobile||isQuickSearch?($(".loading-mobile").show(),$("#filterBtn").hide(),this.refresh(this.getRefinementQuery(),selected,updateDropdowns,function(result){if($(".loading-mobile").hide(),$("#filterBtn").show(),_this.setVehicleCount(result.Count),isQuickSearch){var info=new SearchResultsInfo(!1,0===result.Count,!1);_this.showAlerts(info)}},updateYear)):this.executeSearch(this.getRefinementQuery(),new SearchOptions({ExpectedCount:count})),!this.quickSearch||null==this.appliedValues.yearMax&&null==this.appliedValues.yearMin||this.refreshYear(this.getRefinementQuery(!1,!1))},FacetSearchBox.prototype.positionFlyoutWithinViewport=function(facet){if(!isMobile){var flyoutMenu=facet.children(".dropdown-container"),flyoutTop=flyoutMenu.offset().top,flyoutBottom=flyoutTop+flyoutMenu.outerHeight(),viewportTop=$(window).scrollTop(),viewportBottomDiff=viewportTop+$(window).innerHeight()-flyoutBottom,viewportTopDiff=flyoutTop-viewportTop;if(viewportBottomDiff<0){var newPositionString=viewportBottomDiff+20+"px";flyoutMenu.css("top",newPositionString),facet.offset().top>flyoutMenu.offset().top+flyoutMenu.outerHeight()-40&&facet.children(".dropdown-toggle").addClass("hide-chevron")}if(viewportTopDiff<0){var offsetPos=30;"faceted-parent-Make"!==facet.attr("id")&&"faceted-parent-Location"!==facet.attr("id")||(offsetPos=70);newPositionString=-viewportTopDiff+offsetPos+"px";flyoutMenu.css("top",newPositionString),flyoutMenu.offset().top>facet.offset().top+.5*facet.outerHeight()&&facet.children(".dropdown-toggle").addClass("hide-chevron")}}},FacetSearchBox.prototype.getNumberOfBlocks=function(options){return void 0===options&&(options=new SearchOptions),options.ExpectedCount&&options.ExpectedCount<15&&options.ExpectedCount>0?options.ExpectedCount:15},FacetSearchBox.prototype.srpBannerRefresh=function(location,query){this.updateGoogleTargeting(location,query),this.updateBanners()},FacetSearchBox.prototype.executeSearch=function(query,options){var _this=this;void 0===options&&(options=new SearchOptions),$("#makeSearch").val("");var isDealerInventory="dealerInventory"===$("#SearchListings").attr("data-list-key");if(!options.IsPaging||isMobile||isDealerInventory)this.refresh(query,"",!0,function(result){if(!isMobile&&result.LocationJson&&""!==result.LocationJson){var location_3=JSON.parse(result.LocationJson);_this.srpBannerRefresh(location_3.Location,query)}_this.setVehicleCount(result.Count)});else{var location_2=new LocationManager(new CookieManager).getLocation();null!=location_2&&this.srpBannerRefresh(location_2,query)}this.prevSortOrder=this.sortOrder;var newSort=$("#sortBy").val(),isSameQuery=query.isEquivalentTo(this.lastQuery),sortOrderChanged=newSort!==this.sortOrder;this.sortOrder=newSort;var needARefresh=!isSameQuery||!this.resultsDepleted||sortOrderChanged;if(!options.IsInfiniteScroll||needARefresh){options.IsInfiniteScroll||"undefined"!=typeof infiniteScroll&&null!=infiniteScroll&&(infiniteScroll.disable(),infiniteScroll.resetPage());var bannerManager=window.bannerManager;if(1===options.Page&&isMobile&&bannerManager&&null!==bannerManager.lastIndex&&(bannerManager.lastIndex=1),!this.price.hasError()&&!this.advancedOptions.kilometres.hasError()){var newPager,numberOfBlocks=this.getNumberOfBlocks(options);isMobile||($("#filterBtn").removeClass("filter-zero-results"),$("#filterBtn2").removeClass("filter-zero-results"),this.showSeachOverlay(numberOfBlocks)),isIPadBrowser&&$(window).width()<=991&&$("body").css({overflow:"",height:""});var inMarketType=$("#SearchListings").attr("data-list-key");!options.IsRefinement&&inMarketType||"vehicleSpecialist"!==inMarketType&&"dealerInventory"!==inMarketType&&(inMarketType="advancedSearch");var researchWidget=new ResearchWidget($("#researchModule"));researchWidget.clear();var searchState=new SearchStateManager(new CookieManager).updateState(query.Make,query.Model);query.IsUniqueSearch=searchState.isUniqueSearch,query.InMarketType=inMarketType,query.Skip=query.Top*(options.Page-1),query.SortBy=this.sortOrder,null!=this.lastQuery&&(query.RelatedCompanyOwnerCompositeId=this.lastQuery.RelatedCompanyOwnerCompositeId),isMobile&&(query.TopListings=!isSameQuery);var prefix=$("#env").data("prefix");this.hideAlerts();var isNewDealerPlus=document.querySelector("#SearchListings").classList.contains("newDealerPlus"),urlController=isDealerInventory&&isNewDealerPlus?"Dealer":"Refinement";this.ajaxManager.send({url:prefix+"/"+urlController+"/Search",type:"POST",data:JSON.stringify(query),dataType:"json",contentType:"application/json",headers:{AllowMvt:"true",ms:this.microsite.MicrositeType},error:function(e){"undefined"!=typeof infiniteScroll&&null!=infiniteScroll&&infiniteScroll.enable(),_this.hasError=!0,_this.validateSearch(-1)},success:function(result){$("#pageErrorWarning").addClass("hidden"),fb.$proximityDropdown&&(fb.$proximityDropdown.select(result.Proximity),$("#faceted-Proximity").text(Ui.displayDistance(fb.$proximityDropdown.value)),fb.$proximityDropdown.select(result.Proximity,!1)),_this.multiSelectCount=0;var srpDataLayerManager=DataLayerFactory.srpDataLayer();isMobile||srpDataLayerManager.setPreviousAdCount(result.PreviousListingsCount);var serverDataLayer=JSON.parse(result.GtmDataLayerScript);if(srpDataLayerManager.addCriteriaUpdatedEvents(serverDataLayer),"dealerInventory"===inMarketType&&(serverDataLayer.search.category=window.dataLayer[0].search.category),srpDataLayerManager.updateDataLayerDirectly(serverDataLayer),"undefined"==typeof infiniteScroll||null==infiniteScroll||result.IsSearchExpanded||infiniteScroll.enable(),_this.lastQuery=query,1===options.Page&&(_this.lastResultsInfo=new SearchResultsInfo(result.IsSearchExpanded,0===result.NumOfAdsOnPage,!1)),_this.resultsDepleted=0===result.NumOfAdsOnPage||result.NumOfAdsOnPage===result.Count||result.IsSearchExpanded,isMobile&&$("#loading-more").addClass("hidden"),fb.$paymentFrequencyDropdown.select(result.PaymentFrequency,!1),fb.$creditRatingDropdown.select(result.CreditRating,!1),fb.$termDropdown.select(result.Term,!1),isMobile||(_this.updatePageDomDesktop(result,inMarketType),_this.updateAdvancedSearchUrl(result),0===JSON.parse(result.SearchResultsDataJson).upsellCount?$(".listingHeading").addClass("hidden"):$(".listingHeading").removeClass("hidden")),0==result.NumOfAdsOnPage?srpDataLayerManager.addNoSearchResultsEvent(!1):result.IsSearchExpanded&&srpDataLayerManager.addNoSearchResultsEvent(!0),result.Count<25&&srpDataLayerManager.searchResultNumber(result.Count),isDealerInventory||(savedSearchData.SavedSearchCriteria=result.SavedSearchCriteria),isMobile){query.TopListings&&result.TopListings&&topListings&&topListings.reset(query,result.TopListings,JSON.parse(result.TopAdsGtm)),options.IsInfiniteScroll||$("#SearchListings").html("");var oldlistings=$("#SearchListings").children(".list-container");_this.generateListings(result),$("#SearchListings").children(".list-container").not(oldlistings).click(function(e){e.stopPropagation(),srpDataLayerManager.addAdClickEvent(inMarketType,e.currentTarget)}),_this.updatePageDomMobile(result,inMarketType),"undefined"!=typeof paymentTag&&null!==paymentTag&&paymentTag.showPaymentTags()}else $("#SearchListings").html(""),$("#SearchListings").append(result.AdsHtml);if(newPager=options.IsInfiniteScroll?null:options.Pager?options.Pager:_this.setupPager(),result.IsSearchExpanded||_this.doPagination(newPager,options.Page,result,query,options.IsRefinement,options.IsPaging,options.IsSortOrderChanged),_this.updatePageData(result,options.UpdateUrl),isMobile&&""!==result.LocationJson){var location_4=JSON.parse(result.LocationJson);_this.srpBannerRefresh(location_4.Location,query)}if(isMobile?isDealerInventory?InitTrader.dealerInventoryMobileSearch(!1):InitTrader.mobileSearch(!1):isDealerInventory?InitTrader.dealerInventorySearch(!1):InitTrader.search(!1),!isMobile){PageOptionExtensions.SetupPageOptions(_this.microsite.MicrositeType);var $sortBy=$("#sortBy");$sortBy.off("change").on("change",function(e){PageOptionExtensions.SetupSortOrderChangeTrigger($sortBy,fb)});var $pageSize=$("#pageSize");$pageSize.change(function(){PageOptionExtensions.SetupPageSizeChangeTrigger($pageSize,fb)})}_this.showAlerts(_this.lastResultsInfo);var browser=(new BrowserDetect).GetBrowser();browser!=BrowserType.IE&&browser!=BrowserType.Edge&&researchWidget.refresh(query);var featuredLeft=new FeaturedListing($("#left"),$("#faExpleft")),featuredRight=new FeaturedListing($("#right"),$("#faExpright"));featuredLeft.addEvents(),featuredRight.addEvents(),enableReviewsVideoWidgetSRP?new VideosWidget($("#expertvideoreviews")).refresh():enableReviewsVideoWidgetSRPXS&&(options.IsRefinement||options.IsSortOrderChanged)&&new VideosWidget($("#expertMobileVideoReviewsCall")).refresh(),"undefined"!=typeof paymentTag&&null!==paymentTag&&paymentTag.showPaymentTags(),_this.quickSearch&&_this.$quickSearchBtn.prop("disabled",!0),!isMobile&&enableBigBoxRepositionSrp&&adjustAdvertisementDom(),_this.fireEvent("SearchSuccess")}},options.IsInfiniteScroll)}}else $("#loading-more").addClass("hidden")},FacetSearchBox.prototype.fireEvent=function(eventName){try{var customEvent=new CustomEvent(eventName);document.dispatchEvent(customEvent)}catch(err){var event=document.createEvent("Event");event.initEvent(eventName,!0,!0),document.dispatchEvent(event)}},FacetSearchBox.prototype.showAlerts=function(searchResultsInfo){var showPageNotFoundRedirectAlert=searchResultsInfo.isPageNotFoundRedirect,showZeroResultsAlert=!showPageNotFoundRedirectAlert&&searchResultsInfo.isSearchEmpty,showSearchExpansionAlert=!showPageNotFoundRedirectAlert&&!showZeroResultsAlert&&searchResultsInfo.isSearchExpanded;this.$title.parent().removeClass("hidden"),showPageNotFoundRedirectAlert?$("#pageNotFoundRedirectWarning").removeClass("hidden"):$("#pageNotFoundRedirectWarning").addClass("hidden"),showZeroResultsAlert?($("#zeroResultsWarning").removeClass("hidden"),$(".page-size-container").addClass("hidden"),$(".srpPager").addClass("hidden")):($("#zeroResultsWarning").addClass("hidden"),$(".srpPager").removeClass("hidden")),showSearchExpansionAlert?($("#searchExpansionWarning").removeClass("hidden"),$(".page-size-container").addClass("hidden"),$(".srpPager").addClass("hidden"),this.$title.parent().hide()):($("#searchExpansionWarning").addClass("hidden"),$(".page-size-container").removeClass("hidden"),$(".srpPager").removeClass("hidden"),this.$title.parent().show())},FacetSearchBox.prototype.hideAlerts=function(){$("#pageErrorWarning").addClass("hidden"),$("#pageNotFoundRedirectWarning").addClass("hidden"),$("#searchExpansionWarning").addClass("hidden"),$("#zeroResultsWarning").addClass("hidden")},FacetSearchBox.prototype.refresh=function(query,selected,updateDropdowns,successCallback,updateYear){var _this=this;if(void 0===selected&&(selected=""),void 0===updateDropdowns&&(updateDropdowns=!0),void 0===successCallback&&(successCallback=null),void 0===updateYear&&(updateYear=!0),!this.price.hasError()&&!this.advancedOptions.kilometres.hasError()){selected&&(query.FacetsOverride=FacetType[selected]),null!=this.lastQuery&&(query.RelatedCompanyOwnerCompositeId=this.lastQuery.RelatedCompanyOwnerCompositeId);var prefix=$("#env").data("prefix"),inMarketType=$("#SearchListings").attr("data-list-key"),isNewDealerPlus=document.querySelector("#SearchListings").classList.contains("newDealerPlus"),urlController="dealerInventory"===inMarketType&&isNewDealerPlus?"Dealer":"Refinement";$.ajax({url:prefix+"/"+urlController+"/Refine",type:"POST",data:JSON.stringify(query),dataType:"json",contentType:"application/json",headers:{AllowMvt:"true",isAjax:"true",ms:this.microsite.MicrositeType},error:function(e){_this.hasError=!0,_this.validateSearch(-1)},success:function(result){_this.validateLocation(result,result.IsSearchExpanded),_this.validateSearch(result.Count),_this.updateAllDropdowns(result,selected,updateDropdowns,updateYear),_this.refinementCalled=!0,null!=successCallback&&successCallback(result)}})}},FacetSearchBox.prototype.refreshYear=function(query){var _this=this;if(!this.price.hasError()&&!this.advancedOptions.kilometres.hasError()){var prefix=$("#env").data("prefix"),inMarketType=$("#SearchListings").attr("data-list-key"),isNewDealerPlus=document.querySelector("#SearchListings").classList.contains("newDealerPlus"),urlController="dealerInventory"===inMarketType&&isNewDealerPlus?"Dealer":"Refinement";$.ajax({url:prefix+"/"+urlController+"/Refine",type:"POST",data:JSON.stringify(query),dataType:"json",contentType:"application/json",headers:{AllowMvt:"true",isAjax:"true",ms:this.microsite.MicrositeType},error:function(e){_this.hasError=!0,_this.validateSearch(-1)},success:function(result){_this.updateRanges(result)}})}},FacetSearchBox.prototype.onlyUpdateThis=function(id,selected){return!(!selected||selected!==id.substring(15,id.length))},FacetSearchBox.prototype.cleanupDisplayForRvModels=function(isModel,hasMultipleMakes,displayValue){if(isModel&&this.microsite.MicrositeType===MicrositeType.Rvs){var regexClean=/^-(.*) - /;return hasMultipleMakes&&(regexClean=/^-/),displayValue=displayValue.replace(regexClean,"")}return displayValue},FacetSearchBox.prototype.updateDropdownList=function(newOptions,dropDown,selectedOption,removeOptions,display,searchFilter,selected){var _this=this;void 0===selected&&(selected="");var id=dropDown.backingSelect.facetedParentMain.attr("id");if(!dropDown.backingSelect.inactive&&(!selected||this.onlyUpdateThis(id,selected))){var nul=[new DropdownItem(null,!1,!1,function(n){return display(n)})];if(selectedOption&&!newOptions.hasOwnProperty(selectedOption)&&(newOptions[selectedOption]=0),searchFilter){var makeSearchBox=[new DropdownItem(null,!1,!1,function(n){return searchFilter(n)})];nul=nul.concat(makeSearchBox)}var isModel_1="faceted-parent-Model"===id,hasMultipleMakes=!1;if(isModel_1)for(var _i=0,_a=Object.keys(newOptions);_i<_a.length;_i++){var modelArray=_a[_i].match(/^-(.*) - /);if(null!=modelArray)if(!(modelArray[0].indexOf("-"+this.$makeDropdown.value+" - ")>=0)){hasMultipleMakes=!0;break}}var result=removeOptions?nul:nul.concat(Object.keys(newOptions).sort(function(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())}).map(function(k,i,arr){return new DropdownItem(arr[i],!1,!1,function(n){return _this.cleanupDisplayForRvModels(isModel_1,hasMultipleMakes,arr[i])+" <span class='option-count'>("+newOptions[k]+")</span>"},null,newOptions[k])})),section=new DropdownSection(result,null,null);dropDown.updateOptions([section]),void 0!==selectedOption&&dropDown.select(selectedOption)}},FacetSearchBox.prototype.stickyHeaderOnExtraSmall=function(){"xs"===BootstrapExtensions.getBootstrapBreakpoint()&&window.addEventListener("scroll",function(){var navbar=document.getElementById("navbarPrimary");navbar.getBoundingClientRect().top-window.scrollY<0?(navbar.classList.add("navbar-fixed-top"),document.getElementById("navbarSpacer").classList.remove("collapsed")):(navbar.classList.remove("navbar-fixed-top"),document.getElementById("navbarSpacer").classList.add("collapsed"))})},FacetSearchBox.prototype.getRefinementQuery=function(yearMin,yearMax,excluded){void 0===yearMin&&(yearMin=!0),void 0===yearMax&&(yearMax=!0),void 0===excluded&&(excluded="");var checkForEmptyAndApply=function(input){return null==input||0===input.length?null:input},result=new FacetedParameters;return result.micrositeType=this.microsite.MicrositeType,result.Microsite=this.microsite,result.Address=this.appliedValues.location,result.Proximity=this.$proximityDropdown?this.$proximityDropdown.value:-2,result.WithFreeCarProof=this.appliedValues.withCarproof,result.WithPrice=this.appliedValues.withPrice,result.WithPhotos=this.appliedValues.withPhotos,result.IsHotDeal=this.advancedOptions.isHotDeal,result.IsNew=this.appliedValues.new,result.IsUsed=this.appliedValues.used,result.IsDamaged=this.appliedValues.damaged,result.IsCpo=this.appliedValues.cpo,result.IsDealer=this.appliedValues.dealer,result.IsPrivate=this.appliedValues.private,result.Top=this.topValue,result.Make=this.$makeDropdown.value,result.Model=null!=this.$makeDropdown.value?this.$modelDropdown.value:null,result.BodyType=checkForEmptyAndApply(this.appliedValues.bodyTypes),result.VehicleType=this.$vehicleTypeDropdown.value,result.VehicleSubType=this.$vehicleSubtypeDropdown.value,result.PriceAnalysis=checkForEmptyAndApply(this.appliedValues.priceAnalysis),$(".priceTab").parent().hasClass("active")&&(result.PriceMin=this.appliedValues.priceMin,result.PriceMax=this.appliedValues.priceMax),result.WheelBaseMin=this.appliedValues.wheelbaseMin,result.WheelBaseMax=this.appliedValues.wheelbaseMax,result.EngineSizeMin=this.appliedValues.engineSizeMin,result.EngineSizeMax=this.appliedValues.engineSizeMax,result.LengthMin=this.appliedValues.lengthMin,result.LengthMax=this.appliedValues.lengthMax,result.WeightMin=this.appliedValues.weightMin,result.WeightMax=this.appliedValues.weightMax,result.HorsepowerMin=this.appliedValues.horsepowerMin,result.HorsepowerMax=this.appliedValues.horsepowerMax,result.HoursMin=this.appliedValues.hoursMin,result.HoursMax=this.appliedValues.hoursMax,result.OdometerMin=this.appliedValues.mileageMin,result.OdometerMax=this.appliedValues.mileageMax,result.YearMin=yearMin?this.appliedValues.yearMin:null,result.YearMax=yearMax?this.appliedValues.yearMax:null,result.Keywords=this.appliedValues.keyword,result.FuelTypes=checkForEmptyAndApply(this.appliedValues.fueltype),result.Transmissions=checkForEmptyAndApply(this.appliedValues.transmissions),result.Colours=checkForEmptyAndApply(this.appliedValues.colours),result.Drivetrain=checkForEmptyAndApply(this.appliedValues.drivetrain),result.Engine=checkForEmptyAndApply(this.appliedValues.engine),result.SeatingCapacity=checkForEmptyAndApply(this.appliedValues.seating),result.NumberOfDoors=checkForEmptyAndApply(this.appliedValues.numberOfDoors),result.Sleeps=checkForEmptyAndApply(this.appliedValues.sleeps),result.SlideOuts=checkForEmptyAndApply(this.appliedValues.slidesOut),result.Trim=checkForEmptyAndApply(this.appliedValues.trims),result.SearchCriteriaType=SavedSearchType.SRP,$(".paymentTab").parent().hasClass("active")&&(isNaN(this.appliedValues.paymentMin)||isNaN(this.appliedValues.paymentMax)||(result.PaymentMin=this.appliedValues.paymentMin,result.PaymentMax=this.appliedValues.paymentMax,result.PaymentFrequency=void 0!==this.$paymentFrequencyDropdown.value?this.$paymentFrequencyDropdown.value:this.lastQuery.PaymentFrequency,result.Term=void 0!==this.$termDropdown.value?this.$termDropdown.value:this.lastQuery.Term,result.CashDown=this.appliedValues.cashDown,result.TradeIn=this.appliedValues.tradeIn)),result[excluded]=null,"Make"===excluded?(result.Model=null,result.Trim=null):"Model"===excluded&&(result.Trim=null),result},FacetSearchBox.prototype.changeImgSrc=function(){[].forEach.call(document.querySelectorAll("img[data-src]"),function(img){img.setAttribute("src",img.getAttribute("data-src")),img.onload=function(){img.removeAttribute("data-src")}})},FacetSearchBox.proximities=[25,50,100,250,500,1e3,-2,-1],FacetSearchBox.paymentFrequencies=[1,3,4],FacetSearchBox.creditRatings=[1,4,5],FacetSearchBox.terms=[0,96,84,72,60,48,36,24,12],FacetSearchBox.defaultMinPayment=0,FacetSearchBox.defaultMaxPayment=1e3,FacetSearchBox.defaultPaymentFrequency=3,FacetSearchBox.defaultCreditrating=1,FacetSearchBox.defaultTerm=0,FacetSearchBox.highLowPaymentMaxRange=1e3,FacetSearchBox}();function refreshBanners(){"lg"!==BootstrapExtensions.getBootstrapBreakpoint()&&"lg"===currentViewport.toString()?(0==$("#srpPanel1_md_hulk_bb1").children().length&&$("#hulk-bb1").appendTo("#srpPanel1_md_hulk_bb1"),0==$("#srpPanel2_md_hulk_bb2").children().length&&$("#hulk-bb2").appendTo("#srpPanel2_md_hulk_bb2"),0==$("#srpPanel3_md_hulk_bb3").children().length&&$("#hulk-bb3").appendTo("#srpPanel3_md_hulk_bb3"),$("#srpPanel1_lg, #srpPanel2_lg, #srpPanel3_lg").html(""),window.googleDfpManager.refreshAll()):"lg"===BootstrapExtensions.getBootstrapBreakpoint()&&"lg"!==currentViewport.toString()&&0==$("#srpPanel1_lg").children().length&&(0!=$("#hulk-bb1").length?$("#hulk-bb1").appendTo("#srpPanel1_lg"):$("<div id='hulk-bb1' class='col-xs-6 col-lg-12 js-google-dfp'></div>").appendTo("#srpPanel1_lg"),0!=$("#hulk-bb2").length?$("#hulk-bb2").appendTo("#srpPanel2_lg"):$("<div id='hulk-bb2' class='col-xs-6 col-lg-12 js-google-dfp'></div>").appendTo("#srpPanel2_lg"),0!=$("#hulk-bb3").length?$("#hulk-bb3").appendTo("#srpPanel3_lg"):$("<div id='hulk-bb3' class='col-xs-6 col-lg-12 js-google-dfp'></div>").appendTo("#srpPanel3_lg"),$("#srpPanel1_md_hulk_bb1, #srpPanel2_md_hulk_bb2, #srpPanel3_md_hulk_bb3").html(""),window.googleDfpManager.refreshAll()),currentViewport=BootstrapExtensions.getBootstrapBreakpoint()}function adjustAdvertisementDom(){var hulkbb1Div="<div id='hulk-bb1' class='col-xs-6 col-lg-12 js-google-dfp'></div>",hulkbb2Div="<div id='hulk-bb2' class='col-xs-6 col-lg-12 js-google-dfp'></div>",hulkbb3Div="<div id='hulk-bb3' class='col-xs-6 col-lg-12 js-google-dfp'></div>";$("#srpPanel1_lg, #srpPanel2_lg, #srpPanel3_lg").html(""),$("#srpPanel1_md_hulk_bb1, #srpPanel2_md_hulk_bb2, #srpPanel3_md_hulk_bb3").html(""),$("#srpPanel2_md").length<=0&&$("#srpPanel2_lg").after("<div id='srpPanel2_md'><div id='srpPanel2_md_hulk_bb2'></div></div>"),$("#srpPanel3_md").length<=0&&$("#srpPanel3_lg").after("<div id='srpPanel3_md'><div id='srpPanel3_md_hulk_bb3'></div></div>"),"lg"===BootstrapExtensions.getBootstrapBreakpoint()?($(hulkbb1Div).prependTo("#srpPanel1_lg"),$(hulkbb2Div).prependTo("#srpPanel2_lg"),$(hulkbb3Div).prependTo("#srpPanel3_lg")):($(hulkbb1Div).prependTo("#srpPanel1_md_hulk_bb1"),$(hulkbb2Div).prependTo("#srpPanel2_md_hulk_bb2"),$(hulkbb3Div).prependTo("#srpPanel3_md_hulk_bb3"))}function openNpvVdp(e,url){e.stopPropagation(),window.location.href=url}function onOrientationChange(){$("body").css({overflow:"",height:""})}function setGATracking(){isMobile||$(".google-reviews-wrapper").click(function(){DataLayerFactory.srpDataLayer().addGoogleReviewsEvent()})}function stickySidebar(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"lg"!==BootstrapExtensions.getBootstrapBreakpoint()||$(".fixed-sidebar").theiaStickySidebar({additionalMarginTop:0,additionalMarginBottom:0})}function decodeUriComponentWithSpace(component){return decodeURIComponent(component.replace(/\+/g,"%20"))}function getSearchParameters(location){var searchString=void 0===location.search?"":location.search.substr(1),queries=[];queries=queries.concat(searchString.split("&"));for(var pair,params={},i=0;i<queries.length;i++)""!==queries[i]&&(pair=queries[i].split("="),params[this.decodeUriComponentWithSpace(pair[0])]=this.decodeUriComponentWithSpace(pair[1]));return params}function moreArticlesclicked(){$(".expertReviewsLGContainer").animate({"max-height":"600px"},500,function(){$(".expertReviewsFooter").css("box-shadow","none")}),$(".moreArticles").hide(),$(".readAllReviews").show()}function scrollToAdid(){var duration,change,currentTime,animateScroll,scrladid=getSearchParameters(window.location).scrladid;if(scrladid){if(0===$("#"+scrladid).length)return;var scrollOffset=$("#"+scrladid).offset().top;if(navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/i)){duration=100,change=scrollOffset-0,currentTime=0,(animateScroll=function(){var t,b,c,val=(t=currentTime+=20,b=0,c=change,(t/=duration/2)<1?c/2*t*t+b:-c/2*(--t*(t-2)-1)+b);window.scrollTo(0,val),currentTime<duration&&setTimeout(animateScroll,20)})()}else $("html, body").animate({scrollTop:scrollOffset},100)}}$(window).on("resize",function(){enableBigBoxRepositionSrp&&refreshBanners()}),$(document).click(function(event){$(event.target).closest("#txtKeywords").length||$("#txtKeywordsSuggestions").is(":visible")&&$("#txtKeywordsSuggestions").addClass("display-toggle-off"),$(event.target).closest("#locationAddress").length||$("#locationAddressSuggestions").is(":visible")&&$("#locationAddressSuggestions").addClass("display-toggle-off")}),$(document).ajaxComplete(function(){"undefined"!=typeof displayer&&displayer.showCompareTooltip()}),$(document).ready(function(){$("#researchcollapsedWidget").appendTo("#researchboxContainer"),currentViewport=BootstrapExtensions.getBootstrapBreakpoint(),"function"==typeof scrollToAdid&&scrollToAdid(),stickySidebar(),setGATracking(),$("#SearchListings").children(".list-container").click(function(e){e.stopPropagation();var inMarketType=document.getElementById("SearchListings").dataset.listKey;DataLayerFactory.srpDataLayer().addAdClickEvent(inMarketType,e.currentTarget)}),!isMobile&&enableBigBoxRepositionSrp&&adjustAdvertisementDom()}),$(document).ready(function(){var $quote=$("#rfTitle2"),$numWords=$(".title-text").text().split(" ").length,$boxheight=$("#filter-header");$numWords>=1&&$numWords<8?$quote.addClass("h1Sticky1"):$numWords>8&&$numWords<18?($quote.addClass("h1Sticky2"),$boxheight.addClass("stickyHeaderHight2")):$numWords>18&&$numWords<28?($quote.addClass("h1Sticky3"),$boxheight.addClass("stickyHeaderHight3")):$numWords>=28&&($quote.addClass("h1Sticky4"),$boxheight.addClass("stickyHeaderHight4")),$(".great-popover").popover({html:!0,trigger:"hover",content:function(){return $("#great-popover").html()}}),$(".good-popover").popover({html:!0,trigger:"hover",content:function(){return $("#good-popover").html()}}),$(".fair-popover").popover({html:!0,trigger:"hover",content:function(){return $("#fair-popover").html()}}),$(".above-popover").popover({html:!0,trigger:"hover",content:function(){return $("#above-popover").html()}})}),$(document).on("click","#faceted-parent-Price .dropdown-menu .nav",function(e){e.stopPropagation()}),$(window).on("resize",function(){stickySidebar()}),window.addEventListener("orientationchange",onOrientationChange);var PriceAnalysisCondition,SearchOptions=function(){return function(params){void 0===params&&(params=null),this.IsRefinement=!0,this.Page=1,this.Pager=null,this.IsPaging=!1,this.IsInfiniteScroll=!1,this.UpdateUrl=!0,this.ExpectedCount=15,this.IsSortOrderChanged=!1,null!=params&&(void 0!==params.IsRefinement&&(this.IsRefinement=params.IsRefinement),void 0!==params.Page&&(this.Page=params.Page),void 0!==params.Pager&&(this.Pager=params.Pager),void 0!==params.IsPaging&&(this.IsPaging=params.IsPaging),void 0!==params.IsInfiniteScroll&&(this.IsInfiniteScroll=params.IsInfiniteScroll),void 0!==params.UpdateUrl&&(this.UpdateUrl=params.UpdateUrl),void 0!==params.ExpectedCount&&(this.ExpectedCount=params.ExpectedCount),void 0!==params.IsSortOrderChanged&&(this.IsSortOrderChanged=params.IsSortOrderChanged))}}(),FacetedBoxFactory=function(){function FacetedBoxFactory(){}return FacetedBoxFactory.prototype.create=function(microsite,query,searchResultsInfo,fuels,seats,doors,engines,trains,colours,transmissions,sleeps,slideouts,bodyTypes,priceAnalysis,trims,quickSearch){var _this=this,kdWarnings=new RangeWarnings($("#rfkmHighLessThanLow"),$("#rfkmLowRangeAlert"),$("#rfkmHighLessThanLow"),$("#rfkmHighRangeAlert")),kd=new InputRange(new NumericRange(0,1e7),new TextInput($("#rfKilometresLow"),null,!0,Ui.kmDesktop),new TextInput($("#rfKilometresHigh"),null,!0,Ui.kmDesktop),kdWarnings,$("#faceted-parent-Mileage"),"mileageMin","mileageMax");kd.low(query.OdometerMin),kd.high(query.OdometerMax),kd.setRangeLabel();var wbWarnings=new RangeWarnings($("#rfwbHighLessThanLow"),$("#rfwbLowRangeAlert"),$("#rfwbHighLessThanLow"),$("#rfwbHighRangeAlert")),wb=new InputRange(new NumericRange(0,1e7),new TextInput($("#rfWheelbaseLow"),null,!0,Ui.formatFeet),new TextInput($("#rfWheelbaseHigh"),null,!0,Ui.formatFeet),wbWarnings,$("#faceted-parent-Wheelbase"),"wheelbaseMin","wheelbaseMax");wb.low(query.WheelBaseMin),wb.high(query.WheelBaseMax),wb.setRangeLabel();var ltWarnings=new RangeWarnings($("#rfMaxLengthLessThanMax"),$("#rfltLowRangeAlert"),$("#rfMaxLengthLessThanMin"),$("#rfltHighRangeAlert")),lt=new InputRange(new NumericRange(0,1e7),new TextInput($("#rfLengthMin"),null,!0,Ui.formatFeet),new TextInput($("#rfLengthMax"),null,!0,Ui.formatFeet),ltWarnings,$("#faceted-parent-Length"),"lengthMin","lengthMax");lt.low(query.LengthMin),lt.high(query.LengthMax),lt.setRangeLabel();var wtWarnings=new RangeWarnings($("#rfMaxWeightLessThanMax"),$("#rfwtLowRangeAlert"),$("#rfMaxWeightLessThanMin"),$("#rfwtHighRangeAlert")),wt=new InputRange(new NumericRange(0,1e7),new TextInput($("#rfWeightMin"),null,!0,Ui.formatPounds),new TextInput($("#rfWeightMax"),null,!0,Ui.formatPounds),wtWarnings,$("#faceted-parent-Weight"),"weightMin","weightMax");wt.low(query.WeightMin),wt.high(query.WeightMax),wt.setRangeLabel();var esWarnings=new RangeWarnings($("#rfesHighLessThanLow"),$("#rfesLowRangeAlert"),$("#rfesHighLessThanLow"),$("#rfesHighRangeAlert")),es=new InputRange(new NumericRange(0,1e7),new TextInput($("#rfEngineSizeLow"),null,!0,Ui.formatCC),new TextInput($("#rfEngineSizeHigh"),null,!0,Ui.formatCC),esWarnings,$("#faceted-parent-EngineSize"),"engineSizeMin","engineSizeMax");es.low(query.EngineSizeMin),es.high(query.EngineSizeMax),es.setRangeLabel();var priceWarnings=new RangeWarnings($(".rfpriceHighLessThanLow"),$(".rfpriceLowRangeAlert"),$(".rfpriceHighLessThanLow"),$(".rfpriceHighRangeAlert")),pc=new InputRange(new NumericRange(0,1e7),new TextInput($("#rfPriceLow"),null,!0,Ui.displayPrice),new TextInput($("#rfPriceHigh"),null,!0,Ui.displayPrice),priceWarnings,$("#faceted-parent-Price"),"priceMin","priceMax");pc.low(query.PriceMin),pc.high(query.PriceMax);var horsePowerWarnings=new RangeWarnings($("#rfhpHighLessThanLow"),$("#rfhpLowRangeAlert"),$("#rfhpHighLessThanLow"),$("#rfhpHighRangeAlert")),hp=new InputRange(new NumericRange(0,1e5),new TextInput($("#rfHorsepowerLow"),null,!0,Ui.formatHP),new TextInput($("#rfHorsepowerHigh"),null,!0,Ui.formatHP),horsePowerWarnings,$("#faceted-parent-Horsepower"),"horsepowerMin","horsepowerMax");hp.low(query.HorsepowerMin),hp.high(query.HorsepowerMax),hp.setRangeLabel();var hoursWarnings=new RangeWarnings($("#rfhrHighLessThanLow"),$("#rfhrLowRangeAlert"),$("#rfhrHighLessThanLow"),$("#rfhrHighRangeAlert")),hrs=new InputRange(new NumericRange(0,9999999999),new TextInput($("#rfHoursLow"),null,!0,Ui.formatHours),new TextInput($("#rfHoursHigh"),null,!0,Ui.formatHours),hoursWarnings,$("#faceted-parent-Hours"),"hoursMin","hoursMax");hrs.low(query.HoursMin),hrs.high(query.HoursMax),hrs.setRangeLabel();var func=function(facetInfo,group){var current=fb.appliedValues[facetInfo.appliedValuesKey];ArrayExtensions.areEquivalent(current,group.selectedLabels())?$("#"+facetInfo.applyId).removeClass("appliable"):$("#"+facetInfo.applyId).addClass("appliable")},click=function(me){me.toggle(null),fb.updateAppliedValues(!1),fb.onRefinementChanged()},multiSelectFactory=new MultiSelectFactory,ecd=multiSelectFactory.createMultiSelect(colours,query.Colours,multiSelectFactory.getMultiSelectFilterInfo(FacetType.Colours),click,func);$("#fbExteriorColour").find("div.refinement-checkbox").each(function(i,e){var je=$(e),id=$(e).children("input").attr("id");je.append(FacetedBoxTemplates.ColourSwatch($("#"+id).data("value")))});var td=multiSelectFactory.createMultiSelect(transmissions,query.Transmissions,multiSelectFactory.getMultiSelectFilterInfo(FacetType.Transmissions),click,func),dt=multiSelectFactory.createMultiSelect(trains,query.Drivetrain,multiSelectFactory.getMultiSelectFilterInfo(FacetType.Drivetrain),click,func),ee=multiSelectFactory.createMultiSelect(engines,query.Engine,multiSelectFactory.getMultiSelectFilterInfo(FacetType.Engine),click,func),sc=multiSelectFactory.createMultiSelect(seats,query.SeatingCapacity,multiSelectFactory.getMultiSelectFilterInfo(FacetType.SeatingCapacity),click,func),nod=multiSelectFactory.createMultiSelect(doors,query.NumberOfDoors,multiSelectFactory.getMultiSelectFilterInfo(FacetType.NumberOfDoors),click,func),ftd=multiSelectFactory.createMultiSelect(fuels,query.FuelTypes,multiSelectFactory.getMultiSelectFilterInfo(FacetType.FuelTypes),click,func),sls=multiSelectFactory.createMultiSelect(sleeps,query.Sleeps,multiSelectFactory.getMultiSelectFilterInfo(FacetType.Sleeps),click,func),so=multiSelectFactory.createMultiSelect(slideouts,query.SlideOuts,multiSelectFactory.getMultiSelectFilterInfo(FacetType.SlideOuts),click,func),bs=multiSelectFactory.createMultiSelect(bodyTypes,query.BodyType,multiSelectFactory.getMultiSelectFilterInfo(FacetType.BodyType),click,func),pac=multiSelectFactory.createMultiSelect(priceAnalysis,query.PriceAnalysis,multiSelectFactory.getMultiSelectFilterInfo(FacetType.PriceAnalysis),click,func),tr=multiSelectFactory.createMultiSelect(trims,query.Trim,multiSelectFactory.getMultiSelectFilterInfo(FacetType.Trim),click,func),cS=new CheckboxGroup([new Checkbox(query.IsNew,$("#rfNew"),null,click),new Checkbox(query.IsUsed,$("#rfUsed"),null,click),new Checkbox(query.IsCpo,$("#rfPreOwned"),null,click),new Checkbox(query.IsDamaged,$("#rfDamaged"),null,click)],!1);this.setCheckboxCallBacks(cS,function(){var current=fb.appliedValues;(cS.rfNew?cS.rfNew._state!==current.new:null)||(cS.rfUsed?cS.rfUsed._state!==current.used:null)||(cS.rfDamaged?cS.rfDamaged._state!==current.damaged:null)||(cS.rfPreOwned?cS.rfPreOwned._state!==current.cpo:null)?$("#applyCondition").addClass("appliable"):$("#applyCondition").removeClass("appliable"),quickSearch&&_this.setConditionValue(cS.rfNew._state,cS.rfUsed._state,cS.rfPreOwned?cS.rfPreOwned._state:current.cpo,cS.rfDamaged._state)});var sT=new CheckboxGroup([new Checkbox(query.IsDealer,$("#rfDealer"),null,click),new Checkbox(query.IsPrivate,$("#rfPrivate"),null,click)],!1);this.setCheckboxCallBacks(sT,function(){var current=fb.appliedValues;sT.rfDealer&&sT.rfDealer._state!==current.dealer||sT.rfPrivate&&sT.rfPrivate._state!==current.private?$("#applySeller").addClass("appliable"):$("#applySeller").removeClass("appliable")}),$("#txtKeywords").val(decodeURIComponent(query.Keywords?query.Keywords.replace(/\+/g,"%20"):"")),this.setConditionValue(query.IsNew,query.IsUsed,query.IsCpo,query.IsDamaged),this.setSellerTypeValue(query.IsDealer,query.IsPrivate);var advS=new FacetedAdvancedSearch(ecd,kd,td,ftd,cS,sT,new Checkbox(query.WithPrice,$("#rfPrice"),null,click),new Checkbox(query.WithPhotos,$("#rfPhoto"),null,click),new Checkbox(query.WithFreeCarProof,$("#rfCarFax"),null,click),$("#txtKeywords"),$("#txtKeywordsSuggestions"),query.IsHotDeal,dt,ee,sc,nod,sls,so,bs,pac,tr),ajaxManager=new AjaxManager(new AjaxOptions),locationInput=new TextInput($("#locationAddress"),new AutoComplete($("#locationAddressSuggestions"),!0,function(target,callback){var input=$("#locationAddress");if(null!==input.val()&&""!==input.val()&&StringExtensions.IsPostalCodeFormatValid(input.val())||!enableMandatoryPostalCode){var prefix=$("#env").data("prefix");ajaxManager.send({url:prefix+"/Refinement/Locations",headers:{AllowMvt:"false"},type:"GET",data:{text:input.val()},dataType:"json",contentType:"application/json",success:function(result){locationInput.autoComplete.items=result.Locations,locationInput.autoComplete.displayed=!1,locationInput.match=result.Match,locationInput.autoComplete.highlightIndex=-1,callback(locationInput),result.Match&&quickSearch&&(fb.updateAppliedValues(),fb.onRefinementChanged(!0,"",null,!0))}},!1)}else locationInput.autoComplete.displayed=!1,locationInput.match=!1,callback(locationInput)},ajaxManager),!1),showLocationError=!1,locationManager=new LocationManager(new CookieManager),enableMandatoryPostalCodeElement=document.getElementById("enableMandatoryPostalCode"),enableMandatoryPostalCode=null!=enableMandatoryPostalCodeElement&&JSON.parse(String(enableMandatoryPostalCodeElement.value).toLowerCase())&&!locationManager.postalCodeCookieExists();locationInput.$input.attr("maxlength",enableMandatoryPostalCode?"7":"2000"),!enableMandatoryPostalCode||StringExtensions.IsPostalCodeFormatValid(query.Address)?locationInput.$input.val(query.Address):(locationInput.$input.val(""),showLocationError=!0);var resources=new Resources,locationRequired=resources.getSearchResource("locationRequired"),locationExample=resources.getSearchResource("postalCode");quickSearch&&(locationExample=StringExtensions.sentenceCase((new Resources).getSearchResource("postalCode")+"*")),locationInput.$input.attr("placeholder",enableMandatoryPostalCode?locationExample:$("#locationLabel").length>0?"":locationRequired),enableMandatoryPostalCode?locationInput.$input.attr("maxlength","7"):locationInput.$input.removeAttr("maxlength");var $vehicleTypeDropdown=new Dropdown(new BootstrapDropdown($("#rfVehicleType")),null,!1,!1,!0,!0,!1,!1,"VehicleType");null!=query.VehicleType&&$vehicleTypeDropdown.appendOption(new DropdownItem(query.VehicleType,!0,!1,null)),$vehicleTypeDropdown.select(query.VehicleType,!1);var $vehicleSubtypeDropdown=new Dropdown(new BootstrapDropdown($("#rfVehicleSubtype")),null,!1,!1,!0,!0,!1,!1,"VehicleSubType");null!=query.VehicleSubType&&$vehicleSubtypeDropdown.appendOption(new DropdownItem(query.VehicleSubType,!0,!1,null)),$vehicleSubtypeDropdown.select(query.VehicleSubType,!1);var $makeDropdown=new Dropdown(new BootstrapDropdown($("#rfMakes"),quickSearch),null,!1,!1,!0,!0,!1,!1,"Make");null!=query.Make&&$makeDropdown.appendOption(new DropdownItem(query.Make,!0,!1,null)),$makeDropdown.select(query.Make,!1);var $modelDropdown=new Dropdown(new BootstrapDropdown($("#rfModel"),quickSearch),null,!1,!1,!0,!0,!1,!1,"Model");query.Model,null!=query.Model&&$modelDropdown.appendOption(new DropdownItem(query.Model,!0,!1,null)),$modelDropdown.select(query.Model,!1),query.Proximity<-2?query.Proximity=-1:query.Proximity>=0&&this.insertProximityIfItsMissing(query.Proximity);var proximityDropdown=$("#proximity").length>0?new Dropdown(new SelectDropdown($("#proximity")),[new DropdownSection(FacetSearchBox.proximities.map(function(item){return new DropdownItem(item,item===query.Proximity,!1,Ui.displayDistance)}),null,null)],!1,!0,!1,!1):null;null!=query.YearMin&&initYears.indexOf(query.YearMin)<0&&initYears.push(query.YearMin),null!=query.YearMax&&initYears.indexOf(query.YearMax)<0&&initYears.push(query.YearMax);var year=new DropdownRange(initYears,"#yearLow","#yearHigh",!0,$("#faceted-parent-Year"),"yearMin","yearMax",Ui.displayYear,SortType.Descending,SortType.Descending);year.low(query.YearMin),year.high(query.YearMax),year.setRangeLabel(),this.setSingleValues(query),null!=query&&this.setPriceAnalysisValues(query.PriceAnalysis),this.setOtherOptions(query.WithPhotos,query.WithPrice,query.WithFreeCarProof);var paymentWarnings=new RangeWarnings($(".rfpaymentHighLessThanLow"),$(".rfpaymentLowRangeAlert"),$(".rfpaymentHighLessThanLow"),$(".rfpaymentHighRangeAlert"),$(".rfpaymentLowRequiredAlert"),$(".rfpaymentHighRequiredAlert"),$(".rfpaymentOutOfRangeAlert"),FacetSearchBox.highLowPaymentMaxRange),payment=new InputRange(new NumericRange(0,1e6),new TextInput($("#rfPaymentLow"),null,!0,Ui.displayPayment),new TextInput($("#rfPaymentHigh"),null,!0,Ui.displayPayment),paymentWarnings,$("#faceted-parent-Price"),"paymentMin","paymentMax",function(){return fb.clearPaymentFields()});payment.low(null==query.PaymentMin?FacetSearchBox.defaultMinPayment:query.PaymentMin),payment.high(null==query.PaymentMax?FacetSearchBox.defaultMaxPayment:query.PaymentMax);var paymentFrequencyDropdown=new Dropdown(new SelectDropdown($("#paymentFrequency")),[new DropdownSection((window.enableSearchByPaymentSrp?FacetSearchBox.paymentFrequencies:[]).map(function(item){return new DropdownItem(item,item===(null==query.PaymentFrequency?FacetSearchBox.defaultPaymentFrequency:query.PaymentFrequency),!1,Ui.displayPaymentFrequency)}),null,null)],!1,!1,!1,!1),creditRatingDropdown=new Dropdown(new SelectDropdown($("#creditRating")),[new DropdownSection((window.enableSearchByPaymentSrp?FacetSearchBox.creditRatings:[]).map(function(item){return new DropdownItem(item,item===(null==query.CreditRating?FacetSearchBox.defaultCreditrating:query.CreditRating),!1,Ui.displayCreditRating)}),null,null)],!1,!1,!1,!1),termDropdown=new Dropdown(new SelectDropdown($("#term")),[new DropdownSection((window.enableSearchByPaymentSrp?FacetSearchBox.terms:[]).map(function(item){return new DropdownItem(item,item===(null==query.Term?FacetSearchBox.defaultTerm:query.Term),!1,Ui.displayTerm)}),null,null)],!1,!0,!1,!1),cashDownInput=new TextInput($("#cashDown"),null,!0,Ui.displayPrice);cashDownInput.$input.val(query.CashDown);var tradeInInput=new TextInput($("#tradeIn"),null,!0,Ui.displayPrice);tradeInInput.$input.val(query.TradeIn),$("#faceted-parent-Price input").on("focus",function(){$("label[for="+this.id+"]").removeClass("noVal")}).on("blur",function(){""!==$("#"+this.id).val()&&null!==$("#"+this.id).val()||$("label[for="+this.id+"]").addClass("noVal")}),$("#faceted-parent-Price .paymentTab").on("click",function(){$("#applyPrice").addClass("appliable")}),$("#faceted-parent-Price .paymentTab").hasClass("active")&&$("#applyPrice").addClass("appliable"),$("#faceted-parent-Price .priceTab").on("click",function(){$("#applyPrice").removeClass("appliable")});var fb=new FacetSearchBox(query,searchResultsInfo,microsite,query.Top,$("#newSearch"),locationInput,$makeDropdown,$modelDropdown,$("#noVehiclesFoundProximityAlert"),proximityDropdown,$(".trader-search"),$vehicleTypeDropdown,$vehicleSubtypeDropdown,$("#facetedBoxWrapper"),pc,year,wb,es,lt,wt,hp,hrs,payment,paymentFrequencyDropdown,creditRatingDropdown,termDropdown,cashDownInput,tradeInInput,advS,quickSearch);return fb.enableMandatoryPostalCode=enableMandatoryPostalCode,fb.clearPaymentLocalStorage(),query.PaymentMax>0&&query.PaymentMin>=0&&($("#applyPrice").addClass("appliable"),$(".paymentTab").tab("show"),fb.setPricePaymentLabel(),fb.savePaymentParameter()),(query.PriceMax>0||query.PriceMin>0)&&($("#applyPrice").addClass("appliable"),$(".priceTab").tab("show"),fb.setPricePaymentLabel()),showLocationError&&fb.showLocationError(),locationInput.onValueChanged=function(input){fb.locationChanged(input)},fb},FacetedBoxFactory.prototype.insertProximityIfItsMissing=function(proximity){var nearest=ArrayExtensions.nearestValue(FacetSearchBox.proximities,proximity,!0,!0);if(nearest!==proximity){var index=ArrayExtensions.findIndex(FacetSearchBox.proximities,function(x){return x===nearest});nearest>proximity?FacetSearchBox.proximities.splice(index,0,proximity):FacetSearchBox.proximities.splice(index+1,0,proximity)}},FacetedBoxFactory.prototype.setCheckboxCallBacks=function(group,callback){for(var i=0;i<group.checkboxes.length;i++)group.checkboxes[i].addCallbackForEveryToggle(callback)},FacetedBoxFactory.prototype.setConditionValue=function(isNew,isUsed,isCpo,isDamaged){void 0===isNew&&(isNew=!1),void 0===isUsed&&(isUsed=!1),void 0===isCpo&&(isCpo=!1),void 0===isDamaged&&(isDamaged=!1);var conditions=[],resources=new Resources,anyText=resources.getSearchResource("any");isNew&&conditions.push(resources.getSearchResource("adStatusNew")),isUsed&&conditions.push(resources.getSearchResource("adStatusUsed")),isCpo&&conditions.push(resources.getSearchResource("adCertifiedPreOwned")),isDamaged&&conditions.push(resources.getSearchResource("adStatusDamaged"));var $condition=$("#faceted-condition");conditions.length>0?($condition.closest("li").addClass("filtered"),$condition.empty().append(conditions.join(", "))):$condition.empty().append(anyText)},FacetedBoxFactory.prototype.setSellerTypeValue=function(isDealer,isPrivate){void 0===isDealer&&(isDealer=!1),void 0===isPrivate&&(isPrivate=!1);var types=[],resources=new Resources,anyText=resources.getSearchResource("any");isDealer&&types.push(resources.getSearchResource("adTypeDealer")),isPrivate&&types.push(resources.getSearchResource("adTypePrivate"));var $types=$("#faceted-type");types.length>0?($types.closest("li").addClass("filtered"),$types.empty().append(types.join(", "))):$types.empty().append(anyText)},FacetedBoxFactory.prototype.setOtherOptions=function(withPhoto,withPrice,withCp){void 0===withPhoto&&(withPhoto=!1),void 0===withPrice&&(withPrice=!1),void 0===withCp&&(withCp=!1);var isChecked=!1;(withPhoto||withPrice||withCp)&&(isChecked=!0),isChecked?$(".faceted-other").addClass("filtered"):$(".faceted-other").removeClass("filtered")},FacetedBoxFactory.prototype.setPriceAnalysisValues=function(selectedAnalysis){var priceAnalysiss=document.getElementById("faceted-PriceAnalysis");if(priceAnalysiss&&!isMobile&&null!=selectedAnalysis&&selectedAnalysis.length>0){var resources_1=new Resources;priceAnalysiss.innerHTML=selectedAnalysis.map(function(cond){return resources_1.getSearchResource(StringExtensions.camelize(cond))}).join(", ")}},FacetedBoxFactory.prototype.setSingleValues=function(query){for(var property in query)if(query.hasOwnProperty(property)){var propClass=$("#faceted-"+property),val=query[property];val&&propClass.length>0&&(val instanceof Array?isMobile||propClass.text(val.join(", ")):propClass.text(val),propClass.closest("li").addClass("filtered"))}},FacetedBoxFactory.prototype.makeSearchBoxChange=function(){$("#makeSearch").keyup(function(){var filter,li,i,noMatchDiv,matched=!1;for(filter=document.getElementById("makeSearch").value.toUpperCase(),li=$("#rfMakes li").not(".noMatchMake"),noMatchDiv='<li class="noMatchMake" ><div class="form-group" > <div id="makeError" class="genericwarning" style= "display: block;" >'+(new Resources).getSearchResource("makeNoMatch")+"</div></div></li>",i=0;i<li.length;i++)li[i].getElementsByTagName("a")[0].innerHTML.toUpperCase().indexOf(filter)>-1?(li[i].style.display="",matched=!0):li[i].style.display="none";matched?$(".noMatchMake").remove():$(".noMatchMake").length||$("#rfMakes").append(noMatchDiv)})},FacetedBoxFactory}();$(document).ready(function(){(new BrowserDetect).GetBrowser()==BrowserType.iOS11&&$("#facetedBoxWrapper").addClass("ios11CaretBugFix")}),function(PriceAnalysisCondition){PriceAnalysisCondition[PriceAnalysisCondition.NotAppliable=-1]="NotAppliable",PriceAnalysisCondition[PriceAnalysisCondition.ShowNoPrice=0]="ShowNoPrice",PriceAnalysisCondition[PriceAnalysisCondition.GreatPrice=1]="GreatPrice",PriceAnalysisCondition[PriceAnalysisCondition.GoodPrice=2]="GoodPrice",PriceAnalysisCondition[PriceAnalysisCondition.AboveAverage=3]="AboveAverage",PriceAnalysisCondition[PriceAnalysisCondition.FairPrice=4]="FairPrice"}(PriceAnalysisCondition||(PriceAnalysisCondition={}));var _srpVideosDataLayer,playerInstance,_videos,selectedVideoId,_videoInterval,_bufferingStage,_prerollInterval,SortBy,MicrositeType,VideosWidget=function(){function VideosWidget($element){this.$element=isMobile?void 0==$element||null==$element?$("#expertMobileVideoReviewsCall"):$element:void 0==$element||null==$element?$("#expertvideoreviews"):$element,this.VideoData={AdTag:$("#videoReviewsAdTag").data("videoreviewsadtag")?$("#videoReviewsAdTag").data("videoreviewsadtag"):"",APIUrl:$("#videoReviewsAPIUrl").data("videoreviewsapiurl")?$("#videoReviewsAPIUrl").data("videoreviewsapiurl"):""}}return VideosWidget.prototype.clear=function(){this.$element.html("")},VideosWidget.prototype.refresh=function(){var _this=this,query=fb.getRefinementQuery();if(""==query.Make||null==query.Make)return null;if(null==query.Microsite||1!=query.Microsite.MicrositeType)return null;this.clear();$.ajax({url:this.VideoData.APIUrl,method:"GET",data:this.buildQueryString(query),accepts:{text:"text/html; charset=utf-8"},contentType:"application/json",success:function(result){if(result.length>0){var title=_this.buildTitle(query);isMobile?$("#expertMobileVideoReviewsSRPDisplay").append(_this.buildSRPMobileVideoWidget(result,title)):$("#expertVideosSRPDisplay").append(_this.buildSRPVideoWidget(result,title)),_this.InitVideoModal(result,title)}}})},VideosWidget.prototype.buildQueryString=function(query){var _queryString="make="+query.Make;return null!=query.Model&&(_queryString+="&model="+query.Model),null!=query.YearMin&&(_queryString+="&minYear="+query.YearMin),null!=query.YearMax&&(_queryString+="&maxYear="+query.YearMax),_queryString},VideosWidget.prototype.buildTitle=function(query){var title=query.Make;return null!=query.Model&&(title+=" "+query.Model),title},VideosWidget.prototype.buildSRPMobileVideoWidget=function(result,title){var _thumbnail,htmlresponse='<div id="expertMobileVideoReviewsCall">\n                            <div class="row sectionTitle">\n                                <span class="researchHeaderTitle"><span class="text-bold">'+title+"</span> Video Reviews</span>\n                            </div>";htmlresponse+='<div class="row">';for(var i=0;i<2;i++)result.length>i&&(_thumbnail=null!=result[i].ThumbnailUrl&&""!=result[i].ThumbnailUrl?result[i].ThumbnailUrl:"/Images/Pages/Results/VideoReview-NoImage.jpg",htmlresponse+=0==i?'<div id="'+i+'" class="col-xs-6 fixed-photo-column eventOpenVideo">':'<div id="'+i+'" class="col-xs-6 fixed-photo-column fixed-margin eventOpenVideo">',htmlresponse+='<div class="play-button-div" >\n                                         <img src="'+_thumbnail+'" class="img-responsive img-radius" onerror = "src = \'/Images/Pages/Results/VideoReview-NoImage.jpg\'" />\n                                         <span class="play-button-icon" > <img src="/Images/SVG/Search/Play-Arrow.svg" /> </span>\n                                     </div>\n                                     <div class="video-title" >\n                                         '+(result[i].VideoTitle.length>18?result[i].VideoTitle.substring(0,18).concat("..."):result[i].VideoTitle)+"\n                                     </div>\n                                </div>",this.videoImpressionTracking(result[i].VideoTitle));return htmlresponse+="</div>",htmlresponse+="</div>"},VideosWidget.prototype.buildSRPVideoWidget=function(result,title){for(var _thumbnail,htmlresponse='<div id="expertvideoreviews" class="videoreviews">\n                            <div class="row sectionTitle">\n                                <span class="researchHeaderTitle"><span class="text-bold">'+title+"</span> Video Reviews</span>\n                            </div>",i=0;i<3;i++)result.length>i&&(_thumbnail=null!=result[i].ThumbnailUrl&&""!=result[i].ThumbnailUrl?result[i].ThumbnailUrl:"/Images/Pages/Results/VideoReview-NoImage.jpg",htmlresponse+=1==i?'<div id="'+i+'" class="col-lg-3 col-md-3 col-sm-3 fixed-photo-column fixed-margin eventOpenVideo">':'<div id="'+i+'" class="col-lg-3 col-md-3 col-sm-3 fixed-photo-column eventOpenVideo">',htmlresponse+='<div class="play-button-div" >\n                                         <img src="'+_thumbnail+'" class="img-responsive img-radius" onerror = "src = \'/Images/Pages/Results/VideoReview-NoImage.jpg\'" />\n                                         <span class="play-button-icon" > <img src="/Images/SVG/Search/Play-Arrow.svg" /> </span>\n                                     </div>\n                                     <div class="video-title" >\n                                         '+(result[i].VideoTitle.length>23?result[i].VideoTitle.substring(0,23).concat("..."):result[i].VideoTitle)+"\n                                     </div>\n                                </div>",this.videoImpressionTracking(result[i].VideoTitle));return htmlresponse+="</div>"},VideosWidget.prototype.InitVideoModal=function(videos,title){var eventVideo=this;isMobile?$(".eventOpenVideo").click(function(){(new MobileVideosModal).openModal(videos,title),selectedVideoId=$(this).attr("id"),eventVideo.setupPlayer(videos,eventVideo.VideoData.AdTag),(_srpVideosDataLayer=new videoReviewsDLManager).videoWidgetClick(videos?videos.VideoTitle:"")}):$(".eventOpenVideo").click(function(){(new VideosModal).openModal(videos,title),selectedVideoId=$(this).attr("id"),eventVideo.setupPlayer(videos,eventVideo.VideoData.AdTag),(_srpVideosDataLayer=new videoReviewsDLManager).videoWidgetClick(videos?videos.VideoTitle:"")})},VideosWidget.prototype.setupPlayer=function(playList,AdTag){for(var _width,_playlist=[],_i=0,playList_1=playList;_i<playList_1.length;_i++){var video=playList_1[_i];_playlist.push({image:video.ThumbnailUrl,file:video.VideoUrl,title:video.VideoTitle})}if(_width=isMobile?"100%":_playlist.length>1?"70%":"100%",null==jwplayer)return null;(playerInstance=jwplayer("player").setup({playlist:_playlist,visualplaylist:!1,preload:"auto",autostart:!0,mute:!1,advertising:{tag:AdTag,client:"googima",rules:{frequency:0}},width:_width})).on("ready",videoPlayerStartEvent),playerInstance.on("adPlay",prerollStartEvent),playerInstance.on("adPause",prerollPauseEvent),playerInstance.on("adComplete",prerollPauseEvent),playerInstance.on("setupError",setupErrorEvent),playerInstance.on("error",setupErrorEvent),playerInstance.on("firstFrame",reviewvideoStartEvent),playerInstance.on("pause",videoPauseEvent),playerInstance.on("play",videoPlayEvent),playerInstance.on("complete",videoPauseEvent),playerInstance.on("playlistItem",playlistItemChanged),playerInstance.on("buffer",videoBufferStage),$("#js-playlists").on("click",".js-video-link",setPlayerVideo),$("html").css("overflow-y","hidden"),isMobile?$("#expertMobileVideoReviewsModal").on("hidden.bs.modal",function(){jwplayer("player").remove(),$("html").css("overflow-y","auto")}):$("#expertVideoReviewsModal").on("hidden.bs.modal",function(){jwplayer("player").remove(),$("html").css("overflow-y","auto")})},VideosWidget.prototype.videoImpressionTracking=function(videoTitle){(new videoReviewsDLManager).videoWidgetImpression(videoTitle)},VideosWidget}(),_videoSecondsPlayed=0,reviewvideoStartEvent=function(e){_srpVideosDataLayer.videoStartEvent(playerInstance.getPlaylistItem().title)},setPlayerVideo=function(){playerInstance.playlistItem($(this).attr("id"))},videoPlayerStartEvent=function(e){playerInstance.playlistItem(selectedVideoId),_srpVideosDataLayer.videoPlayerStartEvent(playerInstance.getPlaylistItem().title)},_bufferingSeconds=0,videoPlayEvent=function(e){_videoSecondsPlayed=0,_videoInterval=setInterval(function(){_videoSecondsPlayed++},1e3),"buffering"===e.oldstate&&(clearInterval(_bufferingStage),0!=_bufferingSeconds&&_srpVideosDataLayer.videoBufferStateEnded(playerInstance.getPlaylistItem().title,_bufferingSeconds))},videoPauseEvent=function(e){_srpVideosDataLayer.videoStopEvent(playerInstance.getPlaylistItem().title,_videoSecondsPlayed,0),clearInterval(_videoInterval)},playlistItemChanged=function(){isMobile?($("#currentMobileVideoTitle").text(playerInstance.getPlaylistItem().title),(new MobileVideosModal).updatePlayingUI($("#expertMobileVideoReviewsPlaylist").find("#"+playerInstance.getPlaylistIndex()).parent())):($("#currentVideoTitle").text(playerInstance.getPlaylistItem().title),(new VideosModal).updatePlayingUI($("#expertVideoReviewsPlaylist").find("#"+playerInstance.getPlaylistIndex()).parent()))},_prerollAdSecondsPlayed=0,prerollStartEvent=function(){0==_prerollAdSecondsPlayed&&_srpVideosDataLayer.preRollVideoStartEvent(playerInstance.getPlaylistItem().title),_prerollAdSecondsPlayed=0,_prerollInterval=setInterval(function(){_prerollAdSecondsPlayed++},1e3)},prerollPauseEvent=function(){_srpVideosDataLayer.videoStopEvent(playerInstance.getPlaylistItem().title,0,_prerollAdSecondsPlayed),clearInterval(_prerollInterval)},setupErrorEvent=function(){_srpVideosDataLayer.videoFail(playerInstance.getPlaylistItem().title?playerInstance.getPlaylistItem().title:_videos[0].VideoTitle)},videoBufferStage=function(e){_bufferingSeconds=0,_bufferingStage=setInterval(function(){_bufferingSeconds++},1e3)};!function(SortBy){SortBy[SortBy.Default=0]="Default",SortBy[SortBy.LastModificationDesc=1]="LastModificationDesc",SortBy[SortBy.LastModificationAsc=2]="LastModificationAsc",SortBy[SortBy.PriceDesc=3]="PriceDesc",SortBy[SortBy.PriceAsc=4]="PriceAsc",SortBy[SortBy.DistanceAsc=6]="DistanceAsc",SortBy[SortBy.YearDesc=7]="YearDesc",SortBy[SortBy.YearAsc=8]="YearAsc",SortBy[SortBy.CreatedDateDesc=9]="CreatedDateDesc",SortBy[SortBy.CreatedDateAsc=10]="CreatedDateAsc",SortBy[SortBy.OdometerDesc=11]="OdometerDesc",SortBy[SortBy.OdometerAsc=12]="OdometerAsc",SortBy[SortBy.PhotoCountDesc=13]="PhotoCountDesc",SortBy[SortBy.PhotoCountAsc=14]="PhotoCountAsc",SortBy[SortBy.RelevancyDesc=15]="RelevancyDesc",SortBy[SortBy.PopularityDesc=16]="PopularityDesc",SortBy[SortBy.PopularityAsc=17]="PopularityAsc",SortBy[SortBy.RatingDesc=18]="RatingDesc",SortBy[SortBy.RatingAsc=19]="RatingAsc",SortBy[SortBy.MostHelpful=20]="MostHelpful",SortBy[SortBy.MobileBoostAsc=23]="MobileBoostAsc",SortBy[SortBy.Random=24]="Random",SortBy[SortBy.ViewsCountDesc=32]="ViewsCountDesc",SortBy[SortBy.ViewsCountAsc=31]="ViewsCountAsc"}(SortBy||(SortBy={})),function(MicrositeType){MicrositeType[MicrositeType.PassengerVehicles=1]="PassengerVehicles",MicrositeType[MicrositeType.Rvs=2]="Rvs",MicrositeType[MicrositeType.MotorcyclesAtvs=3]="MotorcyclesAtvs",MicrositeType[MicrositeType.Boats=4]="Boats",MicrositeType[MicrositeType.Snowmobile=5]="Snowmobile",MicrositeType[MicrositeType.Watercraft=6]="Watercraft",MicrositeType[MicrositeType.HeavyTruckTrailers=7]="HeavyTruckTrailers",MicrositeType[MicrositeType.HeavyEquipment=8]="HeavyEquipment",MicrositeType[MicrositeType.FarmEquipment=9]="FarmEquipment",MicrositeType[MicrositeType.TransportTrailers=12]="TransportTrailers"}(MicrositeType||(MicrositeType={}));var PageOptionExtensions,ResetSearch=function(){function ResetSearch(){}return ResetSearch.prototype.reset=function(box,microsite,isVehicleSpecialist){var withPrice=microsite.DefaultWithPrice&&!isVehicleSpecialist,withPhotos=microsite.DefaultWithPhotos&&!isVehicleSpecialist;switch(fb.setLastFacet(""),null!=box.lastQuery&&null!=box.lastQuery.InMarketType&&"vehicleSpecialist"==box.lastQuery.InMarketType||(box.$makeDropdown.selectAt(0,!1),box.$modelDropdown.selectAt(0,!1),box.advancedOptions.sellerType.control("rfDealer")&&box.advancedOptions.sellerType.control("rfDealer").toggle(!0,!1),box.advancedOptions.sellerType.control("rfPrivate")&&box.advancedOptions.sellerType.control("rfPrivate").toggle(!0,!1)),null===box.lastQuery&&null===box.lastQuery.InMarketType&&"dealerInventory"!==box.lastQuery.InMarketType||(withPrice=!1,withPhotos=!1),box.$vehicleTypeDropdown.selectAt(0,!1),box.$vehicleSubtypeDropdown.selectAt(0,!1),box.year.low(null,!1,new RangeState(null,null)),box.year.high(null,!1,new RangeState(null,null)),box.advancedOptions.transmission.clear(),box.advancedOptions.fueltype.clear(),box.advancedOptions.exteriorColor.clear(),box.advancedOptions.drivetrain.clear(),box.advancedOptions.numberOfDoors.clear(),box.advancedOptions.seatingCapacity.clear(),box.advancedOptions.engine.clear(),box.advancedOptions.bodyTypes.clear(),box.advancedOptions.priceAnalysis.clear(),box.advancedOptions.trims.clear(),box.clearPaymentFields(),box.price.low(null,!1),box.price.high(null,!1),box.advancedOptions.kilometres.lowElement.$input.val(null),box.advancedOptions.kilometres.highElement.$input.val(null),box.wheelbase.low(null,!1,new RangeState(null,null)),box.wheelbase.high(null,!1,new RangeState(null,null)),box.enginesize.low(null,!1,new RangeState(null,null)),box.enginesize.high(null,!1,new RangeState(null,null)),box.advancedOptions.keywordInput.val(null),void 0!==box.advancedOptions.carState.control("rfNew")&&box.advancedOptions.carState.control("rfNew").toggle(!0,!1),box.advancedOptions.carState.control("rfUsed").toggle(!0,!1),box.advancedOptions.carState.control("rfDamaged").toggle(!1,!1),box.advancedOptions.withPriceOnly.toggle(withPrice,!1),box.advancedOptions.withPhotoOnly.toggle(withPhotos,!1),microsite.MicrositeType){case MicrositeType.PassengerVehicles:box.advancedOptions.carState.control("rfPreOwned").toggle(!0,!1),box.advancedOptions.withCarProof.toggle(!1,!1);break;case MicrositeType.Rvs:box.advancedOptions.sleeps.clear(),box.advancedOptions.slideouts.clear(),box.lengthRange.high(null,!1,new RangeState(null,null)),box.lengthRange.low(null,!1,new RangeState(null,null));break;case MicrositeType.MotorcyclesAtvs:case MicrositeType.Boats:box.hoursRange.high(null,!1,new RangeState(null,null)),box.hoursRange.low(null,!1,new RangeState(null,null)),box.lengthRange.high(null,!1,new RangeState(null,null)),box.lengthRange.low(null,!1,new RangeState(null,null));break;case MicrositeType.Snowmobile:case MicrositeType.Watercraft:box.horsePowerRange.high(null,!1,new RangeState(null,null)),box.horsePowerRange.low(null,!1,new RangeState(null,null)),box.hoursRange.high(null,!1,new RangeState(null,null)),box.hoursRange.low(null,!1,new RangeState(null,null));break;case MicrositeType.HeavyTruckTrailers:case MicrositeType.HeavyEquipment:case MicrositeType.FarmEquipment:case MicrositeType.TransportTrailers:}},ResetSearch.prototype.resetAdvancedSearch=function(box){box.microsite.DefaultWithPrice,box.microsite.DefaultWithPhotos;box.make.selectAt(0,!1),box.make.clearFacetLabel(),box.model.selectAt(0,!1),box.model.clearFacetLabel(),box.sellerType.setState(new SellerState(!0,!0),!1),box.yearRange.low(null,!1,new RangeState(null,null)),box.yearRange.high(null,!1,new RangeState(null,null)),box.yearRange.lowElement.clearFacetLabel(),box.bodyStyle.clear(!1,!0),box.transmission.clear(!1,!0),box.fueltype.clear(!1,!0),box.exteriorColor.clear(!1,!0),box.drivetrain.clear(!1,!0),box.numberOfDoors.clear(!1,!0),box.seatingCapacity.clear(!1,!0),box.engine.clear(!1,!0),box.keywordInput.val(null),box.priceRange.setState(new RangeStateEx(null,null,box.priceRange.state.range),!1),box.kilometres.setState(new RangeStateEx(null,null,box.kilometres.state.range),!1),box.carState&&(box.carState.control("rfNew").toggle(!0,!1),box.carState.control("rfUsed").toggle(!0,!1),box.carState.control("rfDamaged").toggle(!1,!1),box.carState.control("rfPreOwned").toggle(!0,!1)),box.withPhotos.setState(new BooleanState(!0),!1),box.withPrice.setState(new BooleanState(!0),!1),box.withCarProof.setState(new BooleanState(!1),!1)},ResetSearch}();!function(PageOptionExtensions){function CreateSortOrderCookie(ms){var date=new Date;date.setFullYear(date.getFullYear()+1);var cookieName=ms==MicrositeType.TransportTrailers?"SortOrderTrailers":"SortOrder";(new CookieManager).addOrUpdate(new Cookie(cookieName,$("#sortBy").val(),"/",date))}function CreatePageSizeCookie(){var date=new Date;date.setFullYear(date.getFullYear()+1);(new CookieManager).addOrUpdate(new Cookie("PageSize",$("#pageSize").val(),"/",date))}PageOptionExtensions.SetupPageOptions=function(ms){$("#sortBy").change(function(){CreateSortOrderCookie(ms)}),$("#pageSize").change(function(){CreatePageSizeCookie()})},PageOptionExtensions.CreateSortOrderCookie=CreateSortOrderCookie,PageOptionExtensions.CreatePageSizeCookie=CreatePageSizeCookie,PageOptionExtensions.SetupSortOrderChangeTrigger=function(sortByJQuery,fsb){null!=sortByJQuery.val()&&fsb.executeSearch(fsb.getRefinementQuery(),new SearchOptions({IsRefinement:!1,IsPaging:!0,IsSortOrderChanged:!0}))},PageOptionExtensions.SetupPageSizeChangeTrigger=function(pageSizeJquery,fsb){var newValue=pageSizeJquery.val();null!=newValue&&(fsb.topValue=newValue,(window.srpDataLayerManager||new SrpDataLayerManager).addPageSizeChangedEvent(pageSizeJquery.attr("data-old"),newValue),fsb.executeSearch(fsb.getRefinementQuery(),new SearchOptions({IsRefinement:!1})))},PageOptionExtensions.SetupAlerts=function(){$("#searchExpansionWarning .alert").on("close.bs.alert",function(e){e.preventDefault(),$(e.target).parent().addClass("hidden")}),$("#searchExpansionCallToAction").on("click",function(e){(new FacetedResultsPage).resetSearch(!0)}),$("#zeroResultsWarning").on("close.bs.alert",function(e){e.preventDefault(),(new FacetedResultsPage).resetSearch(!0),(window.srpDataLayerManager||new SrpDataLayerManager).addClearSearchFiltersEvent(),$(e.target).parent().addClass("hidden")})}}(PageOptionExtensions||(PageOptionExtensions={}));var Pager=function(){function Pager($element,options,pagerItemClicked,builder){void 0===builder&&(builder=null),$element.on("click",function(event){var $source=$(event.target).parent();if($source.hasClass("page-item")){var pageNumber=Number($source.attr("data-page")),disabled=$source.hasClass("disabled"),active=$source.hasClass("active"),gtmManager=new SrpDataLayerManager,currentPage=$("ul.pagination .page-item.active").data("page"),position=$(event.currentTarget.parentNode).hasClass("pager-top")?"top":"bottom";gtmManager.headerClickPagination(currentPage,pageNumber,position),NaN===pageNumber||disabled||active||pagerItemClicked(pageNumber)}}),this.$element=$element,this.builder=null==builder?new PagerItemBuilder(options):builder}return Pager.prototype.build=function(currentPage,pageSize,totalCount){this.$element.empty(),totalCount<=pageSize?(this.$element.hide(),this.$element.parent().hide()):(this.$element.show(),this.$element.parent().show());var data=this.builder.buildItems(currentPage,pageSize,totalCount),$ul=$("<ul>",{class:"col-xs-12 pagination"});if(null!=data.first){var $first=$("<li class='first-page'>");this.setPagerItemElement($first,data.first,"first-page-link"),$ul.append($first)}for(var _i=0,_a=data.asList();_i<_a.length;_i++){var item=_a[_i],$li=$("<li>");this.setPagerItemElement($li,item,null),$ul.append($li)}if(null!=data.last){var $last=$("<li class='last-page'>");this.setPagerItemElement($last,data.last,null),$ul.append($last)}this.$element.append($ul)},Pager.prototype.setPagerItemElement=function($pagerItemElement,pagerItem,className){var $a=$("<a>").addClass(pagerItem.className).html(pagerItem.text);$pagerItemElement.addClass("page-item").attr("data-page",pagerItem.pageNumber).append($a),pagerItem.enabled||$pagerItemElement.addClass("disabled"),pagerItem.active&&$pagerItemElement.addClass("active")},Pager}(),PagerItemBuilder=function(){function PagerItemBuilder(options){this.maxNumberOfAds=1e5,this.options=options}return PagerItemBuilder.prototype.buildItems=function(currentPage,pageSize,totalCount){totalCount=totalCount>this.maxNumberOfAds?this.maxNumberOfAds:totalCount;for(var pageCount=Math.ceil(totalCount/pageSize),low=currentPage=(currentPage=currentPage<1?1:currentPage)>pageCount?pageCount:currentPage,high=currentPage,halfRange=this.options.numberOfPagesToDisplay/2,i=0;i<Math.floor(halfRange);i++)low-1>=1?low-=1:high+1<=pageCount&&(high+=1),high+1<=pageCount?high+=1:low-1>=1&&(low-=1);var result=new PagerData;result.first=new PagerItem(this.options.firstPageText,1,1!==currentPage,!1,"first-page-link"),this.options.bigStepSize>0&&currentPage>=halfRange+1&&(result.prevBig=new PagerItem("...",Math.max(1,low-Math.ceil(halfRange)),!0,!1,"prev-more-link")),result.pages=new Array;for(var i_1=low;i_1<=high;i_1++)result.pages.push(new PagerItem(String(i_1),i_1,!0,i_1===currentPage,"page-link-"+i_1));return currentPage<=pageCount-halfRange&&(result.nextBig=new PagerItem("...",Math.min(pageCount,high+Math.ceil(halfRange)),!0,!1,"next-more-link")),result.last=new PagerItem(this.options.lastPageText,pageCount,currentPage!==pageCount,!1,"last-page-link"),result},PagerItemBuilder}(),PagerOptions=function(){return function(firstPageText,lastPageText,numberOfPagesToDisplay,bigStepSize){this.firstPageText=firstPageText,this.lastPageText=lastPageText,this.numberOfPagesToDisplay=numberOfPagesToDisplay,this.bigStepSize=bigStepSize}}(),PagerItem=function(){return function(text,pageNumber,enabled,active,className){this.text=text,this.pageNumber=pageNumber,this.enabled=enabled,this.active=active,this.className=className}}(),PagerData=function(){function PagerData(){}return PagerData.prototype.asList=function(){var result=new Array;if(null!=this.prev&&result.push(this.prev),null!=this.prevBig&&result.push(this.prevBig),null!=this.pages)for(var i=0;i<this.pages.length;i++)result.push(this.pages[i]);return null!=this.nextBig&&result.push(this.nextBig),null!=this.next&&result.push(this.next),result},PagerData}(),aew=aew||{};aew.GoogleAdSenseByKeywordParameters=function(){},aew.GoogleAdSenseByKeyword=function(parameters){var self=this;this.googleAfsQueryValue=parameters.googleAfsQueryValue,this.isTest=parameters.isTest,this.language=parameters.language,this.backgroundColour=parameters.backgroundColour,$(document).ready(function(){var pageOptions={pubId:"pub-9528492990536307",query:self.googleAfsQueryValue,adtest:self.isTest,channel:"4970009658",hl:self.language},adblock1={container:"newAdSense1",number:3,fontFamily:"arial",colorBackground:self.backgroundColour};new google.ads.search.Ads(pageOptions,adblock1)})};var SearchStateManager=function(){function SearchStateManager(manager){this.cm=manager}return SearchStateManager.prototype.getState=function(){var searchState=this.cm.get("searchState");return null==searchState||null==searchState.value||""==searchState.value?null:JSON.parse(searchState.value)},SearchStateManager.prototype.updateState=function(make,model){var searchState=this.getState(),isUniqueSearch=!1;null!=searchState&&searchState.make==make&&(searchState.model==model||""===searchState.model&&null==model)||(isUniqueSearch=!0);var state={isUniqueSearch:isUniqueSearch,make:make,model:model},stateCookie=new Cookie("searchState",JSON.stringify(state));return this.cm.addOrUpdate(stateCookie),state},SearchStateManager}(),SearchLoading=function(){function SearchLoading(){}return SearchLoading.prototype.generate=function(count){for(var html="",i=0;i<count;i++)html+='<div class="col-xs-12 result-item blank-item">\n                <div class="col-xs-12 result-item-inner organic">\n                    <div class="col-xs-3 fixed-photo-column">\n                    </div>\n                    <div class="col-xs-9 empty-lines"></div>\n                    <div class="col-xs-9 empty-lines"></div>\n                    <div class="col-xs-5 empty-lines"></div>\n                </div>\n            </div>';return html},SearchLoading}(),_this=this,srpDataLayerManager=DataLayerFactory.srpDataLayer(),currentPosition=0,device=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),QuickView=function(){return function(id,ordinalPosition,title,titleWithTrim,status,listingType,isPrivate,isNewVehicle,hasVideo,hasCar360,make,model,imageUrl,price,deltaPrice,imageCount,priceGraphType,proximity,odometer,strikeThroughPrice,detailPageUrl,conditions,features,specs,postedDate,msrp,transmission,drivetrain,car360Link){void 0===id&&(id=""),void 0===ordinalPosition&&(ordinalPosition=0),void 0===title&&(title=""),void 0===titleWithTrim&&(titleWithTrim=""),void 0===status&&(status=""),void 0===listingType&&(listingType=""),void 0===isPrivate&&(isPrivate=!1),void 0===isNewVehicle&&(isNewVehicle=!1),void 0===hasVideo&&(hasVideo=!1),void 0===hasCar360&&(hasCar360=!1),void 0===make&&(make=""),void 0===model&&(model=""),void 0===imageUrl&&(imageUrl=""),void 0===price&&(price=0),void 0===deltaPrice&&(deltaPrice=""),void 0===imageCount&&(imageCount=0),void 0===priceGraphType&&(priceGraphType=0),void 0===proximity&&(proximity=""),void 0===odometer&&(odometer=0),void 0===strikeThroughPrice&&(strikeThroughPrice=0),void 0===detailPageUrl&&(detailPageUrl=""),void 0===conditions&&(conditions=[]),void 0===features&&(features=[]),void 0===specs&&(specs=[]),void 0===postedDate&&(postedDate=""),void 0===msrp&&(msrp=0),void 0===transmission&&(transmission=""),void 0===drivetrain&&(drivetrain=""),void 0===car360Link&&(car360Link=""),this.id=id,this.ordinalPosition=ordinalPosition,this.title=title,this.titleWithTrim=titleWithTrim,this.status=status,this.listingType=listingType,this.isPrivate=isPrivate,this.isNewVehicle=isNewVehicle,this.hasVideo=hasVideo,this.hasCar360=hasCar360,this.make=make,this.model=model,this.imageUrl=imageUrl,this.price=price,this.deltaPrice=deltaPrice,this.imageCount=imageCount,this.priceGraphType=priceGraphType,this.proximity=proximity,this.odometer=odometer,this.strikeThroughPrice=strikeThroughPrice,this.detailPageUrl=detailPageUrl,this.conditions=conditions,this.features=features,this.specs=specs,this.postedDate=postedDate,this.msrp=msrp,this.transmission=transmission,this.drivetrain=drivetrain,this.car360Link=car360Link}}(),showListing=function(elem,itemNumber){"quickViewNext"===elem.id?srpDataLayerManager.addQuickViewNext():"quickViewPrev"===elem.id&&srpDataLayerManager.addQuickViewPrev();var results=getListing(itemNumber);currentPosition=itemNumber;var html=(new QuickViewModal).generate(results[0],results[1]),listingContent=$(".listing-content");listingContent.html(""),listingContent.append(html),srpDataLayerManager.addQuickViewVehicle(itemNumber)},openQuickViewModal=function(elem){if(elem){var orderNumber=$(elem).data().adOrder,results=getListing(orderNumber);currentPosition=orderNumber;var html=(new QuickViewModal).create(results[0],results[1]),quickViewModal=$("#quickViewModal");quickViewModal.html(""),quickViewModal.append(html),quickViewModal.modal("show"),window.googleDfpManager.display("hulk-leaderboard-qv"),srpDataLayerManager.addQuickViewShow(),srpDataLayerManager.addQuickViewVehicle(orderNumber)}},getListing=function(elemId){var qvListModelsInStorage,selectedAdForQuickView=new QuickView,totalListings=0;if(elemId&&(totalListings=(qvListModelsInStorage=JSON.parse(localStorage.getItem("QuickViewSearchResults"))).length,qvListModelsInStorage&&qvListModelsInStorage.length)){var storedAd=qvListModelsInStorage[elemId-1];storedAd&&(selectedAdForQuickView=new QuickView(storedAd.Id||"",storedAd.OrdinalPosition||0,storedAd.Title||"",storedAd.TitleWithTrim||"",storedAd.Status||"",storedAd.ListingType||"",storedAd.IsPrivate,storedAd.IsNewVehicle,storedAd.HasVideo,storedAd.HasCar360,storedAd.Make||"",storedAd.Model||"",storedAd.ImageUrl||"",storedAd.Price||"",storedAd.DeltaPrice||"",storedAd.ImageCount||"",storedAd.PriceGraphType||-1,storedAd.Proximity||"",storedAd.Odometer||0,storedAd.StrikeThroughPrice||0,storedAd.DetailPageUrl||"",storedAd.ConditionList||[],storedAd.FeatureList||[],storedAd.SpecList||[],storedAd.PostedDate||"",storedAd.Msrp||0,storedAd.Transmission||"",storedAd.DriveTrain||"",storedAd.Car360Link||""))}return[selectedAdForQuickView,totalListings]},quickViewDetailsGa=function(){srpDataLayerManager.addQuickViewDetails()},quickViewGalleryGa=function(){srpDataLayerManager.addQuickViewGallery()};$("#quickViewModal").on("hidden.bs.modal",function(){srpDataLayerManager.addQuickViewClose()}),$(document).keydown(function(e){37===e.keyCode?$("#quickViewPrev").hasClass("disabled")||(_this.showListing(e,currentPosition-1),srpDataLayerManager.addQuickViewPrevArrowKey()):39===e.keyCode&&($("#quickViewNext").hasClass("disabled")||(_this.showListing(e,currentPosition+1),srpDataLayerManager.addQuickViewNextArrowKey()))});var InitTrader,QuickViewModal=function(){function QuickViewModal(){}return QuickViewModal.prototype.create=function(result,total){return'<div class="modal-dialog" role="document">\n        <div class="modal-content">\n\n            <div class="listing-content">'+this.generate(result,total)+'</div>\n            <div class="modal-footer">\n                <div id="hulk-leaderboard-qv" class="js-google-dfp"></div>\n            </div>\n        </div>\n        </div>'},QuickViewModal.prototype.generate=function(result,total){var index=result.ordinalPosition,nextListing=index<total?index+1:0,prevListing=index>1?index-1:0,strikeThroughPrice=null!=result.strikeThroughPrice&&result.strikeThroughPrice>0?'<span class="strikethrough-price"><strike>'+Ui.displayPrice(result.strikeThroughPrice)+"</strike></span>":"",msrp=result.isNewVehicle&&""!==result.msrp&&result.msrp>0?'<div class="msrp-price text-right">'+(new Resources).getSearchResource("adMsrp")+": "+Ui.displayPrice(result.msrp)+"</div>":"",imageUrl=result.imageUrl;null!=imageUrl&&""!=imageUrl||(imageUrl="/Images/Shared/blank.png");var language="en";"fr-CA"===CultureInfo.getCultureName(new CultureFormatProvider(!0))&&(language="fr");var badgeClass=this.getBadge(result),photoCount=result.imageCount>1?'<a class="photo click" href="'+result.detailPageUrl+'" onclick="quickViewGalleryGa()" data-list-numerical-position="'+index+'"><i class="fas fa-camera" aria-hidden="true" ></i><span class="photo-count" >'+result.imageCount+"</span></a>":"",car360Icon=result.hasCar360?'<a id="adid_lnkView360" class="car360 click" href="'+result.car360Link+'" onclick="quickViewGalleryGa()" data-list-numerical-position="'+index+'"><span class="car360-icon"></span></a>':"",videoIcon=result.hasVideo?'<a  class="video click" href="'+result.detailPageUrl+'" onclick="quickViewGalleryGa()" data-list-numerical-position="'+index+'"><i class="fas fa-video" aria-hidden="true"></i></a>':"",greatPrice=result.priceGraphType===PriceAnalysisCondition.GreatPrice?'<div class="price-badge great-popover" data-placement="bottom" data-original-title="" title=""><span class="svg_PriceAnalysisBadges vdp-great-'+language+'"></span></div>':"",goodPrice=result.priceGraphType===PriceAnalysisCondition.GoodPrice?'<div class="price-badge good-popover" data-placement="bottom" data-original-title="" title=""><span class="svg_PriceAnalysisBadges vdp-good-'+language+'"></span></div>':"",fairPrice=result.priceGraphType===PriceAnalysisCondition.FairPrice?'<div class="price-badge fair-popover" data-placement="bottom" data-original-title="" title=""><span class="svg_PriceAnalysisBadges vdp-fair-'+language+'"></span></div>':"",abovePrice=result.priceGraphType===PriceAnalysisCondition.AboveAverage?'<div class="price-badge above-popover" data-placement="bottom" data-original-title="" title=""><span class="svg_PriceAnalysisBadges vdp-above-'+language+'"></span></div>':"",deltaPrice=result.deltaPrice;result.priceGraphType===PriceAnalysisCondition.NotAppliable||result.PriceGraphType===PriceAnalysisCondition.ShowNoPrice||result.IsPrivate||result.isNewVehicle||null==result.deltaPrice?"contact"===badgeClass&&(deltaPrice='<div class="price-delta-text"><span >'+(new Resources).getSearchResource("deltaPriceContactDelaer")+"</span></div>"):deltaPrice='<div class="price-delta-text"><span class="'+badgeClass+'">'+result.deltaPrice+"</span></div>";var newCarBadge=result.isNewVehicle?'<div id="'+result.AdId+'_newCarBadgeModal" class="price-badge" data-placement="bottom"><span class="svg_newCarBadge new-car-'+language+'"></span></div>':"",privateBadge=result.isPrivate?'<div class="price-badge" data-placement="bottom"><span class="svg_privateBadge private-car-'+language+'"></span></div>':"",postedDate=result.isPrivate&&""!=result.postedDate?'<div class="days-posted"><span class="text-right">'+result.postedDate+"</span></div>":"",proximitySplit=result.proximity.split(/,(.+)/),proximity=null!=result.proximity?'<div><span class="proximity"><strong>'+proximitySplit[0]+",</strong> "+proximitySplit[1]+"</div>":"",odometerDealer=!result.isPrivate&&""!=result.odometer&&result.odometer>0?'<div><span class="odometer"><strong>'+(new Resources).getSearchResource("mileage")+"</strong> "+Ui.displayOdometer(result.odometer)+"</div>":"",odometerPrivate=result.isPrivate&&""!==result.odometer&&result.odometer>0?'<li><span class="odometer-icon"></span><span class="odometer">'+Ui.displayOdometer(result.odometer)+"</span></li>":"",transmission=result.isPrivate&&""!==result.transmission?'<li><span class="transmission-icon"></span><span class="transmission">'+result.transmission+"</span></li>":"",drivetrain=result.isPrivate&&""!==result.drivetrain?'<li><span class="drivetrain-icon"></span><span class="drivetrain">'+result.drivetrain+"</span></li>":"",privateListingDetails=result.isPrivate?'<ul class="private">\n                    '+odometerPrivate+"\n                    "+transmission+"\n                    "+drivetrain+"</ul>":"",featureList=result.isNewVehicle||result.isPrivate||void 0==result.features||0===result.features.length?"":"<div>\n                 <h5>"+(new Resources).getSearchResource("keyFeatures")+"</h5>\n                 "+this.makeList(result.features,"featureList").outerHTML+"\n                </div>",conditionsList=result.isNewVehicle||result.isPrivate||void 0==result.conditions||0===result.conditions.length?"":"<div>\n                 <h5>"+(new Resources).getSearchResource("keyConditions")+"</h5>\n                 "+this.makeList(result.conditions,"conditionsList").outerHTML+"\n             </div>",specsList=(result.isNewVehicle||!result.isPrivate&&""===featureList&&""===conditionsList)&&void 0!=result.specs&&0!==result.specs.length?"<div>\n                 <h5>"+(new Resources).getSearchResource("specs")+"</h5>\n                "+this.makeList(result.specs,"specsList").outerHTML+"\n              </div>":"";return'<div class="listing-nav-buttons">\n                <div class="prev"><button id="quickViewPrev" '+(prevListing>0?'onclick="showListing(this, '+prevListing+')"':"")+' class="btn btn-secondary '+(0===prevListing?"disabled":"")+'">'+(new Resources).getSearchResource("previousListing")+'</button></div>\n                <div class="next"><button id="quickViewNext" '+(nextListing>0?'onclick="showListing(this, '+nextListing+')"':"")+' class="btn btn-secondary  '+(0===nextListing?"disabled":"")+'">'+(new Resources).getSearchResource("nextListing")+'</button></div>\n            </div>\n            <div class="modal-header">\n                <button type="button" data-dismiss="modal" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n                <div class="modal-title">'+(null!=result.titleWithTrim?result.titleWithTrim:"")+'</div>\n            </div>\n            <div class="modal-body">\n                <div class="content-wrapper row row-eq-height">\n                    <div class="col-xs-12 col-sm-7 photo-wrapper">\n                        <a href="'+result.detailPageUrl+'"><img class="no-photo-placeholder-PassengerVehicles" src="'+imageUrl+'?w=400" width="400" height="300" /></a>\n                        <div class="image-captions">\n                            '+photoCount+"\n                            "+videoIcon+"\n                            "+car360Icon+'\n                        </div>\n                    </div>\n                    <div class="col-xs-12 col-sm-5 price-details-wrapper">\n                        <div class="price-wrapper '+badgeClass+'">\n                            '+greatPrice+"\n                            "+goodPrice+"\n                            "+fairPrice+"\n                            "+abovePrice+"\n                            "+newCarBadge+"\n                            "+privateBadge+'\n                            <span class="price-amount">'+Ui.displayPrice(result.price)+"</span>\n                            "+strikeThroughPrice+"\n                            "+deltaPrice+"\n                            "+msrp+"\n                            "+postedDate+'\n                        </div>\n                        <div class="details-wrapper '+(result.isPrivate?"private":"")+'">\n                             '+proximity+"\n                             "+odometerDealer+"\n                             "+featureList+"\n                             "+conditionsList+"\n                             "+privateListingDetails+"\n                             "+specsList+'\n                        </div>\n                    </div>\n                </div>\n\n                <div class="row control-buttons">\n                    <div class="col-xs-12 details-button text-center">\n                        <a id="quickViewDetailsBtn" href="'+result.detailPageUrl+'" onclick="quickViewDetailsGa()" class="btn btn-primary">'+(new Resources).getSearchResource("detailsButtonLabel")+"</a>\n                    </div>\n                </div>\n            </div>"},QuickViewModal.prototype.getBadge=function(result){var price_type="";return result.priceGraphType===PriceAnalysisCondition.GreatPrice?price_type="great":result.priceGraphType===PriceAnalysisCondition.GoodPrice?price_type="good":result.priceGraphType===PriceAnalysisCondition.FairPrice?price_type="fair":result.priceGraphType===PriceAnalysisCondition.AboveAverage?price_type="above":result.priceGraphType!==PriceAnalysisCondition.NotAppliable&&result.priceGraphType!==PriceAnalysisCondition.ShowNoPrice||result.isNewVehicle||result.isPrivate?result.isPrivate?price_type="private":result.isNewVehicle&&(price_type="newCar"):price_type="contact",price_type},QuickViewModal.prototype.makeList=function(sourceList,listId){var list=document.createElement("ul");list.setAttribute("id",listId);for(var i=0;i<sourceList.length;i++){var item=document.createElement("li");item.appendChild(document.createTextNode(sourceList[i])),list.appendChild(item)}return list},QuickViewModal}();!function(InitTrader){InitTrader.search=function(domLoad){var _this=this;$(document).ready(function(){domLoad&&(_this.callIfExists(Trader.initGoogleDfpManager),Trader.initSignInModal(),Trader.initSSOModal(),Trader.initSrpForVDP(),Trader.initGaEvents(),Trader.initFacetedSearch(),"function"==typeof Trader.initSearchModulesDataLayer&&Trader.initSearchModulesDataLayer(domLoad)),Trader.initSearchDataLayer(domLoad),Trader.initLazyLoad(),Trader.initGoogleDfp(),Trader.initAdsense(),_this.callIfExists(Trader.initSpc)})},InitTrader.advancedSearch=function(){var _this=this;$(document).ready(function(){_this.callIfExists(Trader.initGoogleDfpManager),_this.callIfExists(Trader.initSignInModal),_this.callIfExists(Trader.initSSOModal),_this.callIfExists(Trader.initAdvancedSearch),_this.callIfExists(Trader.initGoogleDfp)})},InitTrader.mobileSearch=function(domLoad){var _this=this;$(document).ready(function(){domLoad&&(_this.callIfExists(Trader.initGoogleDfpManager),_this.callIfExists(Trader.initGoogleDfp),Trader.initSignInModal(),Trader.initSSOModal(),Trader.initSrpForVDPMobile(),_this.callIfExists(Trader.initSplash),Trader.initFacetedSearch(),Trader.initInfiniteScroll(),Trader.initTopListings(),Trader.initDataList(),Trader.initSearchDataLayerMobile())})},InitTrader.dealerInventorySearch=function(domLoad){var _this=this;$(document).ready(function(){domLoad&&(_this.callIfExists(Trader.initGoogleDfpManager),Trader.initSignInModal(),Trader.initSSOModal(),Trader.initDealerGaEvents(),Trader.initFacetedSearch(),"function"==typeof Trader.initSearchModulesDataLayer&&Trader.initSearchModulesDataLayer(domLoad),_this.callIfExists(Trader.initDealerInventoryPage()),_this.callIfExists(Trader.setLinkBackSearchHeader)),Trader.initDealerLazyLoad(),_this.callIfExists(Trader.initSpc)}),Trader.initDealerSearchDataLayer(domLoad)},InitTrader.dealerInventoryMobileSearch=function(domLoad){var _this=this;$(document).ready(function(){domLoad&&(_this.callIfExists(Trader.initGoogleDfpManager),_this.callIfExists(Trader.initGoogleDfp),Trader.initSignInModal(),Trader.initSSOModal(),Trader.initSrpForVDPMobile(),_this.callIfExists(Trader.initSplash),Trader.initFacetedSearch(),Trader.initInfiniteScroll(),Trader.initTopListings(),Trader.initDataList(),_this.callIfExists(Trader.setLinkBackSearchHeader),Trader.initSearchDataLayerMobile(),_this.callIfExists(Trader.initDealerInventoryPage()))})}}(InitTrader||(InitTrader={}));var VideosModal=function(){function VideosModal(){}return VideosModal.prototype.openModal=function(videos,title){var expertVideoReviewsModal=$("#expertVideoReviewsModal");expertVideoReviewsModal.html(""),expertVideoReviewsModal.append(this.create(videos,title)),1==videos.length&&this.updateUIforSingleVideo(),expertVideoReviewsModal.modal("show")},VideosModal.prototype.create=function(_videos,title){return'<div class="modal-dialog" role="document">\n                        <div class="modal-content">\n                            <div class="listing-content">\n                                <div class="modal-header">\n                                    <button type="button" data-dismiss="modal" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n                                    <div class="modal-title">Watch <span class="titleMake">'+title+'</span> video reviews from the experts</div>\n                                </div>\n                                <div class="modal-body">\n                                    <div class="videoreviews">\n                                        <div class="overflow-wrapper">\n                                            <div class="demo-wrapper">\n                                                <div id="player"></div>\n                                                '+(_videos.length>1?this.generatePlaylistUI(_videos):"")+'\n                                                <div id="currentVideoTitle"></div>\n                                            </div>\n                                        </div>\n\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>'},VideosModal.prototype.generatePlaylistUI=function(newplayList){var resultHTML='<div id="js-playlists" class="playlists">\n                    <div id="js-playlist-template">\n                    <div class="playlist-switcher"></div >\n                    <div class="js-playlist playlist-container is-active">\n                    <ul id="expertVideoReviewsPlaylist" class="playlist">';for(var i in newplayList)resultHTML+='<li>\n                                        <div id="'+i+'" class="js-video-link playlist-item">\n                                                <div class="play-button-div">',""!=newplayList[i].ThumbnailUrl?resultHTML+='<img src="'+newplayList[i].ThumbnailUrl+'" >':resultHTML+='<img src="/Images/Pages/Results/VideoReview-NoImage.jpg">',resultHTML+='<span class="playlist-item-play-icon play-button-icon"><img src="/Images/SVG/Search/Play-Arrow.svg" /></span><span class="is-playing" style="display:none;">Playing</span> \n                                                </div>\n                                                <div>\n                                                    <span>'+newplayList[i].VideoTitle+'</span>\n                                                </div>\n                                        </div>\n                                        <div class="col-xs-12 playlist-line"></div>\n                                    </li>\n                                ';return resultHTML+="</ul>\n                    </div>\n                   </div>\n                </div>"},VideosModal.prototype.updateUIforSingleVideo=function(){$("#currentVideoTitle").addClass("singlevideo"),$("#expertVideoReviewsModal").find(".modal-dialog").addClass("singlevideo")},VideosModal.prototype.updatePlayingUI=function(playListItemElement){$("#expertVideoReviewsPlaylist").find(".playlist-item-play-icon").show(),$("#expertVideoReviewsPlaylist").find(".is-playing").hide(),$("#expertVideoReviewsPlaylist").find("img").css("filter","none"),playListItemElement.find(".playlist-item-play-icon").hide(),playListItemElement.find(".is-playing").show(),playListItemElement.find("img").css("filter","brightness(30%)")},VideosModal}(),MobileVideosModal=function(){function MobileVideosModal(){}return MobileVideosModal.prototype.openModal=function(videos,title){var expertMobileVideoReviewsModal=$("#expertMobileVideoReviewsModal");expertMobileVideoReviewsModal.html(""),expertMobileVideoReviewsModal.append(this.create(videos,title)),1==videos.length&&this.updateUIforSingleVideo(),expertMobileVideoReviewsModal.modal("show")},MobileVideosModal.prototype.create=function(_videos,title){var modal='<div class="modal-dialog" role="document">\n                           <div class="modal-content">\n                                <div class="modal-header">\n                                    <button type="button" data-dismiss="modal" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n                                    <div class="modal-title">Watch '+title+' video reviews from the experts</div>\n                                </div>\n                                <div class="videoReviewsDivisor"></div>\n                                <div class="row">';_videos.length>1?modal+='<div class="col-sm-7 expertVideoXS no-padding"> \n                                                        <div class="videoReviewPadding">\n                                                            <div id="player"></div>\n                                                        </div>\n                                                        <div class="videoreviews">\n                                                            <div class="overflow-wrapper">\n                                                                <div class="demo-wrapper">\n                                                                    <span id="currentMobileVideoTitle">There, there, now, just relax. You\'ve been asleep for almost nine hours now.</span>  \n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                  </div>\n                                                  <div class="col-sm-5 expertPlaylistXS no-padding"> \n                                                        <div class="mobileVideosReviewsPlaylist">\n                                                                '+(_videos.length>1?this.generatePlaylistUI(_videos):"")+"\n                                                        </div>\n                                                  </div>":modal+='\n                                                <div class="videoReviewPadding">\n                                                    <div id="player" ></div>\n                                                </div>\n                                                <div class="videoreviews">\n                                                    <div class="overflow-wrapper">\n                                                        <div class="demo-wrapper">\n                                                            <span id="currentMobileVideoTitle">There, there, now, just relax. You\'ve been asleep for almost nine hours now.</span>  \n                                                        </div>\n                                                    </div>\n                                                </div>';return modal+="</div>\n                        </div>\n                    </div>"},MobileVideosModal.prototype.generatePlaylistUI=function(newplayList){var resultHTML='<div id="js-playlists" class="playlists">\n                                <div id="js-playlist-template">\n                                        <div class="playlist-switcher"></div>\n                                        <div class="js-playlist playlist-container is-active">\n                                            <ul id="expertMobileVideoReviewsPlaylist" class="playlist">';for(var i in newplayList)resultHTML+='<li>\n                                                            <div id="'+i+'" class="js-video-link playlist-item">\n                                                                <div class="play-button-div col-sm-5 col-xs-5 no-padding">',""!=newplayList[i].ThumbnailUrl?resultHTML+='<img src="'+newplayList[i].ThumbnailUrl+'" class="responsiveImg">':resultHTML+='<img src="/Images/Pages/Results/VideoReview-NoImage.jpg" class="responsiveImg">',resultHTML+='<span class="playArrowOverlay"><img src="/Images/SVG/Search/Play-Arrow.svg" class="reponsiveIcon" /></span><span class="is-playing" style="display:none;">Playing</span>\n                                                                </div>\n                                                                <div class="col-sm-7 col-xs-7 mobileVideosReviewsTitle">\n                                                                    <span>'+newplayList[i].VideoTitle+'</span>\n                                                                </div>\n                                                            </div>\n                                                            <div class="playlist-line col-xs-12"></div>\n                                                    </li>';return resultHTML+="</ul>\n                                    </div>\n                                </div>\n                        </div>"},MobileVideosModal.prototype.updateUIforSingleVideo=function(){$("#currentMobileVideoTitle").addClass(""),$("#expertMobileVideoReviewsModal").find(".modal-dialog").addClass("expertSingleVideo")},MobileVideosModal.prototype.updatePlayingUI=function(playListItemElement){$("#expertMobileVideoReviewsPlaylist").find(".playlist-item-play-icon").show(),$("#expertMobileVideoReviewsPlaylist").find(".is-playing").hide(),$("#expertMobileVideoReviewsPlaylist").find("img").css("filter","none"),playListItemElement.find(".playlist-item-play-icon").hide(),playListItemElement.find(".is-playing").show(),playListItemElement.find("img").css("filter","brightness(30%)")},MobileVideosModal}(),videoReviewsDLManager=function(){function videoReviewsDLManager(){this.eventName="gtm_review_video",window.dataLayer||(window.dataLayer=new Array),this.dataLayer=window.dataLayer,window.videoReviewsDLManager||(window.videoReviewsDLManager=this)}return videoReviewsDLManager.prototype.videoWidgetImpression=function(VideoName){this.dataLayer.push({event:this.eventName,eventAction:"review video widget impression",eventLabel:this.FormatVideoName(VideoName)})},videoReviewsDLManager.prototype.videoWidgetClick=function(VideoName){this.dataLayer.push({event:this.eventName,eventAction:"review video widget click",eventLabel:this.FormatVideoName(VideoName)})},videoReviewsDLManager.prototype.videoPlayerStartEvent=function(VideoName){this.dataLayer.push({event:this.eventName,eventAction:"review video player start",eventLabel:this.FormatVideoName(VideoName),autoPlay:!0})},videoReviewsDLManager.prototype.preRollVideoStartEvent=function(VideoName){this.dataLayer.push({event:this.eventName,eventAction:"pre-roll video start",eventLabel:this.FormatVideoName(VideoName)})},videoReviewsDLManager.prototype.videoStartEvent=function(VideoName){this.dataLayer.push({event:this.eventName,eventAction:"review video start",eventLabel:this.FormatVideoName(VideoName)})},videoReviewsDLManager.prototype.videoStopEvent=function(VideoName,SecondsPlayed,PrerollSecondsPlayed){this.dataLayer.push({event:this.eventName,eventAction:"review video player stop",eventLabel:this.FormatVideoName(VideoName),secondsPlayed:SecondsPlayed,prerollSecondsPlayed:PrerollSecondsPlayed})},videoReviewsDLManager.prototype.videoFail=function(VideoName){this.dataLayer.push({event:this.eventName,eventAction:"review video fail",eventLabel:this.FormatVideoName(VideoName)})},videoReviewsDLManager.prototype.videoBufferStateEnded=function(VideoName,bufferingTime){this.dataLayer.push({event:this.eventName,eventAction:"review video buffering",eventLabel:this.FormatVideoName(VideoName),eventValue:bufferingTime})},videoReviewsDLManager.prototype.FormatVideoName=function(VideoName){return void 0!=VideoName?VideoName.toLowerCase():""},videoReviewsDLManager}();!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a,b){function c(){return new Date(Date.UTC.apply(Date,arguments))}function d(){var a=new Date;return c(a.getFullYear(),a.getMonth(),a.getDate())}function f(a){return function(){return this[a].apply(this,arguments)}}function i(b){var c={};if(q[b]||(b=b.split("-")[0],q[b])){var d=q[b];return a.each(p,function(a,b){b in d&&(c[b]=d[b])}),c}}var j=function(){var b={get:function(a){return this.slice(a)[0]},contains:function(a){for(var b=a&&a.valueOf(),c=0,d=this.length;d>c;c++)if(this[c].valueOf()===b)return c;return-1},remove:function(a){this.splice(a,1)},replace:function(b){b&&(a.isArray(b)||(b=[b]),this.clear(),this.push.apply(this,b))},clear:function(){this.length=0},copy:function(){var a=new j;return a.replace(this),a}};return function(){var c=[];return c.push.apply(c,arguments),a.extend(c,b),c}}(),k=function(b,c){a(b).data("datepicker",this),this._process_options(c),this.dates=new j,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=a(b),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.inputField.length,this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=a(r.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(a,b){return parseInt(b)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};k.prototype={constructor:k,_resolveViewName:function(a,c){return 0===a||"days"===a||"month"===a?0:1===a||"months"===a||"year"===a?1:2===a||"years"===a||"decade"===a?2:3===a||"decades"===a||"century"===a?3:4===a||"centuries"===a||"millennium"===a?4:c!==b&&c},_check_template:function(c){try{return c!==b&&""!==c&&((c.match(/[<>]/g)||[]).length<=0||a(c).length>0)}catch(e){return!1}},_process_options:function(b){this._o=a.extend({},this._o,b);var e=this.o=a.extend({},this._o),f=e.language;q[f]||(f=f.split("-")[0],q[f]||(f=o.language)),e.language=f,e.startView=this._resolveViewName(e.startView,0),e.minViewMode=this._resolveViewName(e.minViewMode,0),e.maxViewMode=this._resolveViewName(e.maxViewMode,4),e.startView=Math.min(e.startView,e.maxViewMode),e.startView=Math.max(e.startView,e.minViewMode),!0!==e.multidate&&(e.multidate=Number(e.multidate)||!1,!1!==e.multidate&&(e.multidate=Math.max(0,e.multidate))),e.multidateSeparator=String(e.multidateSeparator),e.weekStart%=7,e.weekEnd=(e.weekStart+6)%7;var g=r.parseFormat(e.format);e.startDate!==-1/0&&(e.startDate?e.startDate instanceof Date?e.startDate=this._local_to_utc(this._zero_time(e.startDate)):e.startDate=r.parseDate(e.startDate,g,e.language,e.assumeNearbyYear):e.startDate=-1/0),e.endDate!==1/0&&(e.endDate?e.endDate instanceof Date?e.endDate=this._local_to_utc(this._zero_time(e.endDate)):e.endDate=r.parseDate(e.endDate,g,e.language,e.assumeNearbyYear):e.endDate=1/0),e.daysOfWeekDisabled=e.daysOfWeekDisabled||[],a.isArray(e.daysOfWeekDisabled)||(e.daysOfWeekDisabled=e.daysOfWeekDisabled.split(/[,\s]*/)),e.daysOfWeekDisabled=a.map(e.daysOfWeekDisabled,function(a){return parseInt(a,10)}),e.daysOfWeekHighlighted=e.daysOfWeekHighlighted||[],a.isArray(e.daysOfWeekHighlighted)||(e.daysOfWeekHighlighted=e.daysOfWeekHighlighted.split(/[,\s]*/)),e.daysOfWeekHighlighted=a.map(e.daysOfWeekHighlighted,function(a){return parseInt(a,10)}),e.datesDisabled=e.datesDisabled||[],a.isArray(e.datesDisabled)||(e.datesDisabled=[e.datesDisabled]),e.datesDisabled=a.map(e.datesDisabled,function(a){return r.parseDate(a,g,e.language,e.assumeNearbyYear)});var h=String(e.orientation).toLowerCase().split(/\s+/g),i=e.orientation.toLowerCase();if(h=a.grep(h,function(a){return/^auto|left|right|top|bottom$/.test(a)}),e.orientation={x:"auto",y:"auto"},i&&"auto"!==i)if(1===h.length)switch(h[0]){case"top":case"bottom":e.orientation.y=h[0];break;case"left":case"right":e.orientation.x=h[0]}else i=a.grep(h,function(a){return/^left|right$/.test(a)}),e.orientation.x=i[0]||"auto",i=a.grep(h,function(a){return/^top|bottom$/.test(a)}),e.orientation.y=i[0]||"auto";if(e.defaultViewDate){var j=e.defaultViewDate.year||(new Date).getFullYear(),k=e.defaultViewDate.month||0,l=e.defaultViewDate.day||1;e.defaultViewDate=c(j,k,l)}else e.defaultViewDate=d()},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(d=b,e=a[f][1]):3===a[f].length&&(d=a[f][1],e=a[f][2]),c.on(e,d)},_unapplyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(e=b,d=a[f][1]):3===a[f].length&&(e=a[f][1],d=a[f][2]),c.off(d,e)},_buildEvents:function(){var b={keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this),paste:a.proxy(this.paste,this)};!0===this.o.showOnFocus&&(b.focus=a.proxy(this.show,this)),this.isInput?this._events=[[this.element,b]]:this.component&&this.hasInput?this._events=[[this.inputField,b],[this.component,{click:a.proxy(this.show,this)}]]:this._events=[[this.element,{click:a.proxy(this.show,this),keydown:a.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":a.proxy(function(a){this.update(a.date)},this)}]),this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.dates.get(-1),e=this._utc_to_local(d);this.element.trigger({type:b,date:e,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(a,b){0===arguments.length?(a=this.dates.length-1,b=this.o.format):"string"==typeof a&&(b=a,a=this.dates.length-1),b=b||this.o.format;var c=this.dates.get(a);return r.formatDate(c,b,this.o.language)},this)})},show:function(){return this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly?void 0:(this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&a(this.element).blur(),this)},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(b){var c;if(b.originalEvent.clipboardData&&b.originalEvent.clipboardData.types&&-1!==a.inArray("text/plain",b.originalEvent.clipboardData.types))c=b.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;c=window.clipboardData.getData("Text")}this.setDate(c),this.update(),b.preventDefault()},_utc_to_local:function(a){return a&&new Date(a.getTime()+6e4*a.getTimezoneOffset())},_local_to_utc:function(a){return a&&new Date(a.getTime()-6e4*a.getTimezoneOffset())},_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var a=this.dates.get(-1);return void 0!==a?new Date(a):null},clearDates:function(){this.inputField&&this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,b),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,a.map(b,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:f("setDates"),setUTCDate:f("setUTCDates"),remove:f("destroy"),setValue:function(){var a=this.getFormattedDate();return this.inputField.val(a),this},getFormattedDate:function(c){c===b&&(c=this.o.format);var d=this.o.language;return a.map(this.dates,function(a){return r.formatDate(a,c,d)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(a){return this._process_options({startDate:a}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(a){return this._process_options({endDate:a}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(a){return this._process_options({daysOfWeekDisabled:a}),this.update(),this.updateNavArrows(),this},setDaysOfWeekHighlighted:function(a){return this._process_options({daysOfWeekHighlighted:a}),this.update(),this},setDatesDisabled:function(a){this._process_options({datesDisabled:a}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var b=this.picker.outerWidth(),c=this.picker.outerHeight(),e=a(this.o.container),f=e.width(),g="body"===this.o.container?a(document).scrollTop():e.scrollTop(),h=e.offset(),i=[];this.element.parents().each(function(){var b=a(this).css("z-index");"auto"!==b&&0!==b&&i.push(parseInt(b))});var j=Math.max.apply(Math,i)+this.o.zIndexOffset,k=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),m=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),n=k.left-h.left,o=k.top-h.top;"body"!==this.o.container&&(o+=g),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(n-=b-m)):k.left<0?(this.picker.addClass("datepicker-orient-left"),n-=k.left-10):n+b>f?(this.picker.addClass("datepicker-orient-right"),n+=m-b):this.picker.addClass("datepicker-orient-left");var q=this.o.orientation.y;if("auto"===q&&(q=0>-g+o-c?"bottom":"top"),this.picker.addClass("datepicker-orient-"+q),"top"===q?o-=c+parseInt(this.picker.css("padding-top")):o+=l,this.o.rtl){var r=f-(n+m);this.picker.css({top:o,right:r,zIndex:j})}else this.picker.css({top:o,left:n,zIndex:j});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var b=this.dates.copy(),c=[],d=!1;return arguments.length?(a.each(arguments,a.proxy(function(a,b){b instanceof Date&&(b=this._local_to_utc(b)),c.push(b)},this)),d=!0):(c=(c=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?c.split(this.o.multidateSeparator):[c],delete this.element.data().date),c=a.map(c,a.proxy(function(a){return r.parseDate(a,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),c=a.grep(c,a.proxy(function(a){return!this.dateWithinRange(a)||!a},this),!0),this.dates.replace(c),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate,d?this.setValue():c.length&&String(b)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&b.length&&this._trigger("clearDate"),this.fill(),this.element.change(),this},fillDow:function(){var b=this.o.weekStart,c="<tr>";for(this.o.calendarWeeks&&(this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(a,b){return parseInt(b)+1}),c+='<th class="cw">&#160;</th>');b<this.o.weekStart+7;)c+='<th class="dow',a.inArray(b,this.o.daysOfWeekDisabled)>-1&&(c+=" disabled"),c+='">'+q[this.o.language].daysMin[b++%7]+"</th>";c+="</tr>",this.picker.find(".datepicker-days thead").append(c)},fillMonths:function(){for(var a=this._utc_to_local(this.viewDate),b="",c=0;12>c;){b+='<span class="month'+(a&&a.getMonth()===c?" focused":"")+'">'+q[this.o.language].monthsShort[c++]+"</span>"}this.picker.find(".datepicker-months td").html(b)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range,this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),f=new Date;return b.getUTCFullYear()<d||b.getUTCFullYear()===d&&b.getUTCMonth()<e?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()===d&&b.getUTCMonth()>e)&&c.push("new"),this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&c.push("focused"),this.o.todayHighlight&&b.getUTCFullYear()===f.getFullYear()&&b.getUTCMonth()===f.getMonth()&&b.getUTCDate()===f.getDate()&&c.push("today"),-1!==this.dates.contains(b)&&c.push("active"),this.dateWithinRange(b)||c.push("disabled"),this.dateIsDisabled(b)&&c.push("disabled","disabled-date"),-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekHighlighted)&&c.push("highlighted"),this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),-1!==a.inArray(b.valueOf(),this.range)&&c.push("selected"),b.valueOf()===this.range[0]&&c.push("range-start"),b.valueOf()===this.range[this.range.length-1]&&c.push("range-end")),c},_fill_yearsView:function(c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u;for(k="",l=this.picker.find(c),m=parseInt(g/e,10)*e,o=parseInt(h/f,10)*f,p=parseInt(i/f,10)*f,n=a.map(this.dates,function(a){return parseInt(a.getUTCFullYear()/f,10)*f}),l.find(".datepicker-switch").text(m+"-"+(m+9*f)),q=m-f,r=-1;11>r;r+=1)s=[d],t=null,-1===r?s.push("old"):10===r&&s.push("new"),-1!==a.inArray(q,n)&&s.push("active"),(o>q||q>p)&&s.push("disabled"),q===this.viewDate.getFullYear()&&s.push("focused"),j!==a.noop&&((u=j(new Date(q,0,1)))===b?u={}:"boolean"==typeof u?u={enabled:u}:"string"==typeof u&&(u={classes:u}),!1===u.enabled&&s.push("disabled"),u.classes&&(s=s.concat(u.classes.split(/\s+/))),u.tooltip&&(t=u.tooltip)),k+='<span class="'+s.join(" ")+'"'+(t?' title="'+t+'"':"")+">"+q+"</span>",q+=f;l.find("td").html(k)},fill:function(){var d,e,f=new Date(this.viewDate),g=f.getUTCFullYear(),h=f.getUTCMonth(),i=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,j=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,k=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,m=q[this.o.language].today||q.en.today||"",n=q[this.o.language].clear||q.en.clear||"",o=q[this.o.language].titleFormat||q.en.titleFormat;if(!isNaN(g)&&!isNaN(h)){this.picker.find(".datepicker-days .datepicker-switch").text(r.formatDate(f,o,this.o.language)),this.picker.find("tfoot .today").text(m).toggle(!1!==this.o.todayBtn),this.picker.find("tfoot .clear").text(n).toggle(!1!==this.o.clearBtn),this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title),this.updateNavArrows(),this.fillMonths();var p=c(g,h-1,28),s=r.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(s),p.setUTCDate(s-(p.getUTCDay()-this.o.weekStart+7)%7);var t=new Date(p);p.getUTCFullYear()<100&&t.setUTCFullYear(p.getUTCFullYear()),t.setUTCDate(t.getUTCDate()+42),t=t.valueOf();for(var u,v=[];p.valueOf()<t;){if(p.getUTCDay()===this.o.weekStart&&(v.push("<tr>"),this.o.calendarWeeks)){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),x=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),y=new Date(Number(y=c(x.getUTCFullYear(),0,1))+(11-y.getUTCDay())%7*864e5),z=(x-y)/864e5/7+1;v.push('<td class="cw">'+z+"</td>")}(u=this.getClassNames(p)).push("day"),this.o.beforeShowDay!==a.noop&&((e=this.o.beforeShowDay(this._utc_to_local(p)))===b?e={}:"boolean"==typeof e?e={enabled:e}:"string"==typeof e&&(e={classes:e}),!1===e.enabled&&u.push("disabled"),e.classes&&(u=u.concat(e.classes.split(/\s+/))),e.tooltip&&(d=e.tooltip)),u=a.unique(u),v.push('<td class="'+u.join(" ")+'"'+(d?' title="'+d+'"':"")+">"+p.getUTCDate()+"</td>"),d=null,p.getUTCDay()===this.o.weekEnd&&v.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(v.join(""));var A=q[this.o.language].monthsTitle||q.en.monthsTitle||"Months",B=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?A:g).end().find("span").removeClass("active");if(a.each(this.dates,function(a,b){b.getUTCFullYear()===g&&B.eq(b.getUTCMonth()).addClass("active")}),(i>g||g>k)&&B.addClass("disabled"),g===i&&B.slice(0,j).addClass("disabled"),g===k&&B.slice(l+1).addClass("disabled"),this.o.beforeShowMonth!==a.noop){var C=this;a.each(B,function(c,d){var e=new Date(g,c,1),f=C.o.beforeShowMonth(e);f===b?f={}:"boolean"==typeof f?f={enabled:f}:"string"==typeof f&&(f={classes:f}),!1!==f.enabled||a(d).hasClass("disabled")||a(d).addClass("disabled"),f.classes&&a(d).addClass(f.classes),f.tooltip&&a(d).prop("title",f.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,1,g,i,k,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,10,g,i,k,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,100,g,i,k,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&b<=this.o.startDate.getUTCFullYear()&&c<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()&&c>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:case 3:case 4:this.o.startDate!==-1/0&&b<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(b){var e,f,g,h,i,j,k;b.preventDefault(),b.stopPropagation(),(e=a(b.target)).hasClass("datepicker-switch")&&this.showMode(1);var l=e.closest(".prev, .next");l.length>0&&(f=r.modes[this.viewMode].navStep*(l.hasClass("prev")?-1:1),0===this.viewMode?(this.viewDate=this.moveMonth(this.viewDate,f),this._trigger("changeMonth",this.viewDate)):(this.viewDate=this.moveYear(this.viewDate,f),1===this.viewMode&&this._trigger("changeYear",this.viewDate)),this.fill()),e.hasClass("today")&&!e.hasClass("day")&&(this.showMode(-2),this._setDate(d(),"linked"===this.o.todayBtn?null:"view")),e.hasClass("clear")&&this.clearDates(),e.hasClass("disabled")||(e.hasClass("day")&&(g=parseInt(e.text(),10)||1,h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),e.hasClass("old")&&(0===i?(i=11,h-=1,j=!0,k=!0):(i-=1,j=!0)),e.hasClass("new")&&(11===i?(i=0,h+=1,j=!0,k=!0):(i+=1,j=!0)),this._setDate(c(h,i,g)),k&&this._trigger("changeYear",this.viewDate),j&&this._trigger("changeMonth",this.viewDate)),e.hasClass("month")&&(this.viewDate.setUTCDate(1),g=1,i=e.parent().find("span").index(e),h=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(i),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode?(this._setDate(c(h,i,g)),this.showMode()):this.showMode(-1),this.fill()),(e.hasClass("year")||e.hasClass("decade")||e.hasClass("century"))&&(this.viewDate.setUTCDate(1),g=1,i=0,h=parseInt(e.text(),10)||0,this.viewDate.setUTCFullYear(h),e.hasClass("year")&&(this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(c(h,i,g))),e.hasClass("decade")&&(this._trigger("changeDecade",this.viewDate),3===this.o.minViewMode&&this._setDate(c(h,i,g))),e.hasClass("century")&&(this._trigger("changeCentury",this.viewDate),4===this.o.minViewMode&&this._setDate(c(h,i,g))),this.showMode(-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&a(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(a){var b=this.dates.contains(a);if(a||this.dates.clear(),-1!==b?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(b):!1===this.o.multidate?(this.dates.clear(),this.dates.push(a)):this.dates.push(a),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(a,b){b&&"date"!==b||this._toggle_multidate(a&&new Date(a)),b&&"view"!==b||(this.viewDate=a&&new Date(a)),this.fill(),this.setValue(),b&&"view"===b||this._trigger("changeDate"),this.inputField&&this.inputField.change(),!this.o.autoclose||b&&"date"!==b||this.hide()},moveDay:function(a,b){var c=new Date(a);return c.setUTCDate(a.getUTCDate()+b),c},moveWeek:function(a,b){return this.moveDay(a,7*b)},moveMonth:function(a,b){if(!function(a){return a&&!isNaN(a.getTime())}(a))return this.o.defaultViewDate;if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),h=e.getUTCMonth(),i=Math.abs(b);if(b=b>0?1:-1,1===i)d=-1===b?function(){return e.getUTCMonth()===h}:function(){return e.getUTCMonth()!==c},c=h+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var j=0;i>j;j++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!==e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},moveAvailableDate:function(a,b,c){do{if(a=this[c](a,b),!this.dateWithinRange(a))return!1;c="moveDay"}while(this.dateIsDisabled(a));return a},weekOfDateIsDisabled:function(b){return-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(b){return this.weekOfDateIsDisabled(b)||a.grep(this.o.datesDisabled,function(a){return function(a,b){return a.getUTCFullYear()===b.getUTCFullYear()&&a.getUTCMonth()===b.getUTCMonth()&&a.getUTCDate()===b.getUTCDate()}(b,a)}).length>0},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":visible")){var b,c,d=!1,e=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),a.preventDefault(),a.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;b=37===a.keyCode||38===a.keyCode?-1:1,0===this.viewMode?a.ctrlKey?(c=this.moveAvailableDate(e,b,"moveYear"))&&this._trigger("changeYear",this.viewDate):a.shiftKey?(c=this.moveAvailableDate(e,b,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===a.keyCode||39===a.keyCode?c=this.moveAvailableDate(e,b,"moveDay"):this.weekOfDateIsDisabled(e)||(c=this.moveAvailableDate(e,b,"moveWeek")):1===this.viewMode?((38===a.keyCode||40===a.keyCode)&&(b*=4),c=this.moveAvailableDate(e,b,"moveMonth")):2===this.viewMode&&((38===a.keyCode||40===a.keyCode)&&(b*=4),c=this.moveAvailableDate(e,b,"moveYear")),c&&(this.focusDate=this.viewDate=c,this.setValue(),this.fill(),a.preventDefault());break;case 13:if(!this.o.forceParse)break;e=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(e),d=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(a.preventDefault(),a.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}d&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField&&this.inputField.change())}else(40===a.keyCode||27===a.keyCode)&&(this.show(),a.stopPropagation())},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+a))),this.picker.children("div").hide().filter(".datepicker-"+r.modes[this.viewMode].clsName).show(),this.updateNavArrows()}};var l=function(b,c){a(b).data("datepicker",this),this.element=a(b),this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a}),delete c.inputs,n.call(a(this.inputs),c).on("changeDate",a.proxy(this.dateUpdated,this)),this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")}),this.updateDates()};l.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()}),this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){if(!this.updating){this.updating=!0;var c=a(b.target).data("datepicker");if(void 0!==c){var d=c.getUTCDate(),e=a.inArray(b.target,this.inputs),f=e-1,g=e+1,h=this.inputs.length;if(-1!==e){if(a.each(this.pickers,function(a,b){b.getUTCDate()||b.setUTCDate(d)}),d<this.dates[f])for(;f>=0&&d<this.dates[f];)this.pickers[f--].setUTCDate(d);else if(d>this.dates[g])for(;h>g&&d>this.dates[g];)this.pickers[g++].setUTCDate(d);this.updateDates(),delete this.updating}}}},remove:function(){a.map(this.pickers,function(a){a.remove()}),delete this.element.data().datepicker}};var m=a.fn.datepicker,n=function(c){var e,d=Array.apply(null,arguments);if(d.shift(),this.each(function(){var b=a(this),f=b.data("datepicker"),g="object"==typeof c&&c;if(!f){var j=function(b,c){function d(a,b){return b.toLowerCase()}var f=a(b).data(),g={},h=new RegExp("^"+c.toLowerCase()+"([A-Z])");for(var i in c=new RegExp("^"+c.toLowerCase()),f)c.test(i)&&(g[i.replace(h,d)]=f[i]);return g}(this,"date"),n=i(a.extend({},o,j,g).language),p=a.extend({},o,n,j,g);b.hasClass("input-daterange")||p.inputs?(a.extend(p,{inputs:p.inputs||b.find("input").toArray()}),f=new l(this,p)):f=new k(this,p),b.data("datepicker",f)}"string"==typeof c&&"function"==typeof f[c]&&(e=f[c].apply(f,d))}),e===b||e instanceof k||e instanceof l)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+c+" function)");return e};a.fn.datepicker=n;var o=a.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:a.noop,beforeShowMonth:a.noop,beforeShowYear:a.noop,beforeShowDecade:a.noop,beforeShowCentury:a.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&laquo;",rightArrow:"&raquo;"}},p=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=k;var q=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},r={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"decades",navFnc:"FullDecade",navStep:100},{clsName:"centuries",navFnc:"FullCentury",navStep:1e3}],isLeapYear:function(a){return a%4==0&&a%100!=0||a%400==0},getDaysInMonth:function(a,b){return[31,r.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(a){if("function"==typeof a.toValue&&"function"==typeof a.toDisplay)return a;var b=a.replace(this.validParts,"\0").split("\0"),c=a.match(this.validParts);if(!b||!b.length||!c||0===c.length)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(e,f,g,h){function i(a,b){return!0===b&&(b=10),100>a&&((a+=2e3)>(new Date).getFullYear()+b&&(a-=100)),a}function j(){var a=this.slice(0,s[n].length),b=s[n].slice(0,a.length);return a.toLowerCase()===b.toLowerCase()}if(!e)return b;if(e instanceof Date)return e;if("string"==typeof f&&(f=r.parseFormat(f)),f.toValue)return f.toValue(e,f,g);var l,m,n,o,p=/([\-+]\d+)([dmwy])/,s=e.match(/([\-+]\d+)([dmwy])/g),t={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},u={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e)){for(e=new Date,n=0;n<s.length;n++)l=p.exec(s[n]),m=parseInt(l[1]),o=t[l[2]],e=k.prototype[o](e,m);return c(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}if(void 0!==u[e]&&(s=(e=u[e]).match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e))){for(e=new Date,n=0;n<s.length;n++)l=p.exec(s[n]),m=parseInt(l[1]),o=t[l[2]],e=k.prototype[o](e,m);return c(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}s=e&&e.match(this.nonpunctuation)||[],e=new Date;var v,w,x={},y=["yyyy","yy","M","MM","m","mm","d","dd"],z={yyyy:function(a,b){return a.setUTCFullYear(h?i(b,h):b)},yy:function(a,b){return a.setUTCFullYear(h?i(b,h):b)},m:function(a,b){if(isNaN(a))return a;for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};z.M=z.MM=z.mm=z.m,z.dd=z.d,e=d();var A=f.parts.slice();if(s.length!==A.length&&(A=a(A).filter(function(b,c){return-1!==a.inArray(c,y)}).toArray()),s.length===A.length){var B,C,D;for(n=0,B=A.length;B>n;n++){if(v=parseInt(s[n],10),l=A[n],isNaN(v))switch(l){case"MM":w=a(q[g].months).filter(j),v=a.inArray(w[0],q[g].months)+1;break;case"M":w=a(q[g].monthsShort).filter(j),v=a.inArray(w[0],q[g].monthsShort)+1}x[l]=v}for(n=0;n<y.length;n++)(D=y[n])in x&&!isNaN(x[D])&&(C=new Date(e),z[D](C,x[D]),isNaN(C)||(e=C))}return e},formatDate:function(b,c,d){if(!b)return"";if("string"==typeof c&&(c=r.parseFormat(c)),c.toDisplay)return c.toDisplay(b,c,d);var e={d:b.getUTCDate(),D:q[d].daysShort[b.getUTCDay()],DD:q[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:q[d].monthsShort[b.getUTCMonth()],MM:q[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,b=[];for(var f=a.extend([],c.separators),g=0,h=c.parts.length;h>=g;g++)f.length&&b.push(f.shift()),b.push(e[c.parts[g]]);return b.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};r.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+r.headTemplate+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+"</table></div></div>",a.fn.datepicker.DPGlobal=r,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=m,this},a.fn.datepicker.version="1.6.1",a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),n.call(c,"show"))}),a(function(){n.call(a('[data-provide="datepicker-inline"]'))})}),jQuery.fn.datepicker.dates.fr={days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],daysShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],daysMin:["d","l","ma","me","j","v","s"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthsShort:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],today:"Aujourd'hui",monthsTitle:"Mois",clear:"Effacer",weekStart:1,format:"dd/mm/yyyy"},function($){function Inputmask(alias,options){return this instanceof Inputmask?($.isPlainObject(alias)?options=alias:(options=options||{}).alias=alias,this.el=void 0,this.opts=$.extend(!0,{},this.defaults,options),this.noMasksCache=options&&void 0!==options.definitions,this.userOptions=options||{},this.events={},this.dataAttribute="data-inputmask",void this.resolveAlias(this.opts.alias,options,this.opts)):new Inputmask(alias,options)}function generateMaskSet(opts,nocache){function generateMask(mask,metadata,opts){if(null!==mask&&""!==mask){if(1===mask.length&&!1===opts.greedy&&0!==opts.repeat&&(opts.placeholder=""),opts.repeat>0||"*"===opts.repeat||"+"===opts.repeat){var repeatStart="*"===opts.repeat?0:"+"===opts.repeat?1:opts.repeat;mask=opts.groupmarker.start+mask+opts.groupmarker.end+opts.quantifiermarker.start+repeatStart+","+opts.repeat+opts.quantifiermarker.end}var masksetDefinition;return void 0===Inputmask.prototype.masksCache[mask]||!0===nocache?(masksetDefinition={mask:mask,maskToken:Inputmask.prototype.analyseMask(mask,opts),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:metadata,maskLength:void 0},!0!==nocache&&(Inputmask.prototype.masksCache[opts.numericInput?mask.split("").reverse().join(""):mask]=masksetDefinition,masksetDefinition=$.extend(!0,{},Inputmask.prototype.masksCache[opts.numericInput?mask.split("").reverse().join(""):mask]))):masksetDefinition=$.extend(!0,{},Inputmask.prototype.masksCache[opts.numericInput?mask.split("").reverse().join(""):mask]),masksetDefinition}}var ms;if($.isFunction(opts.mask)&&(opts.mask=opts.mask(opts)),$.isArray(opts.mask)){if(opts.mask.length>1){opts.keepStatic=null===opts.keepStatic||opts.keepStatic;var altMask=opts.groupmarker.start;return $.each(opts.numericInput?opts.mask.reverse():opts.mask,function(ndx,msk){altMask.length>1&&(altMask+=opts.groupmarker.end+opts.alternatormarker+opts.groupmarker.start),altMask+=void 0===msk.mask||$.isFunction(msk.mask)?msk:msk.mask}),generateMask(altMask+=opts.groupmarker.end,opts.mask,opts)}opts.mask=opts.mask.pop()}return opts.mask&&(ms=void 0===opts.mask.mask||$.isFunction(opts.mask.mask)?generateMask(opts.mask,opts.mask,opts):generateMask(opts.mask.mask,opts.mask,opts)),ms}function maskScope(actionObj,maskset,opts){function getMaskTemplate(baseOnInput,minimalPos,includeMode){minimalPos=minimalPos||0;var ndxIntlzr,test,testPos,maskTemplate=[],pos=0,lvp=getLastValidPosition();-1===(maxLength=void 0!==el?el.maxLength:void 0)&&(maxLength=void 0);do{!0===baseOnInput&&getMaskSet().validPositions[pos]?(test=(testPos=getMaskSet().validPositions[pos]).match,ndxIntlzr=testPos.locator.slice(),maskTemplate.push(!0===includeMode?testPos.input:!1===includeMode?test.nativeDef:getPlaceholder(pos,test))):(test=(testPos=getTestTemplate(pos,ndxIntlzr,pos-1)).match,ndxIntlzr=testPos.locator.slice(),(!1===opts.jitMasking||pos<lvp||Number.isFinite(opts.jitMasking)&&opts.jitMasking>pos)&&maskTemplate.push(!1===includeMode?test.nativeDef:getPlaceholder(pos,test))),pos++}while((void 0===maxLength||pos<maxLength)&&(null!==test.fn||""!==test.def)||minimalPos>pos);return""===maskTemplate[maskTemplate.length-1]&&maskTemplate.pop(),getMaskSet().maskLength=pos+1,maskTemplate}function getMaskSet(){return maskset}function resetMaskSet(soft){var maskset=getMaskSet();maskset.buffer=void 0,!0!==soft&&(maskset._buffer=void 0,maskset.validPositions={},maskset.p=0)}function getLastValidPosition(closestTo,strict,validPositions){var before=-1,after=-1,valids=validPositions||getMaskSet().validPositions;for(var posNdx in void 0===closestTo&&(closestTo=-1),valids){var psNdx=parseInt(posNdx);valids[psNdx]&&(strict||null!==valids[psNdx].match.fn)&&(psNdx<=closestTo&&(before=psNdx),psNdx>=closestTo&&(after=psNdx))}return-1!==before&&closestTo-before>1||after<closestTo?before:after}function stripValidPositions(start,end,nocheck,strict){function IsEnclosedStatic(pos){var posMatch=getMaskSet().validPositions[pos];if(void 0!==posMatch&&null===posMatch.match.fn){var prevMatch=getMaskSet().validPositions[pos-1],nextMatch=getMaskSet().validPositions[pos+1];return void 0!==prevMatch&&void 0!==nextMatch}return!1}var i,startPos=start,positionsClone=$.extend(!0,{},getMaskSet().validPositions),needsValidation=!1;for(getMaskSet().p=start,i=end-1;i>=startPos;i--)void 0!==getMaskSet().validPositions[i]&&(!0!==nocheck&&(!getMaskSet().validPositions[i].match.optionality&&IsEnclosedStatic(i)||!1===opts.canClearPosition(getMaskSet(),i,getLastValidPosition(),strict,opts))||delete getMaskSet().validPositions[i]);for(resetMaskSet(!0),i=startPos+1;i<=getLastValidPosition();){for(;void 0!==getMaskSet().validPositions[startPos];)startPos++;var s=getMaskSet().validPositions[startPos];if(i<startPos&&(i=startPos+1),void 0===getMaskSet().validPositions[i]&&isMask(i)||void 0!==s)i++;else{var t=getTestTemplate(i);!1===needsValidation&&positionsClone[startPos]&&positionsClone[startPos].match.def===t.match.def?(getMaskSet().validPositions[startPos]=$.extend(!0,{},positionsClone[startPos]),getMaskSet().validPositions[startPos].input=t.input,delete getMaskSet().validPositions[i],i++):positionCanMatchDefinition(startPos,t.match.def)?!1!==isValid(startPos,t.input||getPlaceholder(i),!0)&&(delete getMaskSet().validPositions[i],i++,needsValidation=!0):isMask(i)||(i++,startPos--),startPos++}}resetMaskSet(!0)}function determineTestTemplate(tests,guessNextBest){for(var testPos,testPositions=tests,lvp=getLastValidPosition(),lvTest=getMaskSet().validPositions[lvp]||getTests(0)[0],lvTestAltArr=void 0!==lvTest.alternation?lvTest.locator[lvTest.alternation].toString().split(","):[],ndx=0;ndx<testPositions.length&&(!((testPos=testPositions[ndx]).match&&(opts.greedy&&!0!==testPos.match.optionalQuantifier||(!1===testPos.match.optionality||!1===testPos.match.newBlockMarker)&&!0!==testPos.match.optionalQuantifier)&&(void 0===lvTest.alternation||lvTest.alternation!==testPos.alternation||void 0!==testPos.locator[lvTest.alternation]&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","),lvTestAltArr)))||!0===guessNextBest&&(null!==testPos.match.fn||/[0-9a-bA-Z]/.test(testPos.match.def)));ndx++);return testPos}function getTestTemplate(pos,ndxIntlzr,tstPs){return getMaskSet().validPositions[pos]||determineTestTemplate(getTests(pos,ndxIntlzr?ndxIntlzr.slice():ndxIntlzr,tstPs))}function getTest(pos){return getMaskSet().validPositions[pos]?getMaskSet().validPositions[pos]:getTests(pos)[0]}function positionCanMatchDefinition(pos,def){for(var valid=!1,tests=getTests(pos),tndx=0;tndx<tests.length;tndx++)if(tests[tndx].match&&tests[tndx].match.def===def){valid=!0;break}return valid}function getTests(pos,ndxIntlzr,tstPs){function resolveTestFromToken(maskToken,ndxInitializer,loopNdx,quantifierRecurse){function handleMatch(match,loopNdx,quantifierRecurse){function isFirstMatch(latestMatch,tokenGroup){var firstMatch=0===$.inArray(latestMatch,tokenGroup.matches);return firstMatch||$.each(tokenGroup.matches,function(ndx,match){if(!0===match.isQuantifier&&(firstMatch=isFirstMatch(latestMatch,tokenGroup.matches[ndx-1])))return!1}),firstMatch}function resolveNdxInitializer(pos,alternateNdx,targetAlternation){var bestMatch,indexPos;return(getMaskSet().tests[pos]||getMaskSet().validPositions[pos])&&$.each(getMaskSet().tests[pos]||[getMaskSet().validPositions[pos]],function(ndx,lmnt){var alternation=void 0!==targetAlternation?targetAlternation:lmnt.alternation,ndxPos=lmnt.locator[alternation]?lmnt.locator[alternation].toString().indexOf(alternateNdx):-1;(void 0===indexPos||ndxPos<indexPos)&&-1!==ndxPos&&(bestMatch=lmnt,indexPos=ndxPos)}),bestMatch?bestMatch.locator.slice(bestMatch.alternation+1):void 0!==targetAlternation?resolveNdxInitializer(pos,alternateNdx):void 0}if(testPos>1e4)throw"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+getMaskSet().mask;if(testPos===pos&&void 0===match.matches)return matches.push({match:match,locator:loopNdx.reverse(),cd:cacheDependency}),!0;if(void 0!==match.matches){if(match.isGroup&&quantifierRecurse!==match){if(match=handleMatch(maskToken.matches[$.inArray(match,maskToken.matches)+1],loopNdx))return!0}else if(match.isOptional){var optionalToken=match;if(match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse)){if(!isFirstMatch(latestMatch=matches[matches.length-1].match,optionalToken))return!0;insertStop=!0,testPos=pos}}else if(match.isAlternator){var maltMatches,alternateToken=match,malternateMatches=[],currentMatches=matches.slice(),loopNdxCnt=loopNdx.length,altIndex=ndxInitializer.length>0?ndxInitializer.shift():-1;if(-1===altIndex||"string"==typeof altIndex){var amndx,currentPos=testPos,ndxInitializerClone=ndxInitializer.slice(),altIndexArr=[];if("string"==typeof altIndex)altIndexArr=altIndex.split(",");else for(amndx=0;amndx<alternateToken.matches.length;amndx++)altIndexArr.push(amndx);for(var ndx=0;ndx<altIndexArr.length;ndx++){if(amndx=parseInt(altIndexArr[ndx]),matches=[],ndxInitializer=resolveNdxInitializer(testPos,amndx,loopNdxCnt)||ndxInitializerClone.slice(),!0!==(match=handleMatch(alternateToken.matches[amndx]||maskToken.matches[amndx],[amndx].concat(loopNdx),quantifierRecurse)||match)&&void 0!==match&&altIndexArr[altIndexArr.length-1]<alternateToken.matches.length){var ntndx=$.inArray(match,maskToken.matches)+1;maskToken.matches.length>ntndx&&((match=handleMatch(maskToken.matches[ntndx],[ntndx].concat(loopNdx.slice(1,loopNdx.length)),quantifierRecurse))&&(altIndexArr.push(ntndx.toString()),$.each(matches,function(ndx,lmnt){lmnt.alternation=loopNdx.length-1})))}maltMatches=matches.slice(),testPos=currentPos,matches=[];for(var ndx1=0;ndx1<maltMatches.length;ndx1++){var altMatch=maltMatches[ndx1],hasMatch=!1;altMatch.alternation=altMatch.alternation||loopNdxCnt;for(var ndx2=0;ndx2<malternateMatches.length;ndx2++){var altMatch2=malternateMatches[ndx2];if(("string"!=typeof altIndex||-1!==$.inArray(altMatch.locator[altMatch.alternation].toString(),altIndexArr))&&(altMatch.match.def===altMatch2.match.def||(target=altMatch2,null===(source=altMatch).match.fn&&null!==target.match.fn&&target.match.fn.test(source.match.def,getMaskSet(),pos,!1,opts,!1)))){hasMatch=altMatch.match.nativeDef===altMatch2.match.nativeDef,altMatch.alternation==altMatch2.alternation&&-1===altMatch2.locator[altMatch2.alternation].toString().indexOf(altMatch.locator[altMatch.alternation])&&(altMatch2.locator[altMatch2.alternation]=altMatch2.locator[altMatch2.alternation]+","+altMatch.locator[altMatch.alternation],altMatch2.alternation=altMatch.alternation,null==altMatch.match.fn&&(altMatch2.na=altMatch2.na||altMatch.locator[altMatch.alternation].toString(),-1===altMatch2.na.indexOf(altMatch.locator[altMatch.alternation])&&(altMatch2.na=altMatch2.na+","+altMatch.locator[altMatch.alternation])));break}}hasMatch||malternateMatches.push(altMatch)}}"string"==typeof altIndex&&(malternateMatches=$.map(malternateMatches,function(lmnt,ndx){if(isFinite(ndx)){var alternation=lmnt.alternation,altLocArr=lmnt.locator[alternation].toString().split(",");lmnt.locator[alternation]=void 0,lmnt.alternation=void 0;for(var alndx=0;alndx<altLocArr.length;alndx++)-1!==$.inArray(altLocArr[alndx],altIndexArr)&&(void 0!==lmnt.locator[alternation]?(lmnt.locator[alternation]+=",",lmnt.locator[alternation]+=altLocArr[alndx]):lmnt.locator[alternation]=parseInt(altLocArr[alndx]),lmnt.alternation=alternation);if(void 0!==lmnt.locator[alternation])return lmnt}})),matches=currentMatches.concat(malternateMatches),testPos=pos,insertStop=matches.length>0,ndxInitializer=ndxInitializerClone.slice()}else match=handleMatch(alternateToken.matches[altIndex]||maskToken.matches[altIndex],[altIndex].concat(loopNdx),quantifierRecurse);if(match)return!0}else if(match.isQuantifier&&quantifierRecurse!==maskToken.matches[$.inArray(match,maskToken.matches)-1])for(var qt=match,qndx=ndxInitializer.length>0?ndxInitializer.shift():0;qndx<(isNaN(qt.quantifier.max)?qndx+1:qt.quantifier.max)&&testPos<=pos;qndx++){var tokenGroup=maskToken.matches[$.inArray(qt,maskToken.matches)-1];if(match=handleMatch(tokenGroup,[qndx].concat(loopNdx),tokenGroup)){if((latestMatch=matches[matches.length-1].match).optionalQuantifier=qndx>qt.quantifier.min-1,isFirstMatch(latestMatch,tokenGroup)){if(qndx>qt.quantifier.min-1){insertStop=!0,testPos=pos;break}return!0}return!0}}else if(match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse))return!0}else testPos++;var source,target}for(var tndx=ndxInitializer.length>0?ndxInitializer.shift():0;tndx<maskToken.matches.length;tndx++)if(!0!==maskToken.matches[tndx].isQuantifier){var match=handleMatch(maskToken.matches[tndx],[tndx].concat(loopNdx),quantifierRecurse);if(match&&testPos===pos)return match;if(testPos>pos)break}}function filterTests(tests){return opts.keepStatic&&pos>0&&tests.length>1+(""===tests[tests.length-1].match.def?1:0)&&!0!==tests[0].match.optionality&&!0!==tests[0].match.optionalQuantifier&&null===tests[0].match.fn&&!/[0-9a-bA-Z]/.test(tests[0].match.def)?[determineTestTemplate(tests)]:tests}var latestMatch,tests,locator,maskTokens=getMaskSet().maskToken,testPos=ndxIntlzr?tstPs:0,ndxInitializer=ndxIntlzr?ndxIntlzr.slice():[0],matches=[],insertStop=!1,cacheDependency=ndxIntlzr?ndxIntlzr.join(""):"";if(pos>-1){if(void 0===ndxIntlzr){for(var test,previousPos=pos-1;void 0===(test=getMaskSet().validPositions[previousPos]||getMaskSet().tests[previousPos])&&previousPos>-1;)previousPos--;void 0!==test&&previousPos>-1&&(tests=test,locator=[],$.isArray(tests)||(tests=[tests]),tests.length>0&&(void 0===tests[0].alternation?0===(locator=determineTestTemplate(tests.slice()).locator.slice()).length&&(locator=tests[0].locator.slice()):$.each(tests,function(ndx,tst){if(""!==tst.def)if(0===locator.length)locator=tst.locator.slice();else for(var i=0;i<locator.length;i++)tst.locator[i]&&-1===locator[i].toString().indexOf(tst.locator[i])&&(locator[i]+=","+tst.locator[i])})),cacheDependency=(ndxInitializer=locator).join(""),testPos=previousPos)}if(getMaskSet().tests[pos]&&getMaskSet().tests[pos][0].cd===cacheDependency)return filterTests(getMaskSet().tests[pos]);for(var mtndx=ndxInitializer.shift();mtndx<maskTokens.length;mtndx++){if(resolveTestFromToken(maskTokens[mtndx],ndxInitializer,[mtndx])&&testPos===pos||testPos>pos)break}}return(0===matches.length||insertStop)&&matches.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:"",placeholder:""},locator:[],cd:cacheDependency}),void 0!==ndxIntlzr&&getMaskSet().tests[pos]?filterTests($.extend(!0,[],matches)):(getMaskSet().tests[pos]=$.extend(!0,[],matches),filterTests(getMaskSet().tests[pos]))}function getBufferTemplate(){return void 0===getMaskSet()._buffer&&(getMaskSet()._buffer=getMaskTemplate(!1,1),void 0===getMaskSet().buffer&&getMaskSet()._buffer.slice()),getMaskSet()._buffer}function getBuffer(noCache){return void 0!==getMaskSet().buffer&&!0!==noCache||(getMaskSet().buffer=getMaskTemplate(!0,getLastValidPosition(),!0)),getMaskSet().buffer}function refreshFromBuffer(start,end,buffer){var i;if(!0===start)resetMaskSet(),start=0,end=buffer.length;else for(i=start;i<end;i++)delete getMaskSet().validPositions[i];for(i=start;i<end;i++)resetMaskSet(!0),buffer[i]!==opts.skipOptionalPartCharacter&&isValid(i,buffer[i],!0,!0)}function checkAlternationMatch(altArr1,altArr2){for(var altArrC=opts.greedy?altArr2:altArr2.slice(0,1),isMatch=!1,alndx=0;alndx<altArr1.length;alndx++)if(-1!==$.inArray(altArr1[alndx],altArrC)){isMatch=!0;break}return isMatch}function isValid(pos,c,strict,fromSetValid,fromAlternate){function isSelection(posObj){var selection=isRTL?posObj.begin-posObj.end>1||posObj.begin-posObj.end==1&&opts.insertMode:posObj.end-posObj.begin>1||posObj.end-posObj.begin==1&&opts.insertMode;return selection&&0===posObj.begin&&posObj.end===getMaskSet().maskLength?"full":selection}function _isValid(position,c,strict){var rslt=!1;return $.each(getTests(position),function(ndx,tst){for(var test=tst.match,loopend=c?1:0,chrs="",i=test.cardinality;i>loopend;i--)chrs+=getBufferElement(position-(i-1));if(c&&(chrs+=c),getBuffer(!0),!1!==(rslt=null!=test.fn?test.fn.test(chrs,getMaskSet(),position,strict,opts,isSelection(pos)):(c===test.def||c===opts.skipOptionalPartCharacter)&&""!==test.def&&{c:test.placeholder||test.def,pos:position})){var elem=void 0!==rslt.c?rslt.c:c;elem=elem===opts.skipOptionalPartCharacter&&null===test.fn?test.placeholder||test.def:elem;var validatedPos=position,possibleModifiedBuffer=getBuffer();if(void 0!==rslt.remove&&($.isArray(rslt.remove)||(rslt.remove=[rslt.remove]),$.each(rslt.remove.sort(function(a,b){return b-a}),function(ndx,lmnt){stripValidPositions(lmnt,lmnt+1,!0)})),void 0!==rslt.insert&&($.isArray(rslt.insert)||(rslt.insert=[rslt.insert]),$.each(rslt.insert.sort(function(a,b){return a-b}),function(ndx,lmnt){isValid(lmnt.pos,lmnt.c,!0,fromSetValid)})),rslt.refreshFromBuffer){var refresh=rslt.refreshFromBuffer;if(strict=!0,refreshFromBuffer(!0===refresh?refresh:refresh.start,refresh.end,possibleModifiedBuffer),void 0===rslt.pos&&void 0===rslt.c)return rslt.pos=getLastValidPosition(),!1;if((validatedPos=void 0!==rslt.pos?rslt.pos:position)!==position)return rslt=$.extend(rslt,isValid(validatedPos,elem,!0,fromSetValid)),!1}else if(!0!==rslt&&void 0!==rslt.pos&&rslt.pos!==position&&(validatedPos=rslt.pos,refreshFromBuffer(position,validatedPos,getBuffer().slice()),validatedPos!==position))return rslt=$.extend(rslt,isValid(validatedPos,elem,!0)),!1;return(!0===rslt||void 0!==rslt.pos||void 0!==rslt.c)&&(ndx>0&&resetMaskSet(!0),setValidPosition(validatedPos,$.extend({},tst,{input:function(elem,test,pos){switch(opts.casing||test.casing){case"upper":elem=elem.toUpperCase();break;case"lower":elem=elem.toLowerCase();break;case"title":var posBefore=getMaskSet().validPositions[pos-1];elem=0===pos||posBefore&&posBefore.input===String.fromCharCode(Inputmask.keyCode.SPACE)?elem.toUpperCase():elem.toLowerCase()}return elem}(elem,test,validatedPos)}),fromSetValid,isSelection(pos))||(rslt=!1),!1)}}),rslt}function trackbackAlternations(originalPos,newPos){var vp=getMaskSet().validPositions[newPos];if(vp)for(var targetLocator=vp.locator,tll=targetLocator.length,ps=originalPos;ps<newPos;ps++)if(void 0===getMaskSet().validPositions[ps]&&!isMask(ps,!0)){var tests=getTests(ps),bestMatch=tests[0],equality=-1;$.each(tests,function(ndx,tst){for(var i=0;i<tll&&void 0!==tst.locator[i]&&checkAlternationMatch(tst.locator[i].toString().split(","),targetLocator[i].toString().split(","));i++)equality<i&&(equality=i,bestMatch=tst)}),setValidPosition(ps,$.extend({},bestMatch,{input:bestMatch.match.placeholder||bestMatch.match.def}),!0)}}function setValidPosition(pos,validTest,fromSetValid,isSelection){if(isSelection||opts.insertMode&&void 0!==getMaskSet().validPositions[pos]&&void 0===fromSetValid){var i,positionsClone=$.extend(!0,{},getMaskSet().validPositions),lvp=getLastValidPosition(void 0,!0);for(i=pos;i<=lvp;i++)delete getMaskSet().validPositions[i];getMaskSet().validPositions[pos]=$.extend(!0,{},validTest);var j,valid=!0,vps=getMaskSet().validPositions,needsValidation=!1,initialLength=getMaskSet().maskLength;for(i=j=pos;i<=lvp;i++){var t=positionsClone[i];if(void 0!==t)for(var posMatch=j;posMatch<getMaskSet().maskLength&&(null==t.match.fn&&vps[i]&&(!0===vps[i].match.optionalQuantifier||!0===vps[i].match.optionality)||null!=t.match.fn);){if(posMatch++,!1===needsValidation&&positionsClone[posMatch]&&positionsClone[posMatch].match.def===t.match.def)getMaskSet().validPositions[posMatch]=$.extend(!0,{},positionsClone[posMatch]),getMaskSet().validPositions[posMatch].input=t.input,fillMissingNonMask(posMatch),j=posMatch,valid=!0;else if(positionCanMatchDefinition(posMatch,t.match.def)){var result=isValid(posMatch,t.input,!0,!0);valid=!1!==result,j=result.caret||result.insert?getLastValidPosition():posMatch,needsValidation=!0}else valid=!0===t.generatedInput;if(getMaskSet().maskLength<initialLength&&(getMaskSet().maskLength=initialLength),valid)break}if(!valid)break}if(!valid)return getMaskSet().validPositions=$.extend(!0,{},positionsClone),resetMaskSet(!0),!1}else getMaskSet().validPositions[pos]=$.extend(!0,{},validTest);return resetMaskSet(!0),!0}function fillMissingNonMask(maskPos){for(var pndx=maskPos-1;pndx>-1&&!getMaskSet().validPositions[pndx];pndx--);var testTemplate,testsFromPos;for(pndx++;pndx<maskPos;pndx++)void 0===getMaskSet().validPositions[pndx]&&(!1===opts.jitMasking||opts.jitMasking>pndx)&&(""===(testsFromPos=getTests(pndx,getTestTemplate(pndx-1).locator,pndx-1).slice())[testsFromPos.length-1].match.def&&testsFromPos.pop(),(testTemplate=determineTestTemplate(testsFromPos))&&(testTemplate.match.def===opts.radixPointDefinitionSymbol||!isMask(pndx,!0)||$.inArray(opts.radixPoint,getBuffer())<pndx&&testTemplate.match.fn&&testTemplate.match.fn.test(getPlaceholder(pndx),getMaskSet(),pndx,!1,opts))&&(!1!==(result=_isValid(pndx,testTemplate.match.placeholder||(null==testTemplate.match.fn?testTemplate.match.def:""!==getPlaceholder(pndx)?getPlaceholder(pndx):getBuffer()[pndx]),!0))&&(getMaskSet().validPositions[result.pos||pndx].generatedInput=!0)))}strict=!0===strict;var maskPos=pos;void 0!==pos.begin&&(maskPos=isRTL&&!isSelection(pos)?pos.end:pos.begin);var result=!1,positionsClone=$.extend(!0,{},getMaskSet().validPositions);if(fillMissingNonMask(maskPos),isSelection(pos)&&(handleRemove(void 0,Inputmask.keyCode.DELETE,pos),maskPos=getMaskSet().p),maskPos<getMaskSet().maskLength&&(result=_isValid(maskPos,c,strict),(!strict||!0===fromSetValid)&&!1===result)){var currentPosValid=getMaskSet().validPositions[maskPos];if(!currentPosValid||null!==currentPosValid.match.fn||currentPosValid.match.def!==c&&c!==opts.skipOptionalPartCharacter){if((opts.insertMode||void 0===getMaskSet().validPositions[seekNext(maskPos)])&&!isMask(maskPos,!0)){var testsFromPos=getTests(maskPos).slice();""===testsFromPos[testsFromPos.length-1].match.def&&testsFromPos.pop();var staticChar=determineTestTemplate(testsFromPos,!0);staticChar&&null===staticChar.match.fn&&(_isValid(maskPos,staticChar=staticChar.match.placeholder||staticChar.match.def,strict),getMaskSet().validPositions[maskPos].generatedInput=!0);for(var nPos=maskPos+1,snPos=seekNext(maskPos);nPos<=snPos;nPos++)if(!1!==(result=_isValid(nPos,c,strict))){trackbackAlternations(maskPos,void 0!==result.pos?result.pos:nPos),maskPos=nPos;break}}}else result={caret:seekNext(maskPos)}}return!1===result&&opts.keepStatic&&!strict&&!0!==fromAlternate&&(result=function(pos,c,strict){var lastAlt,alternation,altPos,prevAltPos,i,validPos,altNdxs,decisionPos,validPsClone=$.extend(!0,{},getMaskSet().validPositions),isValidRslt=!1,lAltPos=getLastValidPosition();for(prevAltPos=getMaskSet().validPositions[lAltPos];lAltPos>=0;lAltPos--)if((altPos=getMaskSet().validPositions[lAltPos])&&void 0!==altPos.alternation){if(lastAlt=lAltPos,alternation=getMaskSet().validPositions[lastAlt].alternation,prevAltPos.locator[altPos.alternation]!==altPos.locator[altPos.alternation])break;prevAltPos=altPos}if(void 0!==alternation){decisionPos=parseInt(lastAlt);var decisionTaker=void 0!==prevAltPos.locator[prevAltPos.alternation||alternation]?prevAltPos.locator[prevAltPos.alternation||alternation]:altNdxs[0];decisionTaker.length>0&&(decisionTaker=decisionTaker.split(",")[0]);var possibilityPos=getMaskSet().validPositions[decisionPos],prevPos=getMaskSet().validPositions[decisionPos-1];$.each(getTests(decisionPos,prevPos?prevPos.locator:void 0,decisionPos-1),function(ndx,test){altNdxs=test.locator[alternation]?test.locator[alternation].toString().split(","):[];for(var mndx=0;mndx<altNdxs.length;mndx++){var validInputs=[],staticInputsBeforePos=0,staticInputsBeforePosAlternate=0,verifyValidInput=!1;if(decisionTaker<altNdxs[mndx]&&(void 0===test.na||-1===$.inArray(altNdxs[mndx],test.na.split(",")))){getMaskSet().validPositions[decisionPos]=$.extend(!0,{},test);var possibilities=getMaskSet().validPositions[decisionPos].locator;for(getMaskSet().validPositions[decisionPos].locator[alternation]=parseInt(altNdxs[mndx]),null==test.match.fn?(possibilityPos.input!==test.match.def&&(verifyValidInput=!0,!0!==possibilityPos.generatedInput&&validInputs.push(possibilityPos.input)),staticInputsBeforePosAlternate++,getMaskSet().validPositions[decisionPos].generatedInput=!/[0-9a-bA-Z]/.test(test.match.def),getMaskSet().validPositions[decisionPos].input=test.match.def):getMaskSet().validPositions[decisionPos].input=possibilityPos.input,i=decisionPos+1;i<getLastValidPosition(void 0,!0)+1;i++)(validPos=getMaskSet().validPositions[i])&&!0!==validPos.generatedInput&&/[0-9a-bA-Z]/.test(validPos.input)?validInputs.push(validPos.input):i<pos&&staticInputsBeforePos++,delete getMaskSet().validPositions[i];for(verifyValidInput&&validInputs[0]===test.match.def&&validInputs.shift(),resetMaskSet(!0),isValidRslt=!0;validInputs.length>0;){var input=validInputs.shift();if(input!==opts.skipOptionalPartCharacter&&!(isValidRslt=isValid(getLastValidPosition(void 0,!0)+1,input,!1,fromSetValid,!0)))break}if(isValidRslt){getMaskSet().validPositions[decisionPos].locator=possibilities;var targetLvp=getLastValidPosition(pos)+1;for(i=decisionPos+1;i<getLastValidPosition()+1;i++)(void 0===(validPos=getMaskSet().validPositions[i])||null==validPos.match.fn)&&i<pos+(staticInputsBeforePosAlternate-staticInputsBeforePos)&&staticInputsBeforePosAlternate++;isValidRslt=isValid((pos+=staticInputsBeforePosAlternate-staticInputsBeforePos)>targetLvp?targetLvp:pos,c,strict,fromSetValid,!0)}if(isValidRslt)return!1;resetMaskSet(),getMaskSet().validPositions=$.extend(!0,{},validPsClone)}}})}return isValidRslt}(maskPos,c,strict)),!0===result&&(result={pos:maskPos}),$.isFunction(opts.postValidation)&&!1!==result&&!strict&&!0!==fromSetValid&&(result=!!opts.postValidation(getBuffer(!0),result,opts)&&result),void 0===result.pos&&(result.pos=maskPos),!1===result&&(resetMaskSet(!0),getMaskSet().validPositions=$.extend(!0,{},positionsClone)),result}function isMask(pos,strict){var test;if(strict?""===(test=getTestTemplate(pos).match).def&&(test=getTest(pos).match):test=getTest(pos).match,null!=test.fn)return test.fn;if(!0!==strict&&pos>-1){var tests=getTests(pos);return tests.length>1+(""===tests[tests.length-1].match.def?1:0)}return!1}function seekNext(pos,newBlock){var maskL=getMaskSet().maskLength;if(pos>=maskL)return maskL;for(var position=pos;++position<maskL&&(!0===newBlock&&(!0!==getTest(position).match.newBlockMarker||!isMask(position))||!0!==newBlock&&!isMask(position)););return position}function seekPrevious(pos,newBlock){var tests,position=pos;if(position<=0)return 0;for(;--position>0&&(!0===newBlock&&!0!==getTest(position).match.newBlockMarker||!0!==newBlock&&!isMask(position)&&((tests=getTests(position)).length<2||2===tests.length&&""===tests[1].match.def)););return position}function getBufferElement(position){return void 0===getMaskSet().validPositions[position]?getPlaceholder(position):getMaskSet().validPositions[position].input}function writeBuffer(input,buffer,caretPos,event,triggerInputEvent){if(event&&$.isFunction(opts.onBeforeWrite)){var result=opts.onBeforeWrite(event,buffer,caretPos,opts);if(result){if(result.refreshFromBuffer){var refresh=result.refreshFromBuffer;refreshFromBuffer(!0===refresh?refresh:refresh.start,refresh.end,result.buffer||buffer),buffer=getBuffer(!0)}void 0!==caretPos&&(caretPos=void 0!==result.caret?result.caret:caretPos)}}input.inputmask._valueSet(buffer.join("")),void 0===caretPos||void 0!==event&&"blur"===event.type?renderColorMask(input,buffer,caretPos):caret(input,caretPos),!0===triggerInputEvent&&(skipInputEvent=!0,$(input).trigger("input"))}function getPlaceholder(pos,test){if(void 0!==(test=test||getTest(pos).match).placeholder)return test.placeholder;if(null===test.fn){if(pos>-1&&void 0===getMaskSet().validPositions[pos]){var prevTest,tests=getTests(pos),staticAlternations=[];if(tests.length>1+(""===tests[tests.length-1].match.def?1:0))for(var i=0;i<tests.length;i++)if(!0!==tests[i].match.optionality&&!0!==tests[i].match.optionalQuantifier&&(null===tests[i].match.fn||void 0===prevTest||!1!==tests[i].match.fn.test(prevTest.match.def,getMaskSet(),pos,!0,opts))&&(staticAlternations.push(tests[i]),null===tests[i].match.fn&&(prevTest=tests[i]),staticAlternations.length>1&&/[0-9a-bA-Z]/.test(staticAlternations[0].match.def)))return opts.placeholder.charAt(pos%opts.placeholder.length)}return test.def}return opts.placeholder.charAt(pos%opts.placeholder.length)}function checkVal(input,writeOut,strict,nptvl,initiatingEvent,stickyCaret){var inputValue=nptvl.slice(),charCodes="",initialNdx=0,result=void 0;if(resetMaskSet(),getMaskSet().p=seekNext(-1),!strict)if(!0!==opts.autoUnmask){var staticInput=getBufferTemplate().slice(0,seekNext(-1)).join(""),matches=inputValue.join("").match(new RegExp("^"+Inputmask.escapeRegex(staticInput),"g"));matches&&matches.length>0&&(inputValue.splice(0,matches.length*staticInput.length),initialNdx=seekNext(initialNdx))}else initialNdx=seekNext(initialNdx);if($.each(inputValue,function(ndx,charCode){if(void 0!==charCode){var keypress=new $.Event("keypress");keypress.which=charCode.charCodeAt(0),charCodes+=charCode;var lvp=getLastValidPosition(void 0,!0),lvTest=getMaskSet().validPositions[lvp],nextTest=getTestTemplate(lvp+1,lvTest?lvTest.locator.slice():void 0,lvp);if(!function(){var isMatch=!1,charCodeNdx=getBufferTemplate().slice(initialNdx,seekNext(initialNdx)).join("").indexOf(charCodes);if(-1!==charCodeNdx&&!isMask(initialNdx)){isMatch=!0;for(var bufferTemplateArr=getBufferTemplate().slice(initialNdx,initialNdx+charCodeNdx),i=0;i<bufferTemplateArr.length;i++)if(" "!==bufferTemplateArr[i]){isMatch=!1;break}}return isMatch}()||strict||opts.autoUnmask){var pos=strict?ndx:null==nextTest.match.fn&&nextTest.match.optionality&&lvp+1<getMaskSet().p?lvp+1:getMaskSet().p;result=keypressEvent.call(input,keypress,!0,!1,strict,pos),initialNdx=pos+1,charCodes=""}else result=keypressEvent.call(input,keypress,!0,!1,!0,lvp+1);if(!strict&&$.isFunction(opts.onBeforeWrite)&&((result=opts.onBeforeWrite(keypress,getBuffer(),result.forwardPosition,opts))&&result.refreshFromBuffer)){var refresh=result.refreshFromBuffer;refreshFromBuffer(!0===refresh?refresh:refresh.start,refresh.end,result.buffer),resetMaskSet(!0),result.caret&&(getMaskSet().p=result.caret)}}}),writeOut){var caretPos=void 0,lvp=getLastValidPosition();document.activeElement===input&&(initiatingEvent||result)&&(caretPos=caret(input).begin,initiatingEvent&&!1===result&&(caretPos=seekNext(getLastValidPosition(caretPos))),result&&!0!==stickyCaret&&(caretPos<lvp+1||-1===lvp)&&(caretPos=opts.numericInput&&void 0===result.caret?seekPrevious(result.forwardPosition):result.forwardPosition)),writeBuffer(input,getBuffer(),caretPos,initiatingEvent||new $.Event("checkval"))}}function unmaskedvalue(input){if(input&&void 0===input.inputmask)return input.value;var umValue=[],vps=getMaskSet().validPositions;for(var pndx in vps)vps[pndx].match&&null!=vps[pndx].match.fn&&umValue.push(vps[pndx].input);var unmaskedValue=0===umValue.length?"":(isRTL?umValue.reverse():umValue).join("");if($.isFunction(opts.onUnMask)){var bufferValue=(isRTL?getBuffer().slice().reverse():getBuffer()).join("");unmaskedValue=opts.onUnMask(bufferValue,unmaskedValue,opts)||unmaskedValue}return unmaskedValue}function caret(input,begin,end,notranslate){function translatePosition(pos){!0===notranslate||!isRTL||"number"!=typeof pos||opts.greedy&&""===opts.placeholder||(pos=getBuffer().join("").length-pos);return pos}var range;if("number"!=typeof begin)return input.setSelectionRange?(begin=input.selectionStart,end=input.selectionEnd):window.getSelection?(range=window.getSelection().getRangeAt(0)).commonAncestorContainer.parentNode!==input&&range.commonAncestorContainer!==input||(begin=range.startOffset,end=range.endOffset):document.selection&&document.selection.createRange&&(end=(begin=0-(range=document.selection.createRange()).duplicate().moveStart("character",-input.inputmask._valueGet().length))+range.text.length),{begin:translatePosition(begin),end:translatePosition(end)};begin=translatePosition(begin),end="number"==typeof(end=translatePosition(end))?end:begin;var scrollCalc=parseInt(((input.ownerDocument.defaultView||window).getComputedStyle?(input.ownerDocument.defaultView||window).getComputedStyle(input,null):input.currentStyle).fontSize)*end;if(input.scrollLeft=scrollCalc>input.scrollWidth?scrollCalc:0,mobile||!1!==opts.insertMode||begin!==end||end++,input.setSelectionRange)input.selectionStart=begin,input.selectionEnd=end;else if(window.getSelection){if(range=document.createRange(),void 0===input.firstChild||null===input.firstChild){var textNode=document.createTextNode("");input.appendChild(textNode)}range.setStart(input.firstChild,begin<input.inputmask._valueGet().length?begin:input.inputmask._valueGet().length),range.setEnd(input.firstChild,end<input.inputmask._valueGet().length?end:input.inputmask._valueGet().length),range.collapse(!0);var sel=window.getSelection();sel.removeAllRanges(),sel.addRange(range)}else input.createTextRange&&((range=input.createTextRange()).collapse(!0),range.moveEnd("character",end),range.moveStart("character",begin),range.select());renderColorMask(input,void 0,{begin:begin,end:end})}function determineLastRequiredPosition(returnDefinition){var pos,testPos,buffer=getBuffer(),bl=buffer.length,lvp=getLastValidPosition(),positions={},lvTest=getMaskSet().validPositions[lvp],ndxIntlzr=void 0!==lvTest?lvTest.locator.slice():void 0;for(pos=lvp+1;pos<buffer.length;pos++)ndxIntlzr=(testPos=getTestTemplate(pos,ndxIntlzr,pos-1)).locator.slice(),positions[pos]=$.extend(!0,{},testPos);var lvTestAlt=lvTest&&void 0!==lvTest.alternation?lvTest.locator[lvTest.alternation]:void 0;for(pos=bl-1;pos>lvp&&(((testPos=positions[pos]).match.optionality||testPos.match.optionalQuantifier||lvTestAlt&&(lvTestAlt!==positions[pos].locator[lvTest.alternation]&&null!=testPos.match.fn||null===testPos.match.fn&&testPos.locator[lvTest.alternation]&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","),lvTestAlt.toString().split(","))&&""!==getTests(pos)[0].def))&&buffer[pos]===getPlaceholder(pos,testPos.match));pos--)bl--;return returnDefinition?{l:bl,def:positions[bl]?positions[bl].match:void 0}:bl}function clearOptionalTail(buffer){for(var rl=determineLastRequiredPosition(),lmib=buffer.length-1;lmib>rl&&!isMask(lmib);lmib--);return buffer.splice(rl,lmib+1-rl),buffer}function isComplete(buffer){if($.isFunction(opts.isComplete))return opts.isComplete(buffer,opts);if("*"!==opts.repeat){var complete=!1,lrp=determineLastRequiredPosition(!0),aml=seekPrevious(lrp.l);if(void 0===lrp.def||lrp.def.newBlockMarker||lrp.def.optionality||lrp.def.optionalQuantifier){complete=!0;for(var i=0;i<=aml;i++){var test=getTestTemplate(i).match;if(null!==test.fn&&void 0===getMaskSet().validPositions[i]&&!0!==test.optionality&&!0!==test.optionalQuantifier||null===test.fn&&buffer[i]!==getPlaceholder(i,test)){complete=!1;break}}}return complete}}function handleRemove(input,k,pos,strict){if((opts.numericInput||isRTL)&&(k===Inputmask.keyCode.BACKSPACE?k=Inputmask.keyCode.DELETE:k===Inputmask.keyCode.DELETE&&(k=Inputmask.keyCode.BACKSPACE),isRTL)){var pend=pos.end;pos.end=pos.begin,pos.begin=pend}k===Inputmask.keyCode.BACKSPACE&&(pos.end-pos.begin<1||!1===opts.insertMode)?(pos.begin=seekPrevious(pos.begin),void 0===getMaskSet().validPositions[pos.begin]||getMaskSet().validPositions[pos.begin].input!==opts.groupSeparator&&getMaskSet().validPositions[pos.begin].input!==opts.radixPoint||pos.begin--):k===Inputmask.keyCode.DELETE&&pos.begin===pos.end&&(pos.end=isMask(pos.end,!0)?pos.end+1:seekNext(pos.end)+1,void 0===getMaskSet().validPositions[pos.begin]||getMaskSet().validPositions[pos.begin].input!==opts.groupSeparator&&getMaskSet().validPositions[pos.begin].input!==opts.radixPoint||pos.end++),stripValidPositions(pos.begin,pos.end,!1,strict),!0!==strict&&function(){if(opts.keepStatic){for(var validInputs=[],lastAlt=getLastValidPosition(-1,!0),positionsClone=$.extend(!0,{},getMaskSet().validPositions),prevAltPos=getMaskSet().validPositions[lastAlt];lastAlt>=0;lastAlt--){var altPos=getMaskSet().validPositions[lastAlt];if(altPos){if(!0!==altPos.generatedInput&&/[0-9a-bA-Z]/.test(altPos.input)&&validInputs.push(altPos.input),delete getMaskSet().validPositions[lastAlt],void 0!==altPos.alternation&&altPos.locator[altPos.alternation]!==prevAltPos.locator[altPos.alternation])break;prevAltPos=altPos}}if(lastAlt>-1)for(getMaskSet().p=seekNext(getLastValidPosition(-1,!0));validInputs.length>0;){var keypress=new $.Event("keypress");keypress.which=validInputs.pop().charCodeAt(0),keypressEvent.call(input,keypress,!0,!1,!1,getMaskSet().p)}else getMaskSet().validPositions=$.extend(!0,{},positionsClone)}}();var lvp=getLastValidPosition(pos.begin,!0);lvp<pos.begin?getMaskSet().p=seekNext(lvp):!0!==strict&&(getMaskSet().p=pos.begin)}function keydownEvent(e){var eventName,el,evName,isSupported,input=this,$input=$(input),k=e.keyCode,pos=caret(input);if(k===Inputmask.keyCode.BACKSPACE||k===Inputmask.keyCode.DELETE||iphone&&k===Inputmask.keyCode.BACKSPACE_SAFARI||e.ctrlKey&&k===Inputmask.keyCode.X&&(eventName="cut",el=document.createElement("input"),(isSupported=(evName="on"+eventName)in el)||(el.setAttribute(evName,"return;"),isSupported="function"==typeof el[evName]),el=null,!isSupported))e.preventDefault(),handleRemove(input,k,pos),writeBuffer(input,getBuffer(!0),getMaskSet().p,e,input.inputmask._valueGet()!==getBuffer().join("")),input.inputmask._valueGet()===getBufferTemplate().join("")?$input.trigger("cleared"):!0===isComplete(getBuffer())&&$input.trigger("complete"),opts.showTooltip&&(input.title=opts.tooltip||getMaskSet().mask);else if(k===Inputmask.keyCode.END||k===Inputmask.keyCode.PAGE_DOWN){e.preventDefault();var caretPos=seekNext(getLastValidPosition());opts.insertMode||caretPos!==getMaskSet().maskLength||e.shiftKey||caretPos--,caret(input,e.shiftKey?pos.begin:caretPos,caretPos,!0)}else k===Inputmask.keyCode.HOME&&!e.shiftKey||k===Inputmask.keyCode.PAGE_UP?(e.preventDefault(),caret(input,0,e.shiftKey?pos.begin:0,!0)):(opts.undoOnEscape&&k===Inputmask.keyCode.ESCAPE||90===k&&e.ctrlKey)&&!0!==e.altKey?(checkVal(input,!0,!1,undoValue.split("")),$input.trigger("click")):k!==Inputmask.keyCode.INSERT||e.shiftKey||e.ctrlKey?!0===opts.tabThrough&&k===Inputmask.keyCode.TAB?(!0===e.shiftKey?(null===getTest(pos.begin).match.fn&&(pos.begin=seekNext(pos.begin)),pos.end=seekPrevious(pos.begin,!0),pos.begin=seekPrevious(pos.end,!0)):(pos.begin=seekNext(pos.begin,!0),pos.end=seekNext(pos.begin,!0),pos.end<getMaskSet().maskLength&&pos.end--),pos.begin<getMaskSet().maskLength&&(e.preventDefault(),caret(input,pos.begin,pos.end))):e.shiftKey||(!1===opts.insertMode?k===Inputmask.keyCode.RIGHT?setTimeout(function(){var caretPos=caret(input);caret(input,caretPos.begin)},0):k===Inputmask.keyCode.LEFT&&setTimeout(function(){var caretPos=caret(input);caret(input,isRTL?caretPos.begin+1:caretPos.begin-1)},0):setTimeout(function(){renderColorMask(input)},0)):(opts.insertMode=!opts.insertMode,caret(input,opts.insertMode||pos.begin!==getMaskSet().maskLength?pos.begin:pos.begin-1));opts.onKeyDown.call(this,e,getBuffer(),caret(input).begin,opts),ignorable=-1!==$.inArray(k,opts.ignorables)}function keypressEvent(e,checkval,writeOut,strict,ndx){var $input=$(this),k=e.which||e.charCode||e.keyCode;if(!(!0===checkval||e.ctrlKey&&e.altKey)&&(e.ctrlKey||e.metaKey||ignorable))return k===Inputmask.keyCode.ENTER&&undoValue!==getBuffer().join("")&&(undoValue=getBuffer().join(""),setTimeout(function(){$input.trigger("change")},0)),!0;if(k){46===k&&!1===e.shiftKey&&","===opts.radixPoint&&(k=44);var forwardPosition,pos=checkval?{begin:ndx,end:ndx}:caret(this),c=String.fromCharCode(k);getMaskSet().writeOutBuffer=!0;var valResult=isValid(pos,c,strict);if(!1!==valResult&&(resetMaskSet(!0),forwardPosition=void 0!==valResult.caret?valResult.caret:checkval?valResult.pos+1:seekNext(valResult.pos),getMaskSet().p=forwardPosition),!1!==writeOut){var self=this;if(setTimeout(function(){opts.onKeyValidation.call(self,k,valResult,opts)},0),getMaskSet().writeOutBuffer&&!1!==valResult){var buffer=getBuffer();writeBuffer(this,buffer,opts.numericInput&&void 0===valResult.caret?seekPrevious(forwardPosition):forwardPosition,e,!0!==checkval),!0!==checkval&&setTimeout(function(){!0===isComplete(buffer)&&$input.trigger("complete")},0)}}if(opts.showTooltip&&(this.title=opts.tooltip||getMaskSet().mask),e.preventDefault(),checkval)return valResult.forwardPosition=forwardPosition,valResult}}function pasteEvent(e){var tempValue,ev=e.originalEvent||e,$input=$(this),inputValue=this.inputmask._valueGet(!0),caretPos=caret(this);isRTL&&(tempValue=caretPos.end,caretPos.end=caretPos.begin,caretPos.begin=tempValue);var valueBeforeCaret=inputValue.substr(0,caretPos.begin),valueAfterCaret=inputValue.substr(caretPos.end,inputValue.length);if(valueBeforeCaret===(isRTL?getBufferTemplate().reverse():getBufferTemplate()).slice(0,caretPos.begin).join("")&&(valueBeforeCaret=""),valueAfterCaret===(isRTL?getBufferTemplate().reverse():getBufferTemplate()).slice(caretPos.end).join("")&&(valueAfterCaret=""),isRTL&&(tempValue=valueBeforeCaret,valueBeforeCaret=valueAfterCaret,valueAfterCaret=tempValue),window.clipboardData&&window.clipboardData.getData)inputValue=valueBeforeCaret+window.clipboardData.getData("Text")+valueAfterCaret;else{if(!ev.clipboardData||!ev.clipboardData.getData)return!0;inputValue=valueBeforeCaret+ev.clipboardData.getData("text/plain")+valueAfterCaret}var pasteValue=inputValue;if($.isFunction(opts.onBeforePaste)){if(!1===(pasteValue=opts.onBeforePaste(inputValue,opts)))return e.preventDefault();pasteValue||(pasteValue=inputValue)}return checkVal(this,!1,!1,isRTL?pasteValue.split("").reverse():pasteValue.toString().split("")),writeBuffer(this,getBuffer(),seekNext(getLastValidPosition()),e,undoValue!==getBuffer().join("")),!0===isComplete(getBuffer())&&$input.trigger("complete"),e.preventDefault()}function inputFallBackEvent(e){var inputValue=this.inputmask._valueGet();if(getBuffer().join("")!==inputValue){var caretPos=caret(this);if(inputValue=inputValue.replace(new RegExp("("+Inputmask.escapeRegex(getBufferTemplate().join(""))+")*"),""),iemobile){var inputChar=inputValue.replace(getBuffer().join(""),"");if(1===inputChar.length){var keypress=new $.Event("keypress");return keypress.which=inputChar.charCodeAt(0),keypressEvent.call(this,keypress,!0,!0,!1,getMaskSet().validPositions[caretPos.begin-1]?caretPos.begin:caretPos.begin-1),!1}}if(caretPos.begin>inputValue.length&&(caret(this,inputValue.length),caretPos=caret(this)),getBuffer().length-inputValue.length!=1||inputValue.charAt(caretPos.begin)===getBuffer()[caretPos.begin]||inputValue.charAt(caretPos.begin+1)===getBuffer()[caretPos.begin]||isMask(caretPos.begin)){for(var lvp=getLastValidPosition()+1,bufferTemplate=getBufferTemplate().join("");null===inputValue.match(Inputmask.escapeRegex(bufferTemplate)+"$");)bufferTemplate=bufferTemplate.slice(1);checkVal(this,!0,!1,inputValue=(inputValue=inputValue.replace(bufferTemplate,"")).split(""),e,caretPos.begin<lvp),!0===isComplete(getBuffer())&&$(this).trigger("complete")}else e.keyCode=Inputmask.keyCode.BACKSPACE,keydownEvent.call(this,e);e.preventDefault()}}function setValueEvent(e){var value=this.inputmask._valueGet();checkVal(this,!0,!1,($.isFunction(opts.onBeforeMask)&&opts.onBeforeMask(value,opts)||value).split("")),undoValue=getBuffer().join(""),(opts.clearMaskOnLostFocus||opts.clearIncomplete)&&this.inputmask._valueGet()===getBufferTemplate().join("")&&this.inputmask._valueSet("")}function focusEvent(e){var nptValue=this.inputmask._valueGet();opts.showMaskOnFocus&&(!opts.showMaskOnHover||opts.showMaskOnHover&&""===nptValue)&&(this.inputmask._valueGet()!==getBuffer().join("")?writeBuffer(this,getBuffer(),seekNext(getLastValidPosition())):!1===mouseEnter&&caret(this,seekNext(getLastValidPosition()))),!0===opts.positionCaretOnTab&&setTimeout(function(){clickEvent.apply(this,[e])},0),undoValue=getBuffer().join("")}function mouseleaveEvent(e){if(mouseEnter=!1,opts.clearMaskOnLostFocus&&document.activeElement!==this){var buffer=getBuffer().slice(),nptValue=this.inputmask._valueGet();nptValue!==this.getAttribute("placeholder")&&""!==nptValue&&(-1===getLastValidPosition()&&nptValue===getBufferTemplate().join("")?buffer=[]:clearOptionalTail(buffer),writeBuffer(this,buffer))}}function clickEvent(e){var input=this;setTimeout(function(){if(document.activeElement===input){var selectedCaret=caret(input);if(selectedCaret.begin===selectedCaret.end)switch(opts.positionCaretOnClick){case"none":break;case"radixFocus":if(function(clickPos){if(""!==opts.radixPoint){var vps=getMaskSet().validPositions;if(void 0===vps[clickPos]||vps[clickPos].input===getPlaceholder(clickPos)){if(clickPos<seekNext(-1))return!0;var radixPos=$.inArray(opts.radixPoint,getBuffer());if(-1!==radixPos){for(var vp in vps)if(radixPos<vp&&vps[vp].input!==getPlaceholder(vp))return!1;return!0}}}return!1}(selectedCaret.begin)){var radixPos=$.inArray(opts.radixPoint,getBuffer().join(""));caret(input,opts.numericInput?seekNext(radixPos):radixPos);break}default:var clickPosition=selectedCaret.begin,lastPosition=seekNext(getLastValidPosition(clickPosition,!0));if(clickPosition<lastPosition)caret(input,isMask(clickPosition)||isMask(clickPosition-1)?clickPosition:seekNext(clickPosition));else{var placeholder=getPlaceholder(lastPosition);(""!==placeholder&&getBuffer()[lastPosition]!==placeholder&&!0!==getTest(lastPosition).match.optionalQuantifier||!isMask(lastPosition)&&getTest(lastPosition).match.def===placeholder)&&(lastPosition=seekNext(lastPosition)),caret(input,lastPosition)}}}},0)}function dblclickEvent(e){var input=this;setTimeout(function(){caret(input,0,seekNext(getLastValidPosition()))},0)}function cutEvent(e){var $input=$(this),pos=caret(this),ev=e.originalEvent||e,clipboardData=window.clipboardData||ev.clipboardData,clipData=isRTL?getBuffer().slice(pos.end,pos.begin):getBuffer().slice(pos.begin,pos.end);clipboardData.setData("text",isRTL?clipData.reverse().join(""):clipData.join("")),document.execCommand&&document.execCommand("copy"),handleRemove(this,Inputmask.keyCode.DELETE,pos),writeBuffer(this,getBuffer(),getMaskSet().p,e,undoValue!==getBuffer().join("")),this.inputmask._valueGet()===getBufferTemplate().join("")&&$input.trigger("cleared"),opts.showTooltip&&(this.title=opts.tooltip||getMaskSet().mask)}function blurEvent(e){var $input=$(this);if(this.inputmask){var nptValue=this.inputmask._valueGet(),buffer=getBuffer().slice();undoValue!==buffer.join("")&&setTimeout(function(){$input.trigger("change"),undoValue=buffer.join("")},0),""!==nptValue&&(opts.clearMaskOnLostFocus&&(-1===getLastValidPosition()&&nptValue===getBufferTemplate().join("")?buffer=[]:clearOptionalTail(buffer)),!1===isComplete(buffer)&&(setTimeout(function(){$input.trigger("incomplete")},0),opts.clearIncomplete&&(resetMaskSet(),buffer=opts.clearMaskOnLostFocus?[]:getBufferTemplate().slice())),writeBuffer(this,buffer,void 0,e))}}function mouseenterEvent(e){mouseEnter=!0,document.activeElement!==this&&opts.showMaskOnHover&&this.inputmask._valueGet()!==getBuffer().join("")&&writeBuffer(this,getBuffer())}function submitEvent(e){undoValue!==getBuffer().join("")&&$el.trigger("change"),opts.clearMaskOnLostFocus&&-1===getLastValidPosition()&&el.inputmask._valueGet&&el.inputmask._valueGet()===getBufferTemplate().join("")&&el.inputmask._valueSet(""),opts.removeMaskOnSubmit&&(el.inputmask._valueSet(el.inputmask.unmaskedvalue(),!0),setTimeout(function(){writeBuffer(el,getBuffer())},0))}function resetEvent(e){setTimeout(function(){$el.trigger("setvalue")},0)}function initializeColorMask(input){function position(){colorMask.style.position="absolute",colorMask.style.top=offset.top+"px",colorMask.style.left=offset.left+"px",colorMask.style.width=parseInt(input.offsetWidth)-parseInt(computedStyle.paddingLeft)-parseInt(computedStyle.paddingRight)-parseInt(computedStyle.borderLeftWidth)-parseInt(computedStyle.borderRightWidth)+"px",colorMask.style.height=parseInt(input.offsetHeight)-parseInt(computedStyle.paddingTop)-parseInt(computedStyle.paddingBottom)-parseInt(computedStyle.borderTopWidth)-parseInt(computedStyle.borderBottomWidth)+"px",colorMask.style.lineHeight=colorMask.style.height,colorMask.style.zIndex=isNaN(computedStyle.zIndex)?-1:computedStyle.zIndex-1,colorMask.style.webkitAppearance="textfield",colorMask.style.mozAppearance="textfield",colorMask.style.Appearance="textfield"}var offset=$(input).position(),computedStyle=(input.ownerDocument.defaultView||window).getComputedStyle(input,null);for(var style in input.parentNode,colorMask=document.createElement("div"),document.body.appendChild(colorMask),computedStyle)isNaN(style)&&"cssText"!==style&&-1==style.indexOf("webkit")&&(colorMask.style[style]=computedStyle[style]);input.style.backgroundColor="transparent",input.style.color="transparent",input.style.webkitAppearance="caret",input.style.mozAppearance="caret",input.style.Appearance="caret",position(),$(window).on("resize",function(e){offset=$(input).position(),computedStyle=(input.ownerDocument.defaultView||window).getComputedStyle(input,null),position()}),$(input).on("click",function(e){return caret(input,function(clientx){var caretPos,e=document.createElement("span");for(var style in computedStyle)isNaN(style)&&-1!==style.indexOf("font")&&(e.style[style]=computedStyle[style]);e.style.textTransform=computedStyle.textTransform,e.style.letterSpacing=computedStyle.letterSpacing,e.style.position="absolute",e.style.height="auto",e.style.width="auto",e.style.visibility="hidden",e.style.whiteSpace="nowrap",document.body.appendChild(e);var itl,inputText=input.inputmask._valueGet(),previousWidth=0;for(caretPos=0,itl=inputText.length;caretPos<=itl;caretPos++){if(e.innerHTML+=inputText.charAt(caretPos)||"_",e.offsetWidth>=clientx){var offset1=clientx-previousWidth,offset2=e.offsetWidth-clientx;e.innerHTML=inputText.charAt(caretPos),caretPos=(offset1-=e.offsetWidth/3)<offset2?caretPos-1:caretPos;break}previousWidth=e.offsetWidth}return document.body.removeChild(e),caretPos}(e.clientX)),clickEvent.call(this,[e])})}function renderColorMask(input,buffer,caretPos){function handleStatic(){static||null!==test.fn&&void 0!==testPos.input?static&&null!==test.fn&&void 0!==testPos.input&&(static=!1,maskTemplate+="</span>"):(static=!0,maskTemplate+="<span class='im-static''>")}if(void 0!==colorMask){buffer=buffer||getBuffer(),void 0===caretPos?caretPos=caret(input):void 0===caretPos.begin&&(caretPos={begin:caretPos,end:caretPos});var maskTemplate="",static=!1;if(""!=buffer){var ndxIntlzr,test,testPos,pos=0,lvp=getLastValidPosition();do{pos===caretPos.begin&&document.activeElement===input&&(maskTemplate+="<span class='im-caret' style='border-right-width: 1px;border-right-style: solid;'></span>"),getMaskSet().validPositions[pos]?(testPos=getMaskSet().validPositions[pos],test=testPos.match,ndxIntlzr=testPos.locator.slice(),handleStatic(),maskTemplate+=testPos.input):(testPos=getTestTemplate(pos,ndxIntlzr,pos-1),test=testPos.match,ndxIntlzr=testPos.locator.slice(),(!1===opts.jitMasking||pos<lvp||Number.isFinite(opts.jitMasking)&&opts.jitMasking>pos)&&(handleStatic(),maskTemplate+=getPlaceholder(pos,test))),pos++}while((void 0===maxLength||pos<maxLength)&&(null!==test.fn||""!==test.def)||lvp>pos)}colorMask.innerHTML=maskTemplate}}var undoValue,el,$el,maxLength,colorMask,valueBuffer,isRTL=!1,skipKeyPressEvent=!1,skipInputEvent=!1,ignorable=!1,mouseEnter=!1,EventRuler={on:function(input,eventName,eventHandler){var ev=function(e){if(void 0===this.inputmask&&"FORM"!==this.nodeName){var imOpts=$.data(this,"_inputmask_opts");imOpts?new Inputmask(imOpts).mask(this):EventRuler.off(this)}else{if("setvalue"===e.type||!(this.disabled||this.readOnly&&!("keydown"===e.type&&e.ctrlKey&&67===e.keyCode||!1===opts.tabThrough&&e.keyCode===Inputmask.keyCode.TAB))){switch(e.type){case"input":if(!0===skipInputEvent)return skipInputEvent=!1,e.preventDefault();break;case"keydown":skipKeyPressEvent=!1,skipInputEvent=!1;break;case"keypress":if(!0===skipKeyPressEvent)return e.preventDefault();skipKeyPressEvent=!0;break;case"click":if(iemobile||iphone){var that=this,args=arguments;return setTimeout(function(){eventHandler.apply(that,args)},0),!1}}var returnVal=eventHandler.apply(this,arguments);return!1===returnVal&&(e.preventDefault(),e.stopPropagation()),returnVal}e.preventDefault()}};input.inputmask.events[eventName]=input.inputmask.events[eventName]||[],input.inputmask.events[eventName].push(ev),-1!==$.inArray(eventName,["submit","reset"])?null!=input.form&&$(input.form).on(eventName,ev):$(input).on(eventName,ev)},off:function(input,event){var events;input.inputmask&&input.inputmask.events&&(event?(events=[])[event]=input.inputmask.events[event]:events=input.inputmask.events,$.each(events,function(eventName,evArr){for(;evArr.length>0;){var ev=evArr.pop();-1!==$.inArray(eventName,["submit","reset"])?null!=input.form&&$(input.form).off(eventName,ev):$(input).off(eventName,ev)}delete input.inputmask.events[eventName]}))}};if(void 0!==actionObj)switch(actionObj.action){case"isComplete":return el=actionObj.el,isComplete(getBuffer());case"unmaskedvalue":return void 0!==(el=actionObj.el)&&void 0!==el.inputmask?(maskset=el.inputmask.maskset,opts=el.inputmask.opts,isRTL=el.inputmask.isRTL):(valueBuffer=actionObj.value,opts.numericInput&&(isRTL=!0),valueBuffer=($.isFunction(opts.onBeforeMask)&&opts.onBeforeMask(valueBuffer,opts)||valueBuffer).split(""),checkVal(void 0,!1,!1,isRTL?valueBuffer.reverse():valueBuffer),$.isFunction(opts.onBeforeWrite)&&opts.onBeforeWrite(void 0,getBuffer(),0,opts)),unmaskedvalue(el);case"mask":el=actionObj.el,maskset=el.inputmask.maskset,opts=el.inputmask.opts,isRTL=el.inputmask.isRTL,function(elem){if(function(input,opts){var elementType=input.getAttribute("type"),isSupported="INPUT"===input.tagName&&-1!==$.inArray(elementType,opts.supportsInputType)||input.isContentEditable||"TEXTAREA"===input.tagName;if(!isSupported&&"INPUT"===input.tagName){var el=document.createElement("input");el.setAttribute("type",elementType),isSupported="text"===el.type,el=null}return isSupported}(elem,opts)&&($el=$(el=elem),opts.showTooltip&&(el.title=opts.tooltip||getMaskSet().mask),("rtl"===el.dir||opts.rightAlign)&&(el.style.textAlign="right"),("rtl"===el.dir||opts.numericInput)&&(el.dir="ltr",el.removeAttribute("dir"),el.inputmask.isRTL=!0,isRTL=!0),!0===opts.colorMask&&initializeColorMask(el),android&&(el.hasOwnProperty("inputmode")&&(el.inputmode=opts.inputmode,el.setAttribute("inputmode",opts.inputmode)),"rtfm"===opts.androidHack&&(!0!==opts.colorMask&&initializeColorMask(el),el.type="password")),EventRuler.off(el),function(npt){function getter(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():-1!==getLastValidPosition()||!0!==opts.nullable?document.activeElement===this&&opts.clearMaskOnLostFocus?(isRTL?clearOptionalTail(getBuffer().slice()).reverse():clearOptionalTail(getBuffer().slice())).join(""):valueGet.call(this):"":valueGet.call(this)}function setter(value){valueSet.call(this,value),this.inputmask&&$(this).trigger("setvalue")}var valueGet,valueSet;if(!npt.inputmask.__valueGet){if(!0!==opts.noValuePatching){if(Object.getOwnPropertyDescriptor){"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(object){return object.__proto__}:function(object){return object.constructor.prototype});var valueProperty=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(npt),"value"):void 0;valueProperty&&valueProperty.get&&valueProperty.set?(valueGet=valueProperty.get,valueSet=valueProperty.set,Object.defineProperty(npt,"value",{get:getter,set:setter,configurable:!0})):"INPUT"!==npt.tagName&&(valueGet=function(){return this.textContent},valueSet=function(value){this.textContent=value},Object.defineProperty(npt,"value",{get:getter,set:setter,configurable:!0}))}else document.__lookupGetter__&&npt.__lookupGetter__("value")&&(valueGet=npt.__lookupGetter__("value"),valueSet=npt.__lookupSetter__("value"),npt.__defineGetter__("value",getter),npt.__defineSetter__("value",setter));npt.inputmask.__valueGet=valueGet,npt.inputmask.__valueSet=valueSet}npt.inputmask._valueGet=function(overruleRTL){return isRTL&&!0!==overruleRTL?valueGet.call(this.el).split("").reverse().join(""):valueGet.call(this.el)},npt.inputmask._valueSet=function(value,overruleRTL){valueSet.call(this.el,null===value||void 0===value?"":!0!==overruleRTL&&isRTL?value.split("").reverse().join(""):value)},void 0===valueGet&&(valueGet=function(){return this.value},valueSet=function(value){this.value=value},function(type){if($.valHooks&&(void 0===$.valHooks[type]||!0!==$.valHooks[type].inputmaskpatch)){var valhookGet=$.valHooks[type]&&$.valHooks[type].get?$.valHooks[type].get:function(elem){return elem.value},valhookSet=$.valHooks[type]&&$.valHooks[type].set?$.valHooks[type].set:function(elem,value){return elem.value=value,elem};$.valHooks[type]={get:function(elem){if(elem.inputmask){if(elem.inputmask.opts.autoUnmask)return elem.inputmask.unmaskedvalue();var result=valhookGet(elem);return-1!==getLastValidPosition(void 0,void 0,elem.inputmask.maskset.validPositions)||!0!==opts.nullable?result:""}return valhookGet(elem)},set:function(elem,value){var result,$elem=$(elem);return result=valhookSet(elem,value),elem.inputmask&&$elem.trigger("setvalue"),result},inputmaskpatch:!0}}}(npt.type),function(npt){EventRuler.on(npt,"mouseenter",function(event){var $input=$(this);this.inputmask._valueGet()!==getBuffer().join("")&&$input.trigger("setvalue")})}(npt))}}(el),EventRuler.on(el,"submit",submitEvent),EventRuler.on(el,"reset",resetEvent),EventRuler.on(el,"mouseenter",mouseenterEvent),EventRuler.on(el,"blur",blurEvent),EventRuler.on(el,"focus",focusEvent),EventRuler.on(el,"mouseleave",mouseleaveEvent),!0!==opts.colorMask&&EventRuler.on(el,"click",clickEvent),EventRuler.on(el,"dblclick",dblclickEvent),EventRuler.on(el,"paste",pasteEvent),EventRuler.on(el,"dragdrop",pasteEvent),EventRuler.on(el,"drop",pasteEvent),EventRuler.on(el,"cut",cutEvent),EventRuler.on(el,"complete",opts.oncomplete),EventRuler.on(el,"incomplete",opts.onincomplete),EventRuler.on(el,"cleared",opts.oncleared),!0!==opts.inputEventOnly&&(EventRuler.on(el,"keydown",keydownEvent),EventRuler.on(el,"keypress",keypressEvent)),EventRuler.on(el,"compositionstart",$.noop),EventRuler.on(el,"compositionupdate",$.noop),EventRuler.on(el,"compositionend",$.noop),EventRuler.on(el,"keyup",$.noop),EventRuler.on(el,"input",inputFallBackEvent),EventRuler.on(el,"setvalue",setValueEvent),getBufferTemplate(),""!==el.inputmask._valueGet()||!1===opts.clearMaskOnLostFocus||document.activeElement===el)){var initialValue=$.isFunction(opts.onBeforeMask)&&opts.onBeforeMask(el.inputmask._valueGet(),opts)||el.inputmask._valueGet();checkVal(el,!0,!1,initialValue.split(""));var buffer=getBuffer().slice();undoValue=buffer.join(""),!1===isComplete(buffer)&&opts.clearIncomplete&&resetMaskSet(),opts.clearMaskOnLostFocus&&document.activeElement!==el&&(-1===getLastValidPosition()?buffer=[]:clearOptionalTail(buffer)),writeBuffer(el,buffer),document.activeElement===el&&caret(el,seekNext(getLastValidPosition()))}}(el);break;case"format":return opts.numericInput&&(isRTL=!0),valueBuffer=($.isFunction(opts.onBeforeMask)&&opts.onBeforeMask(actionObj.value,opts)||actionObj.value).split(""),checkVal(void 0,!1,!1,isRTL?valueBuffer.reverse():valueBuffer),$.isFunction(opts.onBeforeWrite)&&opts.onBeforeWrite(void 0,getBuffer(),0,opts),actionObj.metadata?{value:isRTL?getBuffer().slice().reverse().join(""):getBuffer().join(""),metadata:maskScope({action:"getmetadata"},maskset,opts)}:isRTL?getBuffer().slice().reverse().join(""):getBuffer().join("");case"isValid":opts.numericInput&&(isRTL=!0),actionObj.value?(valueBuffer=actionObj.value.split(""),checkVal(void 0,!1,!0,isRTL?valueBuffer.reverse():valueBuffer)):actionObj.value=getBuffer().join("");for(var buffer=getBuffer(),rl=determineLastRequiredPosition(),lmib=buffer.length-1;lmib>rl&&!isMask(lmib);lmib--);return buffer.splice(rl,lmib+1-rl),isComplete(buffer)&&actionObj.value===getBuffer().join("");case"getemptymask":return getBufferTemplate().join("");case"remove":el=actionObj.el,$el=$(el),maskset=el.inputmask.maskset,opts=el.inputmask.opts,el.inputmask._valueSet(unmaskedvalue(el)),EventRuler.off(el),Object.getOwnPropertyDescriptor&&Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(el),"value")&&el.inputmask.__valueGet&&Object.defineProperty(el,"value",{get:el.inputmask.__valueGet,set:el.inputmask.__valueSet,configurable:!0}):document.__lookupGetter__&&el.__lookupGetter__("value")&&el.inputmask.__valueGet&&(el.__defineGetter__("value",el.inputmask.__valueGet),el.__defineSetter__("value",el.inputmask.__valueSet)),el.inputmask=void 0;break;case"getmetadata":if($.isArray(maskset.metadata)){var maskTarget=getMaskTemplate(!0,0,!1).join("");return $.each(maskset.metadata,function(ndx,mtdt){if(mtdt.mask===maskTarget)return maskTarget=mtdt,!1}),maskTarget}return maskset.metadata}}var ua=navigator.userAgent,mobile=/mobile/i.test(ua),iemobile=/iemobile/i.test(ua),iphone=/iphone/i.test(ua)&&!iemobile,android=/android/i.test(ua)&&!iemobile;Inputmask.prototype={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:$.noop,onincomplete:$.noop,oncleared:$.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyDown:$.noop,onBeforeMask:null,onBeforePaste:function(pastedValue,opts){return $.isFunction(opts.onBeforeMask)?opts.onBeforeMask(pastedValue,opts):pastedValue},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:$.noop,skipOptionalPartCharacter:" ",showTooltip:!1,tooltip:void 0,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",radixPointDefinitionSymbol:void 0,groupSeparator:"",keepStatic:null,positionCaretOnTab:!0,tabThrough:!1,supportsInputType:["text","tel","password"],definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:null,canClearPosition:$.noop,postValidation:null,staticDefinitionSymbol:void 0,jitMasking:!1,nullable:!0,inputEventOnly:!1,noValuePatching:!1,positionCaretOnClick:"lvp",casing:null,inputmode:"verbatim",colorMask:!1,androidHack:!1},masksCache:{},mask:function(elems){var that=this;return"string"==typeof elems&&(elems=document.getElementById(elems)||document.querySelectorAll(elems)),elems=elems.nodeName?[elems]:elems,$.each(elems,function(ndx,el){var scopedOpts=$.extend(!0,{},that.opts);!function(npt,opts,userOptions,dataAttribute){function importOption(option,optionData){null!==(optionData=void 0!==optionData?optionData:npt.getAttribute(dataAttribute+"-"+option))&&("string"==typeof optionData&&(0===option.indexOf("on")?optionData=window[optionData]:"false"===optionData?optionData=!1:"true"===optionData&&(optionData=!0)),userOptions[option]=optionData)}var option,dataoptions,optionData,p,attrOptions=npt.getAttribute(dataAttribute);if(attrOptions&&""!==attrOptions&&(attrOptions=attrOptions.replace(new RegExp("'","g"),'"'),dataoptions=JSON.parse("{"+attrOptions+"}")),dataoptions)for(p in optionData=void 0,dataoptions)if("alias"===p.toLowerCase()){optionData=dataoptions[p];break}for(option in importOption("alias",optionData),userOptions.alias&&that.resolveAlias(userOptions.alias,userOptions,opts),opts){if(dataoptions)for(p in optionData=void 0,dataoptions)if(p.toLowerCase()===option.toLowerCase()){optionData=dataoptions[p];break}importOption(option,optionData)}$.extend(!0,opts,userOptions)}(el,scopedOpts,$.extend(!0,{},that.userOptions),that.dataAttribute);var maskset=generateMaskSet(scopedOpts,that.noMasksCache);void 0!==maskset&&(void 0!==el.inputmask&&el.inputmask.remove(),el.inputmask=new Inputmask,el.inputmask.opts=scopedOpts,el.inputmask.noMasksCache=that.noMasksCache,el.inputmask.userOptions=$.extend(!0,{},that.userOptions),el.inputmask.el=el,el.inputmask.maskset=maskset,el.inputmask.isRTL=!1,$.data(el,"_inputmask_opts",scopedOpts),maskScope({action:"mask",el:el}))}),elems&&elems[0]&&elems[0].inputmask||this},option:function(options,noremask){return"string"==typeof options?this.opts[options]:"object"==typeof options?($.extend(this.userOptions,options),this.el&&!0!==noremask&&this.mask(this.el),this):void 0},unmaskedvalue:function(value){return maskScope({action:"unmaskedvalue",el:this.el,value:value},this.el&&this.el.inputmask?this.el.inputmask.maskset:generateMaskSet(this.opts,this.noMasksCache),this.opts)},remove:function(){if(this.el)return maskScope({action:"remove",el:this.el}),this.el.inputmask=void 0,this.el},getemptymask:function(){return maskScope({action:"getemptymask"},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return maskScope({action:"isComplete",el:this.el},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)},getmetadata:function(){return maskScope({action:"getmetadata"},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)},isValid:function(value){return maskScope({action:"isValid",value:value},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)},format:function(value,metadata){return maskScope({action:"format",value:value,metadata:metadata},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)},analyseMask:function(mask,opts){function MaskToken(isGroup,isOptional,isQuantifier,isAlternator){this.matches=[],this.isGroup=isGroup||!1,this.isOptional=isOptional||!1,this.isQuantifier=isQuantifier||!1,this.isAlternator=isAlternator||!1,this.quantifier={min:1,max:1}}function insertTestDefinition(mtoken,element,position){var maskdef=opts.definitions[element];position=void 0!==position?position:mtoken.matches.length;var prevMatch=mtoken.matches[position-1];if(maskdef&&!escaped){maskdef.placeholder=$.isFunction(maskdef.placeholder)?maskdef.placeholder(opts):maskdef.placeholder;for(var prevalidators=maskdef.prevalidator,prevalidatorsL=prevalidators?prevalidators.length:0,i=1;i<maskdef.cardinality;i++){var prevalidator=prevalidatorsL>=i?prevalidators[i-1]:[],validator=prevalidator.validator,cardinality=prevalidator.cardinality;mtoken.matches.splice(position++,0,{fn:validator?"string"==typeof validator?new RegExp(validator):new function(){this.test=validator}:new RegExp("."),cardinality:cardinality||1,optionality:mtoken.isOptional,newBlockMarker:void 0===prevMatch||prevMatch.def!==(maskdef.definitionSymbol||element),casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,nativeDef:element}),prevMatch=mtoken.matches[position-1]}mtoken.matches.splice(position++,0,{fn:maskdef.validator?"string"==typeof maskdef.validator?new RegExp(maskdef.validator):new function(){this.test=maskdef.validator}:new RegExp("."),cardinality:maskdef.cardinality,optionality:mtoken.isOptional,newBlockMarker:void 0===prevMatch||prevMatch.def!==(maskdef.definitionSymbol||element),casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,nativeDef:element})}else mtoken.matches.splice(position++,0,{fn:null,cardinality:0,optionality:mtoken.isOptional,newBlockMarker:void 0===prevMatch||prevMatch.def!==element,casing:null,def:opts.staticDefinitionSymbol||element,placeholder:void 0!==opts.staticDefinitionSymbol?element:void 0,nativeDef:element}),escaped=!1}function verifyGroupMarker(lastMatch,isOpenGroup){lastMatch&&lastMatch.isGroup&&(lastMatch.isGroup=!1,insertTestDefinition(lastMatch,opts.groupmarker.start,0),!0!==isOpenGroup&&insertTestDefinition(lastMatch,opts.groupmarker.end))}function maskCurrentToken(m,currentToken,lastMatch,extraCondition){currentToken.matches.length>0&&(void 0===extraCondition||extraCondition)&&verifyGroupMarker(currentToken.matches[currentToken.matches.length-1]),insertTestDefinition(currentToken,m)}function defaultCase(){if(openenings.length>0){if(currentOpeningToken=openenings[openenings.length-1],maskCurrentToken(m,currentOpeningToken,0,!currentOpeningToken.isAlternator),currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++)alternator.matches[mndx].isGroup=!1;openenings.length>0?(currentOpeningToken=openenings[openenings.length-1]).matches.push(alternator):currentToken.matches.push(alternator)}}else maskCurrentToken(m,currentToken)}for(var match,m,openingToken,currentOpeningToken,alternator,lastMatch,groupToken,tokenizer=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})|[^.?*+^${[]()|\\]+|./g,escaped=!1,currentToken=new MaskToken,openenings=[],maskTokens=[];match=tokenizer.exec(mask);)if(m=match[0],escaped)defaultCase();else switch(m.charAt(0)){case opts.escapeChar:escaped=!0;break;case opts.optionalmarker.end:case opts.groupmarker.end:if(void 0!==(openingToken=openenings.pop()))if(openenings.length>0){if((currentOpeningToken=openenings[openenings.length-1]).matches.push(openingToken),currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++)alternator.matches[mndx].isGroup=!1;openenings.length>0?(currentOpeningToken=openenings[openenings.length-1]).matches.push(alternator):currentToken.matches.push(alternator)}}else currentToken.matches.push(openingToken);else defaultCase();break;case opts.optionalmarker.start:verifyGroupMarker(currentToken.matches[currentToken.matches.length-1]),openenings.push(new MaskToken(!1,!0));break;case opts.groupmarker.start:verifyGroupMarker(currentToken.matches[currentToken.matches.length-1]),openenings.push(new MaskToken(!0));break;case opts.quantifiermarker.start:var quantifier=new MaskToken(!1,!1,!0),mq=(m=m.replace(/[{}]/g,"")).split(","),mq0=isNaN(mq[0])?mq[0]:parseInt(mq[0]),mq1=1===mq.length?mq0:isNaN(mq[1])?mq[1]:parseInt(mq[1]);if("*"!==mq1&&"+"!==mq1||(mq0="*"===mq1?0:1),quantifier.quantifier={min:mq0,max:mq1},openenings.length>0){var matches=openenings[openenings.length-1].matches;(match=matches.pop()).isGroup||((groupToken=new MaskToken(!0)).matches.push(match),match=groupToken),matches.push(match),matches.push(quantifier)}else(match=currentToken.matches.pop()).isGroup||((groupToken=new MaskToken(!0)).matches.push(match),match=groupToken),currentToken.matches.push(match),currentToken.matches.push(quantifier);break;case opts.alternatormarker:openenings.length>0?(currentOpeningToken=openenings[openenings.length-1],lastMatch=currentOpeningToken.matches.pop()):lastMatch=currentToken.matches.pop(),lastMatch.isAlternator?openenings.push(lastMatch):((alternator=new MaskToken(!1,!1,!1,!0)).matches.push(lastMatch),openenings.push(alternator));break;default:defaultCase()}for(;openenings.length>0;)verifyGroupMarker(openingToken=openenings.pop(),!0),currentToken.matches.push(openingToken);return currentToken.matches.length>0&&(verifyGroupMarker(lastMatch=currentToken.matches[currentToken.matches.length-1]),maskTokens.push(currentToken)),opts.numericInput&&function reverseTokens(maskToken){for(var match in maskToken.matches=maskToken.matches.reverse(),maskToken.matches){var intMatch=parseInt(match);if(maskToken.matches[match].isQuantifier&&maskToken.matches[intMatch+1]&&maskToken.matches[intMatch+1].isGroup){var qt=maskToken.matches[match];maskToken.matches.splice(match,1),maskToken.matches.splice(intMatch+1,0,qt)}void 0!==maskToken.matches[match].matches?maskToken.matches[match]=reverseTokens(maskToken.matches[match]):maskToken.matches[match]=((st=maskToken.matches[match])===opts.optionalmarker.start?st=opts.optionalmarker.end:st===opts.optionalmarker.end?st=opts.optionalmarker.start:st===opts.groupmarker.start?st=opts.groupmarker.end:st===opts.groupmarker.end&&(st=opts.groupmarker.start),st)}var st;return maskToken}(maskTokens[0]),maskTokens},resolveAlias:function(aliasStr,options,opts){var aliasDefinition=opts.aliases[aliasStr];return aliasDefinition?(aliasDefinition.alias&&this.resolveAlias(aliasDefinition.alias,void 0,opts),$.extend(!0,opts,aliasDefinition),$.extend(!0,opts,options),!0):(null===opts.mask&&(opts.mask=aliasStr),!1)}},Inputmask.extendDefaults=function(options){$.extend(!0,Inputmask.prototype.defaults,options)},Inputmask.extendDefinitions=function(definition){$.extend(!0,Inputmask.prototype.defaults.definitions,definition)},Inputmask.extendAliases=function(alias){$.extend(!0,Inputmask.prototype.defaults.aliases,alias)},Inputmask.format=function(value,options,metadata){return Inputmask(options).format(value,metadata)},Inputmask.unmask=function(value,options){return Inputmask(options).unmaskedvalue(value)},Inputmask.isValid=function(value,options){return Inputmask(options).isValid(value)},Inputmask.remove=function(elems){$.each(elems,function(ndx,el){el.inputmask&&el.inputmask.remove()})},Inputmask.escapeRegex=function(str){return str.replace(new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"].join("|\\")+")","gim"),"\\$1")},Inputmask.keyCode={ALT:18,BACKSPACE:8,BACKSPACE_SAFARI:127,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91,X:88},window.Inputmask=Inputmask}(jQuery),function($,Inputmask){void 0===$.fn.inputmask&&($.fn.inputmask=function(fn,options){var nptmask,input=this[0];if(void 0===options&&(options={}),"string"==typeof fn)switch(fn){case"unmaskedvalue":return input&&input.inputmask?input.inputmask.unmaskedvalue():$(input).val();case"remove":return this.each(function(){this.inputmask&&this.inputmask.remove()});case"getemptymask":return input&&input.inputmask?input.inputmask.getemptymask():"";case"hasMaskedValue":return!(!input||!input.inputmask)&&input.inputmask.hasMaskedValue();case"isComplete":return!input||!input.inputmask||input.inputmask.isComplete();case"getmetadata":return input&&input.inputmask?input.inputmask.getmetadata():void 0;case"setvalue":$(input).val(options),input&&void 0===input.inputmask&&$(input).triggerHandler("setvalue");break;case"option":if("string"!=typeof options)return this.each(function(){if(void 0!==this.inputmask)return this.inputmask.option(options)});if(input&&void 0!==input.inputmask)return input.inputmask.option(options);break;default:return options.alias=fn,nptmask=new Inputmask(options),this.each(function(){nptmask.mask(this)})}else{if("object"==typeof fn)return nptmask=new Inputmask(fn),void 0===fn.mask&&void 0===fn.alias?this.each(function(){return void 0!==this.inputmask?this.inputmask.option(fn):void nptmask.mask(this)}):this.each(function(){nptmask.mask(this)});if(void 0===fn)return this.each(function(){(nptmask=new Inputmask(options)).mask(this)})}}),$.fn.inputmask}(jQuery,Inputmask),jQuery,Inputmask,function($,Inputmask){Inputmask.extendAliases({"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+escapedSeparator+"[01])")},val2:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|[12][0-9])"+escapedSeparator+"(0[1-9]|1[012]))|(30"+escapedSeparator+"(0[13-9]|1[012]))|(31"+escapedSeparator+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(chrs,minyear,maxyear){if(isNaN(chrs))return!1;var enteredyear=parseInt(chrs.concat(minyear.toString().slice(chrs.length))),enteredyear2=parseInt(chrs.concat(maxyear.toString().slice(chrs.length)));return!isNaN(enteredyear)&&minyear<=enteredyear&&enteredyear<=maxyear||!isNaN(enteredyear2)&&minyear<=enteredyear2&&enteredyear2<=maxyear},determinebaseyear:function(minyear,maxyear,hint){var currentyear=(new Date).getFullYear();if(minyear>currentyear)return minyear;if(maxyear<currentyear){for(var maxYearPrefix=maxyear.toString().slice(0,2),maxYearPostfix=maxyear.toString().slice(2,4);maxyear<maxYearPrefix+hint;)maxYearPrefix--;var maxxYear=maxYearPrefix+maxYearPostfix;return minyear>maxxYear?minyear:maxxYear}if(minyear<=currentyear&&currentyear<=maxyear){for(var currentYearPrefix=currentyear.toString().slice(0,2);maxyear<currentYearPrefix+hint;)currentYearPrefix--;var currentYearAndHint=currentYearPrefix+hint;return currentYearAndHint<minyear?minyear:currentYearAndHint}return currentyear},onKeyDown:function(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey&&e.keyCode===Inputmask.keyCode.RIGHT){var today=new Date;$input.val(today.getDate().toString()+(today.getMonth()+1).toString()+today.getFullYear().toString()),$input.trigger("setvalue")}},getFrontValue:function(mask,buffer,opts){for(var start=0,length=0,i=0;i<mask.length&&"2"!==mask.charAt(i);i++){var definition=opts.definitions[mask.charAt(i)];definition?(start+=length,length=definition.cardinality):length++}return buffer.join("").substr(start,length)},postValidation:function(buffer,currentResult,opts){var dayMonthValue,year,bufferStr=buffer.join("");return 0===opts.mask.indexOf("y")?(year=bufferStr.substr(0,4),dayMonthValue=bufferStr.substr(4,11)):(year=bufferStr.substr(6,11),dayMonthValue=bufferStr.substr(0,6)),currentResult&&(dayMonthValue!==opts.leapday||function(year){return isNaN(year)||29===new Date(year,2,0).getDate()}(year))},definitions:{1:{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.regex.val1.test(chrs);return strict||isValid||chrs.charAt(1)!==opts.separator&&-1==="-./".indexOf(chrs.charAt(1))||!(isValid=opts.regex.val1.test("0"+chrs.charAt(0)))?isValid:(maskset.buffer[pos-1]="0",{refreshFromBuffer:{start:pos-1,end:pos},pos:pos,c:chrs.charAt(0)})},cardinality:2,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){var pchrs=chrs;isNaN(maskset.buffer[pos+1])||(pchrs+=maskset.buffer[pos+1]);var isValid=1===pchrs.length?opts.regex.val1pre.test(pchrs):opts.regex.val1.test(pchrs);if(!strict&&!isValid){if(isValid=opts.regex.val1.test(chrs+"0"))return maskset.buffer[pos]=chrs,maskset.buffer[++pos]="0",{pos:pos,c:"0"};if(isValid=opts.regex.val1.test("0"+chrs))return maskset.buffer[pos]="0",{pos:++pos}}return isValid},cardinality:1}]},2:{validator:function(chrs,maskset,pos,strict,opts){var frontValue=opts.getFrontValue(maskset.mask,maskset.buffer,opts);-1!==frontValue.indexOf(opts.placeholder[0])&&(frontValue="01"+opts.separator);var isValid=opts.regex.val2(opts.separator).test(frontValue+chrs);return strict||isValid||chrs.charAt(1)!==opts.separator&&-1==="-./".indexOf(chrs.charAt(1))||!(isValid=opts.regex.val2(opts.separator).test(frontValue+"0"+chrs.charAt(0)))?isValid:(maskset.buffer[pos-1]="0",{refreshFromBuffer:{start:pos-1,end:pos},pos:pos,c:chrs.charAt(0)})},cardinality:2,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){isNaN(maskset.buffer[pos+1])||(chrs+=maskset.buffer[pos+1]);var frontValue=opts.getFrontValue(maskset.mask,maskset.buffer,opts);-1!==frontValue.indexOf(opts.placeholder[0])&&(frontValue="01"+opts.separator);var isValid=1===chrs.length?opts.regex.val2pre(opts.separator).test(frontValue+chrs):opts.regex.val2(opts.separator).test(frontValue+chrs);return strict||isValid||!(isValid=opts.regex.val2(opts.separator).test(frontValue+"0"+chrs))?isValid:(maskset.buffer[pos]="0",{pos:++pos})},cardinality:1}]},y:{validator:function(chrs,maskset,pos,strict,opts){return opts.isInYearRange(chrs,opts.yearrange.minyear,opts.yearrange.maxyear)},cardinality:4,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.isInYearRange(chrs,opts.yearrange.minyear,opts.yearrange.maxyear);if(!strict&&!isValid){var yearPrefix=opts.determinebaseyear(opts.yearrange.minyear,opts.yearrange.maxyear,chrs+"0").toString().slice(0,1);if(isValid=opts.isInYearRange(yearPrefix+chrs,opts.yearrange.minyear,opts.yearrange.maxyear))return maskset.buffer[pos++]=yearPrefix.charAt(0),{pos:pos};if(yearPrefix=opts.determinebaseyear(opts.yearrange.minyear,opts.yearrange.maxyear,chrs+"0").toString().slice(0,2),isValid=opts.isInYearRange(yearPrefix+chrs,opts.yearrange.minyear,opts.yearrange.maxyear))return maskset.buffer[pos++]=yearPrefix.charAt(0),maskset.buffer[pos++]=yearPrefix.charAt(1),{pos:pos}}return isValid},cardinality:1},{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.isInYearRange(chrs,opts.yearrange.minyear,opts.yearrange.maxyear);if(!strict&&!isValid){var yearPrefix=opts.determinebaseyear(opts.yearrange.minyear,opts.yearrange.maxyear,chrs).toString().slice(0,2);if(isValid=opts.isInYearRange(chrs[0]+yearPrefix[1]+chrs[1],opts.yearrange.minyear,opts.yearrange.maxyear))return maskset.buffer[pos++]=yearPrefix.charAt(1),{pos:pos};if(yearPrefix=opts.determinebaseyear(opts.yearrange.minyear,opts.yearrange.maxyear,chrs).toString().slice(0,2),isValid=opts.isInYearRange(yearPrefix+chrs,opts.yearrange.minyear,opts.yearrange.maxyear))return maskset.buffer[pos-1]=yearPrefix.charAt(0),maskset.buffer[pos++]=yearPrefix.charAt(1),maskset.buffer[pos++]=chrs.charAt(0),{refreshFromBuffer:{start:pos-3,end:pos},pos:pos}}return isValid},cardinality:2},{validator:function(chrs,maskset,pos,strict,opts){return opts.isInYearRange(chrs,opts.yearrange.minyear,opts.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[13-9]|1[012])"+escapedSeparator+"[0-3])|(02"+escapedSeparator+"[0-2])")},val2:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|1[012])"+escapedSeparator+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+escapedSeparator+"30)|((0[13578]|1[02])"+escapedSeparator+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey&&e.keyCode===Inputmask.keyCode.RIGHT){var today=new Date;$input.val((today.getMonth()+1).toString()+today.getDate().toString()+today.getFullYear().toString()),$input.trigger("setvalue")}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyDown:function(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey&&e.keyCode===Inputmask.keyCode.RIGHT){var today=new Date;$input.val(today.getFullYear().toString()+(today.getMonth()+1).toString()+today.getDate().toString()),$input.trigger("setvalue")}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(chrs,maskset,pos,strict,opts){if("24"===opts.hourFormat&&24===parseInt(chrs,10))return maskset.buffer[pos-1]="0",maskset.buffer[pos]="0",{refreshFromBuffer:{start:pos-1,end:pos},c:"0"};var isValid=opts.regex.hrs.test(chrs);if(!strict&&!isValid&&(chrs.charAt(1)===opts.timeseparator||-1!=="-.:".indexOf(chrs.charAt(1)))&&(isValid=opts.regex.hrs.test("0"+chrs.charAt(0))))return maskset.buffer[pos-1]="0",maskset.buffer[pos]=chrs.charAt(0),{refreshFromBuffer:{start:++pos-2,end:pos},pos:pos,c:opts.timeseparator};if(isValid&&"24"!==opts.hourFormat&&opts.regex.hrs24.test(chrs)){var tmp=parseInt(chrs,10);return 24===tmp?(maskset.buffer[pos+5]="a",maskset.buffer[pos+6]="m"):(maskset.buffer[pos+5]="p",maskset.buffer[pos+6]="m"),(tmp-=12)<10?(maskset.buffer[pos]=tmp.toString(),maskset.buffer[pos-1]="0"):(maskset.buffer[pos]=tmp.toString().charAt(1),maskset.buffer[pos-1]=tmp.toString().charAt(0)),{refreshFromBuffer:{start:pos-1,end:pos+6},c:maskset.buffer[pos]}}return isValid},cardinality:2,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.regex.hrspre.test(chrs);return strict||isValid||!(isValid=opts.regex.hrs.test("0"+chrs))?isValid:(maskset.buffer[pos]="0",{pos:++pos})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.regex.mspre.test(chrs);return strict||isValid||!(isValid=opts.regex.ms.test("0"+chrs))?isValid:(maskset.buffer[pos]="0",{pos:++pos})},cardinality:1}]},t:{validator:function(chrs,maskset,pos,strict,opts){return opts.regex.ampm.test(chrs+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"mm/dd/yyyy hh:mm xm":{mask:"1/2/y h:s t\\m",placeholder:"mm/dd/yyyy hh:mm xm",alias:"datetime12",regex:{val2pre:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[13-9]|1[012])"+escapedSeparator+"[0-3])|(02"+escapedSeparator+"[0-2])")},val2:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|1[012])"+escapedSeparator+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+escapedSeparator+"30)|((0[13578]|1[02])"+escapedSeparator+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey&&e.keyCode===Inputmask.keyCode.RIGHT){var today=new Date;$input.val((today.getMonth()+1).toString()+today.getDate().toString()+today.getFullYear().toString()),$input.trigger("setvalue")}}},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"},shamsi:{regex:{val2pre:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|1[012])"+escapedSeparator+"[0-3])")},val2:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|1[012])"+escapedSeparator+"(0[1-9]|[12][0-9]))|((0[1-9]|1[012])"+escapedSeparator+"30)|((0[1-6])"+escapedSeparator+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},yearrange:{minyear:1300,maxyear:1499},mask:"y/1/2",leapday:"/12/30",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",clearIncomplete:!0}})}(jQuery,Inputmask),function($,Inputmask){Inputmask.extendDefinitions({A:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"},"&":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Fa-f]",cardinality:1,casing:"upper"}}),Inputmask.extendAliases({url:{definitions:{i:{validator:".",cardinality:1}},mask:"(\\http://)|(\\http\\s://)|(ftp://)|(ftp\\s://)i{+}",insertMode:!1,autoUnmask:!1,inputmode:"url"},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(chrs,maskset,pos,strict,opts){return pos-1>-1&&"."!==maskset.buffer[pos-1]?(chrs=maskset.buffer[pos-1]+chrs,chrs=pos-2>-1&&"."!==maskset.buffer[pos-2]?maskset.buffer[pos-2]+chrs:"0"+chrs):chrs="00"+chrs,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(chrs)},cardinality:1}},onUnMask:function(maskedValue,unmaskedValue,opts){return maskedValue},inputmode:"numeric"},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",greedy:!1,onBeforePaste:function(pastedValue,opts){return(pastedValue=pastedValue.toLowerCase()).replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"},"-":{validator:"[0-9A-Za-z-]",cardinality:1,casing:"lower"}},onUnMask:function(maskedValue,unmaskedValue,opts){return maskedValue},inputmode:"email"},mac:{mask:"##:##:##:##:##:##"},vin:{mask:"V{13}9{4}",definitions:{V:{validator:"[A-HJ-NPR-Za-hj-npr-z\\d]",cardinality:1,casing:"upper"}},clearIncomplete:!0,autoUnmask:!0}})}(jQuery,Inputmask),function($,Inputmask){Inputmask.extendAliases({numeric:{mask:function(opts){function autoEscape(txt){for(var escapedTxt="",i=0;i<txt.length;i++)escapedTxt+=opts.definitions[txt.charAt(i)]||opts.optionalmarker.start===txt.charAt(i)||opts.optionalmarker.end===txt.charAt(i)||opts.quantifiermarker.start===txt.charAt(i)||opts.quantifiermarker.end===txt.charAt(i)||opts.groupmarker.start===txt.charAt(i)||opts.groupmarker.end===txt.charAt(i)||opts.alternatormarker===txt.charAt(i)?"\\"+txt.charAt(i):txt.charAt(i);return escapedTxt}if(0!==opts.repeat&&isNaN(opts.integerDigits)&&(opts.integerDigits=opts.repeat),opts.repeat=0,opts.groupSeparator===opts.radixPoint&&("."===opts.radixPoint?opts.groupSeparator=",":","===opts.radixPoint?opts.groupSeparator=".":opts.groupSeparator="")," "===opts.groupSeparator&&(opts.skipOptionalPartCharacter=void 0),opts.autoGroup=opts.autoGroup&&""!==opts.groupSeparator,opts.autoGroup&&("string"==typeof opts.groupSize&&isFinite(opts.groupSize)&&(opts.groupSize=parseInt(opts.groupSize)),isFinite(opts.integerDigits))){var seps=Math.floor(opts.integerDigits/opts.groupSize),mod=opts.integerDigits%opts.groupSize;opts.integerDigits=parseInt(opts.integerDigits)+(0===mod?seps-1:seps),opts.integerDigits<1&&(opts.integerDigits="*")}opts.placeholder.length>1&&(opts.placeholder=opts.placeholder.charAt(0)),"radixFocus"===opts.positionCaretOnClick&&""===opts.placeholder&&!1===opts.integerOptional&&(opts.positionCaretOnClick="lvp"),opts.definitions[";"]=opts.definitions["~"],opts.definitions[";"].definitionSymbol="~",!0===opts.numericInput&&(opts.positionCaretOnClick="radixFocus"===opts.positionCaretOnClick?"lvp":opts.positionCaretOnClick,opts.digitsOptional=!1,isNaN(opts.digits)&&(opts.digits=2),opts.decimalProtect=!1);var mask="[+]";if(mask+=autoEscape(opts.prefix),mask+=!0===opts.integerOptional?"~{1,"+opts.integerDigits+"}":"~{"+opts.integerDigits+"}",void 0!==opts.digits){opts.decimalProtect&&(opts.radixPointDefinitionSymbol=":");var dq=opts.digits.toString().split(",");isFinite(dq[0]&&dq[1]&&isFinite(dq[1]))?mask+=(opts.decimalProtect?":":opts.radixPoint)+";{"+opts.digits+"}":(isNaN(opts.digits)||parseInt(opts.digits)>0)&&(mask+=opts.digitsOptional?"["+(opts.decimalProtect?":":opts.radixPoint)+";{1,"+opts.digits+"}]":(opts.decimalProtect?":":opts.radixPoint)+";{"+opts.digits+"}")}return mask+=autoEscape(opts.suffix),mask+="[-]",opts.greedy=!1,null!==opts.min&&(opts.min=opts.min.toString().replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(opts.min=opts.min.replace(opts.radixPoint,"."))),null!==opts.max&&(opts.max=opts.max.toString().replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(opts.max=opts.max.replace(opts.radixPoint,"."))),mask},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,radixPoint:".",positionCaretOnClick:"radixFocus",groupSize:3,groupSeparator:"",autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",integerOptional:!0,prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:null,max:null,step:1,insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,inputmode:"numeric",postFormat:function(buffer,pos,opts){var i,l;!0===opts.numericInput&&(buffer=buffer.reverse(),isFinite(pos)&&(pos=buffer.join("").length-pos-1));var charAtPos=buffer[pos=pos>=buffer.length?buffer.length-1:pos<0?0:pos],cbuf=buffer.slice();charAtPos===opts.groupSeparator&&(cbuf.splice(pos--,1),charAtPos=cbuf[pos]);var isNegative=cbuf.join("").match(new RegExp("^"+Inputmask.escapeRegex(opts.negationSymbol.front)));pos>((isNegative=null!==isNegative&&1===isNegative.length)?opts.negationSymbol.front.length:0)+opts.prefix.length&&pos<cbuf.length-opts.suffix.length&&(cbuf[pos]="!");var bufVal=cbuf.join(""),bufValOrigin=cbuf.join();if(isNegative&&(bufVal=(bufVal=bufVal.replace(new RegExp("^"+Inputmask.escapeRegex(opts.negationSymbol.front)),"")).replace(new RegExp(Inputmask.escapeRegex(opts.negationSymbol.back)+"$"),"")),(bufVal=(bufVal=bufVal.replace(new RegExp(Inputmask.escapeRegex(opts.suffix)+"$"),"")).replace(new RegExp("^"+Inputmask.escapeRegex(opts.prefix)),"")).length>0&&opts.autoGroup||-1!==bufVal.indexOf(opts.groupSeparator)){var escapedGroupSeparator=Inputmask.escapeRegex(opts.groupSeparator),radixSplit=(bufVal=bufVal.replace(new RegExp(escapedGroupSeparator,"g"),"")).split(charAtPos===opts.radixPoint?"!":opts.radixPoint);if(bufVal=""===opts.radixPoint?bufVal:radixSplit[0],charAtPos!==opts.negationSymbol.front&&(bufVal=bufVal.replace("!","?")),bufVal.length>opts.groupSize)for(var reg=new RegExp("([-+]?[\\d?]+)([\\d?]{"+opts.groupSize+"})");reg.test(bufVal)&&""!==opts.groupSeparator;)bufVal=(bufVal=bufVal.replace(reg,"$1"+opts.groupSeparator+"$2")).replace(opts.groupSeparator+opts.groupSeparator,opts.groupSeparator);bufVal=bufVal.replace("?","!"),""!==opts.radixPoint&&radixSplit.length>1&&(bufVal+=(charAtPos===opts.radixPoint?"!":opts.radixPoint)+radixSplit[1])}bufVal=opts.prefix+bufVal+opts.suffix,isNegative&&(bufVal=opts.negationSymbol.front+bufVal+opts.negationSymbol.back);var needsRefresh=bufValOrigin!==bufVal.split("").join(),newPos=$.inArray("!",bufVal);if(-1===newPos&&(newPos=pos),needsRefresh){for(buffer.length=bufVal.length,i=0,l=bufVal.length;i<l;i++)buffer[i]=bufVal.charAt(i);buffer[newPos]=charAtPos}return newPos=opts.numericInput&&isFinite(pos)?buffer.join("").length-newPos-1:newPos,opts.numericInput&&(buffer=buffer.reverse(),$.inArray(opts.radixPoint,buffer)<newPos&&buffer.join("").length-opts.suffix.length!==newPos&&(newPos-=1)),{pos:newPos,refreshFromBuffer:needsRefresh,buffer:buffer,isNegative:isNegative}},onBeforeWrite:function(e,buffer,caretPos,opts){var rslt;if(e&&("blur"===e.type||"checkval"===e.type||"keydown"===e.type)){var maskedValue=opts.numericInput?buffer.slice().reverse().join(""):buffer.join(""),processValue=maskedValue.replace(opts.prefix,"");processValue=(processValue=processValue.replace(opts.suffix,"")).replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(processValue=processValue.replace(opts.radixPoint,"."));var isNegative=processValue.match(new RegExp("[-"+Inputmask.escapeRegex(opts.negationSymbol.front)+"]","g"));if(isNegative=null!==isNegative&&1===isNegative.length,processValue=(processValue=processValue.replace(new RegExp("[-"+Inputmask.escapeRegex(opts.negationSymbol.front)+"]","g"),"")).replace(new RegExp(Inputmask.escapeRegex(opts.negationSymbol.back)+"$"),""),isNaN(opts.placeholder)&&(processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.placeholder),"g"),"")),""!==(processValue=processValue===opts.negationSymbol.front?processValue+"0":processValue)&&isFinite(processValue)){var floatValue=parseFloat(processValue),signedFloatValue=isNegative?-1*floatValue:floatValue;if(null!==opts.min&&isFinite(opts.min)&&signedFloatValue<parseFloat(opts.min)?(floatValue=Math.abs(opts.min),isNegative=opts.min<0,maskedValue=void 0):null!==opts.max&&isFinite(opts.max)&&signedFloatValue>parseFloat(opts.max)&&(floatValue=Math.abs(opts.max),isNegative=opts.max<0,maskedValue=void 0),processValue=floatValue.toString().replace(".",opts.radixPoint).split(""),isFinite(opts.digits)){var radixPosition=$.inArray(opts.radixPoint,processValue),rpb=$.inArray(opts.radixPoint,maskedValue);-1===radixPosition&&(processValue.push(opts.radixPoint),radixPosition=processValue.length-1);for(var i=1;i<=opts.digits;i++)opts.digitsOptional||void 0!==processValue[radixPosition+i]&&processValue[radixPosition+i]!==opts.placeholder.charAt(0)?-1!==rpb&&void 0!==maskedValue[rpb+i]&&(processValue[radixPosition+i]=processValue[radixPosition+i]||maskedValue[rpb+i]):processValue[radixPosition+i]="0";processValue[processValue.length-1]===opts.radixPoint&&delete processValue[processValue.length-1]}if(floatValue.toString()!==processValue&&floatValue.toString()+"."!==processValue||isNegative)return processValue=(opts.prefix+processValue.join("")).split(""),!isNegative||0===floatValue&&"blur"===e.type||(processValue.unshift(opts.negationSymbol.front),processValue.push(opts.negationSymbol.back)),opts.numericInput&&(processValue=processValue.reverse()),(rslt=opts.postFormat(processValue,opts.numericInput?caretPos:caretPos-1,opts)).buffer&&(rslt.refreshFromBuffer=rslt.buffer.join("")!==buffer.join("")),rslt}}if(opts.autoGroup)return(rslt=opts.postFormat(buffer,opts.numericInput?caretPos:caretPos-1,opts)).caret=caretPos<(rslt.isNegative?opts.negationSymbol.front.length:0)+opts.prefix.length||caretPos>rslt.buffer.length-(rslt.isNegative?opts.negationSymbol.back.length:0)?rslt.pos:rslt.pos+1,rslt},regex:{integerPart:function(opts){return new RegExp("["+Inputmask.escapeRegex(opts.negationSymbol.front)+"+]?\\d+")},integerNPart:function(opts){return new RegExp("[\\d"+Inputmask.escapeRegex(opts.groupSeparator)+Inputmask.escapeRegex(opts.placeholder.charAt(0))+"]+")}},signHandler:function(chrs,maskset,pos,strict,opts){if(!strict&&opts.allowMinus&&"-"===chrs||opts.allowPlus&&"+"===chrs){var matchRslt=maskset.buffer.join("").match(opts.regex.integerPart(opts));if(matchRslt&&matchRslt[0].length>0)return maskset.buffer[matchRslt.index]===("-"===chrs?"+":opts.negationSymbol.front)?"-"===chrs?""!==opts.negationSymbol.back?{pos:0,c:opts.negationSymbol.front,remove:0,caret:pos,insert:{pos:maskset.buffer.length-1,c:opts.negationSymbol.back}}:{pos:0,c:opts.negationSymbol.front,remove:0,caret:pos}:""!==opts.negationSymbol.back?{pos:0,c:"+",remove:[0,maskset.buffer.length-1],caret:pos}:{pos:0,c:"+",remove:0,caret:pos}:maskset.buffer[0]===("-"===chrs?opts.negationSymbol.front:"+")?"-"===chrs&&""!==opts.negationSymbol.back?{remove:[0,maskset.buffer.length-1],caret:pos-1}:{remove:0,caret:pos-1}:"-"===chrs?""!==opts.negationSymbol.back?{pos:0,c:opts.negationSymbol.front,caret:pos+1,insert:{pos:maskset.buffer.length,c:opts.negationSymbol.back}}:{pos:0,c:opts.negationSymbol.front,caret:pos+1}:{pos:0,c:chrs,caret:pos+1}}return!1},radixHandler:function(chrs,maskset,pos,strict,opts){if(!strict&&!0!==opts.numericInput&&chrs===opts.radixPoint&&void 0!==opts.digits&&(isNaN(opts.digits)||parseInt(opts.digits)>0)){var radixPos=$.inArray(opts.radixPoint,maskset.buffer),integerValue=maskset.buffer.join("").match(opts.regex.integerPart(opts));if(-1!==radixPos&&maskset.validPositions[radixPos])return maskset.validPositions[radixPos-1]?{caret:radixPos+1}:{pos:integerValue.index,c:integerValue[0],caret:radixPos+1};if(!integerValue||"0"===integerValue[0]&&integerValue.index+1!==pos)return maskset.buffer[integerValue?integerValue.index:pos]="0",{pos:(integerValue?integerValue.index:pos)+1,c:opts.radixPoint}}return!1},leadingZeroHandler:function(chrs,maskset,pos,strict,opts,isSelection){if(!strict)if((buffer=maskset.buffer.slice("")).splice(0,opts.prefix.length),buffer.splice(buffer.length-opts.suffix.length,opts.suffix.length),!0===opts.numericInput){var buffer;if("0"===(buffer=buffer.reverse())[0]&&void 0===maskset.validPositions[pos-1])return{pos:pos,remove:buffer.length-1}}else{pos-=opts.prefix.length;var radixPosition=$.inArray(opts.radixPoint,buffer),matchRslt=buffer.slice(0,-1!==radixPosition?radixPosition:void 0).join("").match(opts.regex.integerNPart(opts));if(matchRslt&&(-1===radixPosition||pos<=radixPosition)){var decimalPart=-1===radixPosition?0:parseInt(buffer.slice(radixPosition+1).join(""));if(0===matchRslt[0].indexOf(""!==opts.placeholder?opts.placeholder.charAt(0):"0")&&(matchRslt.index+1===pos||!0!==isSelection&&0===decimalPart))return maskset.buffer.splice(matchRslt.index+opts.prefix.length,1),{pos:matchRslt.index+opts.prefix.length,remove:matchRslt.index+opts.prefix.length};if("0"===chrs&&pos<=matchRslt.index&&matchRslt[0]!==opts.groupSeparator)return!1}}return!0},definitions:{"~":{validator:function(chrs,maskset,pos,strict,opts,isSelection){var isValid=opts.signHandler(chrs,maskset,pos,strict,opts);if(!isValid&&(!(isValid=opts.radixHandler(chrs,maskset,pos,strict,opts))&&(!0===(isValid=strict?new RegExp("[0-9"+Inputmask.escapeRegex(opts.groupSeparator)+"]").test(chrs):new RegExp("[0-9]").test(chrs))&&!0===(isValid=opts.leadingZeroHandler(chrs,maskset,pos,strict,opts,isSelection))))){var radixPosition=$.inArray(opts.radixPoint,maskset.buffer);isValid=-1!==radixPosition&&(!1===opts.digitsOptional||maskset.validPositions[pos])&&!0!==opts.numericInput&&pos>radixPosition&&!strict?{pos:pos,remove:pos}:{pos:pos}}return isValid},cardinality:1},"+":{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.signHandler(chrs,maskset,pos,strict,opts);return!isValid&&(strict&&opts.allowMinus&&chrs===opts.negationSymbol.front||opts.allowMinus&&"-"===chrs||opts.allowPlus&&"+"===chrs)&&(isValid=!(!strict&&"-"===chrs)||(""!==opts.negationSymbol.back?{pos:pos,c:"-"===chrs?opts.negationSymbol.front:"+",caret:pos+1,insert:{pos:maskset.buffer.length,c:opts.negationSymbol.back}}:{pos:pos,c:"-"===chrs?opts.negationSymbol.front:"+",caret:pos+1})),isValid},cardinality:1,placeholder:""},"-":{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.signHandler(chrs,maskset,pos,strict,opts);return!isValid&&strict&&opts.allowMinus&&chrs===opts.negationSymbol.back&&(isValid=!0),isValid},cardinality:1,placeholder:""},":":{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.signHandler(chrs,maskset,pos,strict,opts);if(!isValid){var radix="["+Inputmask.escapeRegex(opts.radixPoint)+"]";(isValid=new RegExp(radix).test(chrs))&&maskset.validPositions[pos]&&maskset.validPositions[pos].match.placeholder===opts.radixPoint&&(isValid={caret:pos+1})}return isValid},cardinality:1,placeholder:function(opts){return opts.radixPoint}}},onUnMask:function(maskedValue,unmaskedValue,opts){if(""===unmaskedValue&&!0===opts.nullable)return unmaskedValue;var processValue=maskedValue.replace(opts.prefix,"");return processValue=(processValue=processValue.replace(opts.suffix,"")).replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),opts.unmaskAsNumber?(""!==opts.radixPoint&&-1!==processValue.indexOf(opts.radixPoint)&&(processValue=processValue.replace(Inputmask.escapeRegex.call(this,opts.radixPoint),".")),Number(processValue)):processValue},isComplete:function(buffer,opts){var maskedValue=buffer.join(""),bufClone=buffer.slice();if(opts.postFormat(bufClone,0,opts),bufClone.join("")!==maskedValue)return!1;var processValue=maskedValue.replace(opts.prefix,"");return processValue=(processValue=processValue.replace(opts.suffix,"")).replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(processValue=processValue.replace(Inputmask.escapeRegex(opts.radixPoint),".")),isFinite(processValue)},onBeforeMask:function(initialValue,opts){if(!0===opts.numericInput&&(initialValue=initialValue.split("").reverse().join("")),""!==opts.radixPoint&&isFinite(initialValue)){var vs=initialValue.split("."),groupSize=""!==opts.groupSeparator?parseInt(opts.groupSize):0;2===vs.length&&(vs[0].length>groupSize||vs[1].length>groupSize)&&(initialValue=initialValue.toString().replace(".",opts.radixPoint))}var kommaMatches=initialValue.match(/,/g),dotMatches=initialValue.match(/\./g);if(dotMatches&&kommaMatches?dotMatches.length>kommaMatches.length?initialValue=(initialValue=initialValue.replace(/\./g,"")).replace(",",opts.radixPoint):kommaMatches.length>dotMatches.length?initialValue=(initialValue=initialValue.replace(/,/g,"")).replace(".",opts.radixPoint):initialValue=initialValue.indexOf(".")<initialValue.indexOf(",")?initialValue.replace(/\./g,""):initialValue=initialValue.replace(/,/g,""):initialValue=initialValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),0===opts.digits&&(-1!==initialValue.indexOf(".")?initialValue=initialValue.substring(0,initialValue.indexOf(".")):-1!==initialValue.indexOf(",")&&(initialValue=initialValue.substring(0,initialValue.indexOf(",")))),""!==opts.radixPoint&&isFinite(opts.digits)&&-1!==initialValue.indexOf(opts.radixPoint)){var decPart=initialValue.split(opts.radixPoint)[1].match(new RegExp("\\d*"))[0];if(parseInt(opts.digits)<decPart.toString().length){var digitsFactor=Math.pow(10,parseInt(opts.digits));initialValue=initialValue.replace(Inputmask.escapeRegex(opts.radixPoint),"."),initialValue=(initialValue=Math.round(parseFloat(initialValue)*digitsFactor)/digitsFactor).toString().replace(".",opts.radixPoint)}}return!0===opts.numericInput&&(initialValue=initialValue.split("").reverse().join("")),initialValue.toString()},canClearPosition:function(maskset,position,lvp,strict,opts){var positionInput=maskset.validPositions[position].input;return positionInput!==opts.radixPoint||null!==maskset.validPositions[position].match.fn&&!1===opts.decimalProtect||isFinite(positionInput)||position===lvp||positionInput===opts.groupSeparator||positionInput===opts.negationSymbol.front||positionInput===opts.negationSymbol.back},onKeyDown:function(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey)switch(e.keyCode){case Inputmask.keyCode.UP:$input.val(parseFloat(this.inputmask.unmaskedvalue())+parseInt(opts.step)),$input.trigger("setvalue");break;case Inputmask.keyCode.DOWN:$input.val(parseFloat(this.inputmask.unmaskedvalue())-parseInt(opts.step)),$input.trigger("setvalue")}}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:0,radixPoint:""},percentage:{alias:"numeric",digits:2,radixPoint:".",placeholder:"0",autoGroup:!1,min:0,max:100,suffix:" %",allowPlus:!1,allowMinus:!1}})}(jQuery,Inputmask),function($,Inputmask){function maskSort(a,b){var maska=(a.mask||a).replace(/#/g,"9").replace(/\)/,"9").replace(/[+()#-]/g,""),maskb=(b.mask||b).replace(/#/g,"9").replace(/\)/,"9").replace(/[+()#-]/g,""),maskas=(a.mask||a).split("#")[0],maskbs=(b.mask||b).split("#")[0];return 0===maskbs.indexOf(maskas)?-1:0===maskas.indexOf(maskbs)?1:maska.localeCompare(maskb)}var analyseMaskBase=Inputmask.prototype.analyseMask;Inputmask.prototype.analyseMask=function(mask,opts){var maskGroups={};return opts.phoneCodes&&opts.phoneCodes.length>1e3&&(function reduceVariations(masks,previousVariation,previousmaskGroup){previousVariation=previousVariation||"",previousmaskGroup=previousmaskGroup||maskGroups,""!==previousVariation&&(previousmaskGroup[previousVariation]={});for(var variation="",maskGroup=previousmaskGroup[previousVariation]||previousmaskGroup,i=masks.length-1;i>=0;i--)maskGroup[variation=(mask=masks[i].mask||masks[i]).substr(0,1)]=maskGroup[variation]||[],maskGroup[variation].unshift(mask.substr(1)),masks.splice(i,1);for(var ndx in maskGroup)maskGroup[ndx].length>500&&reduceVariations(maskGroup[ndx].slice(),ndx,maskGroup)}((mask=mask.substr(1,mask.length-2)).split(opts.groupmarker.end+opts.alternatormarker+opts.groupmarker.start)),mask=function rebuild(maskGroup){var submasks=[];for(var ndx in maskGroup)$.isArray(maskGroup[ndx])?1===maskGroup[ndx].length?submasks.push(ndx+maskGroup[ndx]):submasks.push(ndx+opts.groupmarker.start+maskGroup[ndx].join(opts.groupmarker.end+opts.alternatormarker+opts.groupmarker.start)+opts.groupmarker.end):submasks.push(ndx+rebuild(maskGroup[ndx]));return""+(1===submasks.length?submasks[0]:opts.groupmarker.start+submasks.join(opts.groupmarker.end+opts.alternatormarker+opts.groupmarker.start)+opts.groupmarker.end)}(maskGroups)),analyseMaskBase.call(this,mask,opts)},Inputmask.extendAliases({abstractphone:{groupmarker:{start:"<",end:">"},countrycode:"",phoneCodes:[],mask:function(opts){return opts.definitions={"#":opts.definitions[9]},opts.phoneCodes.sort(maskSort)},keepStatic:!0,onBeforeMask:function(value,opts){var processedValue=value.replace(/^0{1,2}/,"").replace(/[\s]/g,"");return(processedValue.indexOf(opts.countrycode)>1||-1===processedValue.indexOf(opts.countrycode))&&(processedValue="+"+opts.countrycode+processedValue),processedValue},onUnMask:function(maskedValue,unmaskedValue,opts){return unmaskedValue},inputmode:"tel"}})}(jQuery,Inputmask),function($,Inputmask){Inputmask.extendAliases({Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(buffer,opts){return new RegExp(opts.regex).test(buffer.join(""))},definitions:{r:{validator:function(chrs,maskset,pos,strict,opts){function RegexToken(isGroup,isQuantifier){this.matches=[],this.isGroup=isGroup||!1,this.isQuantifier=isQuantifier||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function validateRegexToken(token,fromGroup){var isvalid=!1;fromGroup&&(regexPart+="(",openGroupCount++);for(var mndx=0;mndx<token.matches.length;mndx++){var matchToken=token.matches[mndx];if(!0===matchToken.isGroup)isvalid=validateRegexToken(matchToken,!0);else if(!0===matchToken.isQuantifier){var crrntndx=$.inArray(matchToken,token.matches),matchGroup=token.matches[crrntndx-1],regexPartBak=regexPart;if(isNaN(matchToken.quantifier.max)){for(;matchToken.repeaterPart&&matchToken.repeaterPart!==regexPart&&matchToken.repeaterPart.length>regexPart.length&&!(isvalid=validateRegexToken(matchGroup,!0)););(isvalid=isvalid||validateRegexToken(matchGroup,!0))&&(matchToken.repeaterPart=regexPart),regexPart=regexPartBak+matchToken.quantifier.max}else{for(var i=0,qm=matchToken.quantifier.max-1;i<qm&&!(isvalid=validateRegexToken(matchGroup,!0));i++);regexPart=regexPartBak+"{"+matchToken.quantifier.min+","+matchToken.quantifier.max+"}"}}else if(void 0!==matchToken.matches)for(var k=0;k<matchToken.length&&!(isvalid=validateRegexToken(matchToken[k],fromGroup));k++);else{var testExp;if("["==matchToken.charAt(0)){testExp=regexPart,testExp+=matchToken;for(var j=0;j<openGroupCount;j++)testExp+=")";isvalid=new RegExp("^("+testExp+")$").test(bufferStr)}else for(var l=0,tl=matchToken.length;l<tl;l++)if("\\"!==matchToken.charAt(l)){testExp=regexPart,testExp=(testExp+=matchToken.substr(0,l+1)).replace(/\|$/,"");for(j=0;j<openGroupCount;j++)testExp+=")";if(isvalid=new RegExp("^("+testExp+")$").test(bufferStr))break}regexPart+=matchToken}if(isvalid)break}return fromGroup&&(regexPart+=")",openGroupCount--),isvalid}var bufferStr,groupToken,cbuffer=maskset.buffer.slice(),regexPart="",isValid=!1,openGroupCount=0;null===opts.regexTokens&&function(){var match,m,currentToken=new RegexToken,opengroups=[];for(opts.regexTokens=[];match=opts.tokenizer.exec(opts.regex);)switch(m=match[0],m.charAt(0)){case"(":opengroups.push(new RegexToken(!0));break;case")":groupToken=opengroups.pop(),opengroups.length>0?opengroups[opengroups.length-1].matches.push(groupToken):currentToken.matches.push(groupToken);break;case"{":case"+":case"*":var quantifierToken=new RegexToken(!1,!0),mq=(m=m.replace(/[{}]/g,"")).split(","),mq0=isNaN(mq[0])?mq[0]:parseInt(mq[0]),mq1=1===mq.length?mq0:isNaN(mq[1])?mq[1]:parseInt(mq[1]);if(quantifierToken.quantifier={min:mq0,max:mq1},opengroups.length>0){var matches=opengroups[opengroups.length-1].matches;(match=matches.pop()).isGroup||((groupToken=new RegexToken(!0)).matches.push(match),match=groupToken),matches.push(match),matches.push(quantifierToken)}else(match=currentToken.matches.pop()).isGroup||((groupToken=new RegexToken(!0)).matches.push(match),match=groupToken),currentToken.matches.push(match),currentToken.matches.push(quantifierToken);break;default:opengroups.length>0?opengroups[opengroups.length-1].matches.push(m):currentToken.matches.push(m)}currentToken.matches.length>0&&opts.regexTokens.push(currentToken)}(),cbuffer.splice(pos,0,chrs),bufferStr=cbuffer.join("");for(var i=0;i<opts.regexTokens.length;i++){var regexToken=opts.regexTokens[i];if(isValid=validateRegexToken(regexToken,regexToken.isGroup))break}return isValid},cardinality:1}}}})}(jQuery,Inputmask);var userDob=$("#dob").val(),SpcManager=function(){function SpcManager(){}return SpcManager.prototype.init=function(){var manager=window.spcManager||new SpcManager;this.spcModel=window.spcViewModel,null!=this.spcModel&&null!=this.spcModel.emailServerApiUrl&&window.dataLayer.push({nonprimeWidget:"yes"}),$(".option.btn").click(function(){$(this).toggleClass("selected");var id=Number.parseInt($(this).data("id")),localName=$(this).find(".bodyTypeName").html();console.debug(id+" local Name:"+localName),manager.toggleBodytype(id,manager.spcModel.bodyTypes,localName)}),$(".closeModal").click(function(){$("#spcModal").modal("hide")}),$("#spcModal").on("show.bs.modal",function(){$("#spcFormConfirmation").hasClass("currentPanel")?($("#spcLeadFormContainer").hide(),$("#spcFormConfirmation").show(),$("#spcSendFailure").hide()):$("#spcSendFailure").hasClass("currentPanel")?($("#spcLeadFormContainer").hide(),$("#spcFormConfirmation").hide(),$("#spcSendFailure").show()):($("#spcLeadFormContainer").show(),$("#spcFormConfirmation").hide(),$("#spcSendFailure").hide())}),$("#spcModal").on("hide.bs.modal",function(){});var currentDate=new Date;$(".input-group.date").datepicker({format:"dd-mm-yyyy",language:"fr-ca"===$("body").attr("id")?"fr":"en",defaultViewDate:{year:currentDate.getFullYear()-18,month:currentDate.getMonth(),day:currentDate.getDate()},endDate:"-6574d",constrainInput:!1,assumeNearbyYear:!0,autoclose:!0}).on("show",function(e){$(".datepicker").addClass("datepicker-orient-left datepicker-orient-top")}).on("changeDate",function(e){userDob=$("#dob").val(),manager.isOver18(userDob)}).on("hide",function(e){manager.isOver18(userDob)}),$("#dob").inputmask({alias:"date",showMaskOnHover:!1,showMaskOnFocus:!0}).on("input",function(){userDob=this.value,manager.isOver18(userDob)}).on("blur",function(e){manager.isOver18(userDob),$("#dob").val(userDob)}),$("#income").inputmask({alias:"numeric",groupSeparator:"fr-ca"===$("body").attr("id")?" ":",",autoGroup:!0,digits:0,digitsOptional:!1,prefix:"en-ca"===$("body").attr("id")?"$":"",suffix:"fr-ca"===$("body").attr("id")?" $":"",showMaskOnHover:!1,showMaskOnFocus:!0,rightAlign:!1}),$("#phone").inputmask({alias:"phone",mask:"(999) 999-9999",showMaskOnHover:!1,showMaskOnFocus:!0}),$("#email").inputmask({alias:"email",showMaskOnHover:!1,showMaskOnFocus:!0}),$(window).resize(function(){"lg"!==BootstrapExtensions.getBootstrapBreakpoint()&&$("#spcModal").hasClass("in")&&($("#spcModal").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove())}),$("input").blur(function(e){manager.validateFormFields(e,!1)}),$("#btnApplyNow").click(function(e){e.preventDefault(),manager.validateFormFields(e,!1)&&manager.sendSpcLead(e,!1,manager.spcModel)})},SpcManager.prototype.isOver18=function(birthdate){if(null!==birthdate.match(".*[a-z].*")||""===birthdate||null===birthdate)return $("#lbl-dob").addClass("invalid-data required"),$("#lbl-dob .help-msg.required").show(),$("#lbl-dob .help-msg.invalidFormat").hide(),!1;var birthYear=(birthdate=birthdate.replace(/\//g,"-").toString()).split("-")[2],birthMonth=birthdate.split("-")[1],birthDay=birthdate.split("-")[0];return new Date(parseInt(birthYear)+18,birthMonth-1,birthDay)<=new Date?($("#lbl-dob").removeClass("invalid-data required invalidDob"),$("#lbl-dob .help-msg.required").hide(),$("#lbl-dob .help-msg.invalidFormat").hide(),!0):($("#lbl-dob").addClass("invalid-data invalidDob"),$("#lbl-dob .help-msg.required").hide(),$("#lbl-dob .help-msg.invalidFormat").show(),!1)},SpcManager.prototype.validateFormFields=function(event,pageLoad){pageLoad||$(".creditForm").removeClass("firstLoad"),event.preventDefault(),event.stopPropagation();var intIncome=$("#income").val().replace(/\s+/g,"").replace("$","").replace(",",""),formValid=!0;return"btnApplyNow"===event.target.id?($.each($("#spcLeadForm .creditForm input"),function(index,formField){if(formField.validity.typeMismatch)$("#lbl-"+formField.id).addClass("invalid-data typeMismatch"),$("#lbl-"+formField.id+" .help-msg.required").hide(),$("#lbl-"+formField.id+" .help-msg.invalidFormat").show(),formValid=!1;else if(formField.validity.valueMissing)$("#lbl-"+formField.id).addClass("invalid-data required"),$("#lbl-"+formField.id+" .help-msg.required").show(),$("#lbl-"+formField.id+" .help-msg.invalidFormat").hide(),formValid=!1;else if(intIncome<=0||""===intIncome)$("#lbl-"+event.target.id).addClass("invalid-data incomeInvalid"),$("#lbl-"+event.target.id+" .help-msg.required").show(),$("#lbl-"+event.target.id+" .help-msg.invalidFormat").hide(),formValid=!1;else if("dob"===formField.id){var manager=window.spcManager||new SpcManager;formValid=manager.isOver18(userDob)}else $("#lbl-"+formField.id).removeClass("invalid-data"),$("#lbl-"+formField.id+" .help-msg.required").hide(),$("#lbl-"+formField.id+" .help-msg.invalidFormat").hide()}),formValid):($("#"+event.target.id).val().trim().length>0?$("#lbl-"+event.target.id).addClass("with-value"):$("#lbl-"+event.target.id).removeClass("with-value"),void 0!==event.target.validity.typeMismatch&&event.target.validity.typeMismatch?($("#lbl-"+event.target.id).addClass("invalid-data typeMismatch"),$("#lbl-"+event.target.id+" .help-msg.required").hide(),$("#lbl-"+event.target.id+" .help-msg.invalidFormat").show(),formValid=!1):void 0!==event.target.validity.valueMissing&&event.target.validity.valueMissing?($("#lbl-"+event.target.id).addClass("invalid-data required"),$("#lbl-"+event.target.id+" .help-msg.required").show(),$("#lbl-"+event.target.id+" .help-msg.invalidFormat").hide(),formValid=!1):"income"===event.target.id&&(intIncome<=0||""===intIncome)?($("#lbl-"+event.target.id).addClass("invalid-data incomeInvalid"),$("#lbl-"+event.target.id+" .help-msg.required").show(),$("#lbl-"+event.target.id+" .help-msg.invalidFormat").hide(),formValid=!1):"dob"===event.target.id?formValid=this.isOver18(userDob):($("#lbl-"+event.target.id).removeClass("invalid-data"),$("#lbl-"+event.target.id+" .help-msg.required").hide(),$("#lbl-"+event.target.id+" .help-msg.invalidFormat").hide(),formValid=!0),formValid)},SpcManager.prototype.toggleBodytype=function(id,bodyTypes,localName){console.debug("toggleBodytype "+id),bodyTypes.forEach(function(type){type.id==id&&(type.selected=!type.selected,type.localName=localName)})},SpcManager.prototype.sendSpcLead=function(event,pageLoad,model){var _this=this;event.preventDefault(),event.stopPropagation();var selectedBodyTypes=model.bodyTypes.filter(function(b){return b.selected}).map(function(b){return b.localName.toLocaleLowerCase()}).join(","),data=new SpcLeadFormData;data.selectedBodyTypes=selectedBodyTypes,data.firstName=$("#firstName").val().toString(),data.lastName=$("#lastName").val().toString(),data.income=$("#income").val().toString(),data.phoneNumber=$("#phone").val().toString(),data.dateOfBirth=$("#dob").val().toString(),data.email=$("#email").val().toString().toLowerCase(),data.fsa=model.fsa,$.ajax({url:model.emailServerApiUrl,type:"POST",data:JSON.stringify(data),dataType:"json",contentType:"application/json",headers:{AllowMvt:"true",isAjax:"true"},error:function(e){return _this.showSpcEmailFailed(e),!1},success:function(result){var resp=result;return resp.Success?(_this.showSpcFormConfirmation(event,result,pageLoad,selectedBodyTypes),!1):(_this.showSpcEmailFailed(resp.ErrorMessage),!1)}})},SpcManager.prototype.showSpcEmailFailed=function(error){console.log(error),$("#spcLeadFormContainer").hide(),$("#spcFormConfirmation").hide(),$("#spcSendFailure").show().addClass("currentPanel")},SpcManager.prototype.showSpcFormConfirmation=function(event,result,pageLoad,selectedBodyTypes){event.preventDefault();var company=result.Company,htmElem='<div class="row"><div class="col-lg-12"><div><img src="{Logo}" class="lenderLogo" alt="" /></div></div></div><div class="row"><div class="col-lg-12"><div>{StreetAddress}</div><div>{City}, {Province}, {PostalCode}</div><div> {PhoneNumber} </div><div> {Url} </div></div></div>';return htmElem=htmElem.replace("{Logo}",company.Logo).replace("{StreetAddress}",company.StreetAddress).replace("{City}",company.City).replace("{Province}",company.Province).replace("{PostalCode}",company.PostalCode).replace("{PhoneNumber}",company.PhoneNumber).replace("{Url}",void 0==company.Url?"":company.Url),$("#spcConfirmCompanyList").append(htmElem),pageLoad||($("#spcLeadFormContainer").hide(),$("#spcFormConfirmation").show().addClass("currentPanel"),$("#spcSendFailure").hide()),(window.gtmManager||new GtmManager).spcWidgeSubmit(selectedBodyTypes),!1},SpcManager}(),SpcLeadFormData=function(){return function(){}}(),DealerPlusEmailData=function(){return function(){}}(),dealerMapBtn=document.getElementById("dealer-info-map");dealerMapBtn&&dealerMapBtn.addEventListener("click",function(e){return DataLayerFactory.srpDataLayer().addDealerPlusViewMap()});var dealerWebsiteBtn=document.getElementById("dealer-info-url-link");dealerWebsiteBtn&&dealerWebsiteBtn.addEventListener("click",function(e){return DataLayerFactory.srpDataLayer().addDealerPlusVisitWebsite()});var dealerPlusHeaderBackBtn=document.getElementById("dealerPlusHeaderBackBtn");dealerPlusHeaderBackBtn&&dealerPlusHeaderBackBtn.addEventListener("click",function(e){e.stopPropagation(),DataLayerFactory.srpDataLayer().addDealerPlusBackToVdp()});var dealerPlusHeaderBackBtnXs=document.getElementById("dealerPlusHeaderBackBtnXS");dealerPlusHeaderBackBtnXs&&dealerPlusHeaderBackBtnXs.addEventListener("click",function(e){e.stopPropagation(),DataLayerFactory.srpDataLayer().addDealerPlusBackToVdp()});var dealerCallBtn=document.getElementById("dealer-info-phone");dealerCallBtn&&dealerCallBtn.addEventListener("click",function(e){return DataLayerFactory.srpDataLayer().addDealerPlusCall()});var dealerToggleBulletPointsBtn=document.getElementById("dealerPlus-info-viewMore");dealerToggleBulletPointsBtn&&dealerToggleBulletPointsBtn.addEventListener("click",function(e){var expanding=dealerToggleBulletPointsBtn.classList.contains("collapsed");DataLayerFactory.srpDataLayer().addDealerPlusToggle(expanding)});var setCustomMask=function(){document.getElementById("dplus-phone").addEventListener("input",function(e){var phoneMaskPortion=event.target.value.replace(/\D/g,"").match(/(\d{3})(\d{3})(\d{4})/);null!==phoneMaskPortion&&(event.target.value="("+phoneMaskPortion[1]+") "+phoneMaskPortion[2]+"-"+phoneMaskPortion[3])})};$("#dealerPlusForm").submit(function(e){e.preventDefault()});var dealerPlusSendEmailBtn=document.getElementById("dplus-send-email");dealerPlusSendEmailBtn&&dealerPlusSendEmailBtn.addEventListener("click",function(e){var name=document.getElementById("dplus-name"),email=document.getElementById("dplus-email"),subject=document.getElementById("dplus-subject"),message=document.getElementById("dplus-message");if(name.value&&email.value&&subject.value&&message.value){var phone=document.getElementById("dplus-phone"),sendCopy=document.getElementById("dplus-send-copy"),companyEmail=document.getElementById("dplus-send-email"),data=new DealerPlusEmailData;data.FromName=name.value,data.FromEmail=email.value,data.FromPhone=phone.value,data.CompanyId=companyEmail.dataset.coid,data.Subject=subject.value,data.Message=message.value,data.SendCopy=sendCopy.checked,data.IsMobile=window.innerWidth<=768,$("#dplus-contact-container-wrapper").hide(),$("#dplusContentLoading").show();var request=$.ajax({type:"POST",url:"/SendEmail/DealerPlusLead",data:JSON.stringify(data),dataType:"text",contentType:"application/json"});request.done(function(){DataLayerFactory.srpDataLayer().addDealerPlusEmail(data.Subject),$("#dplusContentResult").show()}),request.fail(function(jqXHR,textStatus,errorThrown){console.log(errorThrown),$("#dplusErrorMessageLeadForm").show()}),request.always(function(){$("#dplusContentLoading").hide()})}}),$("#dealerPlusForm input:empty, textarea:empty").addClass("empty"),$("#dealerPlusForm input").keyup(function(){$(this).toggleClass("empty",""!==$(this).val().trim())});var dplusPhone=document.getElementById("dplus-phone");dplusPhone&&dplusPhone.addEventListener("keypress",function(e){8!==e.which&&0!==e.which&&(e.which<48||e.which>57)&&(event.preventDefault(),$(e.target).blur())}),$(".dealerPlus-Confirm-btn").click(function(){$("#dplus-contact-container-wrapper").show(),document.getElementById("dplus-message").value="",document.getElementById("dplus-subject").selectedIndex=0,$("#dplusContentResult").hide(),$("#dplusContentLoading").hide(),$("#dplusErrorMessageLeadForm").hide();for(var elements=document.getElementsByTagName("input"),i=0;i<elements.length;i++)elements[i].classList.contains("dplus-input")&&(elements[i].value="")});var googleMapUrl="https://www.google.com/maps/embed/v1/place?zoom=15&key=AIzaSyAzz_LzpQS9ARxBRhjRVilA68NtbdpGV1U";function LoadGoogleMapsEmbededApi(mapHolder){var googleMapAddress=document.getElementById("dealer-info-map").getAttribute("data-google-map");console.log("map is ",googleMapAddress);var address=googleMapAddress;document.querySelectorAll("[src='"+googleMapUrl+"&q="+address+"']").length?null!=mapHolder&&mapHolder.getElementsByTagName("iframe").length<=0&&doGoogleMapInit(mapHolder,address):doGoogleMapInit(mapHolder,address)}function doGoogleMapInit(gmapCanvas,address){if(null!=gmapCanvas){var googleEmbediFrame=document.createElement("iframe");googleEmbediFrame.classList.add("viewMap-map"),gmapCanvas.appendChild(Object.assign(googleEmbediFrame,{src:googleMapUrl+"&q="+address}))}}function closeModal(e){var getElmId=e.id,elmModal=$("#"+getElmId).attr("data-for");$("#"+elmModal).modal("toggle")}Trader.setLinkBackSearchHeader=function(){var headerBackLink=document.getElementsByClassName("srpHeaderBackBtn");if(headerBackLink){var url,i,searchObj=JSON.parse(localStorage.getItem("SearchResultsDataNewPlatform"));if(searchObj&&(url=localStorage.getItem("lastdealerinventoryurl"))){var page=searchObj.currentPage;url=(url=url.replace(/(rcp=)[^\&]+/,"$115")).replace(/(rcs=)[^\&]+/,"$1"+(15*page-15)),"function"==typeof appendAdid&&(url=appendAdid(url))}if(url)for(i=0;i<headerBackLink.length;i++)headerBackLink[i].setAttribute("href",url)}},$(document).on("click","#dealer-info-map",function(){LoadGoogleMapsEmbededApi(document.getElementById("viewMap-map-wrapper"))});